!function(){"use strict";window.JCCatalogMenu||(window.JCCatalogMenu=function(t){this.catalogMenu=BX(t.container),this.catalogMenuSetActive=t.setActive,this.catalogMenuOpenLast=t.openLast,this.catalogMenuMoved=!1,this.menuIcon=document.body.querySelector('[data-entity="menu-icon"]'),BX.ready(BX.delegate(this.init,this))},window.JCCatalogMenu.prototype={init:function(){var t=this.catalogMenu.querySelectorAll('[data-entity="dropdown-menu"]');if(t)for(var e in t){if(t.hasOwnProperty(e))if(t[e].querySelector(".active")){var a=BX.findParent(t[e],{tagName:"LI"});a&&BX.addClass(a,"active")}}this.adjustCatalogMenu(),BX.bind(window,"resize",BX.proxy(this.adjustCatalogMenu,this)),this.checkCatalogMenuTop(),BX.bind(window,"resize",BX.proxy(this.checkCatalogMenuTop,this)),BX.bind(window,"scroll",BX.proxy(this.checkCatalogMenuTop,this)),this.menuIcon&&this.hoverIntentIcon(this.menuIcon);var n=this.catalogMenu.querySelectorAll('[data-entity="dropdown"]');if(n)for(var e in n)n.hasOwnProperty(e)&&(BX.bind(n[e],"mouseenter",BX.delegate(function(){var t=BX.proxy_context;if(BX.addClass(t,"hover"),window.innerWidth>=992){var e=BX.findParent(t,{attrs:{"data-entity":"dropdown-menu"}});if(e&&BX.hasClass(e,"catalog-menu")){var a=t.querySelector('[data-entity="dropdown-menu"]');a&&BX.style(a,"left","100%")}}},this)),BX.bind(n[e],"mouseleave",BX.delegate(function(){var t=BX.proxy_context;if(BX.removeClass(t,"hover"),window.innerWidth>=992){var e=BX.findParent(t,{attrs:{"data-entity":"dropdown-menu"}});if(e&&BX.hasClass(e,"catalog-menu")){var a=t.querySelector('[data-entity="dropdown-menu"]');a&&BX.style(a,"left","")}}},this)))},adjustCatalogMenu:function(){if(window.innerWidth>=992)this.menuIcon&&(this.catalogMenuMoved&&(this.menuIcon.appendChild(this.catalogMenu),this.catalogMenuMoved=!1,this.resetCatalogMenu()),BX.unbind(this.menuIcon,"click",BX.proxy(this.showHideCatalogMenu,this))),BX.unbind(document,"click",BX.proxy(this.checkDropDownMenu,this)),BX.unbind(document,"keydown",BX.proxy(this.checkDropDownMenuKeydown,this));else{if(!this.catalogMenuMoved){var t=document.body.querySelector(".page-wrapper");t&&(t.appendChild(this.catalogMenu),this.catalogMenuMoved=!0,this.adjustMainMenu(),$(this.catalogMenu).scrollbar({disableBodyScroll:!0}),BX.hasClass(this.catalogMenu.parentNode,"scroll-wrapper")&&(this.catalogMenu=this.catalogMenu.parentNode),this.catalogMenuSetActive&&this.setCatalogMenuActive())}this.menuIcon&&BX.bind(this.menuIcon,"click",BX.proxy(this.showHideCatalogMenu,this)),BX.bind(document,"click",BX.proxy(this.checkDropDownMenu,this)),BX.bind(document,"keydown",BX.proxy(this.checkDropDownMenuKeydown,this))}},hoverIntentIcon:function(t){$(t).hoverIntent({over:BX.delegate(function(){window.innerWidth>=992&&(BX.addClass(t,"hover"),BX.addClass(this.catalogMenu,"active"),document.body.appendChild(BX.create("DIV",{props:{className:"modal-backdrop catalog-menu__backdrop fadeInBig"}})))},this),out:BX.delegate(function(){if(window.innerWidth>=992){BX.removeClass(t,"hover"),BX.removeClass(this.catalogMenu,"active");var e=document.body.querySelector(".catalog-menu__backdrop");e&&new BX.easing({duration:300,start:{opacity:100},finish:{opacity:0},transition:BX.easing.transitions.linear,step:function(t){e.style.opacity=t.opacity/100},complete:function(){BX.remove(e)}}).animate()}},this),timeout:150})},resetCatalogMenu:function(){if(BX.hasClass(this.catalogMenu,"scroll-wrapper")){var t=this.catalogMenu.querySelector(".scroll-content");t&&(BX.hasClass(this.catalogMenu,"active")&&BX.addClass(t,"active"),$(t).scrollbar("destroy"),this.catalogMenu=t)}BX.hasClass(this.catalogMenu,"active")&&(BX.removeClass(this.catalogMenu,"active"),BX.removeClass(document.body,"slide-menu-option-1-active"));var e=this.catalogMenu.querySelectorAll('[data-entity="dropdown-menu"]');if(e)for(var a in e)e.hasOwnProperty(a)&&(BX.style(e[a],"top",""),BX.style(e[a],"bottom",""),BX.hasClass(e[a],"active")&&BX.removeClass(e[a],"active"),BX.hasClass(e[a],"scroll-content")&&$(e[a]).scrollbar("destroy"));var n=this.catalogMenu.querySelector('[data-role="mainMenu"]');n&&BX.remove(n)},checkCatalogMenuTop:function(){var t=document.body.querySelector(".top-panel__thead");window.innerWidth<992?t&&BX.style(this.catalogMenu,"top",t.getBoundingClientRect().top+t.offsetHeight+"px"):BX.style(this.catalogMenu,"top","")},adjustMainMenu:function(){var t=document.body.querySelector(".horizontal-multilevel-menu"),e=!!t&&BX.clone(t);if(e){var a=BX.findChild(e,{tagName:"LI"},!0,!0);if(a)for(var n in a)if(a.hasOwnProperty(n)){var o=BX.findChild(a[n],{tagName:"A"},!1,!1);if(o){BX.adjust(o,{html:'<span class="catalog-menu-text">'+o.innerText+"</span>"}),"dropdown"==a[n].getAttribute("data-entity")&&o.appendChild(BX.create("SPAN",{props:{className:"catalog-menu-arrow"},children:[BX.create("I",{props:{className:"icon-arrow-right"}})]}));var s=BX.create("LI",{attrs:{"data-entity":"title"},children:[BX.create("I",{props:{className:"icon-arrow-left catalog-menu-back"}}),BX.create("SPAN",{props:{className:"catalog-menu-title"},html:o.innerText}),BX.create("I",{props:{className:"icon-close catalog-menu-close"}})]})}var i=a[n].querySelector('[data-entity="dropdown-menu"]');if(i){s&&BX.prepend(s,i),BX.adjust(i,{props:{className:""},attrs:{"data-entity":""}});var r=BX.create("DIV",{props:{className:"catalog-menu-dropdown-menu scrollbar-inner"},attrs:{"data-entity":"dropdown-menu"}});r.appendChild(i),BX.append(r,a[n])}}BX.prepend(BX.create("LI",{attrs:{"data-entity":"title"},children:[BX.create("I",{props:{className:"icon-arrow-left catalog-menu-back"}}),BX.create("SPAN",{props:{className:"catalog-menu-title"},html:BX.message("MAIN_MENU")}),BX.create("I",{props:{className:"icon-close catalog-menu-close"}})]}),e),BX.adjust(e,{props:{className:""},attrs:{id:"","data-entity":""}});var l=BX.create("DIV",{props:{className:"catalog-menu-dropdown-menu scrollbar-inner"},attrs:{"data-entity":"dropdown-menu"}});l.appendChild(e);var c=BX.create("LI",{attrs:{"data-entity":"dropdown","data-role":"mainMenu"},children:[BX.create("A",{attrs:{href:"javascript:void(0);"},children:[BX.create("SPAN",{props:{className:"catalog-menu-text"},html:BX.message("MAIN_MENU")}),BX.create("SPAN",{props:{className:"catalog-menu-arrow"},children:[BX.create("I",{props:{className:"icon-arrow-right"}})]})]})]});c.appendChild(l);var d=c.querySelectorAll('[data-entity="dropdown-menu"]');if(d)for(var n in d){if(d.hasOwnProperty(n))if(d[n].querySelector(".active")){var u=BX.findParent(d[n],{tagName:"LI"});u&&BX.addClass(u,"active")}}BX.prepend(c,this.catalogMenu)}},setCatalogMenuActive:function(){var t=BX.findChild(this.catalogMenu,{tagName:"li",className:"active"},!0,!0);if(t)for(var e in t)if(t.hasOwnProperty(e)){var a=t[e].querySelector('[data-entity="dropdown-menu"]');a&&!BX.hasClass(a,"active")&&BX.addClass(a,"active")}var n=BX.findChild(this.catalogMenu,{className:"active",attrs:{"data-entity":"dropdown-menu"}},!0,!0);if(n){var o=n[n.length-1];if(o){if(BX.hasClass(this.catalogMenu,"scroll-wrapper")){var s=this.catalogMenu.querySelector(".scroll-content");if(s){var i=Math.abs(parseInt(BX.style(s.parentNode,"top"),10));i&&i>0&&BX.style(s,"top",i+"px"),s.scrollTop=0,$(s).scrollbar("destroy"),this.catalogMenu=s}}BX.hasClass(o,"scroll-content")||$(o).scrollbar({disableBodyScroll:!0,onInit:function(){BX.hasClass(o,"active")&&BX.removeClass(o,"active")}})}}},showHideCatalogMenu:function(t){BX.hasClass(this.catalogMenu,"active")?(BX.removeClass(this.catalogMenu,"active"),BX.removeClass(document.body,"slide-menu-option-1-active")):(BX.addClass(this.catalogMenu,"active"),BX.addClass(document.body,"slide-menu-option-1-active")),t.stopPropagation()},checkDropDownMenu:function(t){if(BX.hasClass(this.catalogMenu,"active")){var e="LI"==t.target.tagName?t.target:BX.findParent(t.target,{tagName:"LI"});if(e)if("dropdown"==e.getAttribute("data-entity")){var a=e.hasAttribute("data-role")&&"mainMenu"==e.getAttribute("data-role"),n=BX.hasClass(t.target,"catalog-menu-arrow")||!!BX.findParent(t.target,{className:"catalog-menu-arrow"});if(a||this.catalogMenuOpenLast||!this.catalogMenuOpenLast&&n){BX.PreventDefault(t);var o=e.querySelector('[data-entity="dropdown-menu"]');if(o){if((l=BX.findParent(o,{attrs:{"data-entity":"dropdown-menu"}}))&&BX.hasClass(l,"scroll-content")){var s=l.scrollTop,i=Math.abs(parseInt(BX.style(l.parentNode,"top"),10)),r=Math.abs(parseInt(BX.style(l.parentNode,"bottom"),10));i&&i>0&&BX.style(l,"top",i+"px"),r&&r>0&&BX.style(l,"bottom",-1*r+"px"),BX.hasClass(l.parentNode,"active")&&BX.addClass(l,"active"),$(l).scrollbar("destroy"),BX.hasClass(l,"catalog-menu")&&(this.catalogMenu=l)}$(o).scrollbar({disableBodyScroll:!0,onInit:function(){o=o.parentNode,s&&s>0&&(BX.style(o,"top",s+"px"),BX.style(o,"bottom",-1*s+"px"))}}),new BX.easing({duration:300,start:{left:100},finish:{left:0},transition:BX.easing.transitions.linear,step:function(t){BX.style(o,"left",t.left+"%")},complete:function(){BX.addClass(o,"active"),BX.style(o,"left","")}}).animate()}}}else if("title"==e.getAttribute("data-entity")){var l;if(l=BX.findParent(e,{attrs:{"data-entity":"dropdown-menu"}})){var c=BX.findParent(l,{attrs:{"data-entity":"dropdown-menu"}});c&&$(c).scrollbar({disableBodyScroll:!0,onInit:BX.delegate(function(){var t=Math.abs(parseInt(BX.style(c,"top"),10));t&&t>0&&(BX.style(c.parentNode,"top",t+"px"),BX.style(c,"top",""));var e=Math.abs(parseInt(BX.style(c,"bottom"),10));e&&e>0&&(BX.style(c.parentNode,"bottom",-1*e+"px"),BX.style(c,"bottom","")),BX.hasClass(c,"active")&&BX.removeClass(c,"active"),BX.hasClass(c.parentNode,"catalog-menu")&&(this.catalogMenu=c.parentNode)},this)}),BX.hasClass(l,"scroll-content")&&(BX.hasClass(l.parentNode,"active")&&BX.addClass(l,"active"),$(l).scrollbar("destroy")),new BX.easing({duration:300,start:{left:0},finish:{left:100},transition:BX.easing.transitions.linear,step:function(t){BX.style(l,"left",t.left+"%")},complete:function(){BX.removeClass(l,"active"),BX.style(l,"left","")}}).animate()}}t.stopPropagation()}},checkDropDownMenuKeydown:function(t){BX.hasClass(this.catalogMenu,"active")&&27==t.keyCode&&(BX.removeClass(this.catalogMenu,"active"),BX.removeClass(document.body,"slide-menu-option-1-active"),t.stopPropagation())}})}();
!function(){"use strict";window.JCCatalogComponent||(window.JCCatalogComponent=function(){BX.ready(BX.delegate(this.init,this))},window.JCCatalogComponent.prototype={init:function(){if(this.checkSectionPanel(),this.toogle=BX("catalog-section-toggle"),this.toogle&&(BX.bind(this.toogle,"bxchange",BX.proxy(this.changeSectionToogle,this)),this.toogleAdjusted=!1,this.adjustSectionToogle(),BX.bind(window,"resize",BX.proxy(this.adjustSectionToogle,this))),this.sectionSortContainer=document.body.querySelector('[data-role="catalogSectionSort"]'),this.sectionSortPopup=this.sectionSortContainer&&this.sectionSortContainer.querySelector('[data-role="dropdownContent"]'),this.sectionSortContainer&&this.sectionSortPopup&&(BX.bind(this.sectionSortContainer,"click",BX.proxy(this.showSectionSortDropDownPopup,this)),BX.bind(document,"click",BX.proxy(this.hideSectionSortDropDownPopup,this))),this.sectionLinksContainer=document.body.querySelector(".catalog-section-links"),this.sectionLinksContainer&&(this.sectionLinksContainerPosBottom=BX.pos(this.sectionLinksContainer).bottom,this.sectionLinks=this.sectionLinksContainer.querySelectorAll(".catalog-section-link"),this.sectionLinks)){for(var t in this.sectionLinksWidth=0,this.sectionLinks)this.sectionLinks.hasOwnProperty(t)&&BX.type.isDomNode(this.sectionLinks[t])&&(this.sectionLinksWidth+=this.sectionLinks[t].offsetWidth+Math.abs(parseInt(BX.style(this.sectionLinks[t],"marginLeft"),10)));this.sectionLinkBtnSpan=BX.create("SPAN"),this.sectionLinkBtnI=BX.create("I",{props:{className:"icon-arrow-down"}}),this.sectionLinkBtn=BX.create("DIV",{props:{className:"catalog-section-link-btn-container"},children:[BX.create("DIV",{props:{className:"catalog-section-link catalog-section-link-btn"},children:[this.sectionLinkBtnSpan,this.sectionLinkBtnI],events:{click:BX.proxy(this.showHideSectionLinks,this)}})]}),this.sectionLinkBtnAdjusted=!1,this.adjustSectionLinkBtn(),BX.bind(window,"resize",BX.proxy(this.adjustSectionLinkBtn,this)),BX.addCustomEvent(window,"slideMenu",BX.proxy(this.adjustSectionLinkBtn,this))}},checkSectionPanel:function(){this.sectionPanelWrapper=document.body.querySelector(".catalog-section-panel-wrapper"),this.sectionPanel=!!this.sectionPanelWrapper&&this.sectionPanelWrapper.querySelector(".catalog-section-panel"),this.sectionPanel&&(this.sectionPanelFixed=!1,this.sectionPanelScrolled=!1,this.lastScrollTop=0,BX.bind(window,"scroll",BX.proxy(this.checkSectionPanelScroll,this)),BX.bind(window,"resize",BX.proxy(this.checkSectionPanelResize,this)))},checkSectionPanelScroll:function(){var t=document.body.querySelector(".top-panel"),e=0,i=!!t&&t.querySelector(".top-panel__thead"),n=!!t&&t.querySelector(".top-panel__tfoot"),s=BX.pos(this.sectionPanelWrapper).top,o=this.sectionPanel.offsetHeight,a=BX.GetWindowScrollPos().scrollTop;window.innerWidth<992?(i&&BX.hasClass(i,"fixed")&&(e=i.offsetHeight,n&&BX.hasClass(n,"visible")&&(e+=n.offsetHeight)),a+e>=s?this.sectionPanelFixed?!this.sectionPanelScrolled&&e>0&&a<BX.lastScrollTop?(this.sectionPanelScrolled=!0,new BX.easing({duration:300,start:{top:Math.abs(parseInt(BX.style(this.sectionPanel,"top"),10))},finish:{top:e},transition:BX.easing.transitions.linear,step:BX.delegate(function(t){this.sectionPanelScrolled&&BX.style(this.sectionPanel,"top",t.top+"px")},this)}).animate()):this.sectionPanelScrolled&&e>0&&a>BX.lastScrollTop&&(this.sectionPanelScrolled=!1,new BX.easing({duration:300,start:{top:Math.abs(parseInt(BX.style(this.sectionPanel,"top"),10))},finish:{top:e},transition:BX.easing.transitions.linear,step:BX.delegate(function(t){BX.style(this.sectionPanel,"top",t.top+"px")},this)}).animate()):(this.sectionPanelFixed=!0,BX.style(this.sectionPanelWrapper,"height",o+"px"),BX.style(this.sectionPanel,"top",e+"px"),BX.addClass(this.sectionPanel,"fixed")):this.sectionPanelFixed&&a+e<s&&(this.sectionPanelFixed=!1,this.sectionPanelScrolled=!1,this.sectionPanelWrapper.removeAttribute("style"),this.sectionPanel.removeAttribute("style"),BX.removeClass(this.sectionPanel,"fixed"))):(t&&BX.hasClass(t,"fixed")&&(e=t.offsetHeight),!this.sectionPanelFixed&&a+e>=s?(this.sectionPanelFixed=!0,BX.style(this.sectionPanelWrapper,"height",o+"px"),BX.style(this.sectionPanel,"top",e+"px"),BX.addClass(this.sectionPanel,"fixed")):this.sectionPanelFixed&&a+e<s&&(this.sectionPanelFixed=!1,this.sectionPanelWrapper.removeAttribute("style"),this.sectionPanel.removeAttribute("style"),BX.removeClass(this.sectionPanel,"fixed"))),BX.lastScrollTop=a},checkSectionPanelResize:function(){if(BX.hasClass(this.sectionPanel,"fixed")){var t=document.body.querySelector(".top-panel"),e=0,i=!!t&&t.querySelector(".top-panel__thead"),n=!!t&&t.querySelector(".top-panel__tfoot");window.innerWidth<992?i&&BX.hasClass(i,"fixed")&&(e=i.offsetHeight,n&&BX.hasClass(n,"visible")&&(e+=n.offsetHeight)):(t&&BX.hasClass(t,"fixed")&&(e=t.offsetHeight),this.sectionPanelScrolled=!1),BX.style(this.sectionPanel,"top",e+"px")}},changeSectionToogle:function(){var t=new URL(window.location.href);t.searchParams.set("view",this.toogle.checked?"collections":"items"),window.location.href=t.toString()},adjustSectionToogle:function(){var t=this.toogle.parentNode,e=document.body.querySelector(".catalog-section-toggle-wrapper"),i=document.body.querySelector(".catalog-section-filter-toggle");window.innerWidth<992?this.toogleAdjusted||(e||(e=BX.create("DIV",{props:{className:"catalog-section-toggle-wrapper"}})),e&&this.sectionPanelWrapper&&(e.appendChild(t),BX.removeClass(t,"hidden-xs hidden-sm"),this.sectionPanelWrapper.parentNode.insertBefore(e,this.sectionPanelWrapper),this.toogleAdjusted=!0)):this.toogleAdjusted&&i&&e&&(BX.append(t,i),BX.addClass(t,"hidden-xs hidden-sm"),BX.remove(e),this.toogleAdjusted=!1)},showSectionSortDropDownPopup:function(){BX.isNodeHidden(this.sectionSortPopup)?(BX.style(this.sectionSortPopup,"display",""),BX.addClass(this.sectionSortContainer,"active")):(BX.style(this.sectionSortPopup,"display","none"),BX.removeClass(this.sectionSortContainer,"active"))},hideSectionSortDropDownPopup:function(t){var e=BX.getEventTarget(t);BX.findParent(e,{attr:{"data-role":"catalogSectionSort"}},!1)||"catalogSectionSort"==e.getAttribute("data-role")||(BX.style(this.sectionSortPopup,"display","none"),BX.removeClass(this.sectionSortContainer,"active"))},adjustSectionLinkBtn:function(){window.innerWidth<992?BX.pos(this.sectionLinks[Object.keys(this.sectionLinks).length-1]).bottom>this.sectionLinksContainerPosBottom?this.sectionLinkBtnAdjusted?this.sectionLinkBtnAdjusted&&!BX.hasClass(this.sectionLinksContainer,"active")&&(this.sectionLinkBtnSpan.innerHTML=BX.message("SECTION_LINKS_ALL")):(this.sectionLinkBtnAdjusted=!0,BX.hasClass(this.sectionLinksContainer,"active")||(this.sectionLinkBtnSpan.innerHTML=BX.message("SECTION_LINKS_ALL")),this.sectionLinksContainer.appendChild(this.sectionLinkBtn)):BX.pos(this.sectionLinks[Object.keys(this.sectionLinks).length-1]).bottom<=this.sectionLinksContainerPosBottom&&this.sectionLinkBtnAdjusted&&(this.sectionLinkBtnAdjusted=!1,this.sectionLinksContainer.removeChild(this.sectionLinkBtn)):this.sectionLinksWidth>this.sectionLinksContainer.offsetWidth?this.sectionLinkBtnAdjusted?this.sectionLinkBtnAdjusted&&!BX.hasClass(this.sectionLinksContainer,"active")&&(this.sectionLinkBtnSpan.innerHTML=BX.message("SECTION_LINKS_SHOW_ALL")):(this.sectionLinkBtnAdjusted=!0,BX.hasClass(this.sectionLinksContainer,"active")||(this.sectionLinkBtnSpan.innerHTML=BX.message("SECTION_LINKS_SHOW_ALL")),this.sectionLinksContainer.appendChild(this.sectionLinkBtn)):this.sectionLinksWidth<=this.sectionLinksContainer.offsetWidth&&this.sectionLinkBtnAdjusted&&(this.sectionLinkBtnAdjusted=!1,this.sectionLinksContainer.removeChild(this.sectionLinkBtn))},showHideSectionLinks:function(){BX.hasClass(this.sectionLinksContainer,"active")?(BX.removeClass(this.sectionLinksContainer,"active"),this.sectionLinkBtnSpan.innerHTML=window.innerWidth<992?BX.message("SECTION_LINKS_ALL"):BX.message("SECTION_LINKS_SHOW_ALL"),this.sectionLinkBtnI.className="icon-arrow-down"):(BX.addClass(this.sectionLinksContainer,"active"),this.sectionLinkBtnSpan.innerHTML=BX.message("SECTION_LINKS_HIDE"),this.sectionLinkBtnI.className="icon-arrow-up")}})}();
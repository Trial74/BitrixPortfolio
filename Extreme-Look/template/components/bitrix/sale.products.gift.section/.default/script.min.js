!function(){"use strict";window.JCSaleProductsGiftSectionComponent||(window.JCSaleProductsGiftSectionComponent=function(t){this.formPosting=!1,this.siteId=t.siteId||"",this.template=t.template||"",this.componentPath=t.componentPath||"",this.parameters=t.parameters||"",this.container=document.querySelector('[data-entity="'+t.container+'"]'),t.initiallyShowHeader&&BX.ready(BX.delegate(this.showHeader,this)),t.deferredLoad&&BX.ready(BX.delegate(this.deferredLoad,this))},window.JCSaleProductsGiftSectionComponent.prototype={deferredLoad:function(){this.sendRequest({action:"deferredLoad"})},sendRequest:function(t){var e={siteId:this.siteId,template:this.template,parameters:this.parameters};BX.ajax({url:this.componentPath+"/ajax.php"+(-1!==document.location.href.indexOf("clear_cache=Y")?"?clear_cache=Y":""),method:"POST",dataType:"json",timeout:60,data:BX.merge(e,t),onsuccess:BX.delegate(function(e){e&&e.JS&&BX.ajax.processScripts(BX.processHTML(e.JS).SCRIPT,!1,BX.delegate(function(){this.showAction(e,t)},this))},this)})},showAction:function(t,e){if(e)switch(e.action){case"deferredLoad":this.processDeferredLoadAction(t,"Y"===e.bigData)}},processDeferredLoadAction:function(t,e){if(t){var a=e?this.bigData.rows:{};this.processItems(t.items,t.imgLazyLoad,t.imgWebp,BX.util.array_keys(a))}},processItems:function(t,e,a,i){if(t){var r,o,s=BX.processHTML(t,!1),n=BX.create("DIV"),c={};if(n.innerHTML=s.HTML,(r=n.querySelectorAll('[data-entity="item-col"]')).length){for(var d in this.showHeader(!0),r)if(r.hasOwnProperty(d)){if(o=!!i&&this.container.querySelectorAll('[data-entity="item-col"]'),a){var p=r[d].querySelectorAll("img");if(p)for(var h in p)if(p.hasOwnProperty(h)){var u=p[h].getAttribute("data-lazyload-src"),l=p[h].getAttribute("src");u&&"http"!==u.substr(0,4)&&"data:image/"!==u.substr(0,11)&&-1==u.indexOf(".webp")?c[u]=u:l&&"http"!==l.substr(0,4)&&"data:image/"!==l.substr(0,11)&&-1==l.indexOf(".webp")&&(c[l]=l)}}r[d].style.opacity=0,o&&BX.type.isDomNode(o[i[d]])?o[i[d]].parentNode.insertBefore(r[d],o[i[d]]):this.container.appendChild(r[d])}a&&Object.keys(c).length>0&&convertImgToWebp(c),e&&imgLazyLoad(),new BX.easing({duration:2e3,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(t){for(var e in r)r.hasOwnProperty(e)&&(r[e].style.opacity=t.opacity/100)},complete:function(){for(var t in r)r.hasOwnProperty(t)&&r[t].removeAttribute("style")}}).animate()}BX.ajax.processScripts(s.SCRIPT)}},showHeader:function(t){var e=BX.findParent(this.container,{attr:{"data-entity":"parent-container"}});if(e){e.removeAttribute("style");var a=e.querySelector('[data-entity="header"]');a&&"true"!=a.getAttribute("data-showed")&&(t?(a.style.display="",new BX.easing({duration:2e3,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(t){a.style.opacity=t.opacity/100},complete:function(){a.removeAttribute("style"),a.setAttribute("data-showed","true")}}).animate()):(a.removeAttribute("style"),a.setAttribute("data-showed","true")))}}})}();
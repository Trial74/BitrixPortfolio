/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 14);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _ssrWindow = __webpack_require__(2);

var _bezier2 = __webpack_require__(19);

var _bezier3 = _interopRequireDefault(_bezier2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } } /* eslint no-control-regex: "off" */


// Remove Diacritics
var defaultDiacriticsRemovalap = [{ base: 'A', letters: 'A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F' }, { base: 'AA', letters: '\uA732' }, { base: 'AE', letters: '\xC6\u01FC\u01E2' }, { base: 'AO', letters: '\uA734' }, { base: 'AU', letters: '\uA736' }, { base: 'AV', letters: '\uA738\uA73A' }, { base: 'AY', letters: '\uA73C' }, { base: 'B', letters: 'B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181' }, { base: 'C', letters: 'C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E' }, { base: 'D', letters: 'D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779' }, { base: 'DZ', letters: '\u01F1\u01C4' }, { base: 'Dz', letters: '\u01F2\u01C5' }, { base: 'E', letters: 'E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E' }, { base: 'F', letters: 'F\u24BB\uFF26\u1E1E\u0191\uA77B' }, { base: 'G', letters: 'G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E' }, { base: 'H', letters: 'H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D' }, { base: 'I', letters: 'I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197' }, { base: 'J', letters: 'J\u24BF\uFF2A\u0134\u0248' }, { base: 'K', letters: 'K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2' }, { base: 'L', letters: 'L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780' }, { base: 'LJ', letters: '\u01C7' }, { base: 'Lj', letters: '\u01C8' }, { base: 'M', letters: 'M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C' }, { base: 'N', letters: 'N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4' }, { base: 'NJ', letters: '\u01CA' }, { base: 'Nj', letters: '\u01CB' }, { base: 'O', letters: 'O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C' }, { base: 'OI', letters: '\u01A2' }, { base: 'OO', letters: '\uA74E' }, { base: 'OU', letters: '\u0222' }, { base: 'OE', letters: '\x8C\u0152' }, { base: 'oe', letters: '\x9C\u0153' }, { base: 'P', letters: 'P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754' }, { base: 'Q', letters: 'Q\u24C6\uFF31\uA756\uA758\u024A' }, { base: 'R', letters: 'R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782' }, { base: 'S', letters: 'S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784' }, { base: 'T', letters: 'T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786' }, { base: 'TZ', letters: '\uA728' }, { base: 'U', letters: 'U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244' }, { base: 'V', letters: 'V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245' }, { base: 'VY', letters: '\uA760' }, { base: 'W', letters: 'W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72' }, { base: 'X', letters: 'X\u24CD\uFF38\u1E8A\u1E8C' }, { base: 'Y', letters: 'Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE' }, { base: 'Z', letters: 'Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762' }, { base: 'a', letters: 'a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250' }, { base: 'aa', letters: '\uA733' }, { base: 'ae', letters: '\xE6\u01FD\u01E3' }, { base: 'ao', letters: '\uA735' }, { base: 'au', letters: '\uA737' }, { base: 'av', letters: '\uA739\uA73B' }, { base: 'ay', letters: '\uA73D' }, { base: 'b', letters: 'b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253' }, { base: 'c', letters: 'c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184' }, { base: 'd', letters: 'd\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A' }, { base: 'dz', letters: '\u01F3\u01C6' }, { base: 'e', letters: 'e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD' }, { base: 'f', letters: 'f\u24D5\uFF46\u1E1F\u0192\uA77C' }, { base: 'g', letters: 'g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F' }, { base: 'h', letters: 'h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265' }, { base: 'hv', letters: '\u0195' }, { base: 'i', letters: 'i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131' }, { base: 'j', letters: 'j\u24D9\uFF4A\u0135\u01F0\u0249' }, { base: 'k', letters: 'k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3' }, { base: 'l', letters: 'l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747' }, { base: 'lj', letters: '\u01C9' }, { base: 'm', letters: 'm\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F' }, { base: 'n', letters: 'n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5' }, { base: 'nj', letters: '\u01CC' }, { base: 'o', letters: 'o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275' }, { base: 'oi', letters: '\u01A3' }, { base: 'ou', letters: '\u0223' }, { base: 'oo', letters: '\uA74F' }, { base: 'p', letters: 'p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755' }, { base: 'q', letters: 'q\u24E0\uFF51\u024B\uA757\uA759' }, { base: 'r', letters: 'r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783' }, { base: 's', letters: 's\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B' }, { base: 't', letters: 't\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787' }, { base: 'tz', letters: '\uA729' }, { base: 'u', letters: 'u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289' }, { base: 'v', letters: 'v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C' }, { base: 'vy', letters: '\uA761' }, { base: 'w', letters: 'w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73' }, { base: 'x', letters: 'x\u24E7\uFF58\u1E8B\u1E8D' }, { base: 'y', letters: 'y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF' }, { base: 'z', letters: 'z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763' }];

var diacriticsMap = {};
for (var i = 0; i < defaultDiacriticsRemovalap.length; i += 1) {
  var letters = defaultDiacriticsRemovalap[i].letters;
  for (var j = 0; j < letters.length; j += 1) {
    diacriticsMap[letters[j]] = defaultDiacriticsRemovalap[i].base;
  }
}

var createPromise = function createPromise(handler) {
  var resolved = false;
  var rejected = false;
  var resolveArgs = void 0;
  var rejectArgs = void 0;
  var promiseHandlers = {
    then: undefined,
    catch: undefined
  };
  var promise = {
    then: function then(thenHandler) {
      if (resolved) {
        thenHandler.apply(undefined, _toConsumableArray(resolveArgs));
      } else {
        promiseHandlers.then = thenHandler;
      }
      return promise;
    },
    catch: function _catch(catchHandler) {
      if (rejected) {
        catchHandler.apply(undefined, _toConsumableArray(rejectArgs));
      } else {
        promiseHandlers.catch = catchHandler;
      }
      return promise;
    }
  };

  function resolve() {
    resolved = true;

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    if (promiseHandlers.then) promiseHandlers.then.apply(promiseHandlers, args);else resolveArgs = args;
  }
  function reject() {
    rejected = true;

    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    if (promiseHandlers.catch) promiseHandlers.catch.apply(promiseHandlers, args);else rejectArgs = args;
  }
  handler(resolve, reject);

  return promise;
};

var Utils = {
  mdPreloaderContent: '\n    <span class="preloader-inner">\n      <span class="preloader-inner-gap"></span>\n      <span class="preloader-inner-left">\n          <span class="preloader-inner-half-circle"></span>\n      </span>\n      <span class="preloader-inner-right">\n          <span class="preloader-inner-half-circle"></span>\n      </span>\n    </span>\n  '.trim(),
  eventNameToColonCase: function eventNameToColonCase(eventName) {
    var hasColon = void 0;
    return eventName.split('').map(function (char, index) {
      if (char.match(/[A-Z]/) && index !== 0 && !hasColon) {
        hasColon = true;
        return ':' + char.toLowerCase();
      }
      return char.toLowerCase();
    }).join('');
  },
  deleteProps: function deleteProps(obj) {
    var object = obj;
    Object.keys(object).forEach(function (key) {
      try {
        object[key] = null;
      } catch (e) {
        // no getter for object
      }
      try {
        delete object[key];
      } catch (e) {
        // something got wrong
      }
    });
  },
  bezier: function bezier() {
    return _bezier3.default.apply(undefined, arguments);
  },
  nextTick: function nextTick(callback) {
    var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

    return setTimeout(callback, delay);
  },
  nextFrame: function nextFrame(callback) {
    return Utils.requestAnimationFrame(callback);
  },
  now: function now() {
    return Date.now();
  },
  promise: function promise(handler) {
    return _ssrWindow.window.Promise ? new Promise(handler) : createPromise(handler);
  },
  requestAnimationFrame: function requestAnimationFrame(callback) {
    if (_ssrWindow.window.requestAnimationFrame) return _ssrWindow.window.requestAnimationFrame(callback);else if (_ssrWindow.window.webkitRequestAnimationFrame) return _ssrWindow.window.webkitRequestAnimationFrame(callback);
    return _ssrWindow.window.setTimeout(callback, 1000 / 60);
  },
  cancelAnimationFrame: function cancelAnimationFrame(id) {
    if (_ssrWindow.window.cancelAnimationFrame) return _ssrWindow.window.cancelAnimationFrame(id);else if (_ssrWindow.window.webkitCancelAnimationFrame) return _ssrWindow.window.webkitCancelAnimationFrame(id);
    return _ssrWindow.window.clearTimeout(id);
  },
  removeDiacritics: function removeDiacritics(str) {
    return str.replace(/[^\u0000-\u007E]/g, function (a) {
      return diacriticsMap[a] || a;
    });
  },
  parseUrlQuery: function parseUrlQuery(url) {
    var query = {};
    var urlToParse = url || _ssrWindow.window.location.href;
    var i = void 0;
    var params = void 0;
    var param = void 0;
    var length = void 0;
    if (typeof urlToParse === 'string' && urlToParse.length) {
      urlToParse = urlToParse.indexOf('?') > -1 ? urlToParse.replace(/\S*\?/, '') : '';
      params = urlToParse.split('&').filter(function (paramsPart) {
        return paramsPart !== '';
      });
      length = params.length;

      for (i = 0; i < length; i += 1) {
        param = params[i].replace(/#\S+/g, '').split('=');
        query[decodeURIComponent(param[0])] = typeof param[1] === 'undefined' ? undefined : decodeURIComponent(param[1]) || '';
      }
    }
    return query;
  },
  getTranslate: function getTranslate(el) {
    var axis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x';

    var matrix = void 0;
    var curTransform = void 0;
    var transformMatrix = void 0;

    var curStyle = _ssrWindow.window.getComputedStyle(el, null);

    if (_ssrWindow.window.WebKitCSSMatrix) {
      curTransform = curStyle.transform || curStyle.webkitTransform;
      if (curTransform.split(',').length > 6) {
        curTransform = curTransform.split(', ').map(function (a) {
          return a.replace(',', '.');
        }).join(', ');
      }
      // Some old versions of Webkit choke when 'none' is passed; pass
      // empty string instead in this case
      transformMatrix = new _ssrWindow.window.WebKitCSSMatrix(curTransform === 'none' ? '' : curTransform);
    } else {
      transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');
      matrix = transformMatrix.toString().split(',');
    }

    if (axis === 'x') {
      // Latest Chrome and webkits Fix
      if (_ssrWindow.window.WebKitCSSMatrix) curTransform = transformMatrix.m41;
      // Crazy IE10 Matrix
      else if (matrix.length === 16) curTransform = parseFloat(matrix[12]);
        // Normal Browsers
        else curTransform = parseFloat(matrix[4]);
    }
    if (axis === 'y') {
      // Latest Chrome and webkits Fix
      if (_ssrWindow.window.WebKitCSSMatrix) curTransform = transformMatrix.m42;
      // Crazy IE10 Matrix
      else if (matrix.length === 16) curTransform = parseFloat(matrix[13]);
        // Normal Browsers
        else curTransform = parseFloat(matrix[5]);
    }
    return curTransform || 0;
  },
  serializeObject: function serializeObject(obj) {
    var parents = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

    if (typeof obj === 'string') return obj;
    var resultArray = [];
    var separator = '&';
    var newParents = void 0;
    function varName(name) {
      if (parents.length > 0) {
        var parentParts = '';
        for (var _j = 0; _j < parents.length; _j += 1) {
          if (_j === 0) parentParts += parents[_j];else parentParts += '[' + encodeURIComponent(parents[_j]) + ']';
        }
        return parentParts + '[' + encodeURIComponent(name) + ']';
      }
      return encodeURIComponent(name);
    }
    function varValue(value) {
      return encodeURIComponent(value);
    }
    Object.keys(obj).forEach(function (prop) {
      var toPush = void 0;
      if (Array.isArray(obj[prop])) {
        toPush = [];
        for (var _i = 0; _i < obj[prop].length; _i += 1) {
          if (!Array.isArray(obj[prop][_i]) && _typeof(obj[prop][_i]) === 'object') {
            newParents = parents.slice();
            newParents.push(prop);
            newParents.push(String(_i));
            toPush.push(Utils.serializeObject(obj[prop][_i], newParents));
          } else {
            toPush.push(varName(prop) + '[]=' + varValue(obj[prop][_i]));
          }
        }
        if (toPush.length > 0) resultArray.push(toPush.join(separator));
      } else if (obj[prop] === null || obj[prop] === '') {
        resultArray.push(varName(prop) + '=');
      } else if (_typeof(obj[prop]) === 'object') {
        // Object, convert to named array
        newParents = parents.slice();
        newParents.push(prop);
        toPush = Utils.serializeObject(obj[prop], newParents);
        if (toPush !== '') resultArray.push(toPush);
      } else if (typeof obj[prop] !== 'undefined' && obj[prop] !== '') {
        // Should be string or plain value
        resultArray.push(varName(prop) + '=' + varValue(obj[prop]));
      } else if (obj[prop] === '') resultArray.push(varName(prop));
    });
    return resultArray.join(separator);
  },
  isObject: function isObject(o) {
    return (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && o !== null && o.constructor && o.constructor === Object;
  },
  merge: function merge() {
    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }

    var to = args[0];
    args.splice(0, 1);
    var from = args;

    for (var _i2 = 0; _i2 < from.length; _i2 += 1) {
      var nextSource = args[_i2];
      if (nextSource !== undefined && nextSource !== null) {
        var keysArray = Object.keys(Object(nextSource));
        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex += 1) {
          var nextKey = keysArray[nextIndex];
          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);
          if (desc !== undefined && desc.enumerable) {
            to[nextKey] = nextSource[nextKey];
          }
        }
      }
    }
    return to;
  },
  extend: function extend() {
    var deep = true;
    var to = void 0;
    var from = void 0;

    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }

    if (typeof args[0] === 'boolean') {
      deep = args[0];
      to = args[1];
      args.splice(0, 2);
      from = args;
    } else {
      to = args[0];
      args.splice(0, 1);
      from = args;
    }
    for (var _i3 = 0; _i3 < from.length; _i3 += 1) {
      var nextSource = args[_i3];
      if (nextSource !== undefined && nextSource !== null) {
        var keysArray = Object.keys(Object(nextSource));
        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex += 1) {
          var nextKey = keysArray[nextIndex];
          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);
          if (desc !== undefined && desc.enumerable) {
            if (!deep) {
              to[nextKey] = nextSource[nextKey];
            } else if (Utils.isObject(to[nextKey]) && Utils.isObject(nextSource[nextKey])) {
              Utils.extend(to[nextKey], nextSource[nextKey]);
            } else if (!Utils.isObject(to[nextKey]) && Utils.isObject(nextSource[nextKey])) {
              to[nextKey] = {};
              Utils.extend(to[nextKey], nextSource[nextKey]);
            } else {
              to[nextKey] = nextSource[nextKey];
            }
          }
        }
      }
    }
    return to;
  }
};
exports.default = Utils;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _ssrWindow = __webpack_require__(2);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
/**
* Dom7 2.1.2
* Minimalistic JavaScript library for DOM manipulation, with a jQuery-compatible API
* http://framework7.io/docs/dom.html
*
* Copyright 2018, Vladimir Kharlampidi
* The iDangero.us
* http://www.idangero.us/
*
* Licensed under MIT
*
* Released on: September 13, 2018
*/


var Dom7 = function Dom7(arr) {
  _classCallCheck(this, Dom7);

  var self = this;
  // Create array-like object
  for (var i = 0; i < arr.length; i += 1) {
    self[i] = arr[i];
  }
  self.length = arr.length;
  // Return collection with methods
  return this;
};

function $(selector, context) {
  var arr = [];
  var i = 0;
  if (selector && !context) {
    if (selector instanceof Dom7) {
      return selector;
    }
  }
  if (selector) {
    // String
    if (typeof selector === 'string') {
      var els = void 0;
      var tempParent = void 0;
      var _html = selector.trim();
      if (_html.indexOf('<') >= 0 && _html.indexOf('>') >= 0) {
        var toCreate = 'div';
        if (_html.indexOf('<li') === 0) toCreate = 'ul';
        if (_html.indexOf('<tr') === 0) toCreate = 'tbody';
        if (_html.indexOf('<td') === 0 || _html.indexOf('<th') === 0) toCreate = 'tr';
        if (_html.indexOf('<tbody') === 0) toCreate = 'table';
        if (_html.indexOf('<option') === 0) toCreate = 'select';
        tempParent = _ssrWindow.document.createElement(toCreate);
        tempParent.innerHTML = _html;
        for (i = 0; i < tempParent.childNodes.length; i += 1) {
          arr.push(tempParent.childNodes[i]);
        }
      } else {
        if (!context && selector[0] === '#' && !selector.match(/[ .<>:~]/)) {
          // Pure ID selector
          els = [_ssrWindow.document.getElementById(selector.trim().split('#')[1])];
        } else {
          // Other selectors
          els = (context || _ssrWindow.document).querySelectorAll(selector.trim());
        }
        for (i = 0; i < els.length; i += 1) {
          if (els[i]) arr.push(els[i]);
        }
      }
    } else if (selector.nodeType || selector === _ssrWindow.window || selector === _ssrWindow.document) {
      // Node/element
      arr.push(selector);
    } else if (selector.length > 0 && selector[0].nodeType) {
      // Array of elements or instance of Dom
      for (i = 0; i < selector.length; i += 1) {
        arr.push(selector[i]);
      }
    }
  }
  return new Dom7(arr);
}

$.fn = Dom7.prototype;
$.Class = Dom7;
$.Dom7 = Dom7;

function unique(arr) {
  var uniqueArray = [];
  for (var i = 0; i < arr.length; i += 1) {
    if (uniqueArray.indexOf(arr[i]) === -1) uniqueArray.push(arr[i]);
  }
  return uniqueArray;
}
function toCamelCase(string) {
  return string.toLowerCase().replace(/-(.)/g, function (match, group1) {
    return group1.toUpperCase();
  });
}

function requestAnimationFrame(callback) {
  if (_ssrWindow.window.requestAnimationFrame) return _ssrWindow.window.requestAnimationFrame(callback);else if (_ssrWindow.window.webkitRequestAnimationFrame) return _ssrWindow.window.webkitRequestAnimationFrame(callback);
  return _ssrWindow.window.setTimeout(callback, 1000 / 60);
}
function cancelAnimationFrame(id) {
  if (_ssrWindow.window.cancelAnimationFrame) return _ssrWindow.window.cancelAnimationFrame(id);else if (_ssrWindow.window.webkitCancelAnimationFrame) return _ssrWindow.window.webkitCancelAnimationFrame(id);
  return _ssrWindow.window.clearTimeout(id);
}

// Classes and attributes
function addClass(className) {
  if (typeof className === 'undefined') {
    return this;
  }
  var classes = className.split(' ');
  for (var i = 0; i < classes.length; i += 1) {
    for (var j = 0; j < this.length; j += 1) {
      if (typeof this[j] !== 'undefined' && typeof this[j].classList !== 'undefined') this[j].classList.add(classes[i]);
    }
  }
  return this;
}
function removeClass(className) {
  var classes = className.split(' ');
  for (var i = 0; i < classes.length; i += 1) {
    for (var j = 0; j < this.length; j += 1) {
      if (typeof this[j] !== 'undefined' && typeof this[j].classList !== 'undefined') this[j].classList.remove(classes[i]);
    }
  }
  return this;
}
function hasClass(className) {
  if (!this[0]) return false;
  return this[0].classList.contains(className);
}
function toggleClass(className) {
  var classes = className.split(' ');
  for (var i = 0; i < classes.length; i += 1) {
    for (var j = 0; j < this.length; j += 1) {
      if (typeof this[j] !== 'undefined' && typeof this[j].classList !== 'undefined') this[j].classList.toggle(classes[i]);
    }
  }
  return this;
}
function attr(attrs, value) {
  if (arguments.length === 1 && typeof attrs === 'string') {
    // Get attr
    if (this[0]) return this[0].getAttribute(attrs);
    return undefined;
  }

  // Set attrs
  for (var i = 0; i < this.length; i += 1) {
    if (arguments.length === 2) {
      // String
      this[i].setAttribute(attrs, value);
    } else {
      // Object
      // eslint-disable-next-line
      for (var attrName in attrs) {
        this[i][attrName] = attrs[attrName];
        this[i].setAttribute(attrName, attrs[attrName]);
      }
    }
  }
  return this;
}
// eslint-disable-next-line
function removeAttr(attr) {
  for (var i = 0; i < this.length; i += 1) {
    this[i].removeAttribute(attr);
  }
  return this;
}
// eslint-disable-next-line
function prop(props, value) {
  if (arguments.length === 1 && typeof props === 'string') {
    // Get prop
    if (this[0]) return this[0][props];
  } else {
    // Set props
    for (var i = 0; i < this.length; i += 1) {
      if (arguments.length === 2) {
        // String
        this[i][props] = value;
      } else {
        // Object
        // eslint-disable-next-line
        for (var propName in props) {
          this[i][propName] = props[propName];
        }
      }
    }
    return this;
  }
}
function data(key, value) {
  var el = void 0;
  if (typeof value === 'undefined') {
    el = this[0];
    // Get value
    if (el) {
      if (el.dom7ElementDataStorage && key in el.dom7ElementDataStorage) {
        return el.dom7ElementDataStorage[key];
      }

      var dataKey = el.getAttribute('data-' + key);
      if (dataKey) {
        return dataKey;
      }
      return undefined;
    }
    return undefined;
  }

  // Set value
  for (var i = 0; i < this.length; i += 1) {
    el = this[i];
    if (!el.dom7ElementDataStorage) el.dom7ElementDataStorage = {};
    el.dom7ElementDataStorage[key] = value;
  }
  return this;
}
function removeData(key) {
  for (var i = 0; i < this.length; i += 1) {
    var el = this[i];
    if (el.dom7ElementDataStorage && el.dom7ElementDataStorage[key]) {
      el.dom7ElementDataStorage[key] = null;
      delete el.dom7ElementDataStorage[key];
    }
  }
}
function dataset() {
  var el = this[0];
  if (!el) return undefined;
  var dataset = {}; // eslint-disable-line
  if (el.dataset) {
    // eslint-disable-next-line
    for (var dataKey in el.dataset) {
      dataset[dataKey] = el.dataset[dataKey];
    }
  } else {
    for (var i = 0; i < el.attributes.length; i += 1) {
      // eslint-disable-next-line
      var _attr = el.attributes[i];
      if (_attr.name.indexOf('data-') >= 0) {
        dataset[toCamelCase(_attr.name.split('data-')[1])] = _attr.value;
      }
    }
  }
  // eslint-disable-next-line
  for (var key in dataset) {
    if (dataset[key] === 'false') dataset[key] = false;else if (dataset[key] === 'true') dataset[key] = true;else if (parseFloat(dataset[key]) === dataset[key] * 1) dataset[key] *= 1;
  }
  return dataset;
}
function val(value) {
  var dom = this;
  if (typeof value === 'undefined') {
    if (dom[0]) {
      if (dom[0].multiple && dom[0].nodeName.toLowerCase() === 'select') {
        var values = [];
        for (var i = 0; i < dom[0].selectedOptions.length; i += 1) {
          values.push(dom[0].selectedOptions[i].value);
        }
        return values;
      }
      return dom[0].value;
    }
    return undefined;
  }

  for (var _i = 0; _i < dom.length; _i += 1) {
    var el = dom[_i];
    if (Array.isArray(value) && el.multiple && el.nodeName.toLowerCase() === 'select') {
      for (var j = 0; j < el.options.length; j += 1) {
        el.options[j].selected = value.indexOf(el.options[j].value) >= 0;
      }
    } else {
      el.value = value;
    }
  }
  return dom;
}
// Transforms
// eslint-disable-next-line
function transform(transform) {
  for (var i = 0; i < this.length; i += 1) {
    var elStyle = this[i].style;
    elStyle.webkitTransform = transform;
    elStyle.transform = transform;
  }
  return this;
}
function transition(duration) {
  if (typeof duration !== 'string') {
    duration = duration + 'ms'; // eslint-disable-line
  }
  for (var i = 0; i < this.length; i += 1) {
    var elStyle = this[i].style;
    elStyle.webkitTransitionDuration = duration;
    elStyle.transitionDuration = duration;
  }
  return this;
}
// Events
function on() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  var eventType = args[0],
      targetSelector = args[1],
      listener = args[2],
      capture = args[3];

  if (typeof args[1] === 'function') {
    eventType = args[0];
    listener = args[1];
    capture = args[2];

    targetSelector = undefined;
  }
  if (!capture) capture = false;

  function handleLiveEvent(e) {
    var target = e.target;
    if (!target) return;
    var eventData = e.target.dom7EventData || [];
    if (eventData.indexOf(e) < 0) {
      eventData.unshift(e);
    }
    if ($(target).is(targetSelector)) listener.apply(target, eventData);else {
      var _parents = $(target).parents(); // eslint-disable-line
      for (var k = 0; k < _parents.length; k += 1) {
        if ($(_parents[k]).is(targetSelector)) listener.apply(_parents[k], eventData);
      }
    }
  }
  function handleEvent(e) {
    var eventData = e && e.target ? e.target.dom7EventData || [] : [];
    if (eventData.indexOf(e) < 0) {
      eventData.unshift(e);
    }
    listener.apply(this, eventData);
  }
  var events = eventType.split(' ');
  var j = void 0;
  for (var i = 0; i < this.length; i += 1) {
    var el = this[i];
    if (!targetSelector) {
      for (j = 0; j < events.length; j += 1) {
        var event = events[j];
        if (!el.dom7Listeners) el.dom7Listeners = {};
        if (!el.dom7Listeners[event]) el.dom7Listeners[event] = [];
        el.dom7Listeners[event].push({
          listener: listener,
          proxyListener: handleEvent
        });
        el.addEventListener(event, handleEvent, capture);
      }
    } else {
      // Live events
      for (j = 0; j < events.length; j += 1) {
        var _event = events[j];
        if (!el.dom7LiveListeners) el.dom7LiveListeners = {};
        if (!el.dom7LiveListeners[_event]) el.dom7LiveListeners[_event] = [];
        el.dom7LiveListeners[_event].push({
          listener: listener,
          proxyListener: handleLiveEvent
        });
        el.addEventListener(_event, handleLiveEvent, capture);
      }
    }
  }
  return this;
}
function off() {
  for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }

  var eventType = args[0],
      targetSelector = args[1],
      listener = args[2],
      capture = args[3];

  if (typeof args[1] === 'function') {
    eventType = args[0];
    listener = args[1];
    capture = args[2];

    targetSelector = undefined;
  }
  if (!capture) capture = false;

  var events = eventType.split(' ');
  for (var i = 0; i < events.length; i += 1) {
    var event = events[i];
    for (var j = 0; j < this.length; j += 1) {
      var el = this[j];
      var handlers = void 0;
      if (!targetSelector && el.dom7Listeners) {
        handlers = el.dom7Listeners[event];
      } else if (targetSelector && el.dom7LiveListeners) {
        handlers = el.dom7LiveListeners[event];
      }
      if (handlers && handlers.length) {
        for (var k = handlers.length - 1; k >= 0; k -= 1) {
          var handler = handlers[k];
          if (listener && handler.listener === listener) {
            el.removeEventListener(event, handler.proxyListener, capture);
            handlers.splice(k, 1);
          } else if (!listener) {
            el.removeEventListener(event, handler.proxyListener, capture);
            handlers.splice(k, 1);
          }
        }
      }
    }
  }
  return this;
}
function once() {
  var dom = this;

  for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
    args[_key3] = arguments[_key3];
  }

  var eventName = args[0],
      targetSelector = args[1],
      listener = args[2],
      capture = args[3];

  if (typeof args[1] === 'function') {
    eventName = args[0];
    listener = args[1];
    capture = args[2];

    targetSelector = undefined;
  }
  function proxy() {
    for (var _len4 = arguments.length, eventArgs = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      eventArgs[_key4] = arguments[_key4];
    }

    listener.apply(this, eventArgs);
    dom.off(eventName, targetSelector, proxy, capture);
  }
  return dom.on(eventName, targetSelector, proxy, capture);
}
function trigger() {
  for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
    args[_key5] = arguments[_key5];
  }

  var events = args[0].split(' ');
  var eventData = args[1];
  for (var i = 0; i < events.length; i += 1) {
    var event = events[i];
    for (var j = 0; j < this.length; j += 1) {
      var el = this[j];
      var evt = void 0;
      try {
        evt = new _ssrWindow.window.CustomEvent(event, {
          detail: eventData,
          bubbles: true,
          cancelable: true
        });
      } catch (e) {
        evt = _ssrWindow.document.createEvent('Event');
        evt.initEvent(event, true, true);
        evt.detail = eventData;
      }
      // eslint-disable-next-line
      el.dom7EventData = args.filter(function (data, dataIndex) {
        return dataIndex > 0;
      });
      el.dispatchEvent(evt);
      el.dom7EventData = [];
      delete el.dom7EventData;
    }
  }
  return this;
}
function transitionEnd(callback) {
  var events = ['webkitTransitionEnd', 'transitionend'];
  var dom = this;
  var i = void 0;
  function fireCallBack(e) {
    /* jshint validthis:true */
    if (e.target !== this) return;
    callback.call(this, e);
    for (i = 0; i < events.length; i += 1) {
      dom.off(events[i], fireCallBack);
    }
  }
  if (callback) {
    for (i = 0; i < events.length; i += 1) {
      dom.on(events[i], fireCallBack);
    }
  }
  return this;
}
function animationEnd(callback) {
  var events = ['webkitAnimationEnd', 'animationend'];
  var dom = this;
  var i = void 0;
  function fireCallBack(e) {
    if (e.target !== this) return;
    callback.call(this, e);
    for (i = 0; i < events.length; i += 1) {
      dom.off(events[i], fireCallBack);
    }
  }
  if (callback) {
    for (i = 0; i < events.length; i += 1) {
      dom.on(events[i], fireCallBack);
    }
  }
  return this;
}
// Sizing/Styles
function width() {
  if (this[0] === _ssrWindow.window) {
    return _ssrWindow.window.innerWidth;
  }

  if (this.length > 0) {
    return parseFloat(this.css('width'));
  }

  return null;
}
function outerWidth(includeMargins) {
  if (this.length > 0) {
    if (includeMargins) {
      // eslint-disable-next-line
      var _styles = this.styles();
      return this[0].offsetWidth + parseFloat(_styles.getPropertyValue('margin-right')) + parseFloat(_styles.getPropertyValue('margin-left'));
    }
    return this[0].offsetWidth;
  }
  return null;
}
function height() {
  if (this[0] === _ssrWindow.window) {
    return _ssrWindow.window.innerHeight;
  }

  if (this.length > 0) {
    return parseFloat(this.css('height'));
  }

  return null;
}
function outerHeight(includeMargins) {
  if (this.length > 0) {
    if (includeMargins) {
      // eslint-disable-next-line
      var _styles2 = this.styles();
      return this[0].offsetHeight + parseFloat(_styles2.getPropertyValue('margin-top')) + parseFloat(_styles2.getPropertyValue('margin-bottom'));
    }
    return this[0].offsetHeight;
  }
  return null;
}
function offset() {
  if (this.length > 0) {
    var el = this[0];
    var box = el.getBoundingClientRect();
    var body = _ssrWindow.document.body;
    var clientTop = el.clientTop || body.clientTop || 0;
    var clientLeft = el.clientLeft || body.clientLeft || 0;
    var _scrollTop = el === _ssrWindow.window ? _ssrWindow.window.scrollY : el.scrollTop;
    var _scrollLeft = el === _ssrWindow.window ? _ssrWindow.window.scrollX : el.scrollLeft;
    return {
      top: box.top + _scrollTop - clientTop,
      left: box.left + _scrollLeft - clientLeft
    };
  }

  return null;
}
function hide() {
  for (var i = 0; i < this.length; i += 1) {
    this[i].style.display = 'none';
  }
  return this;
}
function show() {
  for (var i = 0; i < this.length; i += 1) {
    var el = this[i];
    if (el.style.display === 'none') {
      el.style.display = '';
    }
    if (_ssrWindow.window.getComputedStyle(el, null).getPropertyValue('display') === 'none') {
      // Still not visible
      el.style.display = 'block';
    }
  }
  return this;
}
function styles() {
  if (this[0]) return _ssrWindow.window.getComputedStyle(this[0], null);
  return {};
}
function css(props, value) {
  var i = void 0;
  if (arguments.length === 1) {
    if (typeof props === 'string') {
      if (this[0]) return _ssrWindow.window.getComputedStyle(this[0], null).getPropertyValue(props);
    } else {
      for (i = 0; i < this.length; i += 1) {
        // eslint-disable-next-line
        for (var _prop in props) {
          this[i].style[_prop] = props[_prop];
        }
      }
      return this;
    }
  }
  if (arguments.length === 2 && typeof props === 'string') {
    for (i = 0; i < this.length; i += 1) {
      this[i].style[props] = value;
    }
    return this;
  }
  return this;
}

// Dom manipulation
function toArray() {
  var arr = [];
  for (var i = 0; i < this.length; i += 1) {
    arr.push(this[i]);
  }
  return arr;
}
// Iterate over the collection passing elements to `callback`
function each(callback) {
  // Don't bother continuing without a callback
  if (!callback) return this;
  // Iterate over the current collection
  for (var i = 0; i < this.length; i += 1) {
    // If the callback returns false
    if (callback.call(this[i], i, this[i]) === false) {
      // End the loop early
      return this;
    }
  }
  // Return `this` to allow chained DOM operations
  return this;
}
function forEach(callback) {
  // Don't bother continuing without a callback
  if (!callback) return this;
  // Iterate over the current collection
  for (var i = 0; i < this.length; i += 1) {
    // If the callback returns false
    if (callback.call(this[i], this[i], i) === false) {
      // End the loop early
      return this;
    }
  }
  // Return `this` to allow chained DOM operations
  return this;
}
function filter(callback) {
  var matchedItems = [];
  var dom = this;
  for (var i = 0; i < dom.length; i += 1) {
    if (callback.call(dom[i], i, dom[i])) matchedItems.push(dom[i]);
  }
  return new Dom7(matchedItems);
}
function map(callback) {
  var modifiedItems = [];
  var dom = this;
  for (var i = 0; i < dom.length; i += 1) {
    modifiedItems.push(callback.call(dom[i], i, dom[i]));
  }
  return new Dom7(modifiedItems);
}
// eslint-disable-next-line
function html(html) {
  if (typeof html === 'undefined') {
    return this[0] ? this[0].innerHTML : undefined;
  }

  for (var i = 0; i < this.length; i += 1) {
    this[i].innerHTML = html;
  }
  return this;
}
// eslint-disable-next-line
function text(text) {
  if (typeof text === 'undefined') {
    if (this[0]) {
      return this[0].textContent.trim();
    }
    return null;
  }

  for (var i = 0; i < this.length; i += 1) {
    this[i].textContent = text;
  }
  return this;
}
function is(selector) {
  var el = this[0];
  var compareWith = void 0;
  var i = void 0;
  if (!el || typeof selector === 'undefined') return false;
  if (typeof selector === 'string') {
    if (el.matches) return el.matches(selector);else if (el.webkitMatchesSelector) return el.webkitMatchesSelector(selector);else if (el.msMatchesSelector) return el.msMatchesSelector(selector);

    compareWith = $(selector);
    for (i = 0; i < compareWith.length; i += 1) {
      if (compareWith[i] === el) return true;
    }
    return false;
  } else if (selector === _ssrWindow.document) return el === _ssrWindow.document;else if (selector === _ssrWindow.window) return el === _ssrWindow.window;

  if (selector.nodeType || selector instanceof Dom7) {
    compareWith = selector.nodeType ? [selector] : selector;
    for (i = 0; i < compareWith.length; i += 1) {
      if (compareWith[i] === el) return true;
    }
    return false;
  }
  return false;
}
function indexOf(el) {
  for (var i = 0; i < this.length; i += 1) {
    if (this[i] === el) return i;
  }
  return -1;
}
function index() {
  var child = this[0];
  var i = void 0;
  if (child) {
    i = 0;
    // eslint-disable-next-line
    while ((child = child.previousSibling) !== null) {
      if (child.nodeType === 1) i += 1;
    }
    return i;
  }
  return undefined;
}
// eslint-disable-next-line
function eq(index) {
  if (typeof index === 'undefined') return this;
  var length = this.length;
  var returnIndex = void 0;
  if (index > length - 1) {
    return new Dom7([]);
  }
  if (index < 0) {
    returnIndex = length + index;
    if (returnIndex < 0) return new Dom7([]);
    return new Dom7([this[returnIndex]]);
  }
  return new Dom7([this[index]]);
}
function append() {
  var newChild = void 0;

  for (var k = 0; k < arguments.length; k += 1) {
    newChild = arguments.length <= k ? undefined : arguments[k];
    for (var i = 0; i < this.length; i += 1) {
      if (typeof newChild === 'string') {
        var tempDiv = _ssrWindow.document.createElement('div');
        tempDiv.innerHTML = newChild;
        while (tempDiv.firstChild) {
          this[i].appendChild(tempDiv.firstChild);
        }
      } else if (newChild instanceof Dom7) {
        for (var j = 0; j < newChild.length; j += 1) {
          this[i].appendChild(newChild[j]);
        }
      } else {
        this[i].appendChild(newChild);
      }
    }
  }

  return this;
}
// eslint-disable-next-line
function appendTo(parent) {
  $(parent).append(this);
  return this;
}
function prepend(newChild) {
  var i = void 0;
  var j = void 0;
  for (i = 0; i < this.length; i += 1) {
    if (typeof newChild === 'string') {
      var tempDiv = _ssrWindow.document.createElement('div');
      tempDiv.innerHTML = newChild;
      for (j = tempDiv.childNodes.length - 1; j >= 0; j -= 1) {
        this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0]);
      }
    } else if (newChild instanceof Dom7) {
      for (j = 0; j < newChild.length; j += 1) {
        this[i].insertBefore(newChild[j], this[i].childNodes[0]);
      }
    } else {
      this[i].insertBefore(newChild, this[i].childNodes[0]);
    }
  }
  return this;
}
// eslint-disable-next-line
function prependTo(parent) {
  $(parent).prepend(this);
  return this;
}
function insertBefore(selector) {
  var before = $(selector);
  for (var i = 0; i < this.length; i += 1) {
    if (before.length === 1) {
      before[0].parentNode.insertBefore(this[i], before[0]);
    } else if (before.length > 1) {
      for (var j = 0; j < before.length; j += 1) {
        before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j]);
      }
    }
  }
}
function insertAfter(selector) {
  var after = $(selector);
  for (var i = 0; i < this.length; i += 1) {
    if (after.length === 1) {
      after[0].parentNode.insertBefore(this[i], after[0].nextSibling);
    } else if (after.length > 1) {
      for (var j = 0; j < after.length; j += 1) {
        after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling);
      }
    }
  }
}
function next(selector) {
  if (this.length > 0) {
    if (selector) {
      if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) {
        return new Dom7([this[0].nextElementSibling]);
      }
      return new Dom7([]);
    }

    if (this[0].nextElementSibling) return new Dom7([this[0].nextElementSibling]);
    return new Dom7([]);
  }
  return new Dom7([]);
}
function nextAll(selector) {
  var nextEls = [];
  var el = this[0];
  if (!el) return new Dom7([]);
  while (el.nextElementSibling) {
    var _next = el.nextElementSibling; // eslint-disable-line
    if (selector) {
      if ($(_next).is(selector)) nextEls.push(_next);
    } else nextEls.push(_next);
    el = _next;
  }
  return new Dom7(nextEls);
}
function prev(selector) {
  if (this.length > 0) {
    var el = this[0];
    if (selector) {
      if (el.previousElementSibling && $(el.previousElementSibling).is(selector)) {
        return new Dom7([el.previousElementSibling]);
      }
      return new Dom7([]);
    }

    if (el.previousElementSibling) return new Dom7([el.previousElementSibling]);
    return new Dom7([]);
  }
  return new Dom7([]);
}
function prevAll(selector) {
  var prevEls = [];
  var el = this[0];
  if (!el) return new Dom7([]);
  while (el.previousElementSibling) {
    var _prev = el.previousElementSibling; // eslint-disable-line
    if (selector) {
      if ($(_prev).is(selector)) prevEls.push(_prev);
    } else prevEls.push(_prev);
    el = _prev;
  }
  return new Dom7(prevEls);
}
function siblings(selector) {
  return this.nextAll(selector).add(this.prevAll(selector));
}
function parent(selector) {
  var parents = []; // eslint-disable-line
  for (var i = 0; i < this.length; i += 1) {
    if (this[i].parentNode !== null) {
      if (selector) {
        if ($(this[i].parentNode).is(selector)) parents.push(this[i].parentNode);
      } else {
        parents.push(this[i].parentNode);
      }
    }
  }
  return $(unique(parents));
}
function parents(selector) {
  var parents = []; // eslint-disable-line
  for (var i = 0; i < this.length; i += 1) {
    var _parent = this[i].parentNode; // eslint-disable-line
    while (_parent) {
      if (selector) {
        if ($(_parent).is(selector)) parents.push(_parent);
      } else {
        parents.push(_parent);
      }
      _parent = _parent.parentNode;
    }
  }
  return $(unique(parents));
}
function closest(selector) {
  var closest = this; // eslint-disable-line
  if (typeof selector === 'undefined') {
    return new Dom7([]);
  }
  if (!closest.is(selector)) {
    closest = closest.parents(selector).eq(0);
  }
  return closest;
}
function find(selector) {
  var foundElements = [];
  for (var i = 0; i < this.length; i += 1) {
    var found = this[i].querySelectorAll(selector);
    for (var j = 0; j < found.length; j += 1) {
      foundElements.push(found[j]);
    }
  }
  return new Dom7(foundElements);
}
function children(selector) {
  var children = []; // eslint-disable-line
  for (var i = 0; i < this.length; i += 1) {
    var childNodes = this[i].childNodes;

    for (var j = 0; j < childNodes.length; j += 1) {
      if (!selector) {
        if (childNodes[j].nodeType === 1) children.push(childNodes[j]);
      } else if (childNodes[j].nodeType === 1 && $(childNodes[j]).is(selector)) {
        children.push(childNodes[j]);
      }
    }
  }
  return new Dom7(unique(children));
}
function remove() {
  for (var i = 0; i < this.length; i += 1) {
    if (this[i].parentNode) this[i].parentNode.removeChild(this[i]);
  }
  return this;
}
function detach() {
  return this.remove();
}
function add() {
  var dom = this;
  var i = void 0;
  var j = void 0;

  for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
    args[_key6] = arguments[_key6];
  }

  for (i = 0; i < args.length; i += 1) {
    var toAdd = $(args[i]);
    for (j = 0; j < toAdd.length; j += 1) {
      dom[dom.length] = toAdd[j];
      dom.length += 1;
    }
  }
  return dom;
}
function empty() {
  for (var i = 0; i < this.length; i += 1) {
    var el = this[i];
    if (el.nodeType === 1) {
      for (var j = 0; j < el.childNodes.length; j += 1) {
        if (el.childNodes[j].parentNode) {
          el.childNodes[j].parentNode.removeChild(el.childNodes[j]);
        }
      }
      el.textContent = '';
    }
  }
  return this;
}

var Methods = /*#__PURE__*/Object.freeze({
  addClass: addClass,
  removeClass: removeClass,
  hasClass: hasClass,
  toggleClass: toggleClass,
  attr: attr,
  removeAttr: removeAttr,
  prop: prop,
  data: data,
  removeData: removeData,
  dataset: dataset,
  val: val,
  transform: transform,
  transition: transition,
  on: on,
  off: off,
  once: once,
  trigger: trigger,
  transitionEnd: transitionEnd,
  animationEnd: animationEnd,
  width: width,
  outerWidth: outerWidth,
  height: height,
  outerHeight: outerHeight,
  offset: offset,
  hide: hide,
  show: show,
  styles: styles,
  css: css,
  toArray: toArray,
  each: each,
  forEach: forEach,
  filter: filter,
  map: map,
  html: html,
  text: text,
  is: is,
  indexOf: indexOf,
  index: index,
  eq: eq,
  append: append,
  appendTo: appendTo,
  prepend: prepend,
  prependTo: prependTo,
  insertBefore: insertBefore,
  insertAfter: insertAfter,
  next: next,
  nextAll: nextAll,
  prev: prev,
  prevAll: prevAll,
  siblings: siblings,
  parent: parent,
  parents: parents,
  closest: closest,
  find: find,
  children: children,
  remove: remove,
  detach: detach,
  add: add,
  empty: empty
});

function scrollTo() {
  for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
    args[_key7] = arguments[_key7];
  }

  var left = args[0],
      top = args[1],
      duration = args[2],
      easing = args[3],
      callback = args[4];

  if (args.length === 4 && typeof easing === 'function') {
    callback = easing;
    left = args[0];
    top = args[1];
    duration = args[2];
    callback = args[3];
    easing = args[4];
  }
  if (typeof easing === 'undefined') easing = 'swing';

  return this.each(function animate() {
    var el = this;
    var currentTop = void 0;
    var currentLeft = void 0;
    var maxTop = void 0;
    var maxLeft = void 0;
    var newTop = void 0;
    var newLeft = void 0;
    var scrollTop = void 0; // eslint-disable-line
    var scrollLeft = void 0; // eslint-disable-line
    var animateTop = top > 0 || top === 0;
    var animateLeft = left > 0 || left === 0;
    if (typeof easing === 'undefined') {
      easing = 'swing';
    }
    if (animateTop) {
      currentTop = el.scrollTop;
      if (!duration) {
        el.scrollTop = top;
      }
    }
    if (animateLeft) {
      currentLeft = el.scrollLeft;
      if (!duration) {
        el.scrollLeft = left;
      }
    }
    if (!duration) return;
    if (animateTop) {
      maxTop = el.scrollHeight - el.offsetHeight;
      newTop = Math.max(Math.min(top, maxTop), 0);
    }
    if (animateLeft) {
      maxLeft = el.scrollWidth - el.offsetWidth;
      newLeft = Math.max(Math.min(left, maxLeft), 0);
    }
    var startTime = null;
    if (animateTop && newTop === currentTop) animateTop = false;
    if (animateLeft && newLeft === currentLeft) animateLeft = false;
    function render() {
      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date().getTime();

      if (startTime === null) {
        startTime = time;
      }
      var progress = Math.max(Math.min((time - startTime) / duration, 1), 0);
      var easeProgress = easing === 'linear' ? progress : 0.5 - Math.cos(progress * Math.PI) / 2;
      var done = void 0;
      if (animateTop) scrollTop = currentTop + easeProgress * (newTop - currentTop);
      if (animateLeft) scrollLeft = currentLeft + easeProgress * (newLeft - currentLeft);
      if (animateTop && newTop > currentTop && scrollTop >= newTop) {
        el.scrollTop = newTop;
        done = true;
      }
      if (animateTop && newTop < currentTop && scrollTop <= newTop) {
        el.scrollTop = newTop;
        done = true;
      }
      if (animateLeft && newLeft > currentLeft && scrollLeft >= newLeft) {
        el.scrollLeft = newLeft;
        done = true;
      }
      if (animateLeft && newLeft < currentLeft && scrollLeft <= newLeft) {
        el.scrollLeft = newLeft;
        done = true;
      }

      if (done) {
        if (callback) callback();
        return;
      }
      if (animateTop) el.scrollTop = scrollTop;
      if (animateLeft) el.scrollLeft = scrollLeft;
      requestAnimationFrame(render);
    }
    requestAnimationFrame(render);
  });
}
// scrollTop(top, duration, easing, callback) {
function scrollTop() {
  for (var _len8 = arguments.length, args = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
    args[_key8] = arguments[_key8];
  }

  var top = args[0],
      duration = args[1],
      easing = args[2],
      callback = args[3];

  if (args.length === 3 && typeof easing === 'function') {
    top = args[0];
    duration = args[1];
    callback = args[2];
    easing = args[3];
  }
  var dom = this;
  if (typeof top === 'undefined') {
    if (dom.length > 0) return dom[0].scrollTop;
    return null;
  }
  return dom.scrollTo(undefined, top, duration, easing, callback);
}
function scrollLeft() {
  for (var _len9 = arguments.length, args = Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
    args[_key9] = arguments[_key9];
  }

  var left = args[0],
      duration = args[1],
      easing = args[2],
      callback = args[3];

  if (args.length === 3 && typeof easing === 'function') {
    left = args[0];
    duration = args[1];
    callback = args[2];
    easing = args[3];
  }
  var dom = this;
  if (typeof left === 'undefined') {
    if (dom.length > 0) return dom[0].scrollLeft;
    return null;
  }
  return dom.scrollTo(left, undefined, duration, easing, callback);
}

var Scroll = /*#__PURE__*/Object.freeze({
  scrollTo: scrollTo,
  scrollTop: scrollTop,
  scrollLeft: scrollLeft
});

function animate(initialProps, initialParams) {
  var els = this;
  var a = {
    props: _extends({}, initialProps),
    params: _extends({
      duration: 300,
      easing: 'swing' // or 'linear'
      /* Callbacks
      begin(elements)
      complete(elements)
      progress(elements, complete, remaining, start, tweenValue)
      */
    }, initialParams),

    elements: els,
    animating: false,
    que: [],

    easingProgress: function easingProgress(easing, progress) {
      if (easing === 'swing') {
        return 0.5 - Math.cos(progress * Math.PI) / 2;
      }
      if (typeof easing === 'function') {
        return easing(progress);
      }
      return progress;
    },
    stop: function stop() {
      if (a.frameId) {
        cancelAnimationFrame(a.frameId);
      }
      a.animating = false;
      a.elements.each(function (index, el) {
        var element = el;
        delete element.dom7AnimateInstance;
      });
      a.que = [];
    },
    done: function done(complete) {
      a.animating = false;
      a.elements.each(function (index, el) {
        var element = el;
        delete element.dom7AnimateInstance;
      });
      if (complete) complete(els);
      if (a.que.length > 0) {
        var que = a.que.shift();
        a.animate(que[0], que[1]);
      }
    },
    animate: function animate(props, params) {
      if (a.animating) {
        a.que.push([props, params]);
        return a;
      }
      var elements = [];

      // Define & Cache Initials & Units
      a.elements.each(function (index, el) {
        var initialFullValue = void 0;
        var initialValue = void 0;
        var unit = void 0;
        var finalValue = void 0;
        var finalFullValue = void 0;

        if (!el.dom7AnimateInstance) a.elements[index].dom7AnimateInstance = a;

        elements[index] = {
          container: el
        };
        Object.keys(props).forEach(function (prop) {
          initialFullValue = _ssrWindow.window.getComputedStyle(el, null).getPropertyValue(prop).replace(',', '.');
          initialValue = parseFloat(initialFullValue);
          unit = initialFullValue.replace(initialValue, '');
          finalValue = parseFloat(props[prop]);
          finalFullValue = props[prop] + unit;
          elements[index][prop] = {
            initialFullValue: initialFullValue,
            initialValue: initialValue,
            unit: unit,
            finalValue: finalValue,
            finalFullValue: finalFullValue,
            currentValue: initialValue
          };
        });
      });

      var startTime = null;
      var time = void 0;
      var elementsDone = 0;
      var propsDone = 0;
      var done = void 0;
      var began = false;

      a.animating = true;

      function render() {
        time = new Date().getTime();
        var progress = void 0;
        var easeProgress = void 0;
        // let el;
        if (!began) {
          began = true;
          if (params.begin) params.begin(els);
        }
        if (startTime === null) {
          startTime = time;
        }
        if (params.progress) {
          // eslint-disable-next-line
          params.progress(els, Math.max(Math.min((time - startTime) / params.duration, 1), 0), startTime + params.duration - time < 0 ? 0 : startTime + params.duration - time, startTime);
        }

        elements.forEach(function (element) {
          var el = element;
          if (done || el.done) return;
          Object.keys(props).forEach(function (prop) {
            if (done || el.done) return;
            progress = Math.max(Math.min((time - startTime) / params.duration, 1), 0);
            easeProgress = a.easingProgress(params.easing, progress);
            var _el$prop = el[prop],
                initialValue = _el$prop.initialValue,
                finalValue = _el$prop.finalValue,
                unit = _el$prop.unit;

            el[prop].currentValue = initialValue + easeProgress * (finalValue - initialValue);
            var currentValue = el[prop].currentValue;

            if (finalValue > initialValue && currentValue >= finalValue || finalValue < initialValue && currentValue <= finalValue) {
              el.container.style[prop] = finalValue + unit;
              propsDone += 1;
              if (propsDone === Object.keys(props).length) {
                el.done = true;
                elementsDone += 1;
              }
              if (elementsDone === elements.length) {
                done = true;
              }
            }
            if (done) {
              a.done(params.complete);
              return;
            }
            el.container.style[prop] = currentValue + unit;
          });
        });
        if (done) return;
        // Then call
        a.frameId = requestAnimationFrame(render);
      }
      a.frameId = requestAnimationFrame(render);
      return a;
    }
  };

  if (a.elements.length === 0) {
    return els;
  }

  var animateInstance = void 0;
  for (var i = 0; i < a.elements.length; i += 1) {
    if (a.elements[i].dom7AnimateInstance) {
      animateInstance = a.elements[i].dom7AnimateInstance;
    } else a.elements[i].dom7AnimateInstance = a;
  }
  if (!animateInstance) {
    animateInstance = a;
  }

  if (initialProps === 'stop') {
    animateInstance.stop();
  } else {
    animateInstance.animate(a.props, a.params);
  }

  return els;
}

function stop() {
  var els = this;
  for (var i = 0; i < els.length; i += 1) {
    if (els[i].dom7AnimateInstance) {
      els[i].dom7AnimateInstance.stop();
    }
  }
}

var Animate = /*#__PURE__*/Object.freeze({
  animate: animate,
  stop: stop
});

var noTrigger = 'resize scroll'.split(' ');
function eventShortcut(name) {
  for (var _len10 = arguments.length, args = Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {
    args[_key10 - 1] = arguments[_key10];
  }

  if (typeof args[0] === 'undefined') {
    for (var i = 0; i < this.length; i += 1) {
      if (noTrigger.indexOf(name) < 0) {
        if (name in this[i]) this[i][name]();else {
          $(this[i]).trigger(name);
        }
      }
    }
    return this;
  }
  return this.on.apply(this, [name].concat(args));
}

function click() {
  for (var _len11 = arguments.length, args = Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
    args[_key11] = arguments[_key11];
  }

  return eventShortcut.bind(this).apply(undefined, ['click'].concat(args));
}
function blur() {
  for (var _len12 = arguments.length, args = Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {
    args[_key12] = arguments[_key12];
  }

  return eventShortcut.bind(this).apply(undefined, ['blur'].concat(args));
}
function focus() {
  for (var _len13 = arguments.length, args = Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {
    args[_key13] = arguments[_key13];
  }

  return eventShortcut.bind(this).apply(undefined, ['focus'].concat(args));
}
function focusin() {
  for (var _len14 = arguments.length, args = Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {
    args[_key14] = arguments[_key14];
  }

  return eventShortcut.bind(this).apply(undefined, ['focusin'].concat(args));
}
function focusout() {
  for (var _len15 = arguments.length, args = Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
    args[_key15] = arguments[_key15];
  }

  return eventShortcut.bind(this).apply(undefined, ['focusout'].concat(args));
}
function keyup() {
  for (var _len16 = arguments.length, args = Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {
    args[_key16] = arguments[_key16];
  }

  return eventShortcut.bind(this).apply(undefined, ['keyup'].concat(args));
}
function keydown() {
  for (var _len17 = arguments.length, args = Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {
    args[_key17] = arguments[_key17];
  }

  return eventShortcut.bind(this).apply(undefined, ['keydown'].concat(args));
}
function keypress() {
  for (var _len18 = arguments.length, args = Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {
    args[_key18] = arguments[_key18];
  }

  return eventShortcut.bind(this).apply(undefined, ['keypress'].concat(args));
}
function submit() {
  for (var _len19 = arguments.length, args = Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {
    args[_key19] = arguments[_key19];
  }

  return eventShortcut.bind(this).apply(undefined, ['submit'].concat(args));
}
function change() {
  for (var _len20 = arguments.length, args = Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {
    args[_key20] = arguments[_key20];
  }

  return eventShortcut.bind(this).apply(undefined, ['change'].concat(args));
}
function mousedown() {
  for (var _len21 = arguments.length, args = Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {
    args[_key21] = arguments[_key21];
  }

  return eventShortcut.bind(this).apply(undefined, ['mousedown'].concat(args));
}
function mousemove() {
  for (var _len22 = arguments.length, args = Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {
    args[_key22] = arguments[_key22];
  }

  return eventShortcut.bind(this).apply(undefined, ['mousemove'].concat(args));
}
function mouseup() {
  for (var _len23 = arguments.length, args = Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {
    args[_key23] = arguments[_key23];
  }

  return eventShortcut.bind(this).apply(undefined, ['mouseup'].concat(args));
}
function mouseenter() {
  for (var _len24 = arguments.length, args = Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {
    args[_key24] = arguments[_key24];
  }

  return eventShortcut.bind(this).apply(undefined, ['mouseenter'].concat(args));
}
function mouseleave() {
  for (var _len25 = arguments.length, args = Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {
    args[_key25] = arguments[_key25];
  }

  return eventShortcut.bind(this).apply(undefined, ['mouseleave'].concat(args));
}
function mouseout() {
  for (var _len26 = arguments.length, args = Array(_len26), _key26 = 0; _key26 < _len26; _key26++) {
    args[_key26] = arguments[_key26];
  }

  return eventShortcut.bind(this).apply(undefined, ['mouseout'].concat(args));
}
function mouseover() {
  for (var _len27 = arguments.length, args = Array(_len27), _key27 = 0; _key27 < _len27; _key27++) {
    args[_key27] = arguments[_key27];
  }

  return eventShortcut.bind(this).apply(undefined, ['mouseover'].concat(args));
}
function touchstart() {
  for (var _len28 = arguments.length, args = Array(_len28), _key28 = 0; _key28 < _len28; _key28++) {
    args[_key28] = arguments[_key28];
  }

  return eventShortcut.bind(this).apply(undefined, ['touchstart'].concat(args));
}
function touchend() {
  for (var _len29 = arguments.length, args = Array(_len29), _key29 = 0; _key29 < _len29; _key29++) {
    args[_key29] = arguments[_key29];
  }

  return eventShortcut.bind(this).apply(undefined, ['touchend'].concat(args));
}
function touchmove() {
  for (var _len30 = arguments.length, args = Array(_len30), _key30 = 0; _key30 < _len30; _key30++) {
    args[_key30] = arguments[_key30];
  }

  return eventShortcut.bind(this).apply(undefined, ['touchmove'].concat(args));
}
function resize() {
  for (var _len31 = arguments.length, args = Array(_len31), _key31 = 0; _key31 < _len31; _key31++) {
    args[_key31] = arguments[_key31];
  }

  return eventShortcut.bind(this).apply(undefined, ['resize'].concat(args));
}
function scroll() {
  for (var _len32 = arguments.length, args = Array(_len32), _key32 = 0; _key32 < _len32; _key32++) {
    args[_key32] = arguments[_key32];
  }

  return eventShortcut.bind(this).apply(undefined, ['scroll'].concat(args));
}

var eventShortcuts = /*#__PURE__*/Object.freeze({
  click: click,
  blur: blur,
  focus: focus,
  focusin: focusin,
  focusout: focusout,
  keyup: keyup,
  keydown: keydown,
  keypress: keypress,
  submit: submit,
  change: change,
  mousedown: mousedown,
  mousemove: mousemove,
  mouseup: mouseup,
  mouseenter: mouseenter,
  mouseleave: mouseleave,
  mouseout: mouseout,
  mouseover: mouseover,
  touchstart: touchstart,
  touchend: touchend,
  touchmove: touchmove,
  resize: resize,
  scroll: scroll
});

[Methods, Scroll, Animate, eventShortcuts].forEach(function (group) {
  Object.keys(group).forEach(function (methodName) {
    $.fn[methodName] = group[methodName];
  });
});

exports.default = $;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
/**
 * SSR Window 1.0.1
 * Better handling for window object in SSR environment
 * https://github.com/nolimits4web/ssr-window
 *
 * Copyright 2018, Vladimir Kharlampidi
 *
 * Licensed under MIT
 *
 * Released on: July 18, 2018
 */
var doc = typeof document === 'undefined' ? {
  body: {},
  addEventListener: function addEventListener() {},
  removeEventListener: function removeEventListener() {},
  activeElement: {
    blur: function blur() {},
    nodeName: ''
  },
  querySelector: function querySelector() {
    return null;
  },
  querySelectorAll: function querySelectorAll() {
    return [];
  },
  getElementById: function getElementById() {
    return null;
  },
  createEvent: function createEvent() {
    return {
      initEvent: function initEvent() {}
    };
  },
  createElement: function createElement() {
    return {
      children: [],
      childNodes: [],
      style: {},
      setAttribute: function setAttribute() {},
      getElementsByTagName: function getElementsByTagName() {
        return [];
      }
    };
  },
  location: { hash: '' }
} : document; // eslint-disable-line

var win = typeof window === 'undefined' ? {
  document: doc,
  navigator: {
    userAgent: ''
  },
  location: {},
  history: {},
  CustomEvent: function CustomEvent() {
    return this;
  },
  addEventListener: function addEventListener() {},
  removeEventListener: function removeEventListener() {},
  getComputedStyle: function getComputedStyle() {
    return {
      getPropertyValue: function getPropertyValue() {
        return '';
      }
    };
  },
  Image: function Image() {},
  Date: function Date() {},
  screen: {},
  setTimeout: function setTimeout() {},
  clearTimeout: function clearTimeout() {}
} : window; // eslint-disable-line

exports.window = win;
exports.document = doc;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var Device = function Device() {
  var ua = _ssrWindow.window.navigator.userAgent;

  var device = {
    ios: false,
    android: false,
    androidChrome: false,
    desktop: false,
    windows: false,
    iphone: false,
    iphoneX: false,
    ipod: false,
    ipad: false,
    cordova: _ssrWindow.window.cordova || _ssrWindow.window.phonegap,
    phonegap: _ssrWindow.window.cordova || _ssrWindow.window.phonegap
  };

  var windows = ua.match(/(Windows Phone);?[\s\/]+([\d.]+)?/); // eslint-disable-line
  var android = ua.match(/(Android);?[\s\/]+([\d.]+)?/); // eslint-disable-line
  var ipad = ua.match(/(iPad).*OS\s([\d_]+)/);
  var ipod = ua.match(/(iPod)(.*OS\s([\d_]+))?/);
  var iphone = !ipad && ua.match(/(iPhone\sOS|iOS)\s([\d_]+)/);
  var iphoneX = iphone && _ssrWindow.window.screen.width === 375 && _ssrWindow.window.screen.height === 812;

  // Windows
  if (windows) {
    device.os = 'windows';
    device.osVersion = windows[2];
    device.windows = true;
  }
  // Android
  if (android && !windows) {
    device.os = 'android';
    device.osVersion = android[2];
    device.android = true;
    device.androidChrome = ua.toLowerCase().indexOf('chrome') >= 0;
  }
  if (ipad || iphone || ipod) {
    device.os = 'ios';
    device.ios = true;
  }
  // iOS
  if (iphone && !ipod) {
    device.osVersion = iphone[2].replace(/_/g, '.');
    device.iphone = true;
    device.iphoneX = iphoneX;
  }
  if (ipad) {
    device.osVersion = ipad[2].replace(/_/g, '.');
    device.ipad = true;
  }
  if (ipod) {
    device.osVersion = ipod[3] ? ipod[3].replace(/_/g, '.') : null;
    device.iphone = true;
  }
  // iOS 8+ changed UA
  if (device.ios && device.osVersion && ua.indexOf('Version/') >= 0) {
    if (device.osVersion.split('.')[0] === '10') {
      device.osVersion = ua.toLowerCase().split('version/')[1].split(' ')[0];
    }
  }

  // Webview
  device.webView = (iphone || ipad || ipod) && (ua.match(/.*AppleWebKit(?!.*Safari)/i) || _ssrWindow.window.navigator.standalone);
  device.webview = device.webView;

  // Desktop
  device.desktop = !(device.os || device.android || device.webView);

  // Minimal UI
  if (device.os && device.os === 'ios') {
    var osVersionArr = device.osVersion.split('.');
    var metaViewport = _ssrWindow.document.querySelector('meta[name="viewport"]');
    device.minimalUi = !device.webView && (ipod || iphone) && (osVersionArr[0] * 1 === 7 ? osVersionArr[1] * 1 >= 1 : osVersionArr[0] * 1 > 7) && metaViewport && metaViewport.getAttribute('content').indexOf('minimal-ui') >= 0;
  }

  // Check for status bar and fullscreen app mode
  device.needsStatusbarOverlay = function needsStatusbarOverlay() {
    if ((device.webView || device.android && device.cordova) && _ssrWindow.window.innerWidth * _ssrWindow.window.innerHeight === _ssrWindow.window.screen.width * _ssrWindow.window.screen.height) {
      if (device.iphoneX && (_ssrWindow.window.orientation === 90 || _ssrWindow.window.orientation === -90)) {
        return false;
      }
      return true;
    }
    return false;
  };
  device.statusbar = device.needsStatusbarOverlay();

  // Pixel Ratio
  device.pixelRatio = _ssrWindow.window.devicePixelRatio || 1;

  // Export object
  return device;
}();

exports.default = Device;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var History = {
  queue: [],
  clearQueue: function clearQueue() {
    if (History.queue.length === 0) return;
    var currentQueue = History.queue.shift();
    currentQueue();
  },

  routerQueue: [],
  clearRouterQueue: function clearRouterQueue() {
    if (History.routerQueue.length === 0) return;
    var currentQueue = History.routerQueue.pop();
    var router = currentQueue.router,
        stateUrl = currentQueue.stateUrl,
        action = currentQueue.action;


    var animate = router.params.animate;
    if (router.params.pushStateAnimate === false) animate = false;

    if (action === 'back') {
      router.back({ animate: animate, pushState: false });
    }
    if (action === 'load') {
      router.navigate(stateUrl, { animate: animate, pushState: false });
    }
  },
  handle: function handle(e) {
    if (History.blockPopstate) return;
    var app = this;
    // const mainView = app.views.main;
    var state = e.state;
    History.previousState = History.state;
    History.state = state;

    History.allowChange = true;
    History.clearQueue();

    state = History.state;
    if (!state) state = {};

    app.views.forEach(function (view) {
      var router = view.router;
      var viewState = state[view.id];
      if (!viewState && view.params.pushState) {
        viewState = {
          url: view.router.history[0]
        };
      }
      if (!viewState) return;
      var stateUrl = viewState.url || undefined;

      var animate = router.params.animate;
      if (router.params.pushStateAnimate === false) animate = false;

      if (stateUrl !== router.url) {
        if (router.history.indexOf(stateUrl) >= 0) {
          // Go Back
          if (router.allowPageChange) {
            router.back({ animate: animate, pushState: false });
          } else {
            History.routerQueue.push({
              action: 'back',
              router: router
            });
          }
        } else if (router.allowPageChange) {
          // Load page
          router.navigate(stateUrl, { animate: animate, pushState: false });
        } else {
          History.routerQueue.unshift({
            action: 'load',
            stateUrl: stateUrl,
            router: router
          });
        }
      }
    });
  },
  initViewState: function initViewState(viewId, viewState) {
    var newState = _utils2.default.extend({}, History.state || {}, _defineProperty({}, viewId, viewState));
    History.state = newState;
    _ssrWindow.window.history.replaceState(newState, '');
  },
  push: function push(viewId, viewState, url) {
    if (!History.allowChange) {
      History.queue.push(function () {
        History.push(viewId, viewState, url);
      });
      return;
    }
    History.previousState = History.state;
    var newState = _utils2.default.extend({}, History.previousState || {}, _defineProperty({}, viewId, viewState));
    History.state = newState;
    _ssrWindow.window.history.pushState(newState, '', url);
  },
  replace: function replace(viewId, viewState, url) {
    if (!History.allowChange) {
      History.queue.push(function () {
        History.replace(viewId, viewState, url);
      });
      return;
    }
    History.previousState = History.state;
    var newState = _utils2.default.extend({}, History.previousState || {}, _defineProperty({}, viewId, viewState));
    History.state = newState;
    _ssrWindow.window.history.replaceState(newState, '', url);
  },
  go: function go(index) {
    History.allowChange = false;
    _ssrWindow.window.history.go(index);
  },
  back: function back() {
    History.allowChange = false;
    _ssrWindow.window.history.back();
  },

  allowChange: true,
  previousState: {},
  state: _ssrWindow.window.history.state,
  blockPopstate: true,
  init: function init(app) {
    (0, _dom2.default)(_ssrWindow.window).on('load', function () {
      setTimeout(function () {
        History.blockPopstate = false;
      }, 0);
    });

    if (_ssrWindow.document.readyState && _ssrWindow.document.readyState === 'complete') {
      History.blockPopstate = false;
    }

    (0, _dom2.default)(_ssrWindow.window).on('popstate', History.handle.bind(app));
  }
};

exports.default = History;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Template7 1.4.0
 * Mobile-first HTML template engine
 *
 * http://www.idangero.us/template7/
 *
 * Copyright 2018, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under MIT
 *
 * Released on: August 31, 2018
 */
var t7ctx = void 0;
if (typeof window !== 'undefined') {
  t7ctx = window;
} else if (typeof global !== 'undefined') {
  t7ctx = global;
} else {
  t7ctx = undefined;
}

var Template7Context = t7ctx;

var Template7Utils = {
  quoteSingleRexExp: new RegExp('\'', 'g'),
  quoteDoubleRexExp: new RegExp('"', 'g'),
  isFunction: function isFunction(func) {
    return typeof func === 'function';
  },
  escape: function escape(string) {
    return typeof Template7Context !== 'undefined' && Template7Context.escape ? Template7Context.escape(string) : string.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
  },
  helperToSlices: function helperToSlices(string) {
    var quoteDoubleRexExp = Template7Utils.quoteDoubleRexExp,
        quoteSingleRexExp = Template7Utils.quoteSingleRexExp;

    var helperParts = string.replace(/[{}#}]/g, '').trim().split(' ');
    var slices = [];
    var shiftIndex = void 0;
    var i = void 0;
    var j = void 0;
    for (i = 0; i < helperParts.length; i += 1) {
      var part = helperParts[i];
      var blockQuoteRegExp = void 0;
      var openingQuote = void 0;
      if (i === 0) slices.push(part);else if (part.indexOf('"') === 0 || part.indexOf('\'') === 0) {
        blockQuoteRegExp = part.indexOf('"') === 0 ? quoteDoubleRexExp : quoteSingleRexExp;
        openingQuote = part.indexOf('"') === 0 ? '"' : '\'';
        // Plain String
        if (part.match(blockQuoteRegExp).length === 2) {
          // One word string
          slices.push(part);
        } else {
          // Find closed Index
          shiftIndex = 0;
          for (j = i + 1; j < helperParts.length; j += 1) {
            part += ' ' + helperParts[j];
            if (helperParts[j].indexOf(openingQuote) >= 0) {
              shiftIndex = j;
              slices.push(part);
              break;
            }
          }
          if (shiftIndex) i = shiftIndex;
        }
      } else if (part.indexOf('=') > 0) {
        // Hash
        var hashParts = part.split('=');
        var hashName = hashParts[0];
        var hashContent = hashParts[1];
        if (!blockQuoteRegExp) {
          blockQuoteRegExp = hashContent.indexOf('"') === 0 ? quoteDoubleRexExp : quoteSingleRexExp;
          openingQuote = hashContent.indexOf('"') === 0 ? '"' : '\'';
        }
        if (hashContent.match(blockQuoteRegExp).length !== 2) {
          shiftIndex = 0;
          for (j = i + 1; j < helperParts.length; j += 1) {
            hashContent += ' ' + helperParts[j];
            if (helperParts[j].indexOf(openingQuote) >= 0) {
              shiftIndex = j;
              break;
            }
          }
          if (shiftIndex) i = shiftIndex;
        }
        var hash = [hashName, hashContent.replace(blockQuoteRegExp, '')];
        slices.push(hash);
      } else {
        // Plain variable
        slices.push(part);
      }
    }
    return slices;
  },
  stringToBlocks: function stringToBlocks(string) {
    var blocks = [];
    var i = void 0;
    var j = void 0;
    if (!string) return [];
    var stringBlocks = string.split(/({{[^{^}]*}})/);
    for (i = 0; i < stringBlocks.length; i += 1) {
      var block = stringBlocks[i];
      if (block === '') continue;
      if (block.indexOf('{{') < 0) {
        blocks.push({
          type: 'plain',
          content: block
        });
      } else {
        if (block.indexOf('{/') >= 0) {
          continue;
        }
        block = block.replace(/{{([#/])*([ ])*/, '{{$1').replace(/([ ])*}}/, '}}');
        if (block.indexOf('{#') < 0 && block.indexOf(' ') < 0 && block.indexOf('else') < 0) {
          // Simple variable
          blocks.push({
            type: 'variable',
            contextName: block.replace(/[{}]/g, '')
          });
          continue;
        }
        // Helpers
        var helperSlices = Template7Utils.helperToSlices(block);
        var helperName = helperSlices[0];
        var isPartial = helperName === '>';
        var helperContext = [];
        var helperHash = {};
        for (j = 1; j < helperSlices.length; j += 1) {
          var slice = helperSlices[j];
          if (Array.isArray(slice)) {
            // Hash
            helperHash[slice[0]] = slice[1] === 'false' ? false : slice[1];
          } else {
            helperContext.push(slice);
          }
        }

        if (block.indexOf('{#') >= 0) {
          // Condition/Helper
          var helperContent = '';
          var elseContent = '';
          var toSkip = 0;
          var shiftIndex = void 0;
          var foundClosed = false;
          var foundElse = false;
          var depth = 0;
          for (j = i + 1; j < stringBlocks.length; j += 1) {
            if (stringBlocks[j].indexOf('{{#') >= 0) {
              depth += 1;
            }
            if (stringBlocks[j].indexOf('{{/') >= 0) {
              depth -= 1;
            }
            if (stringBlocks[j].indexOf('{{#' + helperName) >= 0) {
              helperContent += stringBlocks[j];
              if (foundElse) elseContent += stringBlocks[j];
              toSkip += 1;
            } else if (stringBlocks[j].indexOf('{{/' + helperName) >= 0) {
              if (toSkip > 0) {
                toSkip -= 1;
                helperContent += stringBlocks[j];
                if (foundElse) elseContent += stringBlocks[j];
              } else {
                shiftIndex = j;
                foundClosed = true;
                break;
              }
            } else if (stringBlocks[j].indexOf('else') >= 0 && depth === 0) {
              foundElse = true;
            } else {
              if (!foundElse) helperContent += stringBlocks[j];
              if (foundElse) elseContent += stringBlocks[j];
            }
          }
          if (foundClosed) {
            if (shiftIndex) i = shiftIndex;
            if (helperName === 'raw') {
              blocks.push({
                type: 'plain',
                content: helperContent
              });
            } else {
              blocks.push({
                type: 'helper',
                helperName: helperName,
                contextName: helperContext,
                content: helperContent,
                inverseContent: elseContent,
                hash: helperHash
              });
            }
          }
        } else if (block.indexOf(' ') > 0) {
          if (isPartial) {
            helperName = '_partial';
            if (helperContext[0]) {
              if (helperContext[0].indexOf('[') === 0) helperContext[0] = helperContext[0].replace(/[[\]]/g, '');else helperContext[0] = '"' + helperContext[0].replace(/"|'/g, '') + '"';
            }
          }
          blocks.push({
            type: 'helper',
            helperName: helperName,
            contextName: helperContext,
            hash: helperHash
          });
        }
      }
    }
    return blocks;
  },
  parseJsVariable: function parseJsVariable(expression, replace, object) {
    return expression.split(/([+ \-*/^])/g).map(function (part) {
      if (part.indexOf(replace) < 0) return part;
      if (!object) return JSON.stringify('');
      var variable = object;
      if (part.indexOf(replace + '.') >= 0) {
        part.split(replace + '.')[1].split('.').forEach(function (partName) {
          if (partName in variable) variable = variable[partName];else variable = undefined;
        });
      }
      if (typeof variable === 'string') {
        variable = JSON.stringify(variable);
      }
      if (variable === undefined) variable = 'undefined';
      return variable;
    }).join('');
  },
  parseJsParents: function parseJsParents(expression, parents) {
    return expression.split(/([+ \-*^])/g).map(function (part) {
      if (part.indexOf('../') < 0) return part;
      if (!parents || parents.length === 0) return JSON.stringify('');
      var levelsUp = part.split('../').length - 1;
      var parentData = levelsUp > parents.length ? parents[parents.length - 1] : parents[levelsUp - 1];

      var variable = parentData;
      var parentPart = part.replace(/..\//g, '');
      parentPart.split('.').forEach(function (partName) {
        if (variable[partName]) variable = variable[partName];else variable = 'undefined';
      });
      return JSON.stringify(variable);
    }).join('');
  },
  getCompileVar: function getCompileVar(name, ctx) {
    var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'data_1';

    var variable = ctx;
    var parts = void 0;
    var levelsUp = 0;
    var newDepth = void 0;
    if (name.indexOf('../') === 0) {
      levelsUp = name.split('../').length - 1;
      newDepth = variable.split('_')[1] - levelsUp;
      variable = 'ctx_' + (newDepth >= 1 ? newDepth : 1);
      parts = name.split('../')[levelsUp].split('.');
    } else if (name.indexOf('@global') === 0) {
      variable = 'Template7.global';
      parts = name.split('@global.')[1].split('.');
    } else if (name.indexOf('@root') === 0) {
      variable = 'root';
      parts = name.split('@root.')[1].split('.');
    } else {
      parts = name.split('.');
    }
    for (var i = 0; i < parts.length; i += 1) {
      var part = parts[i];
      if (part.indexOf('@') === 0) {
        var dataLevel = data.split('_')[1];
        if (levelsUp > 0) {
          dataLevel = newDepth;
        }
        if (i > 0) {
          variable += '[(data_' + dataLevel + ' && data_' + dataLevel + '.' + part.replace('@', '') + ')]';
        } else {
          variable = '(data_' + dataLevel + ' && data_' + dataLevel + '.' + part.replace('@', '') + ')';
        }
      } else if (Number.isFinite ? Number.isFinite(part) : Template7Context.isFinite(part)) {
        variable += '[' + part + ']';
      } else if (part === 'this' || part.indexOf('this.') >= 0 || part.indexOf('this[') >= 0 || part.indexOf('this(') >= 0) {
        variable = part.replace('this', ctx);
      } else {
        variable += '.' + part;
      }
    }
    return variable;
  },
  getCompiledArguments: function getCompiledArguments(contextArray, ctx, data) {
    var arr = [];
    for (var i = 0; i < contextArray.length; i += 1) {
      if (/^['"]/.test(contextArray[i])) arr.push(contextArray[i]);else if (/^(true|false|\d+)$/.test(contextArray[i])) arr.push(contextArray[i]);else {
        arr.push(Template7Utils.getCompileVar(contextArray[i], ctx, data));
      }
    }

    return arr.join(', ');
  }
};

/* eslint no-eval: "off" */
var Template7Helpers = {
  _partial: function _partial(partialName, options) {
    var ctx = this;
    var p = Template7Class.partials[partialName];
    if (!p || p && !p.template) return '';
    if (!p.compiled) {
      p.compiled = new Template7Class(p.template).compile();
    }
    Object.keys(options.hash).forEach(function (hashName) {
      ctx[hashName] = options.hash[hashName];
    });
    return p.compiled(ctx, options.data, options.root);
  },
  escape: function escape(context) {
    if (typeof context !== 'string') {
      throw new Error('Template7: Passed context to "escape" helper should be a string');
    }
    return Template7Utils.escape(context);
  },
  if: function _if(context, options) {
    var ctx = context;
    if (Template7Utils.isFunction(ctx)) {
      ctx = ctx.call(this);
    }
    if (ctx) {
      return options.fn(this, options.data);
    }

    return options.inverse(this, options.data);
  },
  unless: function unless(context, options) {
    var ctx = context;
    if (Template7Utils.isFunction(ctx)) {
      ctx = ctx.call(this);
    }
    if (!ctx) {
      return options.fn(this, options.data);
    }

    return options.inverse(this, options.data);
  },
  each: function each(context, options) {
    var ctx = context;
    var ret = '';
    var i = 0;
    if (Template7Utils.isFunction(ctx)) {
      ctx = ctx.call(this);
    }
    if (Array.isArray(ctx)) {
      if (options.hash.reverse) {
        ctx = ctx.reverse();
      }
      for (i = 0; i < ctx.length; i += 1) {
        ret += options.fn(ctx[i], { first: i === 0, last: i === ctx.length - 1, index: i });
      }
      if (options.hash.reverse) {
        ctx = ctx.reverse();
      }
    } else {
      // eslint-disable-next-line
      for (var key in ctx) {
        i += 1;
        ret += options.fn(ctx[key], { key: key });
      }
    }
    if (i > 0) return ret;
    return options.inverse(this);
  },
  with: function _with(context, options) {
    var ctx = context;
    if (Template7Utils.isFunction(ctx)) {
      ctx = context.call(this);
    }
    return options.fn(ctx);
  },
  join: function join(context, options) {
    var ctx = context;
    if (Template7Utils.isFunction(ctx)) {
      ctx = ctx.call(this);
    }
    return ctx.join(options.hash.delimiter || options.hash.delimeter);
  },
  js: function js(expression, options) {
    var data = options.data;
    var func = void 0;
    var execute = expression;
    'index first last key'.split(' ').forEach(function (prop) {
      if (typeof data[prop] !== 'undefined') {
        var re1 = new RegExp('this.@' + prop, 'g');
        var re2 = new RegExp('@' + prop, 'g');
        execute = execute.replace(re1, JSON.stringify(data[prop])).replace(re2, JSON.stringify(data[prop]));
      }
    });
    if (options.root && execute.indexOf('@root') >= 0) {
      execute = Template7Utils.parseJsVariable(execute, '@root', options.root);
    }
    if (execute.indexOf('@global') >= 0) {
      execute = Template7Utils.parseJsVariable(execute, '@global', Template7Context.Template7.global);
    }
    if (execute.indexOf('../') >= 0) {
      execute = Template7Utils.parseJsParents(execute, options.parents);
    }
    if (execute.indexOf('return') >= 0) {
      func = '(function(){' + execute + '})';
    } else {
      func = '(function(){return (' + execute + ')})';
    }
    return eval(func).call(this);
  },
  js_if: function js_if(expression, options) {
    var data = options.data;
    var func = void 0;
    var execute = expression;
    'index first last key'.split(' ').forEach(function (prop) {
      if (typeof data[prop] !== 'undefined') {
        var re1 = new RegExp('this.@' + prop, 'g');
        var re2 = new RegExp('@' + prop, 'g');
        execute = execute.replace(re1, JSON.stringify(data[prop])).replace(re2, JSON.stringify(data[prop]));
      }
    });
    if (options.root && execute.indexOf('@root') >= 0) {
      execute = Template7Utils.parseJsVariable(execute, '@root', options.root);
    }
    if (execute.indexOf('@global') >= 0) {
      execute = Template7Utils.parseJsVariable(execute, '@global', Template7Context.Template7.global);
    }
    if (execute.indexOf('../') >= 0) {
      execute = Template7Utils.parseJsParents(execute, options.parents);
    }
    if (execute.indexOf('return') >= 0) {
      func = '(function(){' + execute + '})';
    } else {
      func = '(function(){return (' + execute + ')})';
    }
    var condition = eval(func).call(this);
    if (condition) {
      return options.fn(this, options.data);
    }

    return options.inverse(this, options.data);
  }
};
Template7Helpers.js_compare = Template7Helpers.js_if;

var Template7Options = {};
var Template7Partials = {};

var Template7Class = function () {
  function Template7Class(template) {
    _classCallCheck(this, Template7Class);

    var t = this;
    t.template = template;
  }

  _createClass(Template7Class, [{
    key: 'compile',
    value: function compile() {
      var template = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.template;
      var depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

      var t = this;
      if (t.compiled) return t.compiled;

      if (typeof template !== 'string') {
        throw new Error('Template7: Template must be a string');
      }
      var stringToBlocks = Template7Utils.stringToBlocks,
          getCompileVar = Template7Utils.getCompileVar,
          getCompiledArguments = Template7Utils.getCompiledArguments;


      var blocks = stringToBlocks(template);
      var ctx = 'ctx_' + depth;
      var data = 'data_' + depth;
      if (blocks.length === 0) {
        return function empty() {
          return '';
        };
      }

      function getCompileFn(block, newDepth) {
        if (block.content) return t.compile(block.content, newDepth);
        return function empty() {
          return '';
        };
      }
      function getCompileInverse(block, newDepth) {
        if (block.inverseContent) return t.compile(block.inverseContent, newDepth);
        return function empty() {
          return '';
        };
      }

      var resultString = '';
      if (depth === 1) {
        resultString += '(function (' + ctx + ', ' + data + ', root) {\n';
      } else {
        resultString += '(function (' + ctx + ', ' + data + ') {\n';
      }
      if (depth === 1) {
        resultString += 'function isArray(arr){return Array.isArray(arr);}\n';
        resultString += 'function isFunction(func){return (typeof func === \'function\');}\n';
        resultString += 'function c(val, ctx) {if (typeof val !== "undefined" && val !== null) {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n';
        resultString += 'root = root || ctx_1 || {};\n';
      }
      resultString += 'var r = \'\';\n';
      var i = void 0;
      for (i = 0; i < blocks.length; i += 1) {
        var block = blocks[i];
        // Plain block
        if (block.type === 'plain') {
          // eslint-disable-next-line
          resultString += 'r +=\'' + block.content.replace(/\r/g, '\\r').replace(/\n/g, '\\n').replace(/'/g, '\\' + '\'') + '\';';
          continue;
        }
        var variable = void 0;
        var compiledArguments = void 0;
        // Variable block
        if (block.type === 'variable') {
          variable = getCompileVar(block.contextName, ctx, data);
          resultString += 'r += c(' + variable + ', ' + ctx + ');';
        }
        // Helpers block
        if (block.type === 'helper') {
          var parents = void 0;
          if (ctx !== 'ctx_1') {
            var level = ctx.split('_')[1];
            var parentsString = 'ctx_' + (level - 1);
            for (var j = level - 2; j >= 1; j -= 1) {
              parentsString += ', ctx_' + j;
            }
            parents = '[' + parentsString + ']';
          } else {
            parents = '[' + ctx + ']';
          }
          var dynamicHelper = void 0;
          if (block.helperName.indexOf('[') === 0) {
            block.helperName = getCompileVar(block.helperName.replace(/[[\]]/g, ''), ctx, data);
            dynamicHelper = true;
          }
          if (dynamicHelper || block.helperName in Template7Helpers) {
            compiledArguments = getCompiledArguments(block.contextName, ctx, data);
            resultString += 'r += (Template7Helpers' + (dynamicHelper ? '[' + block.helperName + ']' : '.' + block.helperName) + ').call(' + ctx + ', ' + (compiledArguments && compiledArguments + ', ') + '{hash:' + JSON.stringify(block.hash) + ', data: ' + data + ' || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: root, parents: ' + parents + '});';
          } else if (block.contextName.length > 0) {
            throw new Error('Template7: Missing helper: "' + block.helperName + '"');
          } else {
            variable = getCompileVar(block.helperName, ctx, data);
            resultString += 'if (' + variable + ') {';
            resultString += 'if (isArray(' + variable + ')) {';
            resultString += 'r += (Template7Helpers.each).call(' + ctx + ', ' + variable + ', {hash:' + JSON.stringify(block.hash) + ', data: ' + data + ' || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: root, parents: ' + parents + '});';
            resultString += '}else {';
            resultString += 'r += (Template7Helpers.with).call(' + ctx + ', ' + variable + ', {hash:' + JSON.stringify(block.hash) + ', data: ' + data + ' || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: root, parents: ' + parents + '});';
            resultString += '}}';
          }
        }
      }
      resultString += '\nreturn r;})';

      if (depth === 1) {
        // eslint-disable-next-line
        t.compiled = eval(resultString);
        return t.compiled;
      }
      return resultString;
    }
  }], [{
    key: 'options',
    get: function get() {
      return Template7Options;
    }
  }, {
    key: 'partials',
    get: function get() {
      return Template7Partials;
    }
  }, {
    key: 'helpers',
    get: function get() {
      return Template7Helpers;
    }
  }]);

  return Template7Class;
}();

function Template7() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  var template = args[0],
      data = args[1];

  if (args.length === 2) {
    var instance = new Template7Class(template);
    var rendered = instance.compile()(data);
    instance = null;
    return rendered;
  }
  return new Template7Class(template);
}
Template7.registerHelper = function registerHelper(name, fn) {
  Template7Class.helpers[name] = fn;
};
Template7.unregisterHelper = function unregisterHelper(name) {
  Template7Class.helpers[name] = undefined;
  delete Template7Class.helpers[name];
};
Template7.registerPartial = function registerPartial(name, template) {
  Template7Class.partials[name] = { template: template };
};
Template7.unregisterPartial = function unregisterPartial(name) {
  if (Template7Class.partials[name]) {
    Template7Class.partials[name] = undefined;
    delete Template7Class.partials[name];
  }
};
Template7.compile = function compile(template, options) {
  var instance = new Template7Class(template, options);
  return instance.compile();
};

Template7.options = Template7Class.options;
Template7.helpers = Template7Class.helpers;
Template7.partials = Template7Class.partials;

exports.default = Template7;
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17)))

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var Support = function Support() {
  var positionSticky = function supportPositionSticky() {
    var support = false;
    var div = _ssrWindow.document.createElement('div');
    'sticky -webkit-sticky -moz-sticky'.split(' ').forEach(function (prop) {
      if (support) return;
      div.style.position = prop;
      if (div.style.position === prop) {
        support = true;
      }
    });
    return support;
  }();

  var testDiv = _ssrWindow.document.createElement('div');

  return {
    positionSticky: positionSticky,
    touch: function checkTouch() {
      return !!('ontouchstart' in _ssrWindow.window || _ssrWindow.window.DocumentTouch && _ssrWindow.document instanceof _ssrWindow.window.DocumentTouch);
    }(),

    pointerEvents: !!(_ssrWindow.window.navigator.pointerEnabled || _ssrWindow.window.PointerEvent),
    prefixedPointerEvents: !!_ssrWindow.window.navigator.msPointerEnabled,

    transition: function checkTransition() {
      var style = testDiv.style;
      return 'transition' in style || 'webkitTransition' in style || 'MozTransition' in style;
    }(),
    transforms3d: _ssrWindow.window.Modernizr && _ssrWindow.window.Modernizr.csstransforms3d === true || function checkTransforms3d() {
      var style = testDiv.style;
      return 'webkitPerspective' in style || 'MozPerspective' in style || 'OPerspective' in style || 'MsPerspective' in style || 'perspective' in style;
    }(),

    flexbox: function checkFlexbox() {
      var div = _ssrWindow.document.createElement('div').style;
      var styles = 'alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient'.split(' ');
      for (var i = 0; i < styles.length; i += 1) {
        if (styles[i] in div) return true;
      }
      return false;
    }(),

    observer: function checkObserver() {
      return 'MutationObserver' in _ssrWindow.window || 'WebkitMutationObserver' in _ssrWindow.window;
    }(),

    passiveListener: function checkPassiveListener() {
      var supportsPassive = false;
      try {
        var opts = Object.defineProperty({}, 'passive', {
          // eslint-disable-next-line
          get: function get() {
            supportsPassive = true;
          }
        });
        _ssrWindow.window.addEventListener('testPassiveListener', null, opts);
      } catch (e) {
        // No support
      }
      return supportsPassive;
    }(),

    gestures: function checkGestures() {
      return 'ongesturestart' in _ssrWindow.window;
    }()
  };
}();

exports.default = Support;

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Framework7Class = function () {
  function Framework7Class() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var parents = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

    _classCallCheck(this, Framework7Class);

    var self = this;
    self.params = params;

    // Events
    self.eventsParents = parents;
    self.eventsListeners = {};

    if (self.params && self.params.on) {
      Object.keys(self.params.on).forEach(function (eventName) {
        self.on(eventName, self.params.on[eventName]);
      });
    }
  }

  _createClass(Framework7Class, [{
    key: 'on',
    value: function on(events, handler, priority) {
      var self = this;
      if (typeof handler !== 'function') return self;
      var method = priority ? 'unshift' : 'push';
      events.split(' ').forEach(function (event) {
        if (!self.eventsListeners[event]) self.eventsListeners[event] = [];
        self.eventsListeners[event][method](handler);
      });
      return self;
    }
  }, {
    key: 'once',
    value: function once(events, handler, priority) {
      var self = this;
      if (typeof handler !== 'function') return self;
      function onceHandler() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        handler.apply(self, args);
        self.off(events, onceHandler);
      }
      return self.on(events, onceHandler, priority);
    }
  }, {
    key: 'off',
    value: function off(events, handler) {
      var self = this;
      if (!self.eventsListeners) return self;
      events.split(' ').forEach(function (event) {
        if (typeof handler === 'undefined') {
          self.eventsListeners[event] = [];
        } else {
          self.eventsListeners[event].forEach(function (eventHandler, index) {
            if (eventHandler === handler) {
              self.eventsListeners[event].splice(index, 1);
            }
          });
        }
      });
      return self;
    }
  }, {
    key: 'emit',
    value: function emit() {
      var self = this;
      if (!self.eventsListeners) return self;
      var events = void 0;
      var data = void 0;
      var context = void 0;
      var eventsParents = void 0;

      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      if (typeof args[0] === 'string' || Array.isArray(args[0])) {
        events = args[0];
        data = args.slice(1, args.length);
        context = self;
        eventsParents = self.eventsParents;
      } else {
        events = args[0].events;
        data = args[0].data;
        context = args[0].context || self;
        eventsParents = args[0].local ? [] : args[0].parents || self.eventsParents;
      }
      var eventsArray = Array.isArray(events) ? events : events.split(' ');
      var localEvents = eventsArray.map(function (eventName) {
        return eventName.replace('local::', '');
      });
      var parentEvents = eventsArray.filter(function (eventName) {
        return eventName.indexOf('local::') < 0;
      });

      localEvents.forEach(function (event) {
        if (self.eventsListeners && self.eventsListeners[event]) {
          var handlers = [];
          self.eventsListeners[event].forEach(function (eventHandler) {
            handlers.push(eventHandler);
          });
          handlers.forEach(function (eventHandler) {
            eventHandler.apply(context, data);
          });
        }
      });
      if (eventsParents && eventsParents.length > 0) {
        eventsParents.forEach(function (eventsParent) {
          eventsParent.emit.apply(eventsParent, [parentEvents].concat(_toConsumableArray(data)));
        });
      }
      return self;
    }
  }, {
    key: 'useModulesParams',
    value: function useModulesParams(instanceParams) {
      var instance = this;
      if (!instance.modules) return;
      Object.keys(instance.modules).forEach(function (moduleName) {
        var module = instance.modules[moduleName];
        // Extend params
        if (module.params) {
          _utils2.default.extend(instanceParams, module.params);
        }
      });
    }
  }, {
    key: 'useModules',
    value: function useModules() {
      var modulesParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      var instance = this;
      if (!instance.modules) return;
      Object.keys(instance.modules).forEach(function (moduleName) {
        var module = instance.modules[moduleName];
        var moduleParams = modulesParams[moduleName] || {};
        // Extend instance methods and props
        if (module.instance) {
          Object.keys(module.instance).forEach(function (modulePropName) {
            var moduleProp = module.instance[modulePropName];
            if (typeof moduleProp === 'function') {
              instance[modulePropName] = moduleProp.bind(instance);
            } else {
              instance[modulePropName] = moduleProp;
            }
          });
        }
        // Add event listeners
        if (module.on && instance.on) {
          Object.keys(module.on).forEach(function (moduleEventName) {
            instance.on(moduleEventName, module.on[moduleEventName]);
          });
        }

        // Module create callback
        if (module.create) {
          module.create.bind(instance)(moduleParams);
        }
      });
    }
  }], [{
    key: 'installModule',
    value: function installModule(module) {
      var Class = this;
      if (!Class.prototype.modules) Class.prototype.modules = {};
      var name = module.name || Object.keys(Class.prototype.modules).length + '_' + _utils2.default.now();
      Class.prototype.modules[name] = module;
      // Prototype
      if (module.proto) {
        Object.keys(module.proto).forEach(function (key) {
          Class.prototype[key] = module.proto[key];
        });
      }
      // Class
      if (module.static) {
        Object.keys(module.static).forEach(function (key) {
          Class[key] = module.static[key];
        });
      }
      // Callback
      if (module.install) {
        for (var _len3 = arguments.length, params = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
          params[_key3 - 1] = arguments[_key3];
        }

        module.install.apply(Class, params);
      }
      return Class;
    }
  }, {
    key: 'use',
    value: function use(module) {
      var Class = this;
      if (Array.isArray(module)) {
        module.forEach(function (m) {
          return Class.installModule(m);
        });
        return Class;
      }

      for (var _len4 = arguments.length, params = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        params[_key4 - 1] = arguments[_key4];
      }

      return Class.installModule.apply(Class, [module].concat(params));
    }
  }, {
    key: 'components',
    set: function set(components) {
      var Class = this;
      if (!Class.use) return;
      Class.use(components);
    }
  }]);

  return Framework7Class;
}();

exports.default = Framework7Class;

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var globals = {};
var jsonpRequests = 0;

function Request(requestOptions) {
  var globalsNoCallbacks = _utils2.default.extend({}, globals);
  'beforeCreate beforeOpen beforeSend error complete success statusCode'.split(' ').forEach(function (callbackName) {
    delete globalsNoCallbacks[callbackName];
  });
  var defaults = _utils2.default.extend({
    url: _ssrWindow.window.location.toString(),
    method: 'GET',
    data: false,
    async: true,
    cache: true,
    user: '',
    password: '',
    headers: {},
    xhrFields: {},
    statusCode: {},
    processData: true,
    dataType: 'text',
    contentType: 'application/x-www-form-urlencoded',
    timeout: 0
  }, globalsNoCallbacks);

  var options = _utils2.default.extend({}, defaults, requestOptions);
  var proceedRequest = void 0;

  // Function to run XHR callbacks and events
  function fireCallback(callbackName) {
    /*
      Callbacks:
      beforeCreate (options),
      beforeOpen (xhr, options),
      beforeSend (xhr, options),
      error (xhr, status),
      complete (xhr, stautus),
      success (response, status, xhr),
      statusCode ()
    */
    var globalCallbackValue = void 0;
    var optionCallbackValue = void 0;

    for (var _len = arguments.length, data = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      data[_key - 1] = arguments[_key];
    }

    if (globals[callbackName]) {
      globalCallbackValue = globals[callbackName].apply(globals, data);
    }
    if (options[callbackName]) {
      optionCallbackValue = options[callbackName].apply(options, data);
    }
    if (typeof globalCallbackValue !== 'boolean') globalCallbackValue = true;
    if (typeof optionCallbackValue !== 'boolean') optionCallbackValue = true;
    return globalCallbackValue && optionCallbackValue;
  }

  // Before create callback
  proceedRequest = fireCallback('beforeCreate', options);
  if (proceedRequest === false) return undefined;

  // For jQuery guys
  if (options.type) options.method = options.type;

  // Parameters Prefix
  var paramsPrefix = options.url.indexOf('?') >= 0 ? '&' : '?';

  // UC method
  var method = options.method.toUpperCase();

  // Data to modify GET URL
  if ((method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') && options.data) {
    var stringData = void 0;
    if (typeof options.data === 'string') {
      // Should be key=value string
      if (options.data.indexOf('?') >= 0) stringData = options.data.split('?')[1];else stringData = options.data;
    } else {
      // Should be key=value object
      stringData = _utils2.default.serializeObject(options.data);
    }
    if (stringData.length) {
      options.url += paramsPrefix + stringData;
      if (paramsPrefix === '?') paramsPrefix = '&';
    }
  }

  // JSONP
  if (options.dataType === 'json' && options.url.indexOf('callback=') >= 0) {
    var callbackName = 'f7jsonp_' + (Date.now() + (jsonpRequests += 1));
    var abortTimeout = void 0;
    var callbackSplit = options.url.split('callback=');
    var requestUrl = callbackSplit[0] + 'callback=' + callbackName;
    if (callbackSplit[1].indexOf('&') >= 0) {
      var addVars = callbackSplit[1].split('&').filter(function (el) {
        return el.indexOf('=') > 0;
      }).join('&');
      if (addVars.length > 0) requestUrl += '&' + addVars;
    }

    // Create script
    var script = _ssrWindow.document.createElement('script');
    script.type = 'text/javascript';
    script.onerror = function onerror() {
      clearTimeout(abortTimeout);
      fireCallback('error', null, 'scripterror');
      fireCallback('complete', null, 'scripterror');
    };
    script.src = requestUrl;

    // Handler
    _ssrWindow.window[callbackName] = function jsonpCallback(data) {
      clearTimeout(abortTimeout);
      fireCallback('success', data);
      script.parentNode.removeChild(script);
      script = null;
      delete _ssrWindow.window[callbackName];
    };
    _ssrWindow.document.querySelector('head').appendChild(script);

    if (options.timeout > 0) {
      abortTimeout = setTimeout(function () {
        script.parentNode.removeChild(script);
        script = null;
        fireCallback('error', null, 'timeout');
      }, options.timeout);
    }

    return undefined;
  }

  // Cache for GET/HEAD requests
  if (method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') {
    if (options.cache === false) {
      options.url += paramsPrefix + '_nocache' + Date.now();
    }
  }

  // Create XHR
  var xhr = new XMLHttpRequest();

  // Save Request URL
  xhr.requestUrl = options.url;
  xhr.requestParameters = options;

  // Before open callback
  proceedRequest = fireCallback('beforeOpen', xhr, options);
  if (proceedRequest === false) return xhr;

  // Open XHR
  xhr.open(method, options.url, options.async, options.user, options.password);

  // Create POST Data
  var postData = null;

  if ((method === 'POST' || method === 'PUT' || method === 'PATCH') && options.data) {
    if (options.processData) {
      var postDataInstances = [ArrayBuffer, Blob, Document, FormData];
      // Post Data
      if (postDataInstances.indexOf(options.data.constructor) >= 0) {
        postData = options.data;
      } else {
        // POST Headers
        var boundary = '---------------------------' + Date.now().toString(16);

        if (options.contentType === 'multipart/form-data') {
          xhr.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);
        } else {
          xhr.setRequestHeader('Content-Type', options.contentType);
        }
        postData = '';
        var data = _utils2.default.serializeObject(options.data);
        if (options.contentType === 'multipart/form-data') {
          data = data.split('&');
          var newData = [];
          for (var i = 0; i < data.length; i += 1) {
            newData.push('Content-Disposition: form-data; name="' + data[i].split('=')[0] + '"\r\n\r\n' + data[i].split('=')[1] + '\r\n');
          }
          postData = '--' + boundary + '\r\n' + newData.join('--' + boundary + '\r\n') + '--' + boundary + '--\r\n';
        } else {
          postData = data;
        }
      }
    } else {
      postData = options.data;
      xhr.setRequestHeader('Content-Type', options.contentType);
    }
  }

  // Additional headers
  if (options.headers) {
    Object.keys(options.headers).forEach(function (headerName) {
      xhr.setRequestHeader(headerName, options.headers[headerName]);
    });
  }

  // Check for crossDomain
  if (typeof options.crossDomain === 'undefined') {
    // eslint-disable-next-line
    options.crossDomain = /^([\w-]+:)?\/\/([^\/]+)/.test(options.url) && RegExp.$2 !== _ssrWindow.window.location.host;
  }

  if (!options.crossDomain) {
    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
  }

  if (options.xhrFields) {
    _utils2.default.extend(xhr, options.xhrFields);
  }

  var xhrTimeout = void 0;

  // Handle XHR
  xhr.onload = function onload() {
    if (xhrTimeout) clearTimeout(xhrTimeout);
    if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 0) {
      var responseData = void 0;
      if (options.dataType === 'json') {
        var parseError = void 0;
        try {
          responseData = JSON.parse(xhr.responseText);
        } catch (err) {
          parseError = true;
        }
        if (!parseError) {
          fireCallback('success', responseData, xhr.status, xhr);
        } else {
          fireCallback('error', xhr, 'parseerror');
        }
      } else {
        responseData = xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;
        fireCallback('success', responseData, xhr.status, xhr);
      }
    } else {
      fireCallback('error', xhr, xhr.status);
    }
    if (options.statusCode) {
      if (globals.statusCode && globals.statusCode[xhr.status]) globals.statusCode[xhr.status](xhr);
      if (options.statusCode[xhr.status]) options.statusCode[xhr.status](xhr);
    }
    fireCallback('complete', xhr, xhr.status);
  };

  xhr.onerror = function onerror() {
    if (xhrTimeout) clearTimeout(xhrTimeout);
    fireCallback('error', xhr, xhr.status);
    fireCallback('complete', xhr, 'error');
  };

  // Timeout
  if (options.timeout > 0) {
    xhr.onabort = function onabort() {
      if (xhrTimeout) clearTimeout(xhrTimeout);
    };
    xhrTimeout = setTimeout(function () {
      xhr.abort();
      fireCallback('error', xhr, 'timeout');
      fireCallback('complete', xhr, 'timeout');
    }, options.timeout);
  }

  // Ajax start callback
  proceedRequest = fireCallback('beforeSend', xhr, options);
  if (proceedRequest === false) return xhr;

  // Send XHR
  xhr.send(postData);

  // Return XHR object
  return xhr;
}
function RequestShortcut(method) {
  var _ref = [],
      url = _ref[0],
      data = _ref[1],
      success = _ref[2],
      error = _ref[3],
      dataType = _ref[4];

  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    args[_key2 - 1] = arguments[_key2];
  }

  if (typeof args[1] === 'function') {
    url = args[0];
    success = args[1];
    error = args[2];
    dataType = args[3];
  } else {
    url = args[0];
    data = args[1];
    success = args[2];
    error = args[3];
    dataType = args[4];
  }
  [success, error].forEach(function (callback) {
    if (typeof callback === 'string') {
      dataType = callback;
      if (callback === success) success = undefined;else error = undefined;
    }
  });
  dataType = dataType || (method === 'json' || method === 'postJSON' ? 'json' : undefined);
  var requestOptions = {
    url: url,
    method: method === 'post' || method === 'postJSON' ? 'POST' : 'GET',
    data: data,
    success: success,
    error: error,
    dataType: dataType
  };
  if (method === 'postJSON') {
    _utils2.default.extend(requestOptions, {
      contentType: 'application/json',
      processData: false,
      crossDomain: true,
      data: typeof data === 'string' ? data : JSON.stringify(data)
    });
  }
  return Request(requestOptions);
}
Request.get = function get() {
  for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
    args[_key3] = arguments[_key3];
  }

  return RequestShortcut.apply(undefined, ['get'].concat(args));
};
Request.post = function post() {
  for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
    args[_key4] = arguments[_key4];
  }

  return RequestShortcut.apply(undefined, ['post'].concat(args));
};
Request.json = function json() {
  for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
    args[_key5] = arguments[_key5];
  }

  return RequestShortcut.apply(undefined, ['json'].concat(args));
};
Request.getJSON = Request.json;
Request.postJSON = function postJSON() {
  for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
    args[_key6] = arguments[_key6];
  }

  return RequestShortcut.apply(undefined, ['postJSON'].concat(args));
};
Request.setup = function setup(options) {
  if (options.type && !options.method) {
    _utils2.default.extend(options, { method: options.type });
  }
  _utils2.default.extend(globals, options);
};

exports.default = Request;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _router = __webpack_require__(10);

var _router2 = _interopRequireDefault(_router);

var _class = __webpack_require__(7);

var _class2 = _interopRequireDefault(_class);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var View = function (_Framework7Class) {
  _inherits(View, _Framework7Class);

  function View(appInstance, el) {
    var _ret;

    var viewParams = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    _classCallCheck(this, View);

    var _this = _possibleConstructorReturn(this, (View.__proto__ || Object.getPrototypeOf(View)).call(this, viewParams, [appInstance]));

    var app = appInstance;
    var $el = (0, _dom2.default)(el);
    var view = _this;

    var defaults = {
      routes: [],
      routesAdd: []
    };

    // Default View params
    view.params = _utils2.default.extend(defaults, app.params.view, viewParams);

    // Routes
    if (view.params.routes.length > 0) {
      view.routes = view.params.routes;
    } else {
      view.routes = [].concat(app.routes, view.params.routesAdd);
    }

    // Selector
    var selector = void 0;
    if (typeof el === 'string') selector = el;else {
      // Supposed to be HTMLElement or Dom7
      selector = ($el.attr('id') ? '#' + $el.attr('id') : '') + ($el.attr('class') ? '.' + $el.attr('class').replace(/ /g, '.').replace('.active', '') : '');
    }

    // DynamicNavbar
    var $navbarEl = void 0;
    if (app.theme === 'ios' && view.params.iosDynamicNavbar && view.params.iosSeparateDynamicNavbar) {
      $navbarEl = $el.children('.navbar').eq(0);
      if ($navbarEl.length === 0) {
        $navbarEl = (0, _dom2.default)('<div class="navbar"></div>');
      }
    }

    // View Props
    _utils2.default.extend(false, view, {
      app: app,
      $el: $el,
      el: $el[0],
      name: view.params.name,
      main: view.params.main || $el.hasClass('view-main'),
      $navbarEl: $navbarEl,
      navbarEl: $navbarEl ? $navbarEl[0] : undefined,
      selector: selector,
      history: [],
      scrollHistory: {}
    });

    // Save in DOM
    $el[0].f7View = view;

    // Install Modules
    view.useModules();

    // Add to app
    app.views.push(view);
    if (view.main) {
      app.views.main = view;
    }
    if (view.name) {
      app.views[view.name] = view;
    }

    // Index
    view.index = app.views.indexOf(view);

    // View ID
    var viewId = void 0;
    if (view.name) {
      viewId = 'view_' + view.name;
    } else if (view.main) {
      viewId = 'view_main';
    } else {
      viewId = 'view_' + view.index;
    }
    view.id = viewId;

    // Init View
    if (app.initialized) {
      view.init();
    } else {
      app.on('init', function () {
        view.init();
      });
    }

    return _ret = view, _possibleConstructorReturn(_this, _ret);
  }

  _createClass(View, [{
    key: 'destroy',
    value: function destroy() {
      var view = this;
      var app = view.app;

      view.$el.trigger('view:beforedestroy', view);
      view.emit('local::beforeDestroy viewBeforeDestroy', view);

      if (view.main) {
        app.views.main = null;
        delete app.views.main;
      } else if (view.name) {
        app.views[view.name] = null;
        delete app.views[view.name];
      }
      view.$el[0].f7View = null;
      delete view.$el[0].f7View;

      app.views.splice(app.views.indexOf(view), 1);

      // Destroy Router
      if (view.params.router && view.router) {
        view.router.destroy();
      }

      view.emit('local::destroy viewDestroy', view);

      // Delete props & methods
      Object.keys(view).forEach(function (viewProp) {
        view[viewProp] = null;
        delete view[viewProp];
      });

      view = null;
    }
  }, {
    key: 'init',
    value: function init() {
      var view = this;
      if (view.params.router) {
        view.router.init();
      }
    }
  }]);

  return View;
}(_class2.default);

// Use Router


View.use(_router2.default);

exports.default = View;

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _routerClass = __webpack_require__(27);

var _routerClass2 = _interopRequireDefault(_routerClass);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  name: 'router',
  static: {
    Router: _routerClass2.default
  },
  instance: {
    cache: {
      xhr: [],
      templates: [],
      components: []
    }
  },
  create: function create() {
    var instance = this;
    if (instance.app) {
      // View Router
      if (instance.params.router) {
        instance.router = new _routerClass2.default(instance.app, instance);
      }
    } else {
      // App Router
      instance.router = new _routerClass2.default(instance);
    }
  }
};

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/**
 * Expose `pathToRegexp`.
 */
module.exports = pathToRegexp;
module.exports.parse = parse;
module.exports.compile = compile;
module.exports.tokensToFunction = tokensToFunction;
module.exports.tokensToRegExp = tokensToRegExp;

/**
 * Default configs.
 */
var DEFAULT_DELIMITER = '/';
var DEFAULT_DELIMITERS = './';

/**
 * The main path matching regexp utility.
 *
 * @type {RegExp}
 */
var PATH_REGEXP = new RegExp([
// Match escaped characters that would otherwise appear in future matches.
// This allows the user to escape special characters that won't transform.
'(\\\\.)',
// Match Express-style parameters and un-named parameters with a prefix
// and optional suffixes. Matches appear as:
//
// ":test(\\d+)?" => ["test", "\d+", undefined, "?"]
// "(\\d+)"  => [undefined, undefined, "\d+", undefined]
'(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?'].join('|'), 'g');

/**
 * Parse a string for the raw tokens.
 *
 * @param  {string}  str
 * @param  {Object=} options
 * @return {!Array}
 */
function parse(str, options) {
  var tokens = [];
  var key = 0;
  var index = 0;
  var path = '';
  var defaultDelimiter = options && options.delimiter || DEFAULT_DELIMITER;
  var delimiters = options && options.delimiters || DEFAULT_DELIMITERS;
  var pathEscaped = false;
  var res;

  while ((res = PATH_REGEXP.exec(str)) !== null) {
    var m = res[0];
    var escaped = res[1];
    var offset = res.index;
    path += str.slice(index, offset);
    index = offset + m.length;

    // Ignore already escaped sequences.
    if (escaped) {
      path += escaped[1];
      pathEscaped = true;
      continue;
    }

    var prev = '';
    var next = str[index];
    var name = res[2];
    var capture = res[3];
    var group = res[4];
    var modifier = res[5];

    if (!pathEscaped && path.length) {
      var k = path.length - 1;

      if (delimiters.indexOf(path[k]) > -1) {
        prev = path[k];
        path = path.slice(0, k);
      }
    }

    // Push the current path onto the tokens.
    if (path) {
      tokens.push(path);
      path = '';
      pathEscaped = false;
    }

    var partial = prev !== '' && next !== undefined && next !== prev;
    var repeat = modifier === '+' || modifier === '*';
    var optional = modifier === '?' || modifier === '*';
    var delimiter = prev || defaultDelimiter;
    var pattern = capture || group;

    tokens.push({
      name: name || key++,
      prefix: prev,
      delimiter: delimiter,
      optional: optional,
      repeat: repeat,
      partial: partial,
      pattern: pattern ? escapeGroup(pattern) : '[^' + escapeString(delimiter) + ']+?'
    });
  }

  // Push any remaining characters.
  if (path || index < str.length) {
    tokens.push(path + str.substr(index));
  }

  return tokens;
}

/**
 * Compile a string to a template function for the path.
 *
 * @param  {string}             str
 * @param  {Object=}            options
 * @return {!function(Object=, Object=)}
 */
function compile(str, options) {
  return tokensToFunction(parse(str, options));
}

/**
 * Expose a method for transforming tokens into the path function.
 */
function tokensToFunction(tokens) {
  // Compile all the tokens into regexps.
  var matches = new Array(tokens.length);

  // Compile all the patterns before compilation.
  for (var i = 0; i < tokens.length; i++) {
    if (_typeof(tokens[i]) === 'object') {
      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$');
    }
  }

  return function (data, options) {
    var path = '';
    var encode = options && options.encode || encodeURIComponent;

    for (var i = 0; i < tokens.length; i++) {
      var token = tokens[i];

      if (typeof token === 'string') {
        path += token;
        continue;
      }

      var value = data ? data[token.name] : undefined;
      var segment;

      if (Array.isArray(value)) {
        if (!token.repeat) {
          throw new TypeError('Expected "' + token.name + '" to not repeat, but got array');
        }

        if (value.length === 0) {
          if (token.optional) continue;

          throw new TypeError('Expected "' + token.name + '" to not be empty');
        }

        for (var j = 0; j < value.length; j++) {
          segment = encode(value[j], token);

          if (!matches[i].test(segment)) {
            throw new TypeError('Expected all "' + token.name + '" to match "' + token.pattern + '"');
          }

          path += (j === 0 ? token.prefix : token.delimiter) + segment;
        }

        continue;
      }

      if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {
        segment = encode(String(value), token);

        if (!matches[i].test(segment)) {
          throw new TypeError('Expected "' + token.name + '" to match "' + token.pattern + '", but got "' + segment + '"');
        }

        path += token.prefix + segment;
        continue;
      }

      if (token.optional) {
        // Prepend partial segment prefixes.
        if (token.partial) path += token.prefix;

        continue;
      }

      throw new TypeError('Expected "' + token.name + '" to be ' + (token.repeat ? 'an array' : 'a string'));
    }

    return path;
  };
}

/**
 * Escape a regular expression string.
 *
 * @param  {string} str
 * @return {string}
 */
function escapeString(str) {
  return str.replace(/([.+*?=^!:${}()[\]|/\\])/g, '\\$1');
}

/**
 * Escape the capturing group by escaping special characters and meaning.
 *
 * @param  {string} group
 * @return {string}
 */
function escapeGroup(group) {
  return group.replace(/([=!:$/()])/g, '\\$1');
}

/**
 * Get the flags for a regexp from the options.
 *
 * @param  {Object} options
 * @return {string}
 */
function flags(options) {
  return options && options.sensitive ? '' : 'i';
}

/**
 * Pull out keys from a regexp.
 *
 * @param  {!RegExp} path
 * @param  {Array=}  keys
 * @return {!RegExp}
 */
function regexpToRegexp(path, keys) {
  if (!keys) return path;

  // Use a negative lookahead to match only capturing groups.
  var groups = path.source.match(/\((?!\?)/g);

  if (groups) {
    for (var i = 0; i < groups.length; i++) {
      keys.push({
        name: i,
        prefix: null,
        delimiter: null,
        optional: false,
        repeat: false,
        partial: false,
        pattern: null
      });
    }
  }

  return path;
}

/**
 * Transform an array into a regexp.
 *
 * @param  {!Array}  path
 * @param  {Array=}  keys
 * @param  {Object=} options
 * @return {!RegExp}
 */
function arrayToRegexp(path, keys, options) {
  var parts = [];

  for (var i = 0; i < path.length; i++) {
    parts.push(pathToRegexp(path[i], keys, options).source);
  }

  return new RegExp('(?:' + parts.join('|') + ')', flags(options));
}

/**
 * Create a path regexp from string input.
 *
 * @param  {string}  path
 * @param  {Array=}  keys
 * @param  {Object=} options
 * @return {!RegExp}
 */
function stringToRegexp(path, keys, options) {
  return tokensToRegExp(parse(path, options), keys, options);
}

/**
 * Expose a function for taking tokens and returning a RegExp.
 *
 * @param  {!Array}  tokens
 * @param  {Array=}  keys
 * @param  {Object=} options
 * @return {!RegExp}
 */
function tokensToRegExp(tokens, keys, options) {
  options = options || {};

  var strict = options.strict;
  var start = options.start !== false;
  var end = options.end !== false;
  var delimiter = escapeString(options.delimiter || DEFAULT_DELIMITER);
  var delimiters = options.delimiters || DEFAULT_DELIMITERS;
  var endsWith = [].concat(options.endsWith || []).map(escapeString).concat('$').join('|');
  var route = start ? '^' : '';
  var isEndDelimited = tokens.length === 0;

  // Iterate over the tokens and create our regexp string.
  for (var i = 0; i < tokens.length; i++) {
    var token = tokens[i];

    if (typeof token === 'string') {
      route += escapeString(token);
      isEndDelimited = i === tokens.length - 1 && delimiters.indexOf(token[token.length - 1]) > -1;
    } else {
      var capture = token.repeat ? '(?:' + token.pattern + ')(?:' + escapeString(token.delimiter) + '(?:' + token.pattern + '))*' : token.pattern;

      if (keys) keys.push(token);

      if (token.optional) {
        if (token.partial) {
          route += escapeString(token.prefix) + '(' + capture + ')?';
        } else {
          route += '(?:' + escapeString(token.prefix) + '(' + capture + '))?';
        }
      } else {
        route += escapeString(token.prefix) + '(' + capture + ')';
      }
    }
  }

  if (end) {
    if (!strict) route += '(?:' + delimiter + ')?';

    route += endsWith === '$' ? '$' : '(?=' + endsWith + ')';
  } else {
    if (!strict) route += '(?:' + delimiter + '(?=' + endsWith + '))?';
    if (!isEndDelimited) route += '(?=' + delimiter + '|' + endsWith + ')';
  }

  return new RegExp(route, flags(options));
}

/**
 * Normalize the given path string, returning a regular expression.
 *
 * An empty array can be passed in for the keys, which will hold the
 * placeholder key descriptions. For example, using `/user/:id`, `keys` will
 * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.
 *
 * @param  {(string|RegExp|Array)} path
 * @param  {Array=}                keys
 * @param  {Object=}               options
 * @return {!RegExp}
 */
function pathToRegexp(path, keys, options) {
  if (path instanceof RegExp) {
    return regexpToRegexp(path, keys);
  }

  if (Array.isArray(path)) {
    return arrayToRegexp( /** @type {!Array} */path, keys, options);
  }

  return stringToRegexp( /** @type {string} */path, keys, options);
}

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (direction, route, options) {
  var router = this;
  var redirect = route.route.redirect;
  if (options.initial && router.params.pushState) {
    options.replaceState = true; // eslint-disable-line
    options.history = true; // eslint-disable-line
  }
  function redirectResolve(redirectUrl) {
    var redirectOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    router.allowPageChange = true;
    router[direction](redirectUrl, _utils2.default.extend({}, options, redirectOptions));
  }
  function redirectReject() {
    router.allowPageChange = true;
  }
  if (typeof redirect === 'function') {
    router.allowPageChange = false;
    var redirectUrl = redirect.call(router, route, redirectResolve, redirectReject);
    if (redirectUrl && typeof redirectUrl === 'string') {
      router.allowPageChange = true;
      return router[direction](redirectUrl, options);
    }
    return router;
  }
  return router[direction](redirect, options);
};

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _ssrWindow = __webpack_require__(2);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _class = __webpack_require__(7);

var _class2 = _interopRequireDefault(_class);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var openedModals = [];
var dialogsQueue = [];
function clearDialogsQueue() {
  if (dialogsQueue.length === 0) return;
  var dialog = dialogsQueue.shift();
  dialog.open();
}

var Modal = function (_Framework7Class) {
  _inherits(Modal, _Framework7Class);

  function Modal(app, params) {
    var _ret;

    _classCallCheck(this, Modal);

    var _this = _possibleConstructorReturn(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).call(this, params, [app]));

    var modal = _this;

    var defaults = {};

    // Extend defaults with modules params
    modal.useModulesParams(defaults);

    modal.params = _utils2.default.extend(defaults, params);

    // Install Modules
    modal.useModules();

    return _ret = _this, _possibleConstructorReturn(_this, _ret);
  }

  _createClass(Modal, [{
    key: 'onOpen',
    value: function onOpen() {
      var modal = this;
      openedModals.push(modal);
      (0, _dom2.default)('html').addClass('with-modal-' + modal.type.toLowerCase());
      modal.$el.trigger('modal:open ' + modal.type.toLowerCase() + ':open', modal);
      modal.emit('local::open modalOpen ' + modal.type + 'Open', modal);
    }
  }, {
    key: 'onOpened',
    value: function onOpened() {
      var modal = this;
      modal.$el.trigger('modal:opened ' + modal.type.toLowerCase() + ':opened', modal);
      modal.emit('local::opened modalOpened ' + modal.type + 'Opened', modal);
    }
  }, {
    key: 'onClose',
    value: function onClose() {
      var modal = this;
      if (!modal.type || !modal.$el) return;
      openedModals.splice(openedModals.indexOf(modal), 1);
      (0, _dom2.default)('html').removeClass('with-modal-' + modal.type.toLowerCase());
      modal.$el.trigger('modal:close ' + modal.type.toLowerCase() + ':close', modal);
      modal.emit('local::close modalClose ' + modal.type + 'Close', modal);
    }
  }, {
    key: 'onClosed',
    value: function onClosed() {
      var modal = this;
      if (!modal.type || !modal.$el) return;
      modal.$el.removeClass('modal-out');
      modal.$el.hide();
      modal.$el.trigger('modal:closed ' + modal.type.toLowerCase() + ':closed', modal);
      modal.emit('local::closed modalClosed ' + modal.type + 'Closed', modal);
    }
  }, {
    key: 'open',
    value: function open(animateModal) {
      var modal = this;
      var app = modal.app;
      var $el = modal.$el;
      var $backdropEl = modal.$backdropEl;
      var type = modal.type;
      var animate = true;
      if (typeof animateModal !== 'undefined') animate = animateModal;else if (typeof modal.params.animate !== 'undefined') {
        animate = modal.params.animate;
      }

      if (!$el || $el.hasClass('modal-in')) {
        return modal;
      }

      if (type === 'dialog' && app.params.modal.queueDialogs) {
        var pushToQueue = void 0;
        if ((0, _dom2.default)('.dialog.modal-in').length > 0) {
          pushToQueue = true;
        } else if (openedModals.length > 0) {
          openedModals.forEach(function (openedModal) {
            if (openedModal.type === 'dialog') pushToQueue = true;
          });
        }
        if (pushToQueue) {
          dialogsQueue.push(modal);
          return modal;
        }
      }

      var $modalParentEl = $el.parent();
      var wasInDom = $el.parents(_ssrWindow.document).length > 0;
      if (app.params.modal.moveToRoot && !$modalParentEl.is(app.root)) {
        app.root.append($el);
        modal.once(type + 'Closed', function () {
          if (wasInDom) {
            $modalParentEl.append($el);
          } else {
            $el.remove();
          }
        });
      }
      // Show Modal
      $el.show();

      // Set Dialog offset
      if (type === 'dialog') {
        $el.css({
          marginTop: -Math.round($el.outerHeight() / 2) + 'px'
        });
      }

      // Emit open
      /* eslint no-underscore-dangle: ["error", { "allow": ["_clientLeft"] }] */
      modal._clientLeft = $el[0].clientLeft;

      // Backdrop
      if ($backdropEl) {
        $backdropEl[animate ? 'removeClass' : 'addClass']('not-animated');
        $backdropEl.addClass('backdrop-in');
      }
      // Modal
      function transitionEnd() {
        if ($el.hasClass('modal-out')) {
          modal.onClosed();
        } else if ($el.hasClass('modal-in')) {
          modal.onOpened();
        }
      }
      if (animate) {
        $el.animationEnd(function () {
          transitionEnd();
        });
        $el.transitionEnd(function () {
          transitionEnd();
        });
        $el.removeClass('modal-out not-animated').addClass('modal-in');
        modal.onOpen();
      } else {
        $el.removeClass('modal-out').addClass('modal-in not-animated');
        modal.onOpen();
        modal.onOpened();
      }

      return modal;
    }
  }, {
    key: 'close',
    value: function close(animateModal) {
      var modal = this;
      var $el = modal.$el;
      var $backdropEl = modal.$backdropEl;

      var animate = true;
      if (typeof animateModal !== 'undefined') animate = animateModal;else if (typeof modal.params.animate !== 'undefined') {
        animate = modal.params.animate;
      }

      if (!$el || !$el.hasClass('modal-in')) {
        return modal;
      }

      // backdrop
      if ($backdropEl) {
        $backdropEl[animate ? 'removeClass' : 'addClass']('not-animated');
        $backdropEl.removeClass('backdrop-in');
      }

      // Modal
      $el[animate ? 'removeClass' : 'addClass']('not-animated');
      function transitionEnd() {
        if ($el.hasClass('modal-out')) {
          modal.onClosed();
        } else if ($el.hasClass('modal-in')) {
          modal.onOpened();
        }
      }
      if (animate) {
        $el.animationEnd(function () {
          transitionEnd();
        });
        $el.transitionEnd(function () {
          transitionEnd();
        });
        $el.removeClass('modal-in').addClass('modal-out');
        // Emit close
        modal.onClose();
      } else {
        $el.addClass('not-animated').removeClass('modal-in').addClass('modal-out');
        // Emit close
        modal.onClose();
        modal.onClosed();
      }

      if (modal.type === 'dialog') {
        clearDialogsQueue();
      }

      return modal;
    }
  }, {
    key: 'destroy',
    value: function destroy() {
      var modal = this;
      if (modal.destroyed) return;
      modal.emit('local::beforeDestroy modalBeforeDestroy ' + modal.type + 'BeforeDestroy', modal);
      if (modal.$el) {
        modal.$el.trigger('modal:beforedestroy ' + modal.type.toLowerCase() + ':beforedestroy', modal);
        if (modal.$el.length && modal.$el[0].f7Modal) {
          delete modal.$el[0].f7Modal;
        }
      }
      _utils2.default.deleteProps(modal);
      modal.destroyed = true;
    }
  }]);

  return Modal;
}(_class2.default);

exports.default = Modal;

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(15);


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _framework = __webpack_require__(16);

var _framework7EsmBundle = __webpack_require__(46);

var _framework7EsmBundle2 = _interopRequireDefault(_framework7EsmBundle);

var _routes = __webpack_require__(47);

var _routes2 = _interopRequireDefault(_routes);

function _interopRequireDefault(obj) {
	return obj && obj.__esModule ? obj : { default: obj };
}

window.$$ = _framework.Dom7;
window.app = app;

String.prototype.replaceAll = function (search, replace) {
	return this.split(search).join(replace);
};

window.app = new _framework7EsmBundle2.default({
	root: '#app',
	id: 'ru.extreme_look.extremelook',
	name: 'Extreme Look',
	theme: window.theme || 'auto',
	statusbar: {
		overlay: window.theme == "ios" ? true : 'auto'
	},
	dialog: {
		buttonCancel: 'Отмена',
		backdrop: true,
		closeByBackdropClick: true
	},
	methods: {
	    debug: function debug(){
	        $('#debug').text($('html').attr("class"));
            //window.webkit.messageHandlers.iOS.postMessage({action:'shareLink', link:'https://extreme-look.ru'});
            //window.webkit.messageHandlers.iOS.postMessage({action:'openLink', link:'https://extreme-look.ru'});
        },
        newAppMessage: function newAppMessage(debug = false) {
            if(window.navigator.userAgent === 'extreme-look-app' || debug){
                app.toast.create({
                    text: '<div style="display:flex;flex-direction:column;text-align:center;">\n' +
                        '  <div>\n' +
                        '    <img width="60px" align="center" src="https://extreme-look.ru/bitrix/templates/enext/fonts/icon_extreme/icon-ExtremeLook-for-app-in-popup.png" />\n' +
                        '  </div>\n' +
                        '  <div>\n' +
                        '    Мы обновили приложение! \n' +
                        '  </div>\n' +
                        '  <div style="text-align: left;">\n' +
                        '    Для доступа к расширенным функциям необходимо удалить старое приложение по <a onclick="window.Android.openMarket()" style="background: #6a881e; padding: 2px;border-radius: 3px;color:white;" href="#">ссылке</a>, и установить новую версию т.к. старая версия приложения в скором времени перестанет поддерживаться.\n' +
                        '  </div>\n' +
                        '  <div style="text-align: left;">\n' +
                        '    Новую версию приложения можете найти в Google Play по запросу "Extreme Look" с новым значком <img width="30px" align="center" src="https://extreme-look.ru/bitrix/templates/enext/fonts/icon_extreme/icon-ExtremeLook-for-app-in-popup.png" />\n' +
                        '  </div>\n' +
                        '</div>',
                    position: 'top',
                    closeButton: true,
                    closeButtonText: 'X',
                    closeButtonColor: 'white'
                }).open();
            }
        },
	    storis: function storis(text){
            $$(".stori").append($$('<iframe>').attr("frameborder", "no")
                .attr("src", "bitrix/components/altop/stories.vlad/templates/.default/" + text + ".php")
                .attr("width", "100%")
                .attr("height", "100%")
                .attr("id", "frame-storis")
                .text("Ваш браузер не поддерживает плавающие фреймы!")
            ).addClass('active-storis');
        },
        storisGoTo: function storisGoTo(uri){
            window.location.href = '/?' + MOBILE_GET + '=Y' + uri;
        },
	    goToHome: function goToHome(){
            window.location.href = '/?' + MOBILE_GET + '=Y';
            app.methods.newAppMessage();
        },
		goToStart: function goToStart(out = false) {
            app.methods.reloadLeftBar();
            app.methods.cartUpdate();
            if(out){
                app.toast.show({
                    text: '<div style="text-align: center !important;">Вы успешно вышли из профиля</div>',
                    position: 'top',
                    closeTimeout: 2000,
                    destroyOnClose: true
                });
                setTimeout(function () {
                    window.location.href = '/?' + MOBILE_GET + '=Y';
                }, 1000);
            }else{
                app.toast.show({
                    text: '<div style="text-align: center !important;">Запрос на удаление аккаунта успешно отправлен</div>',
                    position: 'center ',
                    closeTimeout: 2000,
                    destroyOnClose: true
                });
                setTimeout(function () {
                    window.location.href = '/?' + MOBILE_GET + '=Y';
                }, 1000);
            }
		},
        getVersionApp: function getVersionApp(get = false, iOS = false){
            if("Android" in window && "getMyVersion" in window.Android && typeof (window.Android.getMyVersion) === "function"){
                if(!get)
                    $('#version-app').text('ver.' + window.Android.getMyVersion());
                else return window.Android.getMyVersion();
            }else if("webkit" in window && iOS){
                if(!get)
                    $('#version-app').text('ver.' + iOS);
                else return iOS;
            } else return false;
        },
        updateMessage: function updateMessage(){
            var ver,
                datetoday = new Date;

            if("Android" in window && (!localStorage.notifiLastView || localStorage.notifiLastView < datetoday.getDate())) {
                var notificationFull = app.toast.create({
                    text: '<div class="tua-main-block">\n'+
                                '<div class="tua-first">' +
                                    '<div class="tua-left-tittle">' +
                                        '<i class="tua-icon-ex-logo"></i>' +
                                        '<div class="tua-tittle-text">Extreme Look</div>' +
                                    '</div>' +
                                    '<div class="tua-right-tittle">' +
                                        '<i class="tua-icon-notifi-logo"></i>' +
                                        '<div class="tua-tittle-text">Уведомление</div>' +
                                    '</div>' +
                                '</div>\n' +
                                '<div class="tua-second">Доступна<br />новая версия<br />приложения</div>' +
                                '<div class="tua-third">' +
                                    '<a class="open-other-link" href="javascript: void(0)" data-open="https://play.google.com/store/apps/details?id=ru.extreme_look_app.extremelook&hl=ru">' +
                                        '<div class="tua-button-update">' +
                                            '<div>ОБНОВИТЬ</div>' +
                                        '</div>' +
                                    '</a>' +
                                '</div>\n'+
                            '</div>',
                    position: 'center',
                    closeButton: false,
                    cssClass: 'toast-update-app',
                    closeTimeout: 4000
                });
                if (ver = app.methods.getVersionApp(true)) {
                    if (ver && (parseFloat(ver) < parseFloat('2.20'))) {
                        notificationFull.open();
                        localStorage.notifiLastView = datetoday.getDate();
                    }
                } else {
                    notificationFull.open();
                    localStorage.notifiLastView = datetoday.getDate();
                }
            }
        },
        reloadLeftBar: function reloadLeftBar(){
		    var data = { action: 'Y' };
		    data[MOBILE_GET] = 'Y';
		    app.request.get(SITE_TEMPLATE_PATH + 'ajax/leftBar.php', data, function (data) {
		        $$('.view-left').html(data);
		    });
        },
        loadSearchResult: function loadSearchResult(search){
		    var data = { search: search };
		    data[MOBILE_GET] = 'Y';
		    app.request.get(SITE_TEMPLATE_PATH + 'pages/search.php', data, function (data) {
		        $$('.search-content').html(data);
		    });
        },
		logOut: function logOut() {
			app.dialog.confirm('Подтвердите выход', function () {
				app.preloader.show();
				var data = { action: 'logout' };
				data[MOBILE_GET] = 'Y';
				app.request.json(SITE_TEMPLATE_PATH + 'ajax/account.php', data, function (data) {
					app.methods.goToStart(true);
				});
                app.preloader.hide();
                window.USER.authorized = false;
			});
		},
        delAc: function delAc() {
            app.dialog.confirm('Уверены что хотите удалить аккаунт и данные?', function () {
                app.preloader.show();
                var data = { action: 'delac' };
                app.request.json(SITE_TEMPLATE_PATH + 'ajax/account.php', data, function (data) {
                    app.methods.goToStart(false);
                });
                app.preloader.hide();
                window.USER.authorized = false;
            });
        },
        copyShare: function copyShare(label, urlShare) {
            if (window.platform == 'ios') {
                app.methods.iosSend('shareLink', urlShare);
                app.toast.show({
                    text: '<div style="text-align: center !important;">Ссылка на страницу скопирована</div>',
                    position: 'center',
                    closeTimeout: 1500,
                    destroyOnClose: true
                });
            }
            else if(window.Android != undefined)
                if(window.Android.copyTextLinkShare(label, urlShare))
                    app.toast.show({
                        text: '<div style="text-align: center !important;">Ссылка на страницу скопирована</div>',
                        position: 'center',
                        closeTimeout: 1500,
                        destroyOnClose: true
                    });
                else
                    app.toast.show({
                        text: '<div style="text-align: center !important;">Ошибка</div>',
                        position: 'center',
                        closeTimeout: 1500,
                        destroyOnClose: true
                    });
        },
        upAvatarUser: function upAvatarUser(){
            app.toast.show({
                text: '<div style="text-align: center !important;">Функция добавления фото ещё в разработке</div>',
                position: 'center',
                closeTimeout: 2000,
                destroyOnClose: true
            });
            //$('#personal_photo_input').click();
            window.Android.openFileGallery();
        },
		logIn: function logIn(username, password) {
			app.preloader.show();
			var data = { action: 'login', username: username, password: password };

			data[MOBILE_GET] = 'Y';

			app.request.json(SITE_TEMPLATE_PATH + 'ajax/account.php', data, function (data) {

				window.login = data;
				if (data.result) {
					app.toast.show({
						text: '<div style="text-align: center !important;">Успешная авторизация</div>',
						position: 'top',
						closeTimeout: 2000,
						destroyOnClose: true
					});
                    app.preloader.hide();
                    window.USER.authorized = true;
                    app.loginScreen.close(app.data.loginScreen,app.data.animate);

                    setTimeout(function () {
                        app.methods.goToHome();
                    }, 350);

                } else {
                    app.toast.show({
                        text: '<div style="text-align: center !important;">Неверный логин или пароль!</div>',
                        position: 'center',
                        closeTimeout: 2000,
                        destroyOnClose: true
                    });
                    app.preloader.hide();
                }
            });
		},
		stopVideos: function stopVideos() {
			(0, _framework.Dom7)('.ytb-video').each(function () {
				this.contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*');
			});
		},
		goToExternal: function goToExternal(url) {
			app.panel.left.close();
			app.preloader.show();
            //app.methods.cartUpdate();
            //_ssrWindow.window.open(url, target);
            //app.views.main.router.navigate(url, { reloadCurrent: true, ignoreCache: true });
            //app.views.main.loadPage(url);
            //document.location=url;
            app.preloader.hide();
		},
		catalogView: function catalogView(type, param) {
			var data = {
				param: param,
				type: type
			};
			data[MOBILE_GET] = 'Y';
			app.preloader.show();
			app.request.json(SITE_TEMPLATE_PATH + 'ajax/catalog.php', data, function (data) {
				app.methods.refreshPage();
			});
		},
		cartUpdate: function cartUpdate(data = {}, callback) {
			data[MOBILE_GET] = 'Y';

			app.request.json(SITE_TEMPLATE_PATH + 'ajax/basket.php', data, function (data) {
				window.cart = data.basket;
				var cartPage = (0, _framework.Dom7)('.page[data-path="/page-personal.cart/basket=Y/"]'),
                    delayPage = (0, _framework.Dom7)('.page[data-path="/page-personal.cart/delay=Y/"]'),
                    orderLink = cartPage.find('.order-link'),
                    fullPriceBlock = cartPage.find('#tp-basket > span'),
                    footerCardBadge = (0, _framework.Dom7)('.ex-app-icon > span'),
                    couponBlockPage = cartPage.find('#coupon-list-basket'),
                    coupLabel = cartPage.find('#ex-coupons-block'),
                    couponBlock,
                    giftBlock = cartPage.find('#gift-block'),
                    giftItems = giftBlock.find('#gift-items'),
                    totalEconomBlock = cartPage.find('#ex-total-econom-block'),
                    totabBasePrice = cartPage.find('#tbp-basket'),
                    totalEconomPrice = cartPage.find('#tbep-basket');

                footerCardBadge.html(cart.length);

                if(data.action == 'coupon' && !data.result){
                    app.toast.show({
                        text: '<div style="text-align: center !important;">Купон не найден</div>',
                        position: 'center',
                        closeTimeout: 2000,
                        destroyOnClose: true
                    });
                    cartPage.find('#name_coupon').val('');
                }
                else{
                    cartPage.find('#name_coupon').val('');
                }

                if(cart.basketD7.result) {
                    if(cart.basketD7.giftBasketCollection.length > 0 && $(giftBlock).length > 0){
                        BX.cleanNode(giftItems[0]);

                        var giftItemsHTML = BX.create('DIV', {});
                        for(var giftItem in cart.basketD7.giftBasketCollection){
                            BX.append(BX.create('DIV', {
                                attrs: {
                                    className: 'gift-block-item'
                                },
                                children: [
                                    BX.create('IMG', {
                                        attrs: {
                                            className: 'gift-block-item-image',
                                            src: cart.basketD7.giftBasketCollection[giftItem].PREVIEW_PICTURE.src,
                                            width: '50px'
                                        }
                                    }),
                                    BX.create('DIV', {
                                        attrs: {
                                            className: 'gift-block-item-name'
                                        },
                                        text: cart.basketD7.giftBasketCollection[giftItem].NAME
                                    }),
                                    BX.create('DIV', {
                                        attrs: {
                                            className: 'btn btn-buy gift-block-item-in-basket',
                                            id: cart.basketD7.giftBasketCollection[giftItem].ID
                                        },
                                        events: {
                                            click: BX.proxy(app.methods.addItemGiftToBasket, this)
                                        },
                                        text: 'В корзину'
                                    })
                                ]
                            }), giftItemsHTML)
                        }

                        BX.append(giftItemsHTML, giftItems[0]);
                        $(giftBlock).show('slow');
                    }
                    else {
                        $(giftBlock).hide('slow');
                    }
                    if(Object.keys(cart.basketD7.couponsBasketEX).length > 0) {
                        couponBlockPage.html('');
                        coupLabel.show();

                        for (var coupName in cart.basketD7.couponsBasketEX) {
                            if (cart.basketD7.couponsBasketEX[coupName].COUPON != '') {
                                var C_STATUS = cart.basketD7.couponsBasketEX[coupName].STATUS, C_TEXT_STATUS = '';
                                if (C_STATUS == 4) {
                                    C_STATUS = 'item-cell ex-coupon';
                                    C_TEXT_STATUS = ' применен'
                                }
                                if (C_STATUS == 2) {
                                    C_STATUS = 'item-cell ex-coupon err';
                                    C_TEXT_STATUS = ' активен и может быть использован'
                                }
                                couponBlock = BX.create('div', {
                                    attrs: {
                                        className: 'item-row'
                                    },
                                    children: [
                                        BX.create('div', {
                                            attrs: {
                                                className: C_STATUS
                                            },
                                            html: cart.basketD7.couponsBasketEX[coupName].COUPON + C_TEXT_STATUS,
                                        }),
                                        BX.create('div', {
                                            style: {'width': '42px'},
                                            dataset: {
                                                coup_name: cart.basketD7.couponsBasketEX[coupName].COUPON
                                            },
                                            attrs: {
                                                id: 'coup_del_butt',
                                                className: 'item-cell del-coup'
                                            },
                                            text: 'X'
                                        })
                                    ]
                                });
                                couponBlockPage.append(couponBlock);
                            }
                        }
                    } else {
                        couponBlockPage.html('');
                        coupLabel.hide();
                    }
                }

				if(cartPage.length >= 1) {
					if (cart.length > 0) {
						for (var ID in cart.basketD7.basketUser) {

                            if(cart.basketD7.basketUser[ID].EX_DISCAUNT)
                            {
                                cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] .item-subtitle #ex-new-price > span:last-child').html(cart.basketD7.basketUser[ID].NEW_PRICE_FORMAT);
                                cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] .item-subtitle #ex-old-price').css('height', 21+'px');
                                cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] .item-subtitle #ex-old-price > span').html(cart.basketD7.basketUser[ID].OLD_PRICE_FORMAT);
                                cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] #econom').html('Экономия: ' + cart.basketD7.basketUser[ID].PRICE_ECONOM_FORMAT);
                            }
                            else
                            {
                                cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] .item-subtitle #ex-old-price').css('height', 0);
                                cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] .item-subtitle #ex-new-price > span:last-child').html(cart.basketD7.basketUser[ID].PRICE_LABEL);
                                cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] #econom').html('');
                            }

                            cartPage.find('.cart-item[data-id="' + cart.basketD7.basketUser[ID].ID + '"] #quant-prise-ex').html('= ' + cart.basketD7.basketUser[ID].PRICE_QUANTITY_FORMAT);

						}
                        if ((cart.partner && !cart.newPartner) && !cart.passMin){
                            orderLink.addClass('disabled').html('<span style="font-size: 13px;">' + cart.price_partner_text + '</span>');
                            fullPriceBlock.html(cart.priceFormat);
                        }else{
                            orderLink.removeClass('disabled').html('<span>' + cart.price_order_text + '</span>');
                            fullPriceBlock.html(cart.priceFormat);
                            if(cart.totalEconom){
                                totalEconomBlock.show();
                                totabBasePrice.html(cart.basepriceFormat);
                                totalEconomPrice.html('Экономия: ' + cart.totalEconom);

                            }
                            else{
                                totalEconomBlock.hide();
                                totabBasePrice.html('');
                                totalEconomPrice.html('');
                            }
                        }
					} else {
						cartPage.find('.empty-cart').css({ display: 'block', opacity: 0 });
						(0, _framework.Dom7)('.order-toolbar, .cart-list, .coupon-fab').css('display', 'none');
						app.methods.pageVerticalize();
					}
					if(cart.newPartner && BX('cash_block')){
                        BX.adjust(BX('CASH_WRITE_OFF'), {text: 'Начислить: ' + cart.newPartnerCash.write});
                        BX.adjust(BX('ENROLL'), {text: 'Списать: ' + cart.newPartnerCash.enroll});
                    }
				}

                if(delayPage.length >= 1){
                    if(cart.lengthDelay > 0){
                        for (var ID in cart.basketD7.delayBasket) {
                            delayPage.find('.cart-item[data-id="' + cart.basketD7.delayBasket[ID].ID + '"] #quant-prise-ex').html('= ' + cart.basketD7.delayBasket[ID].PRICE_QUANTITY_FORMAT);
                        }
                    }else{
                        delayPage.find('.empty-delay').css({ display: 'block', opacity: 0 });
                        app.methods.pageVerticalize(delayPage);
                    }
                }

				if (callback != undefined) callback(data.result, data);
			}, function () {
				if (callback != undefined) callback(false);
			});
		},
        openGiftBlock: function openGiftBlock(giftItems){

            if($(giftItems).hasClass('open')){
                $(giftItems).hide('slow');
                $(giftItems).removeClass('open');
            }else{
                $(giftItems).show('slow');
                $(giftItems).addClass('open');
            }

        },
        addItemGiftToBasket: function addItemGiftToBasket(e){
            if($(e.target).attr('id') != undefined){
                app.methods.cartUpdate({
                    id: $(e.target).attr('id'),
                    action: 'add',
                    qty: 1
                }, function (result, data) {
                    window.location.assign("/?extreme-mobile=Y&page=personal/cart&basket=Y");
                });
            }
        },
		inCart: function inCart(productId) {
			return cart.items[productId] != undefined;
		},
		initPtr: function initPtr(goTo, currentPage) {
			currentPage = currentPage || (0, _framework.Dom7)('.page-current');

			var ptr = currentPage.find('.ptr-content');

			if (ptr.length !== 0) {
				if (app.ptr.get(ptr) === undefined) app.ptr.create();

				ptr.on('ptr:refresh', function () {
					app.ptr.done(ptr);

					if (goTo == undefined) {
						app.preloader.show();
						window.location.reload();
						return;
					}

					app.router.navigate(goTo, { reloadCurrent: true, ignoreCache: false });
				});
			}
		},
		refreshPage: function refreshPage() {
            app.views.main.router.navigate((0, _framework.Dom7)('.page-current').data('path'), { reloadCurrent: true, ignoreCache: true });
		},
		viewport: function viewport() {
			var e = window;
			var a = 'inner';
			if (!('innerWidth' in window)) {
				a = 'client';
				e = document.documentElement || document.body;
			}
			return { width: e[a + 'Width'], height: e[a + 'Height'] };
		},
		cityButton: function cityButton() {
			var url = '/page-citybuy/';
			if (window.geo.city == 0) {
				app.methods.citySelectManual('button', true, function () {
					app.router.navigate(url, { reloadCurrent: false, ignoreCache: false });
				});
				return;
			}

			app.router.navigate(url, { reloadCurrent: false, ignoreCache: false });
		},
		citySelectManual: function citySelectManual(whyManual, force, callback) {
			return; // Временное (нет) отключение
			if (window.geo.city != 0 && force != true) return;

			var sSelect = app.smartSelect.get(),
			    cityName;

			if (sSelect === undefined) {
				sSelect = app.smartSelect.create({
					el: '.smart-select-city',
					//pageBackLinkText: 'Назад',
					view: mainView,
					virtualList: true,
					pageTitle: 'Ручной выбор города',
					openIn: 'page',
					searchbar: true,
					searchbarPlaceholder: 'Поиск',
					on: {
						opened: function opened() {
							(0, _framework.Dom7)('.smart-select-page .link.back').html('<i class="fa fa-chevron-left"></i>');
						},
						close: function close() {
							app.methods.saveCity(sSelect.valueEl.innerText, callback);
						}
					}
				});
			}

			sSelect.open();
			/*
               dialog = app.dialog.create({
                    title: 'Ручной выбор города',
                    verticalButtons: true,
                    content: content,
                    buttons: [
                        {
                            text: 'Применить',
                            cssClass: 'text-align-center',
                            onClick: function(){
                                if( callback )
                                    callbac(cityName);
                            }
                        }
                    ]
               });
                dialog.open();
            */
		},
		citySelectAuto: function citySelectAuto(locateEnabled) {
			return; // like a manual
			if (window.geo.city != 0) return;

			navigator.geolocation.getCurrentPosition(function (pos) {
				window.geo.coords = pos.coords;
				window.geo.attempts = 0;

				var data = { lat: geo.coords.latitude, lon: geo.coords.longitude };
				data[MOBILE_GET] = 'Y';

				app.request.json(SITE_TEMPLATE_PATH + 'ajax/coordinates.php', data, function (response) {
					if (response.result) {
						app.dialog.create({
							text: 'Мы угадали?',
							title: 'Ваш город - ' + response.city,
							buttons: [{
								text: 'изменить',
								onClick: function onClick() {
									app.methods.citySelectManual('wrong', true);
								}
							}, {
								text: 'да',
								cssClass: 'dialog-button-bold',
								onClick: function onClick() {
									app.methods.saveCity(response.city);
								}
							}]
						}).open();
					} else {
						app.methods.citySelectManual('unknown');
					}
				});
			}, function (err) {
				if (err.message.toLowerCase().search('timeout') >= 0) {
					window.geo.attempts++;

					if (window.geo.attempts >= 2) app.methods.citySelectManual('timeout');else app.methods.citySelectAuto();

					return;
				}

				app.methods.citySelectManual('disabled');
			}, {
				//enableHighAccuracy: false,
				timeout: 20000,
				maximumAge: 0
			});
		},
		saveCity: function saveCity(cityName, callback) {
			var data = {};

			data[MOBILE_GET] = 'Y';
			data['city'] = cityName;

			window.geo.city = cityName;
			(0, _framework.Dom7)('.current-city').text(cityName);

			app.request.json(SITE_TEMPLATE_PATH + 'ajax/saveCity.php', data, function (data) {
				if (callback) callback();
			});
		},
		pageVerticalize: function pageVerticalize(page) {
			page = page || (0, _framework.Dom7)('.page.page-current');

			page.find('.verticalize').each(function () {
				var margin = (app.methods.viewport().height - (0, _framework.Dom7)(this).height()) / 2 - 60;
				var _this = (0, _framework.Dom7)(this);

				_this.css('margin-top', margin + 'px');

				setTimeout(function () {
					_this.animate({ opacity: 1 }, { duration: 400 });
				}, 300);
			});
		},
		onPageResize: function onPageResize() {
			var currentPage = (0, _framework.Dom7)('.page.page-current');

			app.methods.pageVerticalize(currentPage);

			switch (currentPage.data('name')) {
				case 'home':
					var slider = (0, _framework.Dom7)('iframe');

					if (slider.length <= 0) return;

					var height = slider.width() / 1.78;
					slider.animate({ height: height });
					break;
				case 'auth':

					break;
			}
		},
		pageActions: function pageActions(pageName, currentPage) {
			currentPage = currentPage || (0, _framework.Dom7)('.page.page-current');
			app.methods.pageVerticalize(currentPage);
			switch (pageName) {
				case 'home':
					if (navigator.permissions != undefined) {
						navigator.permissions.query({ name: 'geolocation' }).then(function (result) {
							if (result.state != 'denied') app.methods.citySelectAuto();else app.methods.citySelectManual('disabled');
						});
					}

					var slider = (0, _framework.Dom7)('iframe');

					if (slider.length <= 0) return;

					var height = slider.width() / 1.78;
					slider.animate({ height: height });
                break;
				case 'personal/cart':

                break;
                case 'stat-partner':
                    var u = 'https://cdn-ru.bitrix24.ru/b5123257/crm/form/loader_41.js';
                    var s = document.createElement('script');
                    s.async = true;
                    s.src = u + '?' + (Date.now()/180000|0);
                    var h = document.getElementsByTagName('script')[0];
                    h.parentNode.insertBefore(s,h);
                break;
                case 'test':
                    var elementOffers = currentPage.find('.product-item-detail-scu-container'),
                        catalogOffers = currentPage.find('.product-item-catalog-scu-container');

                    if(elementOffers.length > 0){
                        app.methods.pageElemWithOffer(true, elementOffers[0].dataset['idItem'], currentPage);
                    }

                    if(catalogOffers.length > 0){
                        if(catalogOffers.length > 1)
                        catalogOffers.forEach(item => { //Если на странице более одного товара с характеристикой перебираем их все для инициализации
                            app.methods.pageElemWithOffer(true, item.dataset['idItem'], currentPage, false, true);
                        })
                        else //Если один товар с характеристикой то передаём его ИД
                            app.methods.pageElemWithOffer(true, catalogOffers[0].dataset['idItem'], currentPage, false, true);
                    }
                break;
                case 'redirect':
                    var text = $('#redirecting-push').data('redirect');
                    if(window.Android != undefined)
                        window.Android.openOtherLink(text);
                    else app.methods.iosSend('openLink', text);
                    app.methods.goToHome();
                break;
				case 'catalog/element':
				    var elementOffers = currentPage.find('.product-item-detail-scu-container');
                    if(elementOffers.length > 0){
                        app.methods.pageElemWithOffer(true, elementOffers[0].dataset['idItem'], currentPage);
                    }
                    $("#accordion").accordion({
                        active: 0,
                        heightStyle: "content",
                        collapsible: true,
                        icons: {
                            "header": "ex-icon-arrow-up",
                            "activeHeader": "ex-icon-arrow-down"
                            }
                    });
                break;
				case 'catalog/section':
				    var catalogOffers = currentPage.find('.product-item-catalog-scu-container');
                    if(catalogOffers.length > 0){
                        if(catalogOffers.length > 1)
                            catalogOffers.forEach(item => { //Если на странице более одного товара с характеристикой перебираем их все для инициализации
                                app.methods.pageElemWithOffer(true, item.dataset['idItem'], currentPage, false, true);
                            })
                        else //Если один товар с характеристикой то передаём его ИД
                            app.methods.pageElemWithOffer(true, catalogOffers[0].dataset['idItem'], currentPage, false, true);
                    }

					(0, _framework.Dom7)('.basket-item[data-cart]').removeAttr('data-cart');
					(0, _framework.Dom7)('.product-buy-block input.qty').val(0);
					(0, _framework.Dom7)('.product-buy-block .minus').addClass('disabled');
					(0, _framework.Dom7)('.product-buy-block').each(function () {
						var block = (0, _framework.Dom7)(this);
						var itemId = block.data('id');
						var newVal = 1;

						if (cart.items[itemId] != undefined) {
							newVal = cart.items[itemId].QUANTITY;
							block.closest('.basket-item').attr('data-cart', cart.items[itemId].ID);
						}

						block.find('input.qty').val(newVal);

						if (newVal > 0) block.find('.minus').removeClass('disabled');

						block.removeClass('checking');
					});
                break;
			}
		},
		iosSend: function iosSend(action, message) {
			try {
			    if(typeof action === 'string' && typeof message === 'string') //Параметры должны быть строками!
                    window.webkit.messageHandlers.iOS.postMessage({action: action, link: message});
			} catch (err) {
				app.methods.appError(err);
			}
		},
		appError: function appError(text) {
			app.preloader.hide();
			app.dialog.alert(text);
		},
        addItemToBasket: function addItemToBasket(id, catalog, action, delay = false) {
            var _this = delay ? catalog ? $$('.page.page-current #button-add-to-cart-' + id) : $$('.page.page-current #delay-element') : catalog ? $$('.page.page-current #quantity-cart-catalog-' + id) : $$('.page.page-current #quantity-cart-element-' + id),
                cartItem = _this.closest('.basket-item'),
                itemQuantBlock = delay ? false : _this.closest('.basket-item-quantity'),
                quan = delay ? false : cartItem.find('.quan'),
                minVal = delay? false : _this.closest('.cart.basketQty').length > 0 ? 1 : 0,
                id = delay ? id : cartItem.data('id'),
                minus = delay ? false : cartItem.find('.minus'),
                clicked = $$('.page.page-current #button-add-to-cart-' + id),
                quanm = delay ? false : $$('.page.page-current #amount-m-' + id),
                quanp = delay ? false : $$('.page.page-current #amount-p-' + id),
                inpqty = delay ? false : catalog ? $$('.page.page-current #quantity-cart-catalog-' + id) : $$('.page.page-current #quantity-cart-element-' + id),
                offers = catalog ? $$('.page.page-current').find('.true-offer[data-id="' + id + '"]') : $$('.page.page-current').find('.offers-footer-element[data-id="' + id + '"]'), haveOffers = false, idOffer = false, offerParam = false,
                value = delay ? 1 : _this.val();

            if(offers.length > 0) {haveOffers = true; idOffer = id; }

            cartItem.addClass('disabled');
            app.methods.cartUpdate({
                id: id,
                action: action,
                qty: value
            }, function (result, data) {
                if ((0, _framework.Dom7)('.page-current').data('name').indexOf('catalog/') >= 0) {
                    (0, _framework.Dom7)('.page-current .basket-item').removeAttr('data-cart');

                    for (var id in cart.items) {
                        (0, _framework.Dom7)('.basket-item[data-id="' + id + '"]').attr('data-cart', cart.items[id].ID);
                    }
                }

                if(result && !delay){
                    if(clicked.hasClass('element-button'))
                        clicked.hide();
                    else
                        clicked.parent().hide();
                    itemQuantBlock.css('display', 'flex');
                    quanm.removeClass('quan').addClass('quan-on-basket');
                    quanp.removeClass('quan').addClass('quan-on-basket');
                    inpqty.removeClass('qty').addClass('qty-on-basket');
                    cartItem.attr('data-idbasket', result);
                    if(haveOffers){
                        if(catalog) {
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['onbasket'] = 1;
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['ondelay'] = 0;
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['quantityonbasket'] = _this.val();
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['idinbasket'] = result;
                            cartItem.find('#delay')[0].dataset['idbasket'] = '';
                        }
                        else{
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['onbasket'] = 1;
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['ondelay'] = 0;
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['quantityonbasket'] = _this.val();
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['idinbasket'] = result;
                            $(_this)[0].dataset['idbasket'] = '';
                        }
                    }
                }else if(result && delay){
                    if(haveOffers){
                        if(catalog){
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['onbasket'] = 0;
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['ondelay'] = 1;
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['quantityonbasket'] = _this.val();
                            $(offers).find('span[data-id-scu="' + idOffer + '"]')[0].dataset['idinbasket'] = result;
                            cartItem.find('#delay')[0].dataset['idbasket'] = result;
                        }else{
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['onbasket'] = 0;
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['ondelay'] = 1;
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['quantityonbasket'] = _this.val();
                            $(offers).parent().find('span[data-id-scu="' + idOffer + '"]')[0].dataset['idinbasket'] = result;
                            $(_this)[0].dataset['idbasket'] = result;
                        }
                    }else{
                        if(catalog)
                            cartItem.find('#delay')[0].dataset['idbasket'] = result;
                        else
                            $(_this)[0].dataset['idbasket'] = result;
                    }
                }
                if(!delay){
                    cartItem.removeClass('disabled');
                    _this.val(_this.val());
                    minus.removeClass('disabled');
                    minus.html('<span class="far fa-trash-alt"></span>');
                    if (parseInt(_this.val()) <= minVal) {
                        minus.addClass('disabled');
                    }
                }else{
                    cartItem.removeClass('disabled');
                }
            });
        },
        popupByVlad: function popupByVlad(openClose, itemID=false, contact=false, tittle=false, img=false, message=false){
            if(openClose) {
                $$('#popup-window-app').css('display', 'block');
                $$('#popup-window-overlay').css('display', 'block');
                $$('#popup-window-titlebar > span').text(tittle);
                $$('.img-sub-ex').html(img);
                $$('#popup-window-app .ex-sub-info > span').html(message);
                if(contact) {
                    $$('#form-subscribe-email').css('display', 'block');
                    $$('.popup-window-buttons > button').attr('id', 'btn-form-email-popup-sub');
                    $$('.popup-window-buttons > button').attr('data-item', itemID);
                }
                else
                    $$('.popup-window-buttons > button').attr('id', 'btn-close-popup-sub');
            }
            else{
                $$('#popup-window-app').css('display', 'none');
                $$('#popup-window-overlay').css('display', 'none');
                $$('#popup-window-titlebar > span').text('');
                $$('.img-sub-ex').html('');
                $$('#popup-window-app .ex-sub-info > span').html('');
                $$('#form-subscribe-email').css('display', 'none');
                $$('.popup-window-buttons > button').attr('id', '');
                $$('.popup-window-buttons > button').attr('data-item', '');
            }
        },
        popupSelectOffer: function popupSelectOffer(openClose, tittle=false, message=false) {
            if(openClose) {
                $$('#popup-window-offers-app').css('display', 'block');
                $$('#popup-window-offers-app').addClass('open');
                $$('#popup-window-offers-overlay').css('display', 'block');
                $$('#popup-window-offers-titlebar > span').text(tittle);
                $$('#popup-window-offers-app > #popup-window-offers-content > .popup-ex-offers-block').append($(message)[0]);
            }else{
                var listFromPopup = $$('#popup-window-offers-app > #popup-window-offers-content > .popup-ex-offers-block').children('ul')[0],
                    SKUlistFromPopupID = listFromPopup.dataset['prop'],
                    ItemIDFromPopup = listFromPopup.dataset['idItem'],
                    blockSKUOnItemPage = $('.page.page-current .product-item-catalog-scu-container div.product-item-detail-scu-list[data-id-item="' + ItemIDFromPopup + '"][data-prop="' + SKUlistFromPopupID + '"]')[0],
                    sItem = $$(message).parent('ul').find('li'),
                    currentPage = (0, _framework.Dom7)('.page.page-current'),
                    elementOffers = currentPage.find('#scu-container-' + ItemIDFromPopup + '.product-item-catalog-scu-container');
                
                if(!$$(message).hasClass('selected')) {
                    for(var i = 0; i < sItem.length; i++) {
                        if($$(sItem[i]).hasClass('selected'))
                            $$(sItem[i]).removeClass('selected');
                    }
                    $$(message).addClass('selected');
                }
                $(blockSKUOnItemPage).append(listFromPopup);

                $$('#popup-window-offers-app').css('display', 'none');
                $$('#popup-window-offers-app').removeClass('open');
                $$('#popup-window-offers-overlay').css('display', 'none');
                $$('#popup-window-offers-titlebar > span').text('');
                $$('#popup-window-offers-app .ex-sub-info > span').text('');

                app.methods.pageElemWithOffer(false, elementOffers[0].dataset['idItem'], currentPage, message, true);
            }
        },
        addSubscribe: function addSubscribe(idItem, idUser, contact){
            var data = {};
            if(!idUser && !contact) {
                app.methods.popupByVlad(
                    true,
                    idItem,
                    true,
                    'Сообщить о поступлении',
                    '<img width="40px" src="/bitrix/templates/enext/fonts/icon_extreme/subscribe/icon_1.png" />',
                    'Мы обязательно сообщим Вам,<br />когда в продаже появится выбранный Вами товар!'
                );
                $$('#button-section-subscribe-' + idItem).toggleClass('subscribed');
                $$('#button-item-subscribe-' + idItem).toggleClass('subscribed');
                $$('#button-section-subscribe-' + idItem + '> span').text('Подписка');
                $$('#button-item-subscribe-' + idItem + '> span').text('Подписка');
            }else{
                data['action'] = 'addSubscribe';
                data['itemId'] = idItem;
                data['userId'] = idUser;
                data['contact'] = contact;
                app.request.post(SITE_TEMPLATE_PATH + 'ajax/subscribe.php', data, function (data) {
                   app.methods.popupByVlad(
                       true,
                       false,
                       false,
                       'Сообщить о поступлении',
                       '<img width="40px" src="/bitrix/templates/enext/fonts/icon_extreme/subscribe/icon_2.png" />',
                       'Вы успешно подписались на уведомление о поступлении товара.<br />Вы получите уведомление когда товар поступит в продажу.'
                   );
                    $$('#button-section-subscribe-' + idItem).toggleClass('subscribed').attr('data-idsub', data['subId']);
                    $$('#button-item-subscribe-' + idItem).toggleClass('subscribed').attr('data-idsub', data['subId']);
                    $$('#button-section-subscribe-' + idItem + '> span').text('Подписка');
                    $$('#button-item-subscribe-' + idItem + '> span').text('Подписка');
                }, 'json');
            }
        },
        unSubscribe: function unSubscribe(idSub, idItem) {
            var data = {};
            data['action'] = 'unSubscribe';
            data['itemId'] = idItem;
            data['idSub'] = idSub;
            app.request.post(SITE_TEMPLATE_PATH + 'ajax/subscribe.php', data, function (data) {
                app.methods.popupByVlad(
                    true,
                    false,
                    false,
                    'Отписка от товара',
                    '<img width="40px" src="/bitrix/templates/enext/fonts/icon_extreme/subscribe/icon_2.png" />',
                    'Вы успешно отписались от товара.'
                );
                $$('#button-section-subscribe-' + idItem).toggleClass('subscribed').attr('data-idsub', '');
                $$('#button-item-subscribe-' + idItem).toggleClass('subscribed').attr('data-idsub', '');
                $$('#button-section-subscribe-' + idItem + '> span').text('Подписаться');
                $$('#button-item-subscribe-' + idItem + '> span').text('Подписаться');
            });
        },
        offerSelect: function offerSelect(li, catalog = false, popup = false){
            var sItem = $$(li).parent('ul').find('li'),
                currentPage = (0, _framework.Dom7)('.page.page-current'),
                elementOffers = currentPage.find('.product-item-detail-scu-container');
            if(catalog){
                if(popup) {
                    app.methods.popupSelectOffer(false, false, $$(li));
                }
                else {
                    app.methods.popupSelectOffer(true, $$(li).parent('ul')[0].dataset['name'], $$(li).parent('ul'));
                }
            }else{
                if(!$$(li).hasClass('selected')) {
                    for (var i = 0; i < sItem.length; i++) {
                        if ($$(sItem[i]).hasClass('selected'))
                            $$(sItem[i]).removeClass('selected');
                    }
                    $$(li).addClass('selected');
                    app.methods.pageElemWithOffer(false, elementOffers[0].dataset['idItem'], currentPage, li)
                }
            }
        },
        pageElemWithOffer: function pageElemWithOffer(init, idElem, currentPage, li = false, catalog = false) {
            var pageSkuContainer = currentPage.find('#scu-container-' + idElem),
                pageCurrListOff = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span'),
                pageCurrListOffParam = pageSkuContainer.find('.product-item-detail-scu-item-list[data-entity="sku-line-list"]'),
                arrParam = '', sArrParam = '', tArrParam = '', dataVal = '',
                filterItemsSelected = '', filterItemsSelectedArr = [], arrParamsSelect = [], difference = [], i = 0, searchBuy = false, cashParam = '', assembSecondParam = '', searchSecond = false;

            if(init){//При инициализации страницы
                if(pageCurrListOffParam.length == 3){ //Если три параметра
                    arrParam = $(pageCurrListOffParam[0]).children();
                    for(i = 0; i < arrParam.length; i++){
                        if($(arrParam[i]).hasClass('selected')) { //Выбранный элемент
                            //***Сборка принадлежащих подхарактеристик к выбранной характеристики НАЧАЛО***//
                            filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"]');
                            dataVal = arrParam[i].dataset['treevalue'];

                            //***Cборка второго параметра НАЧАЛО***//
                            filterItemsSelected.forEach(item => {//Собираем массив из отсортированных элементов которые должны находится в выбранной характеристике
                                filterItemsSelectedArr.push(item.dataset['propSecond']);
                            });
                            [...$(pageCurrListOffParam[1]).children()].forEach(itemPar => {//Собираем массив из характеристик
                                arrParamsSelect.push(itemPar.dataset['treevalue']); //Собираем второй параметр
                            });
                            difference = arrParamsSelect.filter(x => !filterItemsSelectedArr.includes(x)); //Вычитаем один массив из другого чтобы увидеть лишний (не используемый в этой характеристике)
                            difference.forEach(param => {
                                $(pageCurrListOffParam[1]).find('li[data-treevalue="' + param + '"]').hide();//Отключаем неиспользуемые подхарактеристики в характеристике
                            });
                            //***Cборка второго параметра КОНЕЦ***//

                            //***Cборка третьего параметра НАЧАЛО***//
                            filterItemsSelected.forEach(item => {//Собираем массив из отсортированных элементов которые должны находится в выбранной характеристике
                                filterItemsSelectedArr.push(item.dataset['propThird']); //Собираем третий параметр
                            });
                            [...$(pageCurrListOffParam[2]).children()].forEach(itemPar => {//Собираем массив из характеристик
                                arrParamsSelect.push(itemPar.dataset['treevalue']);
                            });
                            difference = arrParamsSelect.filter(x => !filterItemsSelectedArr.includes(x)); //Вычитаем один массив из другого чтобы увидеть лишний (не используемый в этой характеристике)
                            difference.forEach(param => {
                                $(pageCurrListOffParam[2]).find('li[data-treevalue="' + param + '"]').hide();//Отключаем неиспользуемые подхарактеристики в характеристике
                            });
                            //***Cборка третьего параметра КОНЕЦ***//
                            //***Сборка принадлежащих подхарактеристик к выбранной характеристики КОНЕЦ***//

                            //***Проверка есть ли доступные товары в этой характеристики НАЧАЛО***//
                            filterItemsSelected.forEach(item => {
                                if(cashParam != item.dataset['propSecond']){//Определяем есть ли во второй характеристике доступные товары чтобы пометить его активным
                                    cashParam = item.dataset['propSecond'];//На каждой итерации запоминаем если параметры не сходятся (значит цикл перешёл на след характеристику)
                                    searchSecond = false;//Флаг поиска доступного товара
                                }

                                if(item.dataset['canBuy'] > 0) { //Нашли первый сразу ставим флаг активности характеристики
                                    if(!searchSecond)
                                        searchSecond = true;
                                    searchBuy = true;
                                }
                                else{
                                    if(!searchSecond || cashParam != item.dataset['propSecond']) $(pageCurrListOffParam[1]).find('li[data-treevalue="' + cashParam + '"]').addClass('notallowed');
                                    $(pageCurrListOffParam[2]).find('li[data-treevalue="' + item.dataset['propThird'] + '"]').addClass('notallowed');
                                }
                            });
                            if(!searchBuy) $(arrParam[i]).addClass('notallowed');
                            searchBuy = false;
                            //***Проверка есть ли доступные товары в этой характеристики КОНЕЦ***//
                        }
                        else{//Остальные элементы
                            //***Проверка есть ли доступные товары в этой характеристики НАЧАЛО***//
                            filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"]');
                            dataVal = arrParam[i].dataset['treevalue'];
                            filterItemsSelected.forEach(item => {
                                if(item.dataset['canBuy'] > 0) {
                                    searchBuy = true;
                                }
                            });
                            if(!searchBuy) $(arrParam[i]).addClass('notallowed');
                            searchBuy = false;
                            //***Проверка есть ли доступные товары в этой характеристики КОНЕЦ***//
                        }
                    }
                }else if(pageCurrListOffParam.length == 2){ //Если два параметра
                    arrParam = $(pageCurrListOffParam[0]).children();
                    for(i = 0; i < arrParam.length; i++){
                        if($(arrParam[i]).hasClass('selected')){ //Выбранный элемент
                            //***Сборка принадлежащих подхарактеристик к выбранной характеристики НАЧАЛО***//
                            filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"]');
                            dataVal = arrParam[i].dataset['treevalue'];

                            filterItemsSelected.forEach(item => {//Собираем массив из отсортированных элементов которые должны находится в выбранной характеристике
                                filterItemsSelectedArr.push(item.dataset['propSecond']);
                            });
                            [...$(pageCurrListOffParam[1]).children()].forEach(itemPar => {//Собираем массив из характеристик
                                arrParamsSelect.push(itemPar.dataset['treevalue']);
                            });
                            difference = arrParamsSelect.filter(x => !filterItemsSelectedArr.includes(x)); //Вычитаем один массив из другого чтобы увидеть лишний (не используемый в этой характеристике)
                            difference.forEach(param => {
                                $(pageCurrListOffParam[1]).find('li[data-treevalue="' + param + '"]').hide();//Отключаем неиспользуемые подхарактеристики в характеристике
                            });
                            //***Сборка принадлежащих подхарактеристик к выбранной характеристики КОНЕЦ***//
                            //***Проверка есть ли доступные товары в этой характеристики НАЧАЛО***//
                            filterItemsSelected.forEach(item => {
                                if(item.dataset['canBuy'] > 0) { searchBuy = true; } //Нашли первый сразу ставим флаг активности характеристики
                                else{ $(pageCurrListOffParam[1]).find('li[data-treevalue="' + item.dataset['propSecond'] + '"]').addClass('notallowed'); }
                            });
                            if(!searchBuy) $(arrParam[i]).addClass('notallowed');
                            searchBuy = false;
                            //***Проверка есть ли доступные товары в этой характеристики КОНЕЦ***//
                        }
                        else{ //Остальные элементы
                            //***Проверка есть ли доступные товары в этой характеристики НАЧАЛО***//
                            filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"]');
                            dataVal = arrParam[i].dataset['treevalue'];
                            filterItemsSelected.forEach(item => {
                                if(item.dataset['canBuy'] > 0) { searchBuy = true;}
                            });
                            if(!searchBuy) $(arrParam[i]).addClass('notallowed');
                            searchBuy = false;
                            //***Проверка есть ли доступные товары в этой характеристики КОНЕЦ***//
                        }
                    }
                }else if(pageCurrListOffParam.length == 1){ //Если один параметр
                    arrParam = $(pageCurrListOffParam[0]).children();
                    for(i = 0; i < arrParam.length; i++) {
                        filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"]');
                        filterItemsSelected.forEach(item => {
                            if (item.dataset['canBuy'] > 0) searchBuy = true;
                        });
                        if (!searchBuy) $(arrParam[i]).addClass('notallowed');
                        searchBuy = false;
                    }
                }
            }else{//При выборе характеристик на инициализированной странице
                if(pageCurrListOffParam.length == 3){ //Если три параметра в торговом предложении
                    if(pageCurrListOffParam[0].dataset['prop'] == $$(li).parent('ul')[0].dataset['prop']) { //Определяем по какому параметру щёлкнул пользователь (если по первому)
                        arrParam = $(pageCurrListOffParam[0]).children();
                        for(i = 0; i < arrParam.length; i++){
                            if($(arrParam[i]).hasClass('selected')){ //Выбранный элемент
                                filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"]');
                                dataVal = arrParam[i].dataset['treevalue'];
                                //***Сборка принадлежащих подхарактеристик к выбранной первой характеристики НАЧАЛО***//
                                filterItemsSelected.forEach(item => {//Собираем массив из отсортированных элементов которые должны находится в выбранной характеристике
                                    filterItemsSelectedArr.push(item.dataset['propSecond']);
                                });
                                [...$(pageCurrListOffParam[1]).children()].forEach(itemPar => {//Собираем массив из характеристик
                                    arrParamsSelect.push(itemPar.dataset['treevalue']);
                                    $(itemPar).show().removeClass('notallowed').removeClass('selected'); //Заодно показываем все чтобы далее отключить только неиспользуемые
                                });
                                difference = arrParamsSelect.filter(x => !filterItemsSelectedArr.includes(x)); //Вычитаем один массив из другого чтобы увидеть лишний (не используемый в этой характеристике)
                                difference.forEach(param => {
                                    $(pageCurrListOffParam[1]).find('li[data-treevalue="' + param + '"]').hide();//Отключаем неиспользуемые подхарактеристики во второй характеристике
                                });
                                //***Сборка принадлежащих подхарактеристик к выбранной первой характеристики КОНЕЦ***//

                                //***Проверка есть ли доступные товары в этой (второй) характеристике НАЧАЛО***//
                                filterItemsSelected.forEach(item => {
                                    if(cashParam != item.dataset['propSecond']) {//Определяем есть ли во второй характеристике доступные товары чтобы пометить его активным
                                        cashParam = item.dataset['propSecond']; //На каждой итерации запоминаем если параметры не сходятся (значит цикл перешёл на след характеристику)
                                        searchSecond = false; //Флаг поиска доступного товара
                                    }
                                    if(item.dataset['canBuy'] > 0) //Нашли первый сразу ставим флаг активности характеристики и выбераем его его
                                    {
                                        if(!searchSecond)
                                            searchSecond = true; //Если товар доступен ставим флаг что нашли
                                        if(!searchBuy)
                                            $(pageCurrListOffParam[1]).find('li[data-treevalue="' + item.dataset['propSecond'] + '"]').addClass('selected');
                                        searchBuy = true;
                                    }
                                    else
                                        if(!searchSecond || cashParam != item.dataset['propSecond']) $(pageCurrListOffParam[1]).find('li[data-treevalue="' + cashParam + '"]').addClass('notallowed');
                                });
                                if(!searchBuy){ //Если доступных товаров не найдено ставим активность на первые
                                    $(pageCurrListOffParam[1]).find('li[data-treevalue="' + filterItemsSelected[0].dataset['propSecond'] + '"]').addClass('selected');
                                }
                                searchBuy = false;
                                //***Проверка есть ли доступные товары в этой (второй) характеристике КОНЕЦ***//

                                filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"][data-prop-second="' + $(pageCurrListOffParam[1]).find('li.selected')[0].dataset['treevalue'] + '"]'); //Отфильтровываем по второму автоматом выбранному параметру для дальнейшего отсеивания третьего параметра

                                //***Сборка принадлежащих подхарактеристик к выбранной характеристики НАЧАЛО***//
                                filterItemsSelected.forEach(item => {//Собираем массив из отсортированных элементов которые должны находится в выбранной характеристике
                                    filterItemsSelectedArr.push(item.dataset['propThird']);
                                });
                                [...$(pageCurrListOffParam[2]).children()].forEach(itemPar => {//Собираем массив из характеристик
                                    arrParamsSelect.push(itemPar.dataset['treevalue']);
                                    $(itemPar).show().removeClass('notallowed').removeClass('selected'); //Заодно показываем все чтобы далее отключить только неиспользуемые
                                });
                                difference = arrParamsSelect.filter(x => !filterItemsSelectedArr.includes(x)); //Вычитаем один массив из другого чтобы увидеть лишний (не используемый в этой характеристике)
                                difference.forEach(param => {
                                    $(pageCurrListOffParam[2]).find('li[data-treevalue="' + param + '"]').hide();//Отключаем неиспользуемые подхарактеристики в третьей характеристике
                                });
                                //***Сборка принадлежащих подхарактеристик к выбранной характеристики КОНЕЦ***//

                                //***Проверка есть ли доступные товары в этой характеристики НАЧАЛО***//
                                filterItemsSelected.forEach(item => {
                                    if(item.dataset['canBuy'] > 0) //Нашли первый сразу ставим флаг активности характеристики и выбераем его его
                                    {
                                        if(!searchBuy)
                                            $(pageCurrListOffParam[2]).find('li[data-treevalue="' + item.dataset['propThird'] + '"]').addClass('selected');
                                        searchBuy = true;
                                    }
                                    else
                                        $(pageCurrListOffParam[2]).find('li[data-treevalue="' + item.dataset['propThird'] + '"]').addClass('notallowed');
                                });
                                if(!searchBuy){ //Если доступных товаров не найдено ставим активность на первые
                                    $(pageCurrListOffParam[2]).find('li[data-treevalue="' + filterItemsSelected[0].dataset['propThird'] + '"]').addClass('selected');
                                }
                                searchBuy = false;
                                //***Проверка есть ли доступные товары в этой характеристики КОНЕЦ***//

                                //***Сразу подтягиваем инфу автоматически выбранной третьей характеристики НАЧАЛО***//
                                arrParam = $(pageCurrListOffParam[0]).find('li.selected')[0].dataset['treevalue'];
                                sArrParam = $(pageCurrListOffParam[1]).find('li.selected')[0].dataset['treevalue'];
                                tArrParam = $(pageCurrListOffParam[2]).find('li.selected')[0].dataset['treevalue'];
                                filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam + '"][data-prop-second="' + sArrParam + '"][data-prop-third="' + tArrParam + '"]');
                                app.methods.updateFooterOffer(app.methods.objectOfferAssembly(currentPage, filterItemsSelected, catalog, idElem), catalog, idElem);
                                //***Сразу подтягиваем инфу автоматически выбранной третьей характеристики КОНЕЦ***//
                            }
                        }
                    }else if(pageCurrListOffParam[1].dataset['prop'] == $$(li).parent('ul')[0].dataset['prop']){//Если по второму
                        sArrParam = $(pageCurrListOffParam[0]).find('li.selected')[0].dataset['treevalue'];
                        arrParam = $(pageCurrListOffParam[1]).children();

                        for(i = 0; i < arrParam.length; i++){
                            if($(arrParam[i]).hasClass('selected')){ //Выбранный элемент
                                //***Сборка принадлежащих подхарактеристик к выбранной характеристики НАЧАЛО***//
                                filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + sArrParam + '"][data-prop-second="' + arrParam[i].dataset['treevalue'] + '"]');
                                dataVal = arrParam[i].dataset['treevalue'];

                                filterItemsSelected.forEach(item => {//Собираем массив из отсортированных элементов которые должны находится в выбранной характеристике
                                    filterItemsSelectedArr.push(item.dataset['propThird']);
                                });
                                [...$(pageCurrListOffParam[2]).children()].forEach(itemPar => {//Собираем массив из характеристик
                                    arrParamsSelect.push(itemPar.dataset['treevalue']);
                                    $(itemPar).show().removeClass('notallowed').removeClass('selected'); //Заодно показываем все чтобы далее отключить только неиспользуемые
                                });
                                difference = arrParamsSelect.filter(x => !filterItemsSelectedArr.includes(x)); //Вычитаем один массив из другого чтобы увидеть лишний (не используемый в этой характеристике)
                                difference.forEach(param => {
                                    $(pageCurrListOffParam[2]).find('li[data-treevalue="' + param + '"]').hide();//Отключаем неиспользуемые подхарактеристики в характеристике
                                });
                                //***Сборка принадлежащих подхарактеристик к выбранной характеристики КОНЕЦ***//
                                //***Проверка есть ли доступные товары в этой характеристики НАЧАЛО***//
                                filterItemsSelected.forEach(item => {
                                    //Отключаем класс чтобы выстроить заного
                                    if(item.dataset['canBuy'] > 0) //Нашли первый сразу ставим флаг активности характеристики и выбераем его его
                                    {
                                        if(!searchBuy) $(pageCurrListOffParam[2]).find('li[data-treevalue="' + item.dataset['propThird'] + '"]').addClass('selected');
                                        searchBuy = true;
                                    }
                                    else
                                        $(pageCurrListOffParam[2]).find('li[data-treevalue="' + item.dataset['propThird'] + '"]').addClass('notallowed');
                                });
                                if(!searchBuy)
                                    $(pageCurrListOffParam[2]).find('li[data-treevalue="' + filterItemsSelected[0].dataset['propThird'] + '"]').addClass('selected');
                                searchBuy = false;
                                //***Проверка есть ли доступные товары в этой характеристики КОНЕЦ***//
                                //***Сразу подтягиваем инфу автоматически выбранной третьей характеристики НАЧАЛО***//
                                arrParam = $(pageCurrListOffParam[0]).find('li.selected')[0].dataset['treevalue'];
                                sArrParam = $(pageCurrListOffParam[1]).find('li.selected')[0].dataset['treevalue'];
                                tArrParam = $(pageCurrListOffParam[2]).find('li.selected')[0].dataset['treevalue'];
                                filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam + '"][data-prop-second="' + sArrParam + '"][data-prop-third="' + tArrParam + '"]');
                                app.methods.updateFooterOffer(app.methods.objectOfferAssembly(currentPage, filterItemsSelected, catalog, idElem), catalog, idElem);
                                //***Сразу подтягиваем инфу автоматически выбранной третьей характеристики КОНЕЦ***//
                            }
                        }
                    }else{//Если по третьему
                        arrParam = $(pageCurrListOffParam[0]).find('li.selected')[0].dataset['treevalue'];
                        sArrParam = $(pageCurrListOffParam[1]).find('li.selected')[0].dataset['treevalue'];
                        tArrParam = $(pageCurrListOffParam[2]).find('li.selected')[0].dataset['treevalue'];
                        filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam + '"][data-prop-second="' + sArrParam + '"][data-prop-third="' + tArrParam + '"]');
                        app.methods.updateFooterOffer(app.methods.objectOfferAssembly(currentPage, filterItemsSelected, catalog, idElem), catalog, idElem);
                    }
                }else if(pageCurrListOffParam.length == 2){ //Если два параметра
                    if(pageCurrListOffParam[0].dataset['prop'] == $$(li).parent('ul')[0].dataset['prop']){ //Определяем по какому параметру щёлкнул пользователь (если по первому)
                        arrParam = $(pageCurrListOffParam[0]).children();
                        for(i = 0; i < arrParam.length; i++){
                            if($(arrParam[i]).hasClass('selected')){ //Выбранный элемент
                                //***Сборка принадлежащих подхарактеристик к выбранной характеристики НАЧАЛО***//
                                filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam[i].dataset['treevalue'] + '"]');
                                dataVal = arrParam[i].dataset['treevalue'];

                                filterItemsSelected.forEach(item => {//Собираем массив из отсортированных элементов которые должны находится в выбранной характеристике
                                    $(pageCurrListOffParam[1]).find('li[data-treevalue="' + item.dataset['propSecond'] + '"]').removeClass('notallowed').removeClass('selected');
                                    filterItemsSelectedArr.push(item.dataset['propSecond']);
                                });
                                [...$(pageCurrListOffParam[1]).children()].forEach(itemPar => {//Собираем массив из характеристик
                                    arrParamsSelect.push(itemPar.dataset['treevalue']);
                                    $(itemPar).show(); //Заодно показываем все чтобы далее отключить только неиспользуемые
                                });
                                difference = arrParamsSelect.filter(x => !filterItemsSelectedArr.includes(x)); //Вычитаем один массив из другого чтобы увидеть лишний (не используемый в этой характеристике)
                                difference.forEach(param => {
                                    $(pageCurrListOffParam[1]).find('li[data-treevalue="' + param + '"]').hide();//Отключаем неиспользуемые подхарактеристики в характеристике
                                });
                                //***Сборка принадлежащих подхарактеристик к выбранной характеристики КОНЕЦ***//
                                //***Проверка есть ли доступные товары в этой характеристики НАЧАЛО***//
                                filterItemsSelected.forEach(item => {
                                    if(item.dataset['canBuy'] > 0) //Нашли первый сразу ставим флаг активности характеристики и выбераем его его
                                    {
                                        if(!searchBuy) $(pageCurrListOffParam[1]).find('li[data-treevalue="' + item.dataset['propSecond'] + '"]').addClass('selected');
                                        searchBuy = true;
                                    }
                                    else $(pageCurrListOffParam[1]).find('li[data-treevalue="' + item.dataset['propSecond'] + '"]').addClass('notallowed');
                                });
                                //if(!searchBuy) $(arrParam[i]).addClass('notallowed');
                                searchBuy = false;
                                //***Проверка есть ли доступные товары в этой характеристики КОНЕЦ***//
                                //***Сразу подтягиваем инфу автоматически выбранной третьей характеристики НАЧАЛО***//
                                arrParam = $(pageCurrListOffParam[0]).find('li.selected')[0].dataset['treevalue'];
                                sArrParam = $(pageCurrListOffParam[1]).find('li.selected')[0].dataset['treevalue'];
                                filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam + '"][data-prop-second="' + sArrParam + '"]');
                                app.methods.updateFooterOffer(app.methods.objectOfferAssembly(currentPage, filterItemsSelected, catalog, idElem), catalog, idElem);
                                //***Сразу подтягиваем инфу автоматически выбранной третьей характеристики КОНЕЦ***//
                            }
                        }
                    }
                    else{ //Если по второму
                        arrParam = $(pageCurrListOffParam[0]).find('li.selected')[0].dataset['treevalue'];
                        sArrParam = $(pageCurrListOffParam[1]).find('li.selected')[0].dataset['treevalue'];
                        filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam + '"][data-prop-second="' + sArrParam + '"]');
                        app.methods.updateFooterOffer(app.methods.objectOfferAssembly(currentPage, filterItemsSelected, catalog, idElem), catalog, idElem);
                    }
                }else if(pageCurrListOffParam.length == 1){ //Если один параметр
                    arrParam = $(pageCurrListOffParam[0]).find('li.selected')[0].dataset['treevalue'];
                    filterItemsSelected = pageSkuContainer.find('#hidden-scu-container-' + idElem + ' > span[data-prop-first="' + arrParam + '"]');
                    app.methods.updateFooterOffer(app.methods.objectOfferAssembly(currentPage, filterItemsSelected, catalog, idElem), catalog, idElem);
                }
            }
        },
        objectOfferAssembly: function objectOfferAssembly(currentPage, filterItemsSelected, catalog = false, idItem = 0){ //Сборка объекта характеристики для вывода на странице
            if(filterItemsSelected.length > 0){
                var objectOffers = {
                    'exOfferCanBuy'   : filterItemsSelected[0].dataset['canBuy'],
                    'exOfferPrice'    : filterItemsSelected[0].dataset['price'],
                    'exOfferBasePrice': filterItemsSelected[0].dataset['baseprice'],
                    'exOfferDiskont'  : filterItemsSelected[0].dataset['diskont'],
                    'exOfferPercent'  : filterItemsSelected[0].dataset['percent'],
                    'exOfferQuantity' : filterItemsSelected[0].dataset['quantity'],
                    'exOfferIdScu'    : filterItemsSelected[0].dataset['idScu'],
                    'exOfferOnBasket' : filterItemsSelected[0].dataset['onbasket'],
                    'exOfferOnDelay'  : filterItemsSelected[0].dataset['ondelay'],
                    'exOfferQuantBask': filterItemsSelected[0].dataset['quantityonbasket'],
                    'exOfferIdOnBasket' : filterItemsSelected[0].dataset['idinbasket'],
                    'exOfferPlanetDate' : filterItemsSelected[0].dataset['planetdate'],
                    'exOfferNoImage'    : filterItemsSelected[0].dataset['noimage']
                }
                if(catalog){
                    objectOffers['exOfferItemCatalogBlock'] = currentPage.find('.product-card#block-catalog-card-offer-' + idItem);
                }else{
                    objectOffers['exOfferFooter'] = currentPage.find('.offers-footer-element')[0]
                }

                return objectOffers;
            }
            else{
                app.toast.show({
                    text: '<div style="text-align: center !important;">Ошибка</div>',
                    position: 'center',
                    closeTimeout: 2000,
                    destroyOnClose: true
                });
                return false
            }

        },
        getQuantInfo: function getQuantInfo(action, quant){
            var i = 0, resQuantBlock = '', messageQuant = '', numberActivePr = 0;

            if(quant >= 1 && quant < 6){
                numberActivePr = 1;
                messageQuant = 'Очень мало';
            }else if(quant >= 6 && quant < 21){
                numberActivePr = 2;
                messageQuant = 'Мало';
            }else if(quant >= 21 && quant < 51){
                numberActivePr = 3;
                messageQuant = 'Достаточно';
            }else if(quant >= 51 && quant < 101){
                numberActivePr = 4;
                messageQuant = 'Много';
            }else if(quant >= 101){
                numberActivePr = 5;
                messageQuant = 'Очень много';
            }else{
                messageQuant = 'Нет в наличии';
            }

            resQuantBlock =
                BX.create('div', {
                    attrs: {
                        className: 'product-item-detail-quantity-val'
                    },
                    children:[
                        BX.create('div', {
                            attrs: {
                                className: 'own-progress'
                            }
                        }),
                        BX.create('span', {
                            text: messageQuant
                        })
                    ]
                });

                for(i = 1; i <= 5; i++){
                    if(numberActivePr >= i)
                        $(resQuantBlock).find('.own-progress')[0].appendChild(
                            BX.create('div', {
                                attrs: {
                                    className: 'own-pr active'
                                },
                                children:[
                                    BX.create('span')
                                ]
                            })
                        );
                    else
                        $(resQuantBlock).find('.own-progress')[0].appendChild(
                            BX.create('div', {
                                attrs: {
                                    className: 'own-pr'
                                },
                                children:[
                                    BX.create('span')
                                ]
                            })
                        );
                }
            return resQuantBlock;
        },
        updateFooterOffer: function updateFooterOffer(objectOffers, catalog = false, idItem = 0){
            var resQuantBlock='';
            resQuantBlock = app.methods.getQuantInfo('getQuant', objectOffers.exOfferQuantity);

            if(catalog){
                var blockItemCatalog = $(objectOffers.exOfferItemCatalogBlock),
                    blockQuantityDisplay = blockItemCatalog.find('.block-display-quantity')[0],
                    priceBlock = blockItemCatalog.find('.price-item-cart')[0],
                    noAvailable = blockItemCatalog.find('.link.disabled')[0],
                    quantBlock = blockItemCatalog.find('.basket-item-quantity')[0],
                    buttonBuy = blockItemCatalog.find('.catalog-button')[0],
                    buttonDelay = blockItemCatalog.find('.delay-button')[0],
                    subButton = blockItemCatalog.find('.catalog-sub-button')[0],
                    optInfoBlock = blockItemCatalog.find('.opt-price-app')[0],
                    quantInfoBlock = blockItemCatalog.find('.block-display-quantity')[0],
                    productCard = blockItemCatalog.find('.product-card')[0];

                $$(quantInfoBlock).html('');
                $$(quantInfoBlock).append(resQuantBlock);
                $(blockItemCatalog)[0].dataset['id'] = objectOffers.exOfferIdScu;
                $(buttonDelay)[0].dataset['item'] = objectOffers.exOfferIdScu;

                if(objectOffers.exOfferNoImage == 1) { //Если в торговом предложении есть превью то подставляем
                    var pageCurr = $('.page.page-current').find('.product-avatar#' + idItem + '>img.photo-offer');
                    for(var i = 0; i < pageCurr.length; i++){
                        if(pageCurr[i].id == objectOffers.exOfferIdScu) {
                            $(pageCurr[i]).removeClass('hidden_app');
                        }
                        else {
                            $(pageCurr[i]).addClass('hidden_app');
                        }
                    }
                }

                if(objectOffers.exOfferOnDelay == 1){
                    if(!$(buttonDelay).hasClass('delay-active'))
                        $(buttonDelay).addClass('delay-active');
                    $(buttonDelay)[0].dataset['idbasket'] = objectOffers.exOfferIdOnBasket;
                }else{
                    if($(buttonDelay).hasClass('delay-active'))
                        $(buttonDelay).removeClass('delay-active');
                    $(buttonDelay)[0].dataset['idbasket'] = '';
                }

                if (objectOffers.exOfferCanBuy != 0 && objectOffers.exOfferPrice > 0){//Товар доступен к покупке, есть цена

                    $(subButton).hide(); //Выключаем кнопку подписаться на товар
                    $(noAvailable).hide(); //Выключаем блок с инфой о дате поступления


                    if(objectOffers.exOfferOnBasket == 1){ //Если товар в корзине
                        $(buttonBuy).parent().hide(); //Выключаем кнопку купить
                        $(quantBlock).show(); //Включаем выбор количества в корзине
                        $(blockItemCatalog)[0].dataset['idbasket'] = objectOffers.exOfferIdOnBasket;
                    }else{ //Если товар не в корзине
                        $(buttonBuy).parent().show(); //Показываем кнопку купить
                        $(quantBlock).hide(); //Выключаем выбор количества
                        $(blockItemCatalog)[0].dataset['idbasket'] = '';
                    }

                    $(quantBlock)[0].dataset['id'] = objectOffers.exOfferIdScu;
                    $(quantBlock).children('.basketQty')[0].dataset['id'] = objectOffers.exOfferIdScu;
                    $(quantBlock).children('.basketQty')
                        .children('.basket-item-amount-btn-minus')
                        .attr('id', 'amount-m-' + objectOffers.exOfferIdScu) //Подставляем ИД торгового предложения
                        .next()
                        .attr('id', 'quantity-cart-catalog-' + objectOffers.exOfferIdScu) //Подставляем ИД торгового предложения
                        .attr('max', objectOffers.exOfferQuantity) //Ставим максимальное значение из количества товара
                        .val(objectOffers.exOfferOnBasket == 1 ? objectOffers.exOfferQuantBask : 1) //Если лежит в корзине подставляем количество в корзине
                        .next()
                        .attr('id', 'amount-p-' + objectOffers.exOfferIdScu); //Подставляем ИД торгового предложения
                    $(buttonBuy).attr('id', 'button-add-to-cart-' + objectOffers.exOfferIdScu)[0].dataset['id'] = objectOffers.exOfferIdScu; //Подставляем ИД торгового предложения в кнопку купить
                    if(objectOffers.exOfferDiskont != 0 && objectOffers.exOfferPercent != 0) {//Есть скидка на товар
                        $(priceBlock).children('div.base-price').hide().text('');
                        $(priceBlock).children('div.discont-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                        $(priceBlock).children('div.old-price').show().text(objectOffers.exOfferBasePrice + ' руб.');
                        $(priceBlock).children('div.discont-benefit').show().html('Экономия: ' + Math.round(objectOffers.exOfferBasePrice - objectOffers.exOfferPrice) + ' руб.');
                    }else{ //Нет скидки на товар
                        $(priceBlock).children('div.base-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                        $(priceBlock).children('div.discont-price').hide().text('');
                        $(priceBlock).children('div.old-price').hide().text('');
                        $(priceBlock).children('div.discont-benefit').hide().text('');
                    }

                }else if(objectOffers.exOfferCanBuy == 0){//Товар не доступен

                    if(objectOffers.exOfferBasePrice > 0){
                        $(optInfoBlock).text('Оптовая стоимость от ' + Math.round(objectOffers.exOfferBasePrice - (objectOffers.exOfferBasePrice * 0.41)) + ' руб.');
                        $(priceBlock).show();
                        if(objectOffers.exOfferDiskont != 0 && objectOffers.exOfferPercent != 0){//Есть скидка на товар
                            $(priceBlock).children('div.base-price').hide().text('');
                            $(priceBlock).children('div.discont-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                            $(priceBlock).children('div.old-price').show().text(objectOffers.exOfferBasePrice + ' руб.');
                            $(priceBlock).children('div.discont-benefit').show().html('Экономия: ' + Math.round(objectOffers.exOfferBasePrice - objectOffers.exOfferPrice) + ' руб.');
                        }else{ //Нет скидки на товар
                            $(priceBlock).children('div.base-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                            $(priceBlock).children('div.discont-price').hide().text('');
                            $(priceBlock).children('div.old-price').hide().text('');
                            $(priceBlock).children('div.discont-benefit').hide().text('');
                        }
                    }else $(priceBlock).hide();

                    $(quantBlock).hide();
                    $(buttonBuy).parent().hide();
                    $(subButton).show();
                    $(noAvailable).html(objectOffers.exOfferPlanetDate);
                    $(noAvailable).show();
                }
            }else{
                var priceBlock = $(objectOffers.exOfferFooter).find('.price-item-cart')[0],
                    quantBlock = $(objectOffers.exOfferFooter).find('.basket-item-quantity')[0],
                    buttonBuy = $(objectOffers.exOfferFooter).find('.element-button')[0],
                    noAvailable = $(objectOffers.exOfferFooter).find('.not-available')[0],
                    subButton = $(objectOffers.exOfferFooter).find('.subscribe-item')[0],
                    noAvailablePrice = $(objectOffers.exOfferFooter).prev(),
                    quantInfoBlock = $(objectOffers.exOfferFooter).parent().find('.block-display-quantity')[0];

                $$(quantInfoBlock).html('');
                $$(quantInfoBlock).append(resQuantBlock);

                if(objectOffers.exOfferNoImage == 1){ //Если в торговом предложении есть коллекция картинок подставляем
                    var pageCurr = $('.page.page-current').find('.swiper-container');

                    for(var i = 0; i < pageCurr.length; i++){
                        if(pageCurr[i].id == objectOffers.exOfferIdScu) {
                            $(pageCurr[i]).removeClass('hidden_app').addClass('swiper-init');
                            app.swiper.create(pageCurr[i], { spaceBetween: 0, pagination: JSON.parse($(pageCurr[i])[0].dataset['pagination']) });
                        }
                        else {
                            app.swiper.destroy(pageCurr[i], { spaceBetween: 0, pagination: JSON.parse($(pageCurr[i])[0].dataset['pagination']) });
                            $(pageCurr[i]).addClass('hidden_app').removeClass('swiper-init');
                        }
                    }
                }

                if(objectOffers.exOfferCanBuy != 0 && objectOffers.exOfferPrice > 0){ //Товар доступен к покупке, есть цена
                    $(objectOffers.exOfferFooter)[0].dataset['id'] = objectOffers.exOfferIdScu //Подставляем ИД торгового предложения в блок футера
                    $(subButton).hide(); //Выключаем кнопку подписаться на товар
                    $(priceBlock).show(); //Включаем блок с ценой товара
                    $(noAvailable).hide(); //Выключаем блок с инфой о дате поступления
                    $(noAvailablePrice).hide();

                    if(objectOffers.exOfferOnBasket == 1){ //Если товар в корзине
                        $(buttonBuy).hide(); //Выключаем кнопку купить
                        $(quantBlock).show(); //Включаем выбор количества в корзине
                        $(objectOffers.exOfferFooter)[0].dataset['idbasket'] = objectOffers.exOfferIdOnBasket;
                    }else{ //Если товар не в корзине
                        $(buttonBuy).show(); //Показываем кнопку купить
                        $(quantBlock).hide(); //Выключаем выбор количества
                        $(objectOffers.exOfferFooter)[0].dataset['idbasket'] = '';
                    }

                    $(quantBlock)[0].dataset['id'] = objectOffers.exOfferIdScu;
                    $(quantBlock).children('.basketQty')[0].dataset['id'] = objectOffers.exOfferIdScu;
                    $(quantBlock).children('.basketQty')
                        .children('.basket-item-amount-btn-minus')
                        .attr('id', 'amount-m-' + objectOffers.exOfferIdScu) //Подставляем ИД торгового предложения
                        .next()
                        .attr('id', 'quantity-cart-element-' + objectOffers.exOfferIdScu) //Подставляем ИД торгового предложения
                        .attr('max', objectOffers.exOfferQuantity) //Ставим максимальное значение из количества товара
                        .val(objectOffers.exOfferOnBasket == 1 ? objectOffers.exOfferQuantBask : 1) //Если лежит в корзине подставляем количество в корзине
                        .next()
                        .attr('id', 'amount-p-' + objectOffers.exOfferIdScu); //Подставляем ИД торгового предложения
                    $(buttonBuy).attr('id', 'button-add-to-cart-' + objectOffers.exOfferIdScu)[0].dataset['id'] = objectOffers.exOfferIdScu; //Подставляем ИД торгового предложения в кнопку купить
                    if(objectOffers.exOfferDiskont != 0 && objectOffers.exOfferPercent != 0){//Есть скидка на товар
                        $(priceBlock).children('div.base-price').hide().text('');
                        $(priceBlock).children('div.discont-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                        $(priceBlock).children('div.old-price').show().text(objectOffers.exOfferBasePrice + ' руб.');
                        $(priceBlock).children('div.discont-benefit').show().html('Экономия: ' + Math.round(objectOffers.exOfferBasePrice - objectOffers.exOfferPrice) + ' руб.');
                    }else{ //Нет скидки на товар
                        $(priceBlock).children('div.base-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                        $(priceBlock).children('div.discont-price').hide().text('');
                        $(priceBlock).children('div.old-price').hide().text('');
                        $(priceBlock).children('div.discont-benefit').hide().text('');
                    }
                }else if(objectOffers.exOfferCanBuy == 0){ //Товар не доступен
                    if(objectOffers.exOfferBasePrice > 0){
                        $(noAvailablePrice).show();
                        if(objectOffers.exOfferDiskont != 0 && objectOffers.exOfferPercent != 0){//Есть скидка на товар
                            $(noAvailablePrice).children('div.base-price').hide().text('');
                            $(noAvailablePrice).children('div.discont-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                            $(noAvailablePrice).children('div.old-price').show().text(objectOffers.exOfferBasePrice + ' руб.');
                            $(noAvailablePrice).children('div.discont-benefit').show().html('Экономия: ' + Math.round(objectOffers.exOfferBasePrice - objectOffers.exOfferPrice) + ' руб.');
                        }else{ //Нет скидки на товар
                            $(noAvailablePrice).children('div.base-price').show().html(objectOffers.exOfferPrice + ' руб.<span>/шт</span>');
                            $(noAvailablePrice).children('div.discont-price').hide().text('');
                            $(noAvailablePrice).children('div.old-price').hide().text('');
                            $(noAvailablePrice).children('div.discont-benefit').hide().text('');
                        }
                    }else $(noAvailablePrice).hide();

                    $(priceBlock).hide();
                    $(quantBlock).hide();
                    $(buttonBuy).hide();
                    $(subButton).show();
                    $(noAvailable).html(objectOffers.exOfferPlanetDate);
                    $(noAvailable).show();
                }
            }
        },
        eventPath: function eventPath(evt) {
            var path = (evt.composedPath && evt.composedPath()) || evt.path,
                target = evt.target;

            if (path != null) {
                // Safari doesn't include Window, but it should.
                return (path.indexOf(window) < 0) ? path.concat(window) : path;
            }

            if (target === window) {
                return [window];
            }

            function getParents(node, memo) {
                memo = memo || [];
                var parentNode = node.parentNode;

                if (!parentNode) {
                    return memo;
                }
                else {
                    return getParents(parentNode, memo.concat(parentNode));
                }
            }

            return [target].concat(getParents(target), window);
        }
    },
	routes: _routes2.default,
	panel: {
		swipe: 'left',
		swipeActiveArea: 100,
		swipeOnlyClose: window.theme == 'ios' ? true : false
	}
});

var mainView = app.views.create('.view-main', {
	url: '/'
});

app.methods.initPtr();
app.methods.onPageResize(); // Первый ресайз вызываем мануально
app.methods.pageActions(window.LOADED_PAGE);

app.methods.cartUpdate();
app.methods.getVersionApp();

(0, _framework.Dom7)(document).on('change', 'select[name="cities"]', function () {
	app.toast.show({
		text: '<div style="text-align: center !important;">Выбран город: ' + (0, _framework.Dom7)(this).val() + '</div>',
		position: 'top',
		closeTimeout: 2000,
		destroyOnClose: true
	});
});

(0, _framework.Dom7)(document).on('click', '#coup_del_butt', function () {
    app.preloader.show();
    var coupName = $$(this).data('coup_name');
    app.methods.cartUpdate({ action: 'clearcoupon', value: coupName }, function (result) {
        app.preloader.hide();
    });
}).on('click', '.change-city', function () {
	app.methods.citySelectManual('change', true);
	//app.dialog.alert('Функция деактивирована');
}).on('page:init page:reinit', function (e, page) {
	if (e.type == 'page:reinit') window.reinitPage = true;
	//page.$el.data('path', page.route.url);
}).on('click', '.logout-link', function () {
	app.methods.logOut();
}).on('click', '.del-ac-link', function () {
    app.methods.delAc();
}).on('click', '.block-personal-img', function () {
    if (this.offsetWidth - event.offsetX < 0) {
        app.methods.upAvatarUser();
    }
}).on('click', '#goToHome', function () {
    app.methods.goToHome();
}).on('click', '.error-report', function () {
	app.methods.errorReport();
}).on('click', '.set-coupon', function () {
	app.dialog.prompt('Введите штрих код скидочной карты', 'Получить скидку', function (value) {
		app.preloader.show();

		app.methods.cartUpdate({ action: 'coupon', value: value }, function (result) {
			app.preloader.hide();
		});
	});
}).on('click', '#add_coupon', function () {
    var inputCoupon = $$('#name_coupon').val();
        if(inputCoupon){
            app.preloader.show();
            app.methods.cartUpdate({ action: 'coupon', value: inputCoupon }, function (result) {
                app.preloader.hide();
            });
        }
        else{
            app.dialog.alert('Введите код скидочной карты или купона');
        }
}).on('click', '.share-link', function () {
	var text = (0, _framework.Dom7)(this).data('share'),
        page = (0, _framework.Dom7)(this).data('page'),
        shareContent = $$('#ex-share-app-' + page),
        notif = app.notification.create({
            icon: '<i class="icon fas fa-share-alt"></i>',
            title: 'Поделиться',
            text: '<div class="preloader"></div>',
            closeButton: true,
            swipeToClose: true
        }),
        modalShDom = $$(notif.el);
        modalShDom.children('.notification-content').children('.notification-text').html(shareContent.html());
        notif.open();
})
.on('click', '.external-link', function () {
	var text = (0, _framework.Dom7)(this).data('href');

	if (window.Android != undefined) {
    app.preloader.show();
		window.Android.openExternalLinks(text);
		return true;
	}
})
.on('click', '.searchbar-enable', function () {
	var form = (0, _framework.Dom7)(this).data('searchbar');
  (0, _framework.Dom7)(form).addClass('searchbar-enabled');
})
.on('click', '.searchbar-disable-button', function () {
	(0, _framework.Dom7)('.searchbar-enabled').removeClass('searchbar-enabled');
})
.on('keyup', '.search-input-form.search-from-site', function () {
  var s_input = $$(this);

  if (s_input.val() != ''){
    app.methods.loadSearchResult(s_input.val());
    $$(".search-content").show();
  }else{
    $$(".search-content").hide();
  }
})
.on('click', '.searchbar-disable-button', function () {
  $$(".search-content").hide();
})
.on('click', '.open-other-link', function () {
	var text = (0, _framework.Dom7)(this).data('open');

	if (window.platform == 'ios')
        app.methods.iosSend('openLink', text);
	else if(window.Android != undefined)
		window.Android.openOtherLink(text);
})
.on('click', '.open-market-link', function () {
    var text = (0, _framework.Dom7)(this).data('open'), data = {}, ajUrl = SITE_TEMPLATE_PATH + "ajax/reviewquestions.php";

    if (window.platform == 'ios')
        app.methods.iosSend('openLink', text);
    else if(window.Android != undefined)
        window.Android.openOtherLink(text);
})
.on('click', 'a.tel', function (event) {
    event.preventDefault();
    if (window.platform == 'ios')
        app.methods.iosSend('openTel', $(event.target).attr('href'));
})
.on('click', 'a.mailto', function (event) {
    event.preventDefault();
    if (window.platform == 'ios')
        app.methods.iosSend('openMailto', $(event.target).attr('href'));
})
.on('click', '.cart-item-delete', function () {
	var item = (0, _framework.Dom7)(this);
	var swipeElement = item.closest('.cart-item');
	app.swipeout.close(swipeElement);
	app.dialog.confirm('Подтвердите удаление', function () {
		swipeElement.addClass('disabled');
		app.methods.cartUpdate({
			id: swipeElement.data('id'),
			action: 'delete'
		}, function (res) {
			if (res) {
				app.methods.cartUpdate();
				app.swipeout.delete(swipeElement);
			} else app.dialog.alert('Ошибка удаления');
		});
	});
}).on('tab:show', '.products-tabs .tab', function () {
	var swiper = (0, _framework.Dom7)(this).find('.swiper-container');
	if (!swiper.hasClass('init')) {
		swiper.addClass('init');
		app.swiper.create(swiper, { spaceBetween: 0, pagination: JSON.parse(swiper.data('pagination')) });
	}
}).on('click', '.add-to-cart.catalog-button', function () {
    var clicked = (0, _framework.Dom7)(this);
    app.methods.addItemToBasket(clicked.data('id'), true, 'add');
}).on('click', '.add-to-cart.element-button', function () {
    var clicked = (0, _framework.Dom7)(this);
    app.methods.addItemToBasket(clicked.data('id'), false, 'add');
}).on('click', '.catalog-button.add-to-cart-delay', function () {
    var clicked = (0, _framework.Dom7)(this);
    app.methods.addItemToBasket(clicked.data('id'), false, 'addDelayByBasket', true);
    $(clicked).addClass('delay-active');
    app.swipeout.delete(clicked.closest('.swipeout.cart-item'));
}).on('click', '.delay-button#delay', function () {
    var clicked = (0, _framework.Dom7)(this);
    if($(this).hasClass('delay-active')){
        app.methods.cartUpdate({id: clicked.data('idbasket'), action: 'deleteDelay'},
            function (result, data) {
                if(result){
                    $(clicked)[0].dataset['idbasket'] = '';
                    $(clicked).removeClass('delay-active');
                }
            }
        );
    }else{
        app.methods.addItemToBasket(clicked.data('item'), true, 'addDelay', true);
        $(clicked).addClass('delay-active');
    }
}).on('click', '.delay-button#delay-element', function () {
    var clicked = (0, _framework.Dom7)(this);
    if($(this).hasClass('delay-active')){
        app.methods.cartUpdate({id: clicked.data('idbasket'), action: 'deleteDelay'},
            function (result, data) {
                if(result){
                    $(clicked)[0].dataset['idbasket'] = '';
                    $(clicked).removeClass('delay-active');
                }
            }
        );
    }else{
        app.methods.addItemToBasket(clicked.data('item'), false, 'addDelay', true);
        $(clicked).addClass('delay-active');
    }
}).on('click', '.subscribe-item.catalog-button', function () {
    var clicked = (0, _framework.Dom7)(this);

    if(clicked.data('idsub') !== undefined){
        app.methods.unSubscribe(clicked.data('idsub'), clicked.data('item'));
    }else{
        if(clicked.data('auth') === 'false' || clicked.data('contact') === 'false') {
            app.methods.addSubscribe(clicked.data('item'), false, false);
        }
        else {
            app.methods.addSubscribe(clicked.data('item'), clicked.data('auth'), clicked.data('contact'));
        }
    }
}).on('click', '#btn-form-email-popup-sub', function () {
    const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    var contact = $$('input#userContact'),
        clicked = (0, _framework.Dom7)(this).data('item');
    if(!re.test(String(contact.val()).toLowerCase())){
        contact.css({
            'border-color': 'red',
            'color': 'red'
        });
    }else{
        app.methods.popupByVlad(false);
        app.methods.addSubscribe(clicked, false, contact.val());
        $$('#button-subscribe-' + clicked).css('subscribed');
    }
}).on('click', '#btn-close-popup-sub', function () {
    app.methods.popupByVlad(false);
}).on('click', '#popup-window-overlay', function () {
    app.methods.popupByVlad(false);
}).on('click', '.popup-window-close-icon', function () {
    app.methods.popupByVlad(false);
}).on('click', '.popup-window-offers-close-icon', function () {
    app.methods.popupSelectOffer(false);
}).on('click', '#popup-window-offers-overlay', function () {
    app.methods.popupSelectOffer(false);
}).on('click', '.basketQty .quan', function () {
    var wrap = (0, _framework.Dom7)(this).closest('.basketQty'),
        qtyInput = wrap.find('.qty'),
        qty = parseInt(qtyInput.val());

    if ((0, _framework.Dom7)(this).hasClass('minus')) {
        if(!(qty <= 1)) {
            qty -= 1;
            qtyInput.val(qty).change();
        }
        else{
            app.toast.show({
                text: '<div style="text-align: center !important;">Нельзя добавлять в корзину количество товаров менее единицы.</div>',
                position: 'center',
                closeTimeout: 2000,
                destroyOnClose: true
            });
        }
    }
    else {
        qty += 1;
        qtyInput.val(qty).change();
    }
}).on('click', '.basketQty .quan-on-basket', function () {
    var _this = (0, _framework.Dom7)(this),
        cartItem = _this.closest('.basket-item'),
        id = cartItem.data('idbasket'),
        idItem = cartItem.data('id'),
        button = cartItem.find('#button-add-to-cart-' + idItem),
        blockQuant = cartItem.find('.basket-item-quantity'),
        minus = cartItem.find('.basket-item-amount-btn-minus'),
        action = 'setQty',
        minVal = _this.closest('.cart.basketQty').length > 0 ? 1 : 0,
        wrap = (0, _framework.Dom7)(this).closest('.basketQty'),
        qtyInput = wrap.find('.qty-on-basket'),
        qty = parseInt(qtyInput.val()),
        haveOffer = cartItem.hasClass('true-offer') || cartItem.hasClass('offers-footer-element'),
        idOffer = false, cartItemOffer = false;

    cartItem.addClass('disabled');
    if(haveOffer){
        cartItemOffer = cartItem.hasClass('true-offer') ? cartItem : cartItem.parent()[0];
        idOffer = id;
    }

    if((0, _framework.Dom7)(this).hasClass('minus')) {
        if(!(qty <= 1)) {
            qty -= 1;
            qtyInput.val(qty).change();
            if(haveOffer)
                $(cartItemOffer).find('span[data-idinbasket="' + idOffer + '"]')[0].dataset['quantityonbasket'] = parseInt(qtyInput.val());

            app.methods.cartUpdate({
                id: id,
                action: action,
                qty: parseInt(qtyInput.val())
            }, function (result, data) {
                cartItem.removeClass('disabled');
            });
            if(qty == 1){
                minus.html('<span class="far fa-trash-alt"></span>')
            }else{
                minus.text('-');
            }
        }else{
            qty = 0;
            if(haveOffer) {
                $(cartItemOffer).find('span[data-idinbasket="' + idOffer + '"]')[0].dataset['quantityonbasket'] = qty;
                $(cartItemOffer).find('span[data-idinbasket="' + idOffer + '"]')[0].dataset['onbasket'] = 0;
                $(cartItemOffer).find('span[data-idinbasket="' + idOffer + '"]')[0].dataset['idinbasket'] = 0;
            }
            app.methods.cartUpdate({
                id: id,
                action: 'delete',
                qty: qty
            }, function (result, data) {
                cartItem.attr('data-idbasket', '')
                blockQuant.hide();
                if(button.hasClass('element-button'))
                    button.show();
                else
                    button.parent().show();
                cartItem.removeClass('disabled');
            });
        }
    }else{
        qty += 1;
        qtyInput.val(qty).change();
        if(haveOffer)
            $(cartItemOffer).find('span[data-idinbasket="' + idOffer + '"]')[0].dataset['quantityonbasket'] = parseInt(qtyInput.val());

        app.methods.cartUpdate({
            id: id,
            action: action,
            qty: parseInt(qtyInput.val())
        }, function (result, data) {
            cartItem.removeClass('disabled');
        });

        if(qty > 1)
            minus.text('-');
    }
}).on('click', '.product-item-detail-scu-container .product-item-detail-scu-item-text', function () { //Характеристика щёлкнута на детальной странице товара
    app.methods.offerSelect(this);
}).on('click', '.product-item-catalog-scu-container .product-item-detail-scu-item-text', function () { //Открыть всплывающее окно для выбора характеристики
    app.methods.offerSelect(this, true, false);
}).on('click', '#popup-window-offers-app .popup-ex-offers-block .product-item-detail-scu-item-text', function (e) {
    if(app.methods.eventPath(e).length < 11) //Лютая херня кароче долго рассказывать но срабатывает ложный клик при открытии всплывающего окна по этому элементу
        app.methods.offerSelect(this, true, true);
}).on('click', '#cash_block > .cash-name', function () {
    var elem = $(this).children();
    if(elem.hasClass('active'))
        elem.removeClass('active');
    else
        elem.addClass('active');
}).on('click', '.ex-blog-news-content-item > a', function (e){
    var anchor = $($(this).data('id-href')).offset().top + 150;
    e.stopPropagation();
    $$('.page.page-current > .page-content').scrollTop(anchor, 300);
});

(0, _framework.Dom7)(document).on('change', '.basketQty .qtybas', function () {
	var _this = (0, _framework.Dom7)(this),
	    cartItem = _this.closest('.basket-item'),
	    id = cartItem.data('id'),
	    minus = cartItem.find('.basket-item-amount-btn-minus'),
        minVal = _this.closest('.cart.basketQty').length > 0 ? 1 : 0;
	cartItem.addClass('disabled');
	app.methods.cartUpdate({
		id: id,
		action: 'setQty',
		qty: _this.val()
	}, function (result, data) {
		if ((0, _framework.Dom7)('.page-current').data('name').indexOf('catalog/') >= 0) {
			(0, _framework.Dom7)('.page-current .basket-item').removeAttr('data-cart');

			for (var id in cart.items) {
				(0, _framework.Dom7)('.basket-item[data-id="' + id + '"]').attr('data-cart', cart.items[id].ID);
			}
		}
		if (parseInt(_this.val()) <= minVal) {
            cartItem.removeClass('disabled');
            minus.html('<span class="far fa-trash-alt"></span>');
			minus.addClass('cart-item-delete');
            minus.removeClass('minus');
		}
		else{
            cartItem.removeClass('disabled');
            _this.val(_this.val());
            minus.removeClass('cart-item-delete');
            minus.addClass('minus');
            minus.html('-');
        }
	});
}).on('click', '.basketQty .quanbas', function () {
	var wrap = (0, _framework.Dom7)(this).closest('.basketQty'),
	    qtyInput = wrap.find('.qtybas'),
	    qty = parseInt(qtyInput.val());

	if ((0, _framework.Dom7)(this).hasClass('minus')){
	    qty -= 1;
        qtyInput.val(qty).change();
    }
	else if((0, _framework.Dom7)(this).hasClass('plus')){
	    qty += 1;
        qtyInput.val(qty).change();
    }
}).on('click', '.list-menu-ch > .item-ch-men', function () {
    if(!$(this).hasClass('active')){
        $('div[data-name-ch="' + $(this).parent().find('li.active')[0].dataset['name'] + '"]').hide();
        $(this).parent().find('li.active').removeClass('active');
        $(this).addClass('active');
        $('div[data-name-ch="' + $(this)[0].dataset['name'] + '"]').show();
    }
}).on('click', '.reviews-evaluation-stars > .reviews-evaluation-star', function () {
    var clicking = $(this)[0].dataset['ratNumb'],
        idItem = $(this).parent()[0].dataset['idItem'],
        collections = $(this).parent().children();

    for (var i = 0; i < collections.length; i++) {
        if(i <= clicking){
            $(collections[i]).addClass('active');
        }
        else{
            $(collections[i]).removeClass('active');
        }
    }
    $('#formreview-' + idItem).show();
    $('#formreview-' + idItem + ' #evaluation-rev').val($(this)[0].dataset['ratingId']);
}).on('click', '.form-send-rev .reviews-btn', function () {
    var ajax = SITE_TEMPLATE_PATH + "ajax/reviewquestions.php",
        formRev = $('#formreview-' + $(this)[0].id),
        idItem = $(this)[0].id,
        collections = $('.reviews-evaluation-stars[data-id-item="' + idItem + '"]').children(),
        data = {}, error = '';

    data = {
        'idItem'    : idItem,
        'itemName'  : formRev.find('#item-name-rev').val(),
        'userId'    : formRev.find('#user-id-rev').val(),
        'userName'  : formRev.find('#name-rev').val(),
        'evaluation': formRev.find('#evaluation-rev').val(),
        'message'   : formRev.find('#text-rev').val(),
        'action'    : 'setReview'
    }
    for(var key in data) {
        if(data[key] == null || data[key] == ''){
            switch (key) {
                case 'userName':
                    error += 'Введите имя<br />';
                    break;
                case 'evaluation':
                    error += 'Поставте оценку товару'
                    break;
            }
        }
    }
    if(error == ''){
        app.preloader.show();
        formRev.find('#error-rev').text('');
        app.request.json(ajax, data, function (data){
            app.toast.show({
                text: 'Ваш отзыв принят. Спасибо',
                position: 'center',
                closeTimeout: 2000,
                destroyOnClose: true
            });

            formRev.hide();
            formRev.find('#text-rev').val('');
            formRev.find('#evaluation-rev').val('');

            for(var i = 0; i < collections.length; i++) {
                $(collections[i]).removeClass('active');
            }
            app.preloader.hide();
        });
    }else{
        formRev.find('#error-rev').html(error);
    }
}).on('click', '.reviews-btn.footer', function () {
    $('.basket-item.card-footer[data-id="' + $(this)[0].id + '"]')[0].scrollIntoView({
        behavior: "smooth",
        block: "start"
    });
    $('#formreview-' + $(this)[0].id).show();
}).on('click', '.reviews-item-like', function () {
    var ajax = SITE_TEMPLATE_PATH + "ajax/reviewquestions.php",
        _this = $(this),
        blockLikes = $('.reviews-item-likes[data-id-rev="'+$(this)[0].dataset['idRev']+'"]'),
        data = {};

    if($(this).hasClass('liked')){
        var countL = Number($(_this)[0].dataset['countLikes']);
        _this.removeClass('liked');
        _this.find('.icon-heart-l').removeClass('icon-heart-l').addClass('icon-heart-b');
        blockLikes.text('+' + (countL - 1));
        $(_this)[0].dataset['countLikes'] = countL - 1;
        data = {
            'action'   : 'addLike',
            'likeCount': countL - 1,
            'idRev'    : $(this)[0].dataset['idRev']
        }
        app.request.json(ajax, data);
    }else{
        var countL = Number($(_this)[0].dataset['countLikes']);
        _this.addClass('liked');
        _this.find('.icon-heart-b').removeClass('icon-heart-b').addClass('icon-heart-l');
        blockLikes.text('+' + (countL + 1));
        $(_this)[0].dataset['countLikes'] = countL + 1;
        data = {
            'action'   : 'addLike',
            'likeCount': countL + 1,
            'idRev'    : $(this)[0].dataset['idRev']
        }
        app.request.json(ajax, data, function (data) {
            console.log(data);
        });
    }
}).on('click', '.question-btn', function () {
    const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    var ajax = SITE_TEMPLATE_PATH + "ajax/reviewquestions.php",
        _this = $(this)[0],
        formQuestion = $('.form-send-que#formquestion-' + _this.id),
        data = {}, error = '';
    data = {
        'itemName'  : formQuestion.find('#item-name-rev').val(),
        'userName'  : formQuestion.find('#name-que').val(),
        'userEmail' : formQuestion.find('#email-que').val(),
        'userQue'   : formQuestion.find('#text-que').val(),
        'action'    : 'setQuestion'
    }

    for(var key in data) {
        if(data[key] == null || data[key] == ''){
            switch (key) {
                case 'userName':
                    error += 'Введите имя<br />';
                    break;
                case 'userEmail':
                    error += 'Введите Email<br />'
                    break;
                case 'userQue':
                    error += 'Введите вопрос<br />'
                    break;
            }
        }
    }

    if((data[key] != null && data[key] != '') && !re.test(data.userEmail)){
        error += 'Введите корректный Email<br />';
    }

    if(error == ''){
        app.preloader.show();
        formQuestion.find('#error-que').text('');
        app.request.json(ajax, data, function (data){
            app.toast.show({
                text: 'Спасибо, Ваш вопрос принят. Вскоре Вам ответят',
                position: 'center',
                closeTimeout: 2000,
                destroyOnClose: true
            });
            formQuestion.find('#text-que').val('');
            app.preloader.hide();
        });
    }else{
        formQuestion.find('#error-que').html(error);
    }

}).on('click', '.spsp-procents-block > div', function () {
    if(!$(this).hasClass('active')){
        var activeNode = $(this).parent().find('.active')[0];
        $(activeNode).removeClass('active');
        $('.spsp-info-terms#' + $(activeNode).attr('id')).removeClass('active');
        $(this).addClass('active');
        $('.spsp-info-terms#' + $(this).attr('id')).addClass('active');
    }
}).on('click', '.cash-block > div', function () {
    if(window.cart) {
        var format = new Intl.NumberFormat('ru-RU');
        if ($(this).hasClass('enroll')) { //Списать
            BX.addClass(BX('ENROLL'), 'active');
            BX.removeClass(BX('CASH_WRITE_OFF'), 'active');
            BX.adjust(BX('btn-order-backet'), {attrs: {href: BX('btn-order-backet').dataset.href + '&cash=Y'}});
            BX.adjust(BX('CASH_WRITE_OFF'), {text: 'Начислить: ' + (Math.floor((window.cart.price - 169 - window.cart.newPartnerCash.enroll) * window.cart.newPartnerCash.cash))});
            BX.adjust(BX('ca-basket'), {html: 'Бонусы:<span>' + format.format(window.cart.newPartnerCash.enroll) + ' руб.</span>'});
            BX.adjust(BX('tp-basket'), {html: 'Итого:<span>' + format.format(Number((window.cart.price - window.cart.newPartnerCash.enroll).toFixed(2))) + ' руб.</span>'});
            BX.removeClass(BX('ca-basket'), 'hidden_app');

        }else{ //Начислить
            BX.addClass(BX('CASH_WRITE_OFF'), 'active');
            BX.removeClass(BX('ENROLL'), 'active');
            BX.adjust(BX('btn-order-backet'), {attrs: {href: BX('btn-order-backet').dataset.href + '&cash=N'}});
            BX.adjust(BX('CASH_WRITE_OFF'), {text: 'Начислить: ' + (Math.floor((window.cart.price - 169) * window.cart.newPartnerCash.cash))});
            BX.addClass(BX('ca-basket'), 'hidden_app');
            BX.adjust(BX('ca-basket'), {text: ''});
            BX.adjust(BX('tp-basket'), {html: 'Итого:<span>' + window.cart.priceFormat + '</span>'});
        }
    }
}).on('click', '.ex-blog-news-sections a', function (e) {
    var urlArr = this.href.split('/').filter(Boolean), data = {},
    ajax = '/bitrix/templates/mobileapp/components/bitrix/news.detail/blog/ajax.php';
    urlArr.splice(0, 2);
    e.preventDefault() //Тормозим ссылку
    app.preloader.show();
    if(urlArr.length === 2) {data['action'] = 'section'; data['symbol'] = urlArr[1]}
    else if(urlArr.length === 3) {data['action'] = 'product'; data['symbol'] = urlArr[2]}
    else data[action] = false;
    if(data['action']) {
        app.request.json(ajax, data, function (data) {
            if(!data.error){
                app.preloader.hide();
                if(data.section)
                    app.router.navigate('/page-catalog.section/section-id='+ data.result.ID +'/', { ignoreCache: false });
                else
                    app.router.navigate('/page-catalog.element/element-id='+ data.result.ID +'/', { ignoreCache: false });
            }else{
                app.preloader.hide();
                app.toast.show({
                    text: data.message,
                    position: 'center',
                    closeTimeout: 2000,
                    destroyOnClose: true
                });
            }
        }, function (err) {
            console.log(err);
        });
    }else{
        app.preloader.hide();
        app.toast.show({
            text: data.message,
            position: 'center',
            closeTimeout: 2000,
            destroyOnClose: true
        });
    }
}).on('click', '#g-open', function (e) {
    var giftItems = (0, _framework.Dom7)('.page[data-path="/page-personal.cart/basket=Y/"] #gift-block #gift-items');
    app.methods.openGiftBlock(giftItems[0])
});

(0, _framework.Dom7)(document).on('click', '.catalog-sort', function () {
    if($(this).hasClass('active')){
        $(this).removeClass('active');
        $(this).children().last().animate({height: 0}, 200, function() {
            $(this).children().remove();
        });
    }else{
        var domDropdown;
        $(this).addClass('active');
        domDropdown = BX.create('DIV', {
            attrs: {
                className: 'list-sort-drop'
            },
            children: [
                BX.create('SPAN', {
                    text: 'По названию',
                    attrs: {
                        className: $(this).data('sort') === 'price-default' ? 'active' : ''
                    },
                    events: {
                        click: function onClick(e) {
                            e.stopPropagation();
                            app.methods.catalogView('sort', 'price-default');
                        }
                    }
                }),
                BX.create('SPAN', {
                    text: 'Сначала дешевле',
                    attrs: {
                        className: $(this).data('sort') === 'price-up' ? 'active' : ''
                    },
                    events: {
                        click: function onClick(e) {
                            e.stopPropagation();
                            app.methods.catalogView('sort', 'price-up');
                        }
                    }
                }),
                BX.create('SPAN', {
                    text: 'Сначала дороже',
                    attrs: {
                        className: $(this).data('sort') === 'price-down' ? 'active' : ''
                    },
                    events: {
                        click: function onClick(e) {
                            e.stopPropagation();
                            app.methods.catalogView('sort', 'price-down');
                        }
                    }
                }),
                BX.create('SPAN', {
                    text: 'По популярности вверх',
                    attrs: {
                        className: $(this).data('sort') === 'views-up' ? 'active' : ''
                    },
                    events: {
                        click: function onClick(e) {
                            e.stopPropagation();
                            app.methods.catalogView('sort', 'views-up');
                        }
                    }
                }),
                BX.create('SPAN', {
                    text: 'По популярности вниз',
                    attrs: {
                        className: $(this).data('sort') === 'views-down' ? 'active' : ''
                    },
                    events: {
                        click: function onClick(e) {
                            e.stopPropagation();
                            app.methods.catalogView('sort', 'views-down');
                        }
                    }
                })
            ]
        });
        $(this).children().last().append(domDropdown).animate({height: $(this).children().last().children().height() + 30}, 200);
    }
}).on('click', '.catalog-view', function () {
    var view = $(this).data('view');
    if(view === 'list'){
        app.methods.catalogView('view', 'tile');
    }else if(view === 'tile'){
        app.methods.catalogView('view', 'list');
    }
});

(0, _framework.Dom7)(document).on('infinite', '.infinite-scroll-content', function () {
	var curPage = (0, _framework.Dom7)('.page.page-current');
	var itemsWrap = curPage.find('.infinite-items');
	var length = itemsWrap.find('.infinite-item').length;

	if (length < PRODUCTS_PER_PAGE) {
		app.infiniteScroll.destroy('.infinite-scroll-content');
		(0, _framework.Dom7)('.infinite-scroll-preloader').remove();
		return;
	}

	// Exit, if loading in progress
	if (curPage.data('infinite') == '1') return;

	curPage.data('infinite', '1');

	app.request.get((0, _framework.Dom7)('.page-current').data('ajax'), { PAGEN_2: Math.ceil(length / PRODUCTS_PER_PAGE) + 1, loaded: length }, function (data) {
		data = data.trim();

		itemsWrap.append(data);
		app.methods.pageActions(curPage.data('name'), curPage);
		curPage.data('infinite', '0');

		if (data.length < 10 || data.indexOf('last-infinite') >= 0) {
			app.infiniteScroll.destroy('.infinite-scroll-content');
			(0, _framework.Dom7)('.infinite-scroll-preloader').remove();
			return;
		}
	});
});

(0, _framework.Dom7)('#authForm').on('submit', function (ev) {
	ev.preventDefault();
	var form = (0, _framework.Dom7)(this);

	app.methods.logIn(form.find('[name="username"]').val(), form.find('[name="password"]').val());
});
(0, _framework.Dom7)(document).on('submit', 'form#errorReport', function (ev) {
	ev.preventDefault();

	var _this = (0, _framework.Dom7)(this),
	name = _this.find('input[name=name]'),
	email = _this.find('input[name=email]'),
	message = _this.find('textarea'),
	data = app.form.convertToData(_this);

	for (var key in data) {
		if (data[key].length <= 0) {
			var name = _this.find('[name=' + key + ']').closest('.item-inner').children('.item-title').html().trim();
			app.toast.show({
				text: 'Заполние поле "' + name + '"',
				position: 'center',
				closeTimeout: 1500,
				destroyOnClose: true
			});
			return;
		}
	}

	app.preloader.show();
	data[MOBILE_GET] = 'Y';
	app.request.json(SITE_TEMPLATE_PATH + 'ajax/error_report.php', data, function (data) {
		app.toast.show({
			text: 'Ваше сообщение принято. Спасибо за Вашу помощь',
			position: 'center',
			closeTimeout: 2000,
			destroyOnClose: true
		});
		app.preloader.hide();

		_this.find('input, textarea').val('');
	}, function () {
		app.preloader.hide();
	});
});

(0, _framework.Dom7)(window).on('resize', function () {
	if (window.resizeTimeout !== undefined) clearTimeout(window.resizeTimeout);

	window.resizeTimeout = setTimeout(function () {
		app.methods.onPageResize();
	}, 111);
});

(0, _framework.Dom7)(document).on('submit', '#personalForm', function (ev) {
	ev.preventDefault();
	app.preloader.show();

	var form = (0, _framework.Dom7)(this);
	var data = app.form.convertToData(form);

	data[MOBILE_GET] = 'Y';
	data['action'] = 'edit';

	app.request.json(SITE_TEMPLATE_PATH + 'ajax/account.php', data, function (data) {
		data = data.result;

		var time = 4000;

		app.preloader.hide();

		if (data.reload) {
			time = 3000;
			app.router.navigate((0, _framework.Dom7)('.page.page-current').data('path'), { reloadCurrent: true, ignoreCache: false });
		}

		app.toast.show({
			text: '<div style="text-align: center !important;">' + data.message + '</div>',
			position: 'bottom',
			closeTimeout: time,
			destroyOnClose: true
		});
	}, function () {});
});

(0, _framework.Dom7)(document).on('page:init page:reinit', function (e, page) {
	if (e.type == 'page:reinit') {
		app.methods.pageActions(page.$el.data('name'), page.$el);
	}
}).on('page:mounted', function (e, page) {
	var currentPage = page.$el;
	var currentPageName = currentPage.data('name');
	var leftMenu = (0, _framework.Dom7)('.panel-left .view-left .links-list > ul'); //Получаем элементы меню
    var arrElemleftMenu = [].slice.call(leftMenu[0].children); //Получаем массив элементов (иначе прилетает HTML коллекция)
	app.methods.initPtr(currentPage.data('path'), currentPage);
	app.methods.pageActions(currentPage.data('name'), currentPage);
	currentPage.find('.link.external').once('click', function (e) {
		app.methods.goToExternal((0, _framework.Dom7)(this).attr('href'));
	});

    arrElemleftMenu.forEach( item => {
        if(currentPageName === item.children[0].dataset['name']){
            $$(item).addClass('active');
        }
        else{
            $$(item).removeClass('active');
        }
    })


});

(0, _framework.Dom7)('.link.external').once('click', function (e) {
	app.methods.goToExternal((0, _framework.Dom7)(this).attr('href'));
});

var closeClicks = 0;
var closeToast = app.toast.create({
	text: '<div style="text-align: center;">Нажмите ещё раз, чтобы закрыть приложение</div>',
	position: 'bottom',
	closeTimeout: 2000,
	on: {
		close: function close() {
			closeClicks = 0;
		}
	}
});

window.backPressed = function () {
	var backLink = (0, _framework.Dom7)('.page-current .back-link'),
        dialog = app.dialog.get(),
        popover = app.popover.get(),
        smartSelect = app.smartSelect.get();

	if ((0, _framework.Dom7)('.preloader-modal').length >= 1){
	    return 'true';
	}
	else if ((0, _framework.Dom7)('.panel-left').hasClass('panel-active')){
		app.panel.get('left').close();
		return 'true';
	} else if ((0, _framework.Dom7)('#login-screen').hasClass('modal-in')){
		app.loginScreen.close('#login-screen');
		return 'true';
	} else if (dialog !== undefined){
		dialog.close();
		return 'true';
	} else if (smartSelect !== undefined && smartSelect.opened == true){
		smartSelect.close();
		return 'true';
	} else if (popover !== undefined){
		popover.close();
		return 'true';
	} else if((0, _framework.Dom7)('#storis-block').hasClass('active-storis')){
        (0, _framework.Dom7)('#storis-block').empty();
        (0, _framework.Dom7)('#storis-block').removeClass('active-storis')
        return 'true';
    }else if($$('#popup-window-offers-app').hasClass('open')){
        app.methods.popupSelectOffer(false);
        return 'true';
    }else if ((0, _framework.Dom7)('.page-current').data('name') == 'home'){
		closeToast.open();

		if (closeClicks == 1) return 'close';

		closeClicks++;
		return 'false';
	}

	if (backLink.length >= 1) backLink[0].click();

	return 'true';
};

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Support = exports.Device = exports.Utils = exports.Request = exports.Dom7 = exports.Template7 = undefined;

var _template = __webpack_require__(5);

var _template2 = _interopRequireDefault(_template);

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _coreClass = __webpack_require__(18);

var _coreClass2 = _interopRequireDefault(_coreClass);

var _request = __webpack_require__(8);

var _request2 = _interopRequireDefault(_request);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _support = __webpack_require__(6);

var _support2 = _interopRequireDefault(_support);

var _device = __webpack_require__(3);

var _device2 = _interopRequireDefault(_device);

var _device3 = __webpack_require__(20);

var _device4 = _interopRequireDefault(_device3);

var _support3 = __webpack_require__(21);

var _support4 = _interopRequireDefault(_support3);

var _utils3 = __webpack_require__(22);

var _utils4 = _interopRequireDefault(_utils3);

var _resize = __webpack_require__(23);

var _resize2 = _interopRequireDefault(_resize);

var _request3 = __webpack_require__(24);

var _request4 = _interopRequireDefault(_request3);

var _touch = __webpack_require__(25);

var _touch2 = _interopRequireDefault(_touch);

var _clicks = __webpack_require__(26);

var _clicks2 = _interopRequireDefault(_clicks);

var _router = __webpack_require__(10);

var _router2 = _interopRequireDefault(_router);

var _history = __webpack_require__(35);

var _history2 = _interopRequireDefault(_history);

var _storage = __webpack_require__(36);

var _storage2 = _interopRequireDefault(_storage);

var _statusbar = __webpack_require__(37);

var _statusbar2 = _interopRequireDefault(_statusbar);

var _view = __webpack_require__(38);

var _view2 = _interopRequireDefault(_view);

var _navbar = __webpack_require__(39);

var _navbar2 = _interopRequireDefault(_navbar);

var _toolbar = __webpack_require__(40);

var _toolbar2 = _interopRequireDefault(_toolbar);

var _subnavbar = __webpack_require__(41);

var _subnavbar2 = _interopRequireDefault(_subnavbar);

var _touchRipple = __webpack_require__(42);

var _touchRipple2 = _interopRequireDefault(_touchRipple);

var _modal = __webpack_require__(44);

var _modal2 = _interopRequireDefault(_modal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// F7 Class
/**
 * Framework7 2.3.1
 * Full featured mobile HTML framework for building iOS & Android apps
 * http://framework7.io/
 *
 * Copyright 2014-2018 Vladimir Kharlampidi
 *
 * Released under the MIT License
 *
 * Released on: June 1, 2018
 */

if (false) {
  if (typeof window !== 'undefined') {
    // Template7
    if (!window.Template7) window.Template7 = _template2.default;

    // Dom7
    if (!window.Dom7) window.Dom7 = _dom2.default;
  }
}

// Install Core Modules & Components


// Core Components


// Core Modules


// Import Helpers
_coreClass2.default.use([_device4.default, _support4.default, _utils4.default, _resize2.default, _request4.default, _touch2.default, _clicks2.default, _router2.default, _history2.default, _storage2.default, _statusbar2.default, _view2.default, _navbar2.default, _toolbar2.default, _subnavbar2.default, _touchRipple2.default, _modal2.default]);

exports.Template7 = _template2.default;
exports.Dom7 = _dom2.default;
exports.Request = _request2.default;
exports.Utils = _utils2.default;
exports.Device = _device2.default;
exports.Support = _support2.default;
exports.default = _coreClass2.default;

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var g;

// This works in non-strict mode
g = function () {
	return this;
}();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1, eval)("this");
} catch (e) {
	// This works if the window reference is available
	if ((typeof window === "undefined" ? "undefined" : _typeof(window)) === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _template = __webpack_require__(5);

var _template2 = _interopRequireDefault(_template);

var _ssrWindow = __webpack_require__(2);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _device = __webpack_require__(3);

var _device2 = _interopRequireDefault(_device);

var _class = __webpack_require__(7);

var _class2 = _interopRequireDefault(_class);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Framework7 = function (_Framework7Class) {
  _inherits(Framework7, _Framework7Class);

  function Framework7(params) {
    var _ret;

    _classCallCheck(this, Framework7);

    var _this = _possibleConstructorReturn(this, (Framework7.__proto__ || Object.getPrototypeOf(Framework7)).call(this, params));

    var passedParams = _utils2.default.extend({}, params);

    // App Instance
    var app = _this;

    // Default
    var defaults = {
      version: '1.0.0',
      id: 'io.framework7.testapp',
      root: 'body',
      theme: 'auto',
      language: _ssrWindow.window.navigator.language,
      routes: [],
      name: 'Framework7',
      initOnDeviceReady: true,
      init: true
    };

    // Extend defaults with modules params
    app.useModulesParams(defaults);

    // Extend defaults with passed params
    app.params = _utils2.default.extend(defaults, params);

    var $rootEl = (0, _dom2.default)(app.params.root);

    _utils2.default.extend(app, {
      // App Id
      id: app.params.id,
      // App Name
      name: app.params.name,
      // App version
      version: app.params.version,
      // Routes
      routes: app.params.routes,
      // Lang
      language: app.params.language,
      // Root
      root: $rootEl,
      // RTL
      rtl: $rootEl.css('direction') === 'rtl',
      // Theme
      theme: function getTheme() {
        if (app.params.theme === 'auto') {
          return _device2.default.ios || window.platform == 'ios' ? 'ios' : 'md';
        }
        return app.params.theme;
      }(),
      // Initially passed parameters
      passedParams: passedParams
    });

    // Save Root
    if (app.root && app.root[0]) {
      app.root[0].f7 = app;
    }

    // Install Modules
    app.useModules();

    // Init
    if (app.params.init) {
      if (_device2.default.cordova && app.params.initOnDeviceReady) {
        (0, _dom2.default)(_ssrWindow.document).on('deviceready', function () {
          app.init();
        });
      } else {
        app.init();
      }
    }

    // Return app instance
    return _ret = app, _possibleConstructorReturn(_this, _ret);
  }

  _createClass(Framework7, [{
    key: 'init',
    value: function init() {
      var app = this;
      if (app.initialized) return;

      app.root.addClass('framework7-initializing');

      // RTL attr
      if (app.rtl) {
        (0, _dom2.default)('html').attr('dir', 'rtl');
      }

      // Root class
      app.root.addClass('framework7-root');

      // Theme class
      (0, _dom2.default)('html').removeClass('ios md').addClass(app.theme);

      // Data
      app.data = {};
      if (app.params.data && typeof app.params.data === 'function') {
        _utils2.default.extend(app.data, app.params.data.bind(app)());
      } else if (app.params.data) {
        _utils2.default.extend(app.data, app.params.data);
      }
      // Methods
      app.methods = {};
      if (app.params.methods) {
        _utils2.default.extend(app.methods, app.params.methods);
      }
      // Init class
      _utils2.default.nextFrame(function () {
        app.root.removeClass('framework7-initializing');
      });
      // Emit, init other modules
      app.initialized = true;
      app.emit('init');
    }
    // eslint-disable-next-line

  }, {
    key: '$',
    get: function get() {
      return _dom2.default;
    }
    // eslint-disable-next-line

  }, {
    key: 't7',
    get: function get() {
      return _template2.default;
    }
  }], [{
    key: 'Dom7',
    get: function get() {
      return _dom2.default;
    }
  }, {
    key: '$',
    get: function get() {
      return _dom2.default;
    }
  }, {
    key: 'Template7',
    get: function get() {
      return _template2.default;
    }
  }, {
    key: 'Class',
    get: function get() {
      return _class2.default;
    }
  }]);

  return Framework7;
}(_class2.default);

exports.default = Framework7;

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = bezier;
/**
 * https://github.com/gre/bezier-easing
 * BezierEasing - use bezier curve for transition easing function
 * by Gaëtan Renaudeau 2014 - 2015 – MIT License
 */

/* eslint-disable */

// These values are established by empiricism with tests (tradeoff: performance VS precision)
var NEWTON_ITERATIONS = 4;
var NEWTON_MIN_SLOPE = 0.001;
var SUBDIVISION_PRECISION = 0.0000001;
var SUBDIVISION_MAX_ITERATIONS = 10;

var kSplineTableSize = 11;
var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);

var float32ArraySupported = typeof Float32Array === 'function';

function A(aA1, aA2) {
  return 1.0 - 3.0 * aA2 + 3.0 * aA1;
}
function B(aA1, aA2) {
  return 3.0 * aA2 - 6.0 * aA1;
}
function C(aA1) {
  return 3.0 * aA1;
}

// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.
function calcBezier(aT, aA1, aA2) {
  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;
}

// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.
function getSlope(aT, aA1, aA2) {
  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);
}

function binarySubdivide(aX, aA, aB, mX1, mX2) {
  var currentX,
      currentT,
      i = 0;
  do {
    currentT = aA + (aB - aA) / 2.0;
    currentX = calcBezier(currentT, mX1, mX2) - aX;
    if (currentX > 0.0) {
      aB = currentT;
    } else {
      aA = currentT;
    }
  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);
  return currentT;
}

function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {
  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {
    var currentSlope = getSlope(aGuessT, mX1, mX2);
    if (currentSlope === 0.0) {
      return aGuessT;
    }
    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;
    aGuessT -= currentX / currentSlope;
  }
  return aGuessT;
}

function bezier(mX1, mY1, mX2, mY2) {
  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {
    throw new Error('bezier x values must be in [0, 1] range');
  }

  // Precompute samples table
  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);
  if (mX1 !== mY1 || mX2 !== mY2) {
    for (var i = 0; i < kSplineTableSize; ++i) {
      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);
    }
  }

  function getTForX(aX) {
    var intervalStart = 0.0;
    var currentSample = 1;
    var lastSample = kSplineTableSize - 1;

    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {
      intervalStart += kSampleStepSize;
    }
    --currentSample;

    // Interpolate to provide an initial guess for t
    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);
    var guessForT = intervalStart + dist * kSampleStepSize;

    var initialSlope = getSlope(guessForT, mX1, mX2);
    if (initialSlope >= NEWTON_MIN_SLOPE) {
      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);
    } else if (initialSlope === 0.0) {
      return guessForT;
    } else {
      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);
    }
  }

  return function BezierEasing(x) {
    if (mX1 === mY1 && mX2 === mY2) {
      return x; // linear
    }
    // Because JavaScript number are imprecise, we should guarantee the extremes are right.
    if (x === 0) {
      return 0;
    }
    if (x === 1) {
      return 1;
    }
    return calcBezier(getTForX(x), mY1, mY2);
  };
};

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var _device = __webpack_require__(3);

var _device2 = _interopRequireDefault(_device);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  name: 'device',
  proto: {
    device: _device2.default
  },
  static: {
    device: _device2.default
  },
  on: {
    init: function init() {
      var classNames = [];
      var html = _ssrWindow.document.querySelector('html');
      if (!html) return;
      // Pixel Ratio
      classNames.push('device-pixel-ratio-' + Math.floor(_device2.default.pixelRatio));
      if (_device2.default.pixelRatio >= 2) {
        classNames.push('device-retina');
      }
      // OS classes
      if (_device2.default.os) {
        classNames.push('device-' + _device2.default.os, 'device-' + _device2.default.os + '-' + _device2.default.osVersion.split('.')[0], 'device-' + _device2.default.os + '-' + _device2.default.osVersion.replace(/\./g, '-'));
        if (_device2.default.os === 'ios') {
          var major = parseInt(_device2.default.osVersion.split('.')[0], 10);
          for (var i = major - 1; i >= 6; i -= 1) {
            classNames.push('device-ios-gt-' + i);
          }
          if (_device2.default.iphoneX) {
            classNames.push('device-iphone-x');
          }
        }
      } else if (_device2.default.desktop) {
        classNames.push('device-desktop');
      }
      if (_device2.default.cordova || _device2.default.phonegap) {
        classNames.push('device-cordova');
      }

      // Add html classes
      classNames.forEach(function (className) {
        html.classList.add(className);
      });
    }
  }
};

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var _support = __webpack_require__(6);

var _support2 = _interopRequireDefault(_support);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  name: 'support',
  proto: {
    support: _support2.default
  },
  static: {
    support: _support2.default
  },
  on: {
    init: function init() {
      var html = _ssrWindow.document.querySelector('html');
      if (!html) return;
      var classNames = [];
      if (_support2.default.positionSticky) {
        classNames.push('support-position-sticky');
      }
      // Add html classes
      classNames.forEach(function (className) {
        html.classList.add(className);
      });
    }
  }
};

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  name: 'utils',
  proto: {
    utils: _utils2.default
  },
  static: {
    utils: _utils2.default
  }
};

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

exports.default = {
  name: 'resize',
  instance: {
    getSize: function getSize() {
      var app = this;
      if (!app.root[0]) return { width: 0, height: 0, left: 0, top: 0 };
      var offset = app.root.offset();
      var _ref = [app.root[0].offsetWidth, app.root[0].offsetHeight, offset.left, offset.top],
          width = _ref[0],
          height = _ref[1],
          left = _ref[2],
          top = _ref[3];

      app.width = width;
      app.height = height;
      app.left = left;
      app.top = top;
      return { width: width, height: height, left: left, top: top };
    }
  },
  on: {
    init: function init() {
      var app = this;

      // Get Size
      app.getSize();

      // Emit resize
      _ssrWindow.window.addEventListener('resize', function () {
        app.emit('resize');
      }, false);

      // Emit orientationchange
      _ssrWindow.window.addEventListener('orientationchange', function () {
        app.emit('orientationchange');
      });
    },
    orientationchange: function orientationchange() {
      var app = this;
      if (app.device && app.device.minimalUi) {
        if (_ssrWindow.window.orientation === 90 || _ssrWindow.window.orientation === -90) {
          _ssrWindow.document.body.scrollTop = 0;
        }
      }
      // Fix iPad weird body scroll
      if (app.device.ipad) {
        _ssrWindow.document.body.scrollLeft = 0;
        setTimeout(function () {
          _ssrWindow.document.body.scrollLeft = 0;
        }, 0);
      }
    },
    resize: function resize() {
      var app = this;
      app.getSize();
    }
  }
};

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _request = __webpack_require__(8);

var _request2 = _interopRequireDefault(_request);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  name: 'request',
  proto: {
    request: _request2.default
  },
  static: {
    request: _request2.default
  }
}; /* eslint no-param-reassign: "off" */

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _support = __webpack_require__(6);

var _support2 = _interopRequireDefault(_support);

var _device = __webpack_require__(3);

var _device2 = _interopRequireDefault(_device);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function initTouch() {
  var app = this;
  var params = app.params.touch;
  var useRipple = app.theme === 'md' && params.materialRipple;

  if (_device2.default.ios && _device2.default.webView) {
    // Strange hack required for iOS 8 webview to work on inputs
    _ssrWindow.window.addEventListener('touchstart', function () {});
  }

  var touchStartX = void 0;
  var touchStartY = void 0;
  var touchStartTime = void 0;
  var targetElement = void 0;
  var trackClick = void 0;
  var activeSelection = void 0;
  var scrollParent = void 0;
  var lastClickTime = void 0;
  var isMoved = void 0;
  var tapHoldFired = void 0;
  var tapHoldTimeout = void 0;

  var activableElement = void 0;
  var activeTimeout = void 0;

  var needsFastClick = void 0;
  var needsFastClickTimeOut = void 0;

  var rippleWave = void 0;
  var rippleTarget = void 0;
  var rippleTimeout = void 0;

  function findActivableElement(el) {
    var target = (0, _dom2.default)(el);
    var parents = target.parents(params.activeStateElements);
    var activable = void 0;
    if (target.is(params.activeStateElements)) {
      activable = target;
    }
    if (parents.length > 0) {
      activable = activable ? activable.add(parents) : parents;
    }
    return activable || target;
  }

  function isInsideScrollableView(el) {
    var pageContent = el.parents('.page-content, .panel');

    if (pageContent.length === 0) {
      return false;
    }

    // This event handler covers the "tap to stop scrolling".
    if (pageContent.prop('scrollHandlerSet') !== 'yes') {
      pageContent.on('scroll', function () {
        clearTimeout(activeTimeout);
        clearTimeout(rippleTimeout);
      });
      pageContent.prop('scrollHandlerSet', 'yes');
    }

    return true;
  }
  function addActive() {
    if (!activableElement) return;
    activableElement.addClass('active-state');
  }
  function removeActive() {
    if (!activableElement) return;
    activableElement.removeClass('active-state');
    activableElement = null;
  }
  function isFormElement(el) {
    var nodes = 'input select textarea label'.split(' ');
    if (el.nodeName && nodes.indexOf(el.nodeName.toLowerCase()) >= 0) return true;
    return false;
  }
  function androidNeedsBlur(el) {
    var noBlur = 'button input textarea select'.split(' ');
    if (_ssrWindow.document.activeElement && el !== _ssrWindow.document.activeElement && _ssrWindow.document.activeElement !== _ssrWindow.document.body) {
      if (noBlur.indexOf(el.nodeName.toLowerCase()) >= 0) {
        return false;
      }
      return true;
    }
    return false;
  }
  function targetNeedsFastClick(el) {
    /*
    if (
      Device.ios
      &&
      (
        Device.osVersion.split('.')[0] > 9
        ||
        (Device.osVersion.split('.')[0] * 1 === 9 && Device.osVersion.split('.')[1] >= 1)
      )
    ) {
      return false;
    }
    */
    var $el = (0, _dom2.default)(el);
    if (el.nodeName.toLowerCase() === 'input' && (el.type === 'file' || el.type === 'range')) return false;
    if (el.nodeName.toLowerCase() === 'select' && _device2.default.android) return false;
    if ($el.hasClass('no-fastclick') || $el.parents('.no-fastclick').length > 0) return false;
    if (params.fastClicksExclude && $el.is(params.fastClicksExclude)) return false;
    return true;
  }
  function targetNeedsFocus(el) {
    if (_ssrWindow.document.activeElement === el) {
      return false;
    }
    var tag = el.nodeName.toLowerCase();
    var skipInputs = 'button checkbox file image radio submit'.split(' ');
    if (el.disabled || el.readOnly) return false;
    if (tag === 'textarea') return true;
    if (tag === 'select') {
      if (_device2.default.android) return false;
      return true;
    }
    if (tag === 'input' && skipInputs.indexOf(el.type) < 0) return true;
    return false;
  }
  function targetNeedsPrevent(el) {
    var $el = (0, _dom2.default)(el);
    var prevent = true;
    if ($el.is('label') || $el.parents('label').length > 0) {
      if (_device2.default.android) {
        prevent = false;
      } else if (_device2.default.ios && $el.is('input')) {
        prevent = true;
      } else prevent = false;
    }
    return prevent;
  }

  // Ripple handlers
  function findRippleElement(el) {
    var rippleElements = params.materialRippleElements;
    var $el = (0, _dom2.default)(el);
    if ($el.is(rippleElements)) {
      if ($el.hasClass('no-ripple')) {
        return false;
      }
      return $el;
    } else if ($el.parents(rippleElements).length > 0) {
      var rippleParent = $el.parents(rippleElements).eq(0);
      if (rippleParent.hasClass('no-ripple')) {
        return false;
      }
      return rippleParent;
    }
    return false;
  }
  function createRipple($el, x, y) {
    if (!$el) return;
    rippleWave = app.touchRipple.create($el, x, y);
  }

  function removeRipple() {
    if (!rippleWave) return;
    rippleWave.remove();
    rippleWave = undefined;
    rippleTarget = undefined;
  }
  function rippleTouchStart(el) {
    rippleTarget = findRippleElement(el);
    if (!rippleTarget || rippleTarget.length === 0) {
      rippleTarget = undefined;
      return;
    }
    if (!isInsideScrollableView(rippleTarget)) {
      createRipple(rippleTarget, touchStartX, touchStartY);
    } else {
      rippleTimeout = setTimeout(function () {
        createRipple(rippleTarget, touchStartX, touchStartY);
      }, 80);
    }
  }
  function rippleTouchMove() {
    clearTimeout(rippleTimeout);
    removeRipple();
  }
  function rippleTouchEnd() {
    if (rippleWave) {
      removeRipple();
    } else if (rippleTarget && !isMoved) {
      clearTimeout(rippleTimeout);
      createRipple(rippleTarget, touchStartX, touchStartY);
      setTimeout(removeRipple, 0);
    } else {
      removeRipple();
    }
  }

  // Mouse Handlers
  function handleMouseDown(e) {

    findActivableElement(e.target).addClass('active-state');
    if ('which' in e && e.which === 3) {
      setTimeout(function () {
        (0, _dom2.default)('.active-state').removeClass('active-state');
      }, 0);
    }
    if (useRipple) {
      touchStartX = e.pageX;
      touchStartY = e.pageY;
      rippleTouchStart(e.target, e.pageX, e.pageY);
    }
  }
  function handleMouseMove() {
    (0, _dom2.default)('.active-state').removeClass('active-state');
    if (useRipple) {
      rippleTouchMove();
    }
  }
  function handleMouseUp() {
    (0, _dom2.default)('.active-state').removeClass('active-state');
    if (useRipple) {
      rippleTouchEnd();
    }
  }

  // Send Click
  function sendClick(e) {
    var touch = e.changedTouches[0];
    var evt = _ssrWindow.document.createEvent('MouseEvents');
    var eventType = 'click';
    if (_device2.default.android && targetElement.nodeName.toLowerCase() === 'select') {
      eventType = 'mousedown';
    }
    evt.initMouseEvent(eventType, true, true, _ssrWindow.window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
    evt.forwardedTouchEvent = true;

    if (app.device.ios && _ssrWindow.window.navigator.standalone) {
      // Fix the issue happens in iOS home screen apps where the wrong element is selected during a momentum scroll.
      // Upon tapping, we give the scrolling time to stop, then we grab the element based where the user tapped.
      setTimeout(function () {
        targetElement = _ssrWindow.document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
        targetElement.dispatchEvent(evt);
      }, 10);
    } else {
      targetElement.dispatchEvent(evt);
    }
  }

  // Touch Handlers
  function handleTouchStart(e) {
    var _this = this;

    isMoved = false;
    tapHoldFired = false;
    if (e.targetTouches.length > 1) {
      if (activableElement) removeActive();
      return true;
    }
    if (e.touches.length > 1 && activableElement) {
      removeActive();
    }
    if (params.tapHold) {
      if (tapHoldTimeout) clearTimeout(tapHoldTimeout);
      tapHoldTimeout = setTimeout(function () {
        if (e && e.touches && e.touches.length > 1) return;
        tapHoldFired = true;
        e.preventDefault();
        (0, _dom2.default)(e.target).trigger('taphold');
      }, params.tapHoldDelay);
    }
    if (needsFastClickTimeOut) clearTimeout(needsFastClickTimeOut);
    needsFastClick = targetNeedsFastClick(e.target);

    if (!needsFastClick) {
      trackClick = false;
      return true;
    }
    if (_device2.default.ios || _device2.default.android && 'getSelection' in _ssrWindow.window) {
      var selection = _ssrWindow.window.getSelection();
      if (selection.rangeCount && selection.focusNode !== _ssrWindow.document.body && (!selection.isCollapsed || _ssrWindow.document.activeElement === selection.focusNode)) {
        activeSelection = true;
        return true;
      }

      activeSelection = false;
    }
    if (_device2.default.android) {
      if (androidNeedsBlur(e.target)) {
        _ssrWindow.document.activeElement.blur();
      }
    }

    trackClick = true;
    targetElement = e.target;
    touchStartTime = new Date().getTime();
    touchStartX = e.targetTouches[0].pageX;
    touchStartY = e.targetTouches[0].pageY;

    // Detect scroll parent
    if (_device2.default.ios) {
      scrollParent = undefined;
      (0, _dom2.default)(targetElement).parents().each(function () {
        var parent = _this;
        if (parent.scrollHeight > parent.offsetHeight && !scrollParent) {
          scrollParent = parent;
          scrollParent.f7ScrollTop = scrollParent.scrollTop;
        }
      });
    }
    if (touchStartTime - lastClickTime < params.fastClicksDelayBetweenClicks) {
      e.preventDefault();
    }

    if (params.activeState) {
      activableElement = findActivableElement(targetElement);
      // If it's inside a scrollable view, we don't trigger active-state yet,
      // because it can be a scroll instead. Based on the link:
      // http://labnote.beedesk.com/click-scroll-and-pseudo-active-on-mobile-webk
      if (!isInsideScrollableView(activableElement)) {
        addActive();
      } else {
        activeTimeout = setTimeout(addActive, 80);
      }
    }
    if (useRipple) {
      rippleTouchStart(targetElement, touchStartX, touchStartY);
    }
    return true;
  }
  function handleTouchMove(e) {
    if (!trackClick) return;
    var distance = params.fastClicksDistanceThreshold;
    if (distance) {
      var pageX = e.targetTouches[0].pageX;
      var pageY = e.targetTouches[0].pageY;
      if (Math.abs(pageX - touchStartX) > distance || Math.abs(pageY - touchStartY) > distance) {
        isMoved = true;
      }
    } else {
      isMoved = true;
    }
    if (isMoved) {
      trackClick = false;
      targetElement = null;
      isMoved = true;
      if (params.tapHold) {
        clearTimeout(tapHoldTimeout);
      }
      if (params.activeState) {
        clearTimeout(activeTimeout);
        removeActive();
      }
      if (useRipple) {
        rippleTouchMove();
      }
    }
  }
  function handleTouchEnd(e) {
    clearTimeout(activeTimeout);
    clearTimeout(tapHoldTimeout);

    var touchEndTime = new Date().getTime();

    if (!trackClick) {
      if (!activeSelection && needsFastClick) {
        if (!(_device2.default.android && !e.cancelable) && e.cancelable) {
          e.preventDefault();
        }
      }
      return true;
    }

    if (_ssrWindow.document.activeElement === e.target) {
      if (params.activeState) removeActive();
      if (useRipple) {
        rippleTouchEnd();
      }
      return true;
    }

    if (!activeSelection) {
      e.preventDefault();
    }

    if (touchEndTime - lastClickTime < params.fastClicksDelayBetweenClicks) {
      setTimeout(removeActive, 0);
      return true;
    }

    lastClickTime = touchEndTime;

    trackClick = false;

    if (_device2.default.ios && scrollParent) {
      if (scrollParent.scrollTop !== scrollParent.f7ScrollTop) {
        return false;
      }
    }

    // Add active-state here because, in a very fast tap, the timeout didn't
    // have the chance to execute. Removing active-state in a timeout gives
    // the chance to the animation execute.
    if (params.activeState) {
      addActive();
      setTimeout(removeActive, 0);
    }
    // Remove Ripple
    if (useRipple) {
      rippleTouchEnd();
    }

    // Trigger focus when required
    if (targetNeedsFocus(targetElement)) {
      if (_device2.default.ios && _device2.default.webView) {
        targetElement.focus();
        return false;
      }

      targetElement.focus();
    }

    // Blur active elements
    if (_ssrWindow.document.activeElement && targetElement !== _ssrWindow.document.activeElement && _ssrWindow.document.activeElement !== _ssrWindow.document.body && targetElement.nodeName.toLowerCase() !== 'label') {
      _ssrWindow.document.activeElement.blur();
    }

    // Send click
    e.preventDefault();
    if (params.tapHoldPreventClicks && tapHoldFired) {
      return false;
    }
    sendClick(e);
    return false;
  }
  function handleTouchCancel() {
    trackClick = false;
    targetElement = null;

    // Remove Active State
    clearTimeout(activeTimeout);
    clearTimeout(tapHoldTimeout);
    if (params.activeState) {
      removeActive();
    }

    // Remove Ripple
    if (useRipple) {
      rippleTouchEnd();
    }
  }

  function handleClick(e) {
    var allowClick = false;
    if (trackClick) {
      targetElement = null;
      trackClick = false;
      return true;
    }
    if (e.target.type === 'submit' && e.detail === 0 || e.target.type === 'file') {
      return true;
    }
    if (!targetElement) {
      if (!isFormElement(e.target)) {
        allowClick = true;
      }
    }
    if (!needsFastClick) {
      allowClick = true;
    }
    if (_ssrWindow.document.activeElement === targetElement) {
      allowClick = true;
    }
    if (e.forwardedTouchEvent) {
      allowClick = true;
    }
    if (!e.cancelable) {
      allowClick = true;
    }
    if (params.tapHold && params.tapHoldPreventClicks && tapHoldFired) {
      allowClick = false;
    }
    if (!allowClick) {
      e.stopImmediatePropagation();
      e.stopPropagation();
      if (targetElement) {
        if (targetNeedsPrevent(targetElement) || isMoved) {
          e.preventDefault();
        }
      } else {
        e.preventDefault();
      }
      targetElement = null;
    }
    needsFastClickTimeOut = setTimeout(function () {
      needsFastClick = false;
    }, _device2.default.ios || _device2.default.androidChrome ? 100 : 400);

    if (params.tapHold) {
      tapHoldTimeout = setTimeout(function () {
        tapHoldFired = false;
      }, _device2.default.ios || _device2.default.androidChrome ? 100 : 400);
    }

    return allowClick;
  }

  function emitAppTouchEvent(name, e) {
    app.emit({
      events: name,
      data: [e]
    });
  }
  function appClick(e) {
    emitAppTouchEvent('click', e);
  }
  function appTouchStartActive(e) {
    emitAppTouchEvent('touchstart touchstart:active', e);
  }
  function appTouchMoveActive(e) {
    emitAppTouchEvent('touchmove touchmove:active', e);
  }
  function appTouchEndActive(e) {
    emitAppTouchEvent('touchend touchend:active', e);
  }
  function appTouchStartPassive(e) {
    emitAppTouchEvent('touchstart:passive', e);
  }
  function appTouchMovePassive(e) {
    emitAppTouchEvent('touchmove:passive', e);
  }
  function appTouchEndPassive(e) {
    emitAppTouchEvent('touchend:passive', e);
  }

  var passiveListener = _support2.default.passiveListener ? { passive: true } : false;
  var activeListener = _support2.default.passiveListener ? { passive: false } : false;

  _ssrWindow.document.addEventListener('click', appClick, true);

  if (_support2.default.passiveListener) {
    _ssrWindow.document.addEventListener(app.touchEvents.start, appTouchStartActive, activeListener);
    _ssrWindow.document.addEventListener(app.touchEvents.move, appTouchMoveActive, activeListener);
    _ssrWindow.document.addEventListener(app.touchEvents.end, appTouchEndActive, activeListener);

    _ssrWindow.document.addEventListener(app.touchEvents.start, appTouchStartPassive, passiveListener);
    _ssrWindow.document.addEventListener(app.touchEvents.move, appTouchMovePassive, passiveListener);
    _ssrWindow.document.addEventListener(app.touchEvents.end, appTouchEndPassive, passiveListener);
  } else {
    _ssrWindow.document.addEventListener(app.touchEvents.start, function (e) {
      appTouchStartActive(e);
      appTouchStartPassive(e);
    }, false);
    _ssrWindow.document.addEventListener(app.touchEvents.move, function (e) {
      appTouchMoveActive(e);
      appTouchMovePassive(e);
    }, false);
    _ssrWindow.document.addEventListener(app.touchEvents.end, function (e) {
      appTouchEndActive(e);
      appTouchEndPassive(e);
    }, false);
  }

  if (_support2.default.touch) {
    app.on('click', handleClick);
    app.on('touchstart', handleTouchStart);
    app.on('touchmove', handleTouchMove);
    app.on('touchend', handleTouchEnd);
    _ssrWindow.document.addEventListener('touchcancel', handleTouchCancel, { passive: true });
  } else if (params.activeState) {
    app.on('touchstart', handleMouseDown);
    app.on('touchmove', handleMouseMove);
    app.on('touchend', handleMouseUp);
  }
  _ssrWindow.document.addEventListener('contextmenu', function (e) {
    if (params.disableContextMenu && (_device2.default.ios || _device2.default.android || _device2.default.cordova)) {
      e.preventDefault();
    }
    if (useRipple) {
      if (activableElement) removeActive();
      rippleTouchEnd();
    }
  });
}

exports.default = {
  name: 'touch',
  params: {
    touch: {
      // Fast clicks
      fastClicks: true,
      fastClicksDistanceThreshold: 10,
      fastClicksDelayBetweenClicks: 50,
      fastClicksExclude: '', // CSS selector
      // ContextMenu
      disableContextMenu: true,
      // Tap Hold
      tapHold: false,
      tapHoldDelay: 750,
      tapHoldPreventClicks: true,
      // Active State
      activeState: true,
      activeStateElements: 'a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus',
      materialRipple: true,
      materialRippleElements: '.ripple, .link, .item-link, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus'
    }
  },
  instance: {
    touchEvents: {
      start: _support2.default.touch ? 'touchstart' : 'mousedown',
      move: _support2.default.touch ? 'touchmove' : 'mousemove',
      end: _support2.default.touch ? 'touchend' : 'mouseup'
    }
  },
  on: {
    init: initTouch
  }
};

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _ssrWindow = __webpack_require__(2);

var _device = __webpack_require__(3);

var _device2 = _interopRequireDefault(_device);

var _support = __webpack_require__(6);

var _support2 = _interopRequireDefault(_support);

var _viewClass = __webpack_require__(9);

var _viewClass2 = _interopRequireDefault(_viewClass);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function initClicks(app) {
  function handleClicks(e) {
    var clicked = (0, _dom2.default)(e.target);
    var clickedLink = clicked.closest('a');
    var isLink = clickedLink.length > 0;
    var url = isLink && clickedLink.attr('href');
    var isTabLink = isLink && clickedLink.hasClass('tab-link') && (clickedLink.attr('data-tab') || url && url.indexOf('#') === 0);

    // Check if link is external
    // todo vlad

    if (isLink) {
      // eslint-disable-next-line
      if (clickedLink.is(app.params.clicks.externalLinks) || url && url.indexOf('javascript:') >= 0) {
        var target = clickedLink.attr('target');
        if (url && (target === '_system' || target === '_blank' || target === '_browser')) {
          e.preventDefault();
          if (target !== '_browser' && _ssrWindow.window.cordova && _ssrWindow.window.cordova.InAppBrowser) {
            //_ssrWindow.window.cordova.InAppBrowser.open(url, target);
            if (window.Android != undefined) {
              app.preloader.show();
          		window.Android.openExternalLinks(text);
          		return false;
          	}else{
              window.location.href = url;
            }
          } else {
            //_ssrWindow.window.open(url, target);
            if (window.Android != undefined) {
              app.preloader.show();
          		window.Android.openExternalLinks(text);
          		return false;
          	}else{
              window.location.href = url;
            }
          }
        }
        return;
      }
    }

    // Modules Clicks
    Object.keys(app.modules).forEach(function (moduleName) {
      var moduleClicks = app.modules[moduleName].clicks;
      if (!moduleClicks) return;
      Object.keys(moduleClicks).forEach(function (clickSelector) {
        var matchingClickedElement = clicked.closest(clickSelector).eq(0);
        if (matchingClickedElement.length > 0) {
          moduleClicks[clickSelector].call(app, matchingClickedElement, matchingClickedElement.dataset());
        }
      });
    });

    // Load Page
    var clickedLinkData = {};
    if (isLink) {
      e.preventDefault();
      clickedLinkData = clickedLink.dataset();
    }
    var validUrl = url && url.length > 0 && url !== '#' && !isTabLink;
    var template = clickedLinkData.template;
    if (validUrl || clickedLink.hasClass('back') || template) {
      var view = void 0;
      if (clickedLinkData.view) {
        view = (0, _dom2.default)(clickedLinkData.view)[0].f7View;
      } else {
        view = clicked.parents('.view')[0] && clicked.parents('.view')[0].f7View;
        if (!clickedLink.hasClass('back') && view && view.params.linksView) {
          if (typeof view.params.linksView === 'string') view = (0, _dom2.default)(view.params.linksView)[0].f7View;else if (view.params.linksView instanceof _viewClass2.default) view = view.params.linksView;
        }
      }
      if (!view) {
        if (app.views.main) view = app.views.main;
      }
      if (!view || !view.router) return;
      if (clickedLinkData.context && typeof clickedLinkData.context === 'string') {
        try {
          clickedLinkData.context = JSON.parse(clickedLinkData.context);
        } catch (err) {
          // something wrong there
        }
      }
      if (clickedLink.hasClass('back')) view.router.back(url, clickedLinkData);else view.router.navigate(url, clickedLinkData);
    }
  }

  app.on('click', handleClicks);

  // Prevent scrolling on overlays
  function preventScrolling(e) {
    e.preventDefault();
  }
  if (_support2.default.touch && !_device2.default.android) {
    var activeListener = _support2.default.passiveListener ? { passive: false, capture: false } : false;
    (0, _dom2.default)(_ssrWindow.document).on(app.params.touch.fastClicks ? 'touchstart' : 'touchmove', '.panel-backdrop, .dialog-backdrop, .preloader-backdrop, .popup-backdrop, .searchbar-backdrop', preventScrolling, activeListener);
  }
}
exports.default = {
  name: 'clicks',
  params: {
    clicks: {
      // External Links
      externalLinks: '.external'
    }
  },
  on: {
    init: function init() {
      var app = this;
      initClicks(app);
    }
  }
};

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ssrWindow = __webpack_require__(2);

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _template = __webpack_require__(5);

var _template2 = _interopRequireDefault(_template);

var _pathToRegexp = __webpack_require__(11);

var _pathToRegexp2 = _interopRequireDefault(_pathToRegexp);

var _class = __webpack_require__(7);

var _class2 = _interopRequireDefault(_class);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _component = __webpack_require__(28);

var _component2 = _interopRequireDefault(_component);

var _history = __webpack_require__(4);

var _history2 = _interopRequireDefault(_history);

var _swipeBack = __webpack_require__(29);

var _swipeBack2 = _interopRequireDefault(_swipeBack);

var _navigate = __webpack_require__(30);

var _tab = __webpack_require__(31);

var _modal = __webpack_require__(32);

var _back = __webpack_require__(33);

var _clearPreviousHistory = __webpack_require__(34);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // eslint-disable-line


var Router = function (_Framework7Class) {
  _inherits(Router, _Framework7Class);

  function Router(app, view) {
    var _ret;

    _classCallCheck(this, Router);

    var _this = _possibleConstructorReturn(this, (Router.__proto__ || Object.getPrototypeOf(Router)).call(this, {}, [typeof view === 'undefined' ? app : view]));

    var router = _this;

    // Is App Router
    router.isAppRouter = typeof view === 'undefined';

    if (router.isAppRouter) {
      // App Router
      _utils2.default.extend(false, router, {
        app: app,
        params: app.params.view,
        routes: app.routes || [],
        cache: app.cache
      });
    } else {
      // View Router
      _utils2.default.extend(false, router, {
        app: app,
        view: view,
        viewId: view.id,
        params: view.params,
        routes: view.routes,
        $el: view.$el,
        el: view.el,
        $navbarEl: view.$navbarEl,
        navbarEl: view.navbarEl,
        history: view.history,
        scrollHistory: view.scrollHistory,
        cache: app.cache,
        dynamicNavbar: app.theme === 'ios' && view.params.iosDynamicNavbar,
        separateNavbar: app.theme === 'ios' && view.params.iosDynamicNavbar && view.params.iosSeparateDynamicNavbar,
        initialPages: [],
        initialNavbars: []
      });
    }

    // Install Modules
    router.useModules();

    // Temporary Dom
    router.tempDom = _ssrWindow.document.createElement('div');

    // AllowPageChage
    router.allowPageChange = true;

    // Current Route
    var currentRoute = {};
    var previousRoute = {};
    Object.defineProperty(router, 'currentRoute', {
      enumerable: true,
      configurable: true,
      set: function set() {
        var newRoute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        previousRoute = _utils2.default.extend({}, currentRoute);
        currentRoute = newRoute;
        if (!currentRoute) return;
        router.url = currentRoute.url;
        router.emit('routeChange', newRoute, previousRoute, router);
      },
      get: function get() {
        return currentRoute;
      }
    });
    Object.defineProperty(router, 'previousRoute', {
      enumerable: true,
      configurable: true,
      get: function get() {
        return previousRoute;
      },
      set: function set(newRoute) {
        previousRoute = newRoute;
      }
    });

    _utils2.default.extend(router, {
      // Load
      forward: _navigate.forward,
      load: _navigate.load,
      navigate: _navigate.navigate,
      refreshPage: _navigate.refreshPage,
      // Tab
      tabLoad: _tab.tabLoad,
      tabRemove: _tab.tabRemove,
      // Modal
      modalLoad: _modal.modalLoad,
      modalRemove: _modal.modalRemove,
      // Back
      backward: _back.backward,
      loadBack: _back.loadBack,
      back: _back.back,
      // Clear history
      clearPreviousHistory: _clearPreviousHistory.clearPreviousHistory
    });

    return _ret = router, _possibleConstructorReturn(_this, _ret);
  }

  _createClass(Router, [{
    key: 'animatableNavElements',
    value: function animatableNavElements(newNavbarInner, oldNavbarInner) {
      var router = this;
      var dynamicNavbar = router.dynamicNavbar;
      var animateIcon = router.params.iosAnimateNavbarBackIcon;

      var newNavEls = void 0;
      var oldNavEls = void 0;
      function animatableNavEl(el, navbarInner) {
        var $el = (0, _dom2.default)(el);
        var isSliding = $el.hasClass('sliding') || navbarInner.hasClass('sliding');
        var isSubnavbar = $el.hasClass('subnavbar');
        var needsOpacityTransition = isSliding ? !isSubnavbar : true;
        var hasIcon = isSliding && animateIcon && $el.hasClass('left') && $el.find('.back .icon').length > 0;
        var $iconEl = void 0;
        if (hasIcon) $iconEl = $el.find('.back .icon');
        return {
          $el: $el,
          $iconEl: $iconEl,
          hasIcon: hasIcon,
          leftOffset: $el[0].f7NavbarLeftOffset,
          rightOffset: $el[0].f7NavbarRightOffset,
          isSliding: isSliding,
          isSubnavbar: isSubnavbar,
          needsOpacityTransition: needsOpacityTransition
        };
      }
      if (dynamicNavbar) {
        newNavEls = [];
        oldNavEls = [];
        newNavbarInner.children('.left, .right, .title, .subnavbar').each(function (index, navEl) {
          newNavEls.push(animatableNavEl(navEl, newNavbarInner));
        });
        oldNavbarInner.children('.left, .right, .title, .subnavbar').each(function (index, navEl) {
          oldNavEls.push(animatableNavEl(navEl, oldNavbarInner));
        });
        [oldNavEls, newNavEls].forEach(function (navEls) {
          navEls.forEach(function (navEl) {
            var n = navEl;
            var isSliding = navEl.isSliding,
                $el = navEl.$el;

            var otherEls = navEls === oldNavEls ? newNavEls : oldNavEls;
            if (!(isSliding && $el.hasClass('title') && otherEls)) return;
            otherEls.forEach(function (otherNavEl) {
              if (otherNavEl.$el.hasClass('left') && otherNavEl.hasIcon) {
                var iconTextEl = otherNavEl.$el.find('.back span')[0];
                n.leftOffset += iconTextEl ? iconTextEl.offsetLeft : 0;
              }
            });
          });
        });
      }

      return { newNavEls: newNavEls, oldNavEls: oldNavEls };
    }
  }, {
    key: 'animateWithCSS',
    value: function animateWithCSS(oldPage, newPage, oldNavbarInner, newNavbarInner, direction, callback) {
      var router = this;
      var dynamicNavbar = router.dynamicNavbar;
      var separateNavbar = router.separateNavbar;
      var ios = router.app.theme === 'ios';
      // Router Animation class
      var routerTransitionClass = 'router-transition-' + direction + ' router-transition-css-' + direction;

      var newNavEls = void 0;
      var oldNavEls = void 0;
      var navbarWidth = 0;

      if (ios && dynamicNavbar) {
        if (!separateNavbar) {
          navbarWidth = newNavbarInner[0].offsetWidth;
        }
        var navEls = router.animatableNavElements(newNavbarInner, oldNavbarInner);
        newNavEls = navEls.newNavEls;
        oldNavEls = navEls.oldNavEls;
      }

      function animateNavbars(progress) {
        if (ios && dynamicNavbar) {
          newNavEls.forEach(function (navEl) {
            var $el = navEl.$el;
            var offset = direction === 'forward' ? navEl.rightOffset : navEl.leftOffset;
            if (navEl.isSliding) {
              $el.transform('translate3d(' + offset * (1 - progress) + 'px,0,0)');
            }
            if (navEl.hasIcon) {
              if (direction === 'forward') {
                navEl.$iconEl.transform('translate3d(' + (-offset - navbarWidth) * (1 - progress) + 'px,0,0)');
              } else {
                navEl.$iconEl.transform('translate3d(' + (-offset + navbarWidth / 5) * (1 - progress) + 'px,0,0)');
              }
            }
          });
          oldNavEls.forEach(function (navEl) {
            var $el = navEl.$el;
            var offset = direction === 'forward' ? navEl.leftOffset : navEl.rightOffset;
            if (navEl.isSliding) {
              $el.transform('translate3d(' + offset * progress + 'px,0,0)');
            }
            if (navEl.hasIcon) {
              if (direction === 'forward') {
                navEl.$iconEl.transform('translate3d(' + (-offset + navbarWidth / 5) * progress + 'px,0,0)');
              } else {
                navEl.$iconEl.transform('translate3d(' + (-offset - navbarWidth) * progress + 'px,0,0)');
              }
            }
          });
        }
      }

      // AnimationEnd Callback
      function onDone() {
        if (router.dynamicNavbar) {
          if (newNavbarInner.hasClass('sliding')) {
            newNavbarInner.find('.title, .left, .right, .left .icon, .subnavbar').transform('');
          } else {
            newNavbarInner.find('.sliding').transform('');
          }
          if (oldNavbarInner.hasClass('sliding')) {
            oldNavbarInner.find('.title, .left, .right, .left .icon, .subnavbar').transform('');
          } else {
            oldNavbarInner.find('.sliding').transform('');
          }
        }
        router.$el.removeClass(routerTransitionClass);
        if (callback) callback();
      }

      (direction === 'forward' ? newPage : oldPage).animationEnd(function () {
        onDone();
      });

      // Animate
      if (dynamicNavbar) {
        // Prepare Navbars
        animateNavbars(0);
        _utils2.default.nextTick(function () {
          // Add class, start animation
          animateNavbars(1);
          router.$el.addClass(routerTransitionClass);
        });
      } else {
        // Add class, start animation
        router.$el.addClass(routerTransitionClass);
      }
    }
  }, {
    key: 'animateWithJS',
    value: function animateWithJS(oldPage, newPage, oldNavbarInner, newNavbarInner, direction, callback) {
      var router = this;
      var dynamicNavbar = router.dynamicNavbar;
      var separateNavbar = router.separateNavbar;
      var ios = router.app.theme === 'ios';
      var duration = ios ? 400 : 250;
      var routerTransitionClass = 'router-transition-' + direction + ' router-transition-js-' + direction;

      var startTime = null;
      var done = false;

      var newNavEls = void 0;
      var oldNavEls = void 0;
      var navbarWidth = 0;

      if (ios && dynamicNavbar) {
        if (!separateNavbar) {
          navbarWidth = newNavbarInner[0].offsetWidth;
        }
        var navEls = router.animatableNavElements(newNavbarInner, oldNavbarInner);
        newNavEls = navEls.newNavEls;
        oldNavEls = navEls.oldNavEls;
      }

      var $shadowEl = void 0;
      var $opacityEl = void 0;

      if (ios) {
        $shadowEl = (0, _dom2.default)('<div class="page-shadow-effect"></div>');
        $opacityEl = (0, _dom2.default)('<div class="page-opacity-effect"></div>');

        if (direction === 'forward') {
          newPage.append($shadowEl);
          oldPage.append($opacityEl);
        } else {
          newPage.append($opacityEl);
          oldPage.append($shadowEl);
        }
      }
      var easing = _utils2.default.bezier(0.25, 0.1, 0.25, 1);

      function onDone() {
        newPage.transform('').css('opacity', '');
        oldPage.transform('').css('opacity', '');
        if (ios) {
          $shadowEl.remove();
          $opacityEl.remove();
          if (dynamicNavbar) {
            newNavEls.forEach(function (navEl) {
              navEl.$el.transform('');
              navEl.$el.css('opacity', '');
            });
            oldNavEls.forEach(function (navEl) {
              navEl.$el.transform('');
              navEl.$el.css('opacity', '');
            });
            newNavEls = [];
            oldNavEls = [];
          }
        }

        router.$el.removeClass(routerTransitionClass);

        if (callback) callback();
      }

      function render() {
        var time = _utils2.default.now();
        if (!startTime) startTime = time;
        var progress = Math.max(Math.min((time - startTime) / duration, 1), 0);
        var easeProgress = easing(progress);

        if (progress >= 1) {
          done = true;
        }
        var inverter = router.app.rtl ? -1 : 1;
        if (ios) {
          if (direction === 'forward') {
            newPage.transform('translate3d(' + (1 - easeProgress) * 100 * inverter + '%,0,0)');
            oldPage.transform('translate3d(' + -easeProgress * 20 * inverter + '%,0,0)');
            $shadowEl[0].style.opacity = easeProgress;
            $opacityEl[0].style.opacity = easeProgress;
          } else {
            newPage.transform('translate3d(' + -(1 - easeProgress) * 20 * inverter + '%,0,0)');
            oldPage.transform('translate3d(' + easeProgress * 100 * inverter + '%,0,0)');
            $shadowEl[0].style.opacity = 1 - easeProgress;
            $opacityEl[0].style.opacity = 1 - easeProgress;
          }
          if (dynamicNavbar) {
            newNavEls.forEach(function (navEl) {
              var $el = navEl.$el;
              var offset = direction === 'forward' ? navEl.rightOffset : navEl.leftOffset;
              if (navEl.needsOpacityTransition) {
                $el[0].style.opacity = easeProgress;
              }
              if (navEl.isSliding) {
                $el.transform('translate3d(' + offset * (1 - easeProgress) + 'px,0,0)');
              }
              if (navEl.hasIcon) {
                if (direction === 'forward') {
                  navEl.$iconEl.transform('translate3d(' + (-offset - navbarWidth) * (1 - easeProgress) + 'px,0,0)');
                } else {
                  navEl.$iconEl.transform('translate3d(' + (-offset + navbarWidth / 5) * (1 - easeProgress) + 'px,0,0)');
                }
              }
            });
            oldNavEls.forEach(function (navEl) {
              var $el = navEl.$el;
              var offset = direction === 'forward' ? navEl.leftOffset : navEl.rightOffset;
              if (navEl.needsOpacityTransition) {
                $el[0].style.opacity = 1 - easeProgress;
              }
              if (navEl.isSliding) {
                $el.transform('translate3d(' + offset * easeProgress + 'px,0,0)');
              }
              if (navEl.hasIcon) {
                if (direction === 'forward') {
                  navEl.$iconEl.transform('translate3d(' + (-offset + navbarWidth / 5) * easeProgress + 'px,0,0)');
                } else {
                  navEl.$iconEl.transform('translate3d(' + (-offset - navbarWidth) * easeProgress + 'px,0,0)');
                }
              }
            });
          }
        } else if (direction === 'forward') {
          newPage.transform('translate3d(0, ' + (1 - easeProgress) * 56 + 'px,0)');
          newPage.css('opacity', easeProgress);
        } else {
          oldPage.transform('translate3d(0, ' + easeProgress * 56 + 'px,0)');
          oldPage.css('opacity', 1 - easeProgress);
        }

        if (done) {
          onDone();
          return;
        }
        _utils2.default.nextFrame(render);
      }

      router.$el.addClass(routerTransitionClass);

      _utils2.default.nextFrame(render);
    }
  }, {
    key: 'animate',
    value: function animate() {
      // Args: oldPage, newPage, oldNavbarInner, newNavbarInner, direction, callback
      var router = this;

      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      if (router.params.animateCustom) {
        router.params.animateCustom.apply(router, args);
      } else if (router.params.animateWithJS) {
        router.animateWithJS.apply(router, args);
      } else {
        router.animateWithCSS.apply(router, args);
      }
    }
  }, {
    key: 'removeModal',
    value: function removeModal(modalEl) {
      var router = this;
      router.removeEl(modalEl);
    }
    // eslint-disable-next-line

  }, {
    key: 'removeTabContent',
    value: function removeTabContent(tabEl) {
      var $tabEl = (0, _dom2.default)(tabEl);
      $tabEl.html('');
    }
  }, {
    key: 'removeNavbar',
    value: function removeNavbar(el) {
      var router = this;
      router.removeEl(el);
    }
  }, {
    key: 'removePage',
    value: function removePage(el) {
      var router = this;
      router.removeEl(el);
    }
  }, {
    key: 'removeEl',
    value: function removeEl(el) {
      if (!el) return;
      var router = this;
      var $el = (0, _dom2.default)(el);
      if ($el.length === 0) return;
      if ($el[0].f7Component && $el[0].f7Component.$destroy) {
        $el[0].f7Component.$destroy();
      }
      $el.find('.tab').each(function (tabIndex, tabEl) {
        (0, _dom2.default)(tabEl).children().each(function (index, tabChild) {
          if (tabChild.f7Component) {
            (0, _dom2.default)(tabChild).trigger('tab:beforeremove');
            tabChild.f7Component.$destroy();
          }
        });
      });
      if (!router.params.removeElements) {
        return;
      }
      if (router.params.removeElementsWithTimeout) {
        setTimeout(function () {
          $el.remove();
        }, router.params.removeElementsTimeout);
      } else {
        $el.remove();
      }
    }
  }, {
    key: 'getPageEl',
    value: function getPageEl(content) {
      var router = this;
      if (typeof content === 'string') {
        router.tempDom.innerHTML = content;
      } else {
        if ((0, _dom2.default)(content).hasClass('page')) {
          return content;
        }
        router.tempDom.innerHTML = '';
        (0, _dom2.default)(router.tempDom).append(content);
      }

      return router.findElement('.page', router.tempDom);
    }
  }, {
    key: 'findElement',
    value: function findElement(stringSelector, container, notStacked) {
      var router = this;
      var view = router.view;
      var app = router.app;

      // Modals Selector
      var modalsSelector = '.popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page';

      var $container = (0, _dom2.default)(container);
      var selector = stringSelector;
      if (notStacked) selector += ':not(.stacked)';

      var found = $container.find(selector).filter(function (index, el) {
        return (0, _dom2.default)(el).parents(modalsSelector).length === 0;
      });

      if (found.length > 1) {
        if (typeof view.selector === 'string') {
          // Search in related view
          found = $container.find(view.selector + ' ' + selector);
        }
        if (found.length > 1) {
          // Search in main view
          found = $container.find('.' + app.params.viewMainClass + ' ' + selector);
        }
      }
      if (found.length === 1) return found;

      // Try to find not stacked
      if (!notStacked) found = router.findElement(selector, $container, true);
      if (found && found.length === 1) return found;
      if (found && found.length > 1) return (0, _dom2.default)(found[0]);
      return undefined;
    }
  }, {
    key: 'flattenRoutes',
    value: function flattenRoutes() {
      var _this2 = this;

      var routes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.routes;

      var flattenedRoutes = [];
      routes.forEach(function (route) {
        if ('routes' in route) {
          var mergedPathsRoutes = route.routes.map(function (childRoute) {
            var cRoute = _utils2.default.extend({}, childRoute);
            cRoute.path = (route.path + '/' + cRoute.path).replace('///', '/').replace('//', '/');
            return cRoute;
          });
          flattenedRoutes = flattenedRoutes.concat(route, _this2.flattenRoutes(mergedPathsRoutes));
        } else if ('tabs' in route && route.tabs) {
          var _mergedPathsRoutes = route.tabs.map(function (tabRoute) {
            var tRoute = _utils2.default.extend({}, route, {
              path: (route.path + '/' + tabRoute.path).replace('///', '/').replace('//', '/'),
              parentPath: route.path,
              tab: tabRoute
            });
            delete tRoute.tabs;
            return tRoute;
          });
          flattenedRoutes = flattenedRoutes.concat(_this2.flattenRoutes(_mergedPathsRoutes));
        } else {
          flattenedRoutes.push(route);
        }
      });
      return flattenedRoutes;
    }
    // eslint-disable-next-line

  }, {
    key: 'parseRouteUrl',
    value: function parseRouteUrl(url) {
      if (!url) return {};
      var query = _utils2.default.parseUrlQuery(url);
      var hash = url.split('#')[1];
      var params = {};
      var path = url.split('#')[0].split('?')[0];
      return {
        query: query,
        hash: hash,
        params: params,
        url: url,
        path: path
      };
    }
  }, {
    key: 'findTabRoute',
    value: function findTabRoute(tabEl) {
      var router = this;
      var $tabEl = (0, _dom2.default)(tabEl);
      var parentPath = router.currentRoute.route.parentPath;
      var tabId = $tabEl.attr('id');
      var flattenedRoutes = router.flattenRoutes(router.routes);
      var foundTabRoute = void 0;
      flattenedRoutes.forEach(function (route) {
        if (route.parentPath === parentPath && route.tab && route.tab.id === tabId) {
          foundTabRoute = route;
        }
      });
      return foundTabRoute;
    }
  }, {
    key: 'findRouteByKey',
    value: function findRouteByKey(key, value) {
      var router = this;
      var routes = router.routes;
      var flattenedRoutes = router.flattenRoutes(routes);
      var matchingRoute = void 0;

      flattenedRoutes.forEach(function (route) {
        if (matchingRoute) return;
        if (route[key] === value) {
          matchingRoute = route;
        }
      });
      return matchingRoute;
    }
  }, {
    key: 'findMatchingRoute',
    value: function findMatchingRoute(url) {
      if (!url) return undefined;
      var router = this;
      var routes = router.routes;
      var flattenedRoutes = router.flattenRoutes(routes);

      var _router$parseRouteUrl = router.parseRouteUrl(url),
          path = _router$parseRouteUrl.path,
          query = _router$parseRouteUrl.query,
          hash = _router$parseRouteUrl.hash,
          params = _router$parseRouteUrl.params;

      var matchingRoute = void 0;
      flattenedRoutes.forEach(function (route) {
        if (matchingRoute) return;
        var keys = [];

        var pathsToMatch = [route.path];
        if (route.alias) {
          if (typeof route.alias === 'string') pathsToMatch.push(route.alias);else if (Array.isArray(route.alias)) {
            route.alias.forEach(function (aliasPath) {
              pathsToMatch.push(aliasPath);
            });
          }
        }

        var matched = void 0;
        pathsToMatch.forEach(function (pathToMatch) {
          if (matched) return;
          matched = (0, _pathToRegexp2.default)(pathToMatch, keys).exec(path);
        });

        if (matched) {
          keys.forEach(function (keyObj, index) {
            var paramValue = matched[index + 1];
            params[keyObj.name] = paramValue;
          });

          var parentPath = void 0;
          if (route.parentPath) {
            parentPath = path.split('/').slice(0, route.parentPath.split('/').length - 1).join('/');
          }

          matchingRoute = {
            query: query,
            hash: hash,
            params: params,
            url: url,
            path: path,
            parentPath: parentPath,
            route: route,
            name: route.name
          };
        }
      });
      return matchingRoute;
    }
  }, {
    key: 'removeFromXhrCache',
    value: function removeFromXhrCache(url) {
      var router = this;
      var xhrCache = router.cache.xhr;
      var index = false;
      for (var i = 0; i < xhrCache.length; i += 1) {
        if (xhrCache[i].url === url) index = i;
      }
      if (index !== false) xhrCache.splice(index, 1);
    }
  }, {
    key: 'xhrRequest',
    value: function xhrRequest(requestUrl, options) {
      var router = this;
      var params = router.params;
      var ignoreCache = options.ignoreCache;

      var url = requestUrl;

      var hasQuery = url.indexOf('?') >= 0;
      if (params.passRouteQueryToRequest && options && options.route && options.route.query && Object.keys(options.route.query).length) {
        url += '' + (hasQuery ? '&' : '?') + _utils2.default.serializeObject(options.route.query);
        hasQuery = true;
      }

      if (params.passRouteParamsToRequest && options && options.route && options.route.params && Object.keys(options.route.params).length) {
        url += '' + (hasQuery ? '&' : '?') + _utils2.default.serializeObject(options.route.params);
        hasQuery = true;
      }

      if (url.indexOf('{{') >= 0 && options && options.route && options.route.params && Object.keys(options.route.params).length) {
        Object.keys(options.route.params).forEach(function (paramName) {
          var regExp = new RegExp('{{' + paramName + '}}', 'g');
          url = url.replace(regExp, options.route.params[paramName] || '');
        });
      }
      // should we ignore get params or not
      if (params.xhrCacheIgnoreGetParameters && url.indexOf('?') >= 0) {
        url = url.split('?')[0];
      }
      return _utils2.default.promise(function (resolve, reject) {
        if (params.xhrCache && !ignoreCache && url.indexOf('nocache') < 0 && params.xhrCacheIgnore.indexOf(url) < 0) {
          for (var i = 0; i < router.cache.xhr.length; i += 1) {
            var cachedUrl = router.cache.xhr[i];
            if (cachedUrl.url === url) {
              // Check expiration
              if (_utils2.default.now() - cachedUrl.time < params.xhrCacheDuration) {
                // Load from cache
                resolve(cachedUrl.content);
                return;
              }
            }
          }
        }
        router.xhr = router.app.request({
          url: url,
          method: 'GET',
          beforeSend: function beforeSend(xhr) {
            router.emit('routerAjaxStart', xhr, options);
          },
          complete: function complete(xhr, status) {
            router.emit('routerAjaxComplete', xhr);
            if (status !== 'error' && status !== 'timeout' && xhr.status >= 200 && xhr.status < 300 || xhr.status === 0) {
              if (params.xhrCache && xhr.responseText !== '') {
                router.removeFromXhrCache(url);
                router.cache.xhr.push({
                  url: url,
                  time: _utils2.default.now(),
                  content: xhr.responseText
                });
              }
              router.emit('routerAjaxSuccess', xhr, options);
              resolve(xhr.responseText);
            } else {
              router.emit('routerAjaxError', xhr, options);
              reject(xhr);
            }
          },
          error: function error(xhr) {
            router.emit('routerAjaxError', xhr, options);
            reject(xhr);
          }
        });
      });
    }
    // Remove theme elements

  }, {
    key: 'removeThemeElements',
    value: function removeThemeElements(el) {
      var router = this;
      var theme = router.app.theme;
      (0, _dom2.default)(el).find('.' + (theme === 'md' ? 'ios' : 'md') + '-only, .if-' + (theme === 'md' ? 'ios' : 'md')).remove();
    }
  }, {
    key: 'templateLoader',
    value: function templateLoader(template, templateUrl, options, resolve, reject) {
      var router = this;
      function compile(t) {
        var compiledHtml = void 0;
        var context = void 0;
        try {
          context = options.context || {};
          if (typeof context === 'function') context = context.call(router);else if (typeof context === 'string') {
            try {
              context = JSON.parse(context);
            } catch (err) {
              reject();
              throw err;
            }
          }
          if (typeof t === 'function') {
            compiledHtml = t(context);
          } else {
            compiledHtml = _template2.default.compile(t)(_utils2.default.extend({}, context || {}, {
              $app: router.app,
              $root: _utils2.default.extend({}, router.app.data, router.app.methods),
              $route: options.route,
              $router: router,
              $theme: {
                ios: router.app.theme === 'ios',
                md: router.app.theme === 'md'
              }
            }));
          }
        } catch (err) {
          reject();
          throw err;
        }
        resolve(compiledHtml, { context: context });
      }
      if (templateUrl) {
        // Load via XHR
        if (router.xhr) {
          router.xhr.abort();
          router.xhr = false;
        }
        router.xhrRequest(templateUrl, options).then(function (templateContent) {
          compile(templateContent);
        }).catch(function () {
          reject();
        });
      } else {
        compile(template);
      }
    }
  }, {
    key: 'modalTemplateLoader',
    value: function modalTemplateLoader(template, templateUrl, options, resolve, reject) {
      var router = this;
      return router.templateLoader(template, templateUrl, options, function (html) {
        resolve(html);
      }, reject);
    }
  }, {
    key: 'tabTemplateLoader',
    value: function tabTemplateLoader(template, templateUrl, options, resolve, reject) {
      var router = this;
      return router.templateLoader(template, templateUrl, options, function (html) {
        resolve(html);
      }, reject);
    }
  }, {
    key: 'pageTemplateLoader',
    value: function pageTemplateLoader(template, templateUrl, options, resolve, reject) {
      var router = this;
      return router.templateLoader(template, templateUrl, options, function (html) {
        var newOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

        resolve(router.getPageEl(html), newOptions);
      }, reject);
    }
  }, {
    key: 'componentLoader',
    value: function componentLoader(component, componentUrl) {
      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var resolve = arguments[3];
      var reject = arguments[4];

      var router = this;
      var url = typeof component === 'string' ? component : componentUrl;
      function compile(c) {
        var context = options.context || {};
        if (typeof context === 'function') context = context.call(router);else if (typeof context === 'string') {
          try {
            context = JSON.parse(context);
          } catch (err) {
            reject();
            throw err;
          }
        }
        var extendContext = _utils2.default.merge({}, context, {
          $: _dom2.default,
          $$: _dom2.default,
          $app: router.app,
          $root: _utils2.default.merge({}, router.app.data, router.app.methods),
          $route: options.route,
          $router: router,
          $dom7: _dom2.default,
          $theme: {
            ios: router.app.theme === 'ios',
            md: router.app.theme === 'md'
          }
        });
        var createdComponent = _component2.default.create(c, extendContext);
        resolve(createdComponent.el);
      }
      if (url) {
        // Load via XHR
        if (router.xhr) {
          router.xhr.abort();
          router.xhr = false;
        }
        router.xhrRequest(url, options).then(function (loadedComponent) {
          compile(_component2.default.parse(loadedComponent));
        }).catch(function (err) {
          reject();
          throw err;
        });
      } else {
        compile(component);
      }
    }
  }, {
    key: 'modalComponentLoader',
    value: function modalComponentLoader(rootEl, component, componentUrl, options, resolve, reject) {
      var router = this;
      router.componentLoader(component, componentUrl, options, function (el) {
        resolve(el);
      }, reject);
    }
  }, {
    key: 'tabComponentLoader',
    value: function tabComponentLoader(tabEl, component, componentUrl, options, resolve, reject) {
      var router = this;
      router.componentLoader(component, componentUrl, options, function (el) {
        resolve(el);
      }, reject);
    }
  }, {
    key: 'pageComponentLoader',
    value: function pageComponentLoader(routerEl, component, componentUrl, options, resolve, reject) {
      var router = this;
      router.componentLoader(component, componentUrl, options, function (el) {
        var newOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

        resolve(el, newOptions);
      }, reject);
    }
  }, {
    key: 'getPageData',
    value: function getPageData(pageEl, navbarEl, from, to) {
      var route = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
      var pageFromEl = arguments[5];

      var router = this;
      var $pageEl = (0, _dom2.default)(pageEl);
      var $navbarEl = (0, _dom2.default)(navbarEl);
      var currentPage = $pageEl[0].f7Page || {};
      var direction = void 0;
      var pageFrom = void 0;
      if (from === 'next' && to === 'current' || from === 'current' && to === 'previous') direction = 'forward';
      if (from === 'current' && to === 'next' || from === 'previous' && to === 'current') direction = 'backward';
      if (currentPage && !currentPage.fromPage) {
        var $pageFromEl = (0, _dom2.default)(pageFromEl);
        if ($pageFromEl.length) {
          pageFrom = $pageFromEl[0].f7Page;
        }
      }
      pageFrom = currentPage.pageFrom || pageFrom;
      if (pageFrom && pageFrom.pageFrom) {
        pageFrom.pageFrom = null;
      }
      var page = {
        app: router.app,
        view: router.view,
        router: router,
        $el: $pageEl,
        el: $pageEl[0],
        $pageEl: $pageEl,
        pageEl: $pageEl[0],
        $navbarEl: $navbarEl,
        navbarEl: $navbarEl[0],
        name: $pageEl.attr('data-name'),
        position: from,
        from: from,
        to: to,
        direction: direction,
        route: currentPage.route ? currentPage.route : route,
        pageFrom: pageFrom
      };

      if ($navbarEl && $navbarEl[0]) {
        $navbarEl[0].f7Page = page;
      }
      $pageEl[0].f7Page = page;
      return page;
    }
    // Callbacks

  }, {
    key: 'pageCallback',
    value: function pageCallback(callback, pageEl, navbarEl, from, to) {
      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};
      var pageFromEl = arguments[6];

      if (!pageEl) return;
      var router = this;
      var $pageEl = (0, _dom2.default)(pageEl);
      if (!$pageEl.length) return;
      var route = options.route;

      var restoreScrollTopOnBack = router.params.restoreScrollTopOnBack;

      var camelName = 'page' + (callback[0].toUpperCase() + callback.slice(1, callback.length));
      var colonName = 'page:' + callback.toLowerCase();

      var page = {};
      if (callback === 'beforeRemove' && $pageEl[0].f7Page) {
        page = _utils2.default.extend($pageEl[0].f7Page, { from: from, to: to, position: from });
      } else {
        page = router.getPageData(pageEl, navbarEl, from, to, route, pageFromEl);
      }
      page.swipeBack = !!options.swipeBack;

      var _ref = options.route ? options.route.route : {},
          _ref$on = _ref.on,
          on = _ref$on === undefined ? {} : _ref$on,
          _ref$once = _ref.once,
          once = _ref$once === undefined ? {} : _ref$once;

      if (options.on) {
        _utils2.default.extend(on, options.on);
      }
      if (options.once) {
        _utils2.default.extend(once, options.once);
      }

      function attachEvents() {
        if ($pageEl[0].f7RouteEventsAttached) return;
        $pageEl[0].f7RouteEventsAttached = true;
        if (on && Object.keys(on).length > 0) {
          $pageEl[0].f7RouteEventsOn = on;
          Object.keys(on).forEach(function (eventName) {
            on[eventName] = on[eventName].bind(router);
            $pageEl.on(_utils2.default.eventNameToColonCase(eventName), on[eventName]);
          });
        }
        if (once && Object.keys(once).length > 0) {
          $pageEl[0].f7RouteEventsOnce = once;
          Object.keys(once).forEach(function (eventName) {
            once[eventName] = once[eventName].bind(router);
            $pageEl.once(_utils2.default.eventNameToColonCase(eventName), once[eventName]);
          });
        }
      }

      function detachEvents() {
        if (!$pageEl[0].f7RouteEventsAttached) return;
        if ($pageEl[0].f7RouteEventsOn) {
          Object.keys($pageEl[0].f7RouteEventsOn).forEach(function (eventName) {
            $pageEl.off(_utils2.default.eventNameToColonCase(eventName), $pageEl[0].f7RouteEventsOn[eventName]);
          });
        }
        if ($pageEl[0].f7RouteEventsOnce) {
          Object.keys($pageEl[0].f7RouteEventsOnce).forEach(function (eventName) {
            $pageEl.off(_utils2.default.eventNameToColonCase(eventName), $pageEl[0].f7RouteEventsOnce[eventName]);
          });
        }
        $pageEl[0].f7RouteEventsAttached = null;
        $pageEl[0].f7RouteEventsOn = null;
        $pageEl[0].f7RouteEventsOnce = null;
        delete $pageEl[0].f7RouteEventsAttached;
        delete $pageEl[0].f7RouteEventsOn;
        delete $pageEl[0].f7RouteEventsOnce;
      }

      if (callback === 'mounted') {
        attachEvents();
      }
      if (callback === 'init') {
        if (restoreScrollTopOnBack && (from === 'previous' || !from) && to === 'current' && router.scrollHistory[page.route.url] && !$pageEl.hasClass('no-restore-scroll')) {
          var $pageContent = $pageEl.find('.page-content');
          if ($pageContent.length > 0) {
            // eslint-disable-next-line
            $pageContent = $pageContent.filter(function (pageContentIndex, pageContentEl) {
              return (0, _dom2.default)(pageContentEl).parents('.tab:not(.tab-active)').length === 0 && !(0, _dom2.default)(pageContentEl).is('.tab:not(.tab-active)');
            });
          }
          $pageContent.scrollTop(router.scrollHistory[page.route.url]);
        }
        attachEvents();
        if ($pageEl[0].f7PageInitialized) {
          $pageEl.trigger('page:reinit', page);
          router.emit('pageReinit', page);
          return;
        }
        $pageEl[0].f7PageInitialized = true;
      }
      if (restoreScrollTopOnBack && callback === 'beforeOut' && from === 'current' && to === 'previous') {
        // Save scroll position
        var _$pageContent = $pageEl.find('.page-content');
        if (_$pageContent.length > 0) {
          // eslint-disable-next-line
          _$pageContent = _$pageContent.filter(function (pageContentIndex, pageContentEl) {
            return (0, _dom2.default)(pageContentEl).parents('.tab:not(.tab-active)').length === 0 && !(0, _dom2.default)(pageContentEl).is('.tab:not(.tab-active)');
          });
        }
        router.scrollHistory[page.route.url] = _$pageContent.scrollTop();
      }
      if (restoreScrollTopOnBack && callback === 'beforeOut' && from === 'current' && to === 'next') {
        // Delete scroll position
        delete router.scrollHistory[page.route.url];
      }

      $pageEl.trigger(colonName, page);
      router.emit(camelName, page);

      if (callback === 'beforeRemove') {
        detachEvents();
        $pageEl[0].f7Page = null;
      }
    }
  }, {
    key: 'saveHistory',
    value: function saveHistory() {
      var router = this;
      router.view.history = router.history;
      if (router.params.pushState) {
        _ssrWindow.window.localStorage['f7router-' + router.view.id + '-history'] = JSON.stringify(router.history);
      }
    }
  }, {
    key: 'restoreHistory',
    value: function restoreHistory() {
      var router = this;
      if (router.params.pushState && _ssrWindow.window.localStorage['f7router-' + router.view.id + '-history']) {
        router.history = JSON.parse(_ssrWindow.window.localStorage['f7router-' + router.view.id + '-history']);
        router.view.history = router.history;
      }
    }
  }, {
    key: 'clearHistory',
    value: function clearHistory() {
      var router = this;
      router.history = [];
      if (router.view) router.view.history = [];
      router.saveHistory();
    }
  }, {
    key: 'init',
    value: function init() {
      var router = this;
      var app = router.app,
          view = router.view;

      // Init Swipeback

      if (true) {
        if (view && router.params.iosSwipeBack && app.theme === 'ios' || view && router.params.mdSwipeBack && app.theme === 'md') {
          (0, _swipeBack2.default)(router);
        }
      }

      // Dynamic not separated navbbar
      if (router.dynamicNavbar && !router.separateNavbar) {
        router.$el.addClass('router-dynamic-navbar-inside');
      }

      var initUrl = router.params.url;
      var documentUrl = _ssrWindow.document.location.href.split(_ssrWindow.document.location.origin)[1];
      var historyRestored = void 0;
      if (!router.params.pushState || !router.params.pushStateOnLoad) {
        if (!initUrl) {
          initUrl = documentUrl;
        }
        if (_ssrWindow.document.location.search && initUrl.indexOf('?') < 0) {
          initUrl += _ssrWindow.document.location.search;
        }
        if (_ssrWindow.document.location.hash && initUrl.indexOf('#') < 0) {
          initUrl += _ssrWindow.document.location.hash;
        }
      } else {
        if (router.params.pushStateRoot && documentUrl.indexOf(router.params.pushStateRoot) >= 0) {
          documentUrl = documentUrl.split(router.params.pushStateRoot)[1];
          if (documentUrl === '') documentUrl = '/';
        }
        if (router.params.pushStateSeparator.length > 0 && documentUrl.indexOf(router.params.pushStateSeparator) >= 0) {
          initUrl = documentUrl.split(router.params.pushStateSeparator)[1];
        } else {
          initUrl = documentUrl;
        }
        router.restoreHistory();
        if (router.history.indexOf(initUrl) >= 0) {
          router.history = router.history.slice(0, router.history.indexOf(initUrl) + 1);
        } else if (router.params.url === initUrl) {
          router.history = [initUrl];
        } else if (_history2.default.state && _history2.default.state[view.id] && _history2.default.state[view.id].url === router.history[router.history.length - 1]) {
          initUrl = router.history[router.history.length - 1];
        } else {
          router.history = [documentUrl.split(router.params.pushStateSeparator)[0] || '/', initUrl];
        }
        if (router.history.length > 1) {
          historyRestored = true;
        } else {
          router.history = [];
        }
        router.saveHistory();
      }
      var currentRoute = void 0;
      if (router.history.length > 1) {
        // Will load page
        currentRoute = router.findMatchingRoute(router.history[0]);
        if (!currentRoute) {
          currentRoute = _utils2.default.extend(router.parseRouteUrl(router.history[0]), {
            route: {
              url: router.history[0],
              path: router.history[0].split('?')[0]
            }
          });
        }
      } else {
        // Don't load page
        currentRoute = router.findMatchingRoute(initUrl);
        if (!currentRoute) {
          currentRoute = _utils2.default.extend(router.parseRouteUrl(initUrl), {
            route: {
              url: initUrl,
              path: initUrl.split('?')[0]
            }
          });
        }
      }

      if (router.params.stackPages) {
        router.$el.children('.page').each(function (index, pageEl) {
          var $pageEl = (0, _dom2.default)(pageEl);
          router.initialPages.push($pageEl[0]);
          if (router.separateNavbar && $pageEl.children('.navbar').length > 0) {
            router.initialNavbars.push($pageEl.children('.navbar').find('.navbar-inner')[0]);
          }
        });
      }

      if (router.$el.children('.page:not(.stacked)').length === 0 && initUrl) {
        // No pages presented in DOM, reload new page
        router.navigate(initUrl, {
          initial: true,
          reloadCurrent: true,
          pushState: false
        });
      } else {
        // Init current DOM page
        var hasTabRoute = void 0;
        router.currentRoute = currentRoute;
        router.$el.children('.page:not(.stacked)').each(function (index, pageEl) {
          var $pageEl = (0, _dom2.default)(pageEl);
          var $navbarInnerEl = void 0;
          $pageEl.addClass('page-current');
          if (router.separateNavbar) {
            $navbarInnerEl = $pageEl.children('.navbar').children('.navbar-inner');
            if ($navbarInnerEl.length > 0) {
              if (!router.$navbarEl.parents(_ssrWindow.document).length) {
                router.$el.prepend(router.$navbarEl);
              }
              router.$navbarEl.append($navbarInnerEl);
              $pageEl.children('.navbar').remove();
            } else {
              router.$navbarEl.addClass('navbar-hidden');
            }
          }
          var initOptions = {
            route: router.currentRoute
          };
          if (router.currentRoute && router.currentRoute.route && router.currentRoute.route.options) {
            _utils2.default.extend(initOptions, router.currentRoute.route.options);
          }
          router.currentPageEl = $pageEl[0];
          if (router.dynamicNavbar && $navbarInnerEl.length) {
            router.currentNavbarEl = $navbarInnerEl[0];
          }
          router.removeThemeElements($pageEl);
          if (router.dynamicNavbar && $navbarInnerEl.length) {
            router.removeThemeElements($navbarInnerEl);
          }
          if (initOptions.route.route.tab) {
            hasTabRoute = true;
            router.tabLoad(initOptions.route.route.tab, _utils2.default.extend({}, initOptions));
          }
          router.pageCallback('init', $pageEl, $navbarInnerEl, 'current', undefined, initOptions);
        });
        if (historyRestored) {
          router.navigate(initUrl, {
            initial: true,
            pushState: false,
            history: false,
            animate: router.params.pushStateAnimateOnLoad,
            once: {
              pageAfterIn: function pageAfterIn() {
                if (router.history.length > 2) {
                  router.back({ preload: true });
                }
              }
            }
          });
        }
        if (!historyRestored && !hasTabRoute) {
          router.history.push(initUrl);
          router.saveHistory();
        }
      }
      if (initUrl && router.params.pushState && router.params.pushStateOnLoad && (!_history2.default.state || !_history2.default.state[view.id])) {
        _history2.default.initViewState(view.id, {
          url: initUrl
        });
      }
      router.emit('local::init routerInit', router);
    }
  }, {
    key: 'destroy',
    value: function destroy() {
      var router = this;

      router.emit('local::destroy routerDestroy', router);

      // Delete props & methods
      Object.keys(router).forEach(function (routerProp) {
        router[routerProp] = null;
        delete router[routerProp];
      });

      router = null;
    }
  }]);

  return Router;
}(_class2.default);

exports.default = Router;

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _template = __webpack_require__(5);

var _template2 = _interopRequireDefault(_template);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var tempDom = _ssrWindow.document.createElement('div');

var Framework7Component = function Framework7Component(opts) {
  var extendContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  _classCallCheck(this, Framework7Component);

  var options = _utils2.default.extend({}, opts);
  var component = _utils2.default.merge(this, extendContext, { $options: options });

  // Apply context
  'beforeCreate created beforeMount mounted beforeDestroy destroyed'.split(' ').forEach(function (cycleKey) {
    if (options[cycleKey]) options[cycleKey] = options[cycleKey].bind(component);
  });

  if (options.data) {
    options.data = options.data.bind(component);
    // Data
    _utils2.default.extend(component, options.data());
  }
  if (options.render) options.render = options.render.bind(component);
  if (options.methods) {
    Object.keys(options.methods).forEach(function (methodName) {
      component[methodName] = options.methods[methodName].bind(component);
    });
  }

  // Bind Events
  if (options.on) {
    Object.keys(options.on).forEach(function (eventName) {
      options.on[eventName] = options.on[eventName].bind(component);
    });
  }
  if (options.once) {
    Object.keys(options.once).forEach(function (eventName) {
      options.once[eventName] = options.once[eventName].bind(component);
    });
  }

  if (options.beforeCreate) options.beforeCreate();

  // Watchers
  if (options.watch) {
    Object.keys(options.watch).forEach(function (watchKey) {
      var dataKeyValue = component[watchKey];
      Object.defineProperty(component, watchKey, {
        enumerable: true,
        configurable: true,
        set: function set(newValue) {
          var previousValue = dataKeyValue;
          dataKeyValue = newValue;
          if (previousValue === newValue) return;
          options.watch[watchKey].call(component, newValue, previousValue);
        },
        get: function get() {
          return dataKeyValue;
        }
      });
    });
  }

  // Render template

  function render() {
    var html = '';
    if (options.render) {
      html = options.render();
    } else if (options.template) {
      if (typeof options.template === 'string') {
        try {
          html = _template2.default.compile(options.template)(component);
        } catch (err) {
          throw err;
        }
      } else {
        // Supposed to be function
        html = options.template(component);
      }
    }
    return html;
  }

  var html = render();

  // Make Dom
  if (html && typeof html === 'string') {
    html = html.trim();
    tempDom.innerHTML = html;
  } else if (html) {
    tempDom.innerHTML = '';
    tempDom.appendChild(html);
  }

  // Extend component with $el
  var el = tempDom.children[0];
  var $el = (0, _dom2.default)(el);
  component.$el = $el;
  component.el = el;
  component.el = el;

  // Find Events
  var events = [];
  (0, _dom2.default)(tempDom).find('*').each(function (index, element) {
    var attrs = [];
    for (var i = 0; i < element.attributes.length; i += 1) {
      var attr = element.attributes[i];
      if (attr.name.indexOf('@') === 0) {
        attrs.push({
          name: attr.name,
          value: attr.value
        });
      }
    }
    attrs.forEach(function (attr) {
      element.removeAttribute(attr.name);
      var event = attr.name.replace('@', '');
      var name = event;
      var stop = false;
      var prevent = false;
      var once = false;
      if (event.indexOf('.') >= 0) {
        event.split('.').forEach(function (eventNamePart, eventNameIndex) {
          if (eventNameIndex === 0) name = eventNamePart;else {
            if (eventNamePart === 'stop') stop = true;
            if (eventNamePart === 'prevent') prevent = true;
            if (eventNamePart === 'once') once = true;
          }
        });
      }
      var value = attr.value.toString();
      events.push({
        el: element,
        name: name,
        once: once,
        handler: function handler() {
          for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }

          var e = args[0];
          if (stop) e.stopPropagation();
          if (prevent) e.preventDefault();
          var methodName = void 0;
          var method = void 0;
          var customArgs = [];
          if (value.indexOf('(') < 0) {
            customArgs = args;
            methodName = value;
          } else {
            methodName = value.split('(')[0];
            value.split('(')[1].split(')')[0].split(',').forEach(function (argument) {
              var arg = argument.trim();
              // eslint-disable-next-line
              if (!isNaN(arg)) arg = parseFloat(arg);else if (arg === 'true') arg = true;else if (arg === 'false') arg = false;else if (arg === 'null') arg = null;else if (arg === 'undefined') arg = undefined;else if (arg[0] === '"') arg = arg.replace(/"/g, '');else if (arg[0] === '\'') arg = arg.replace(/'/g, '');else if (arg.indexOf('.') > 0) {
                var deepArg = void 0;
                arg.split('.').forEach(function (path) {
                  if (!deepArg) deepArg = component;
                  deepArg = deepArg[path];
                });
                arg = deepArg;
              } else {
                arg = component[arg];
              }
              customArgs.push(arg);
            });
          }
          if (methodName.indexOf('.') >= 0) {
            methodName.split('.').forEach(function (path, pathIndex) {
              if (!method) method = component;
              if (method[path]) method = method[path];else {
                throw new Error('Component doesn\'t have method "' + methodName.split('.').slice(0, pathIndex + 1).join('.') + '"');
              }
            });
          } else {
            if (!component[methodName]) {
              throw new Error('Component doesn\'t have method "' + methodName + '"');
            }
            method = component[methodName];
          }
          method.apply(undefined, _toConsumableArray(customArgs));
        }
      });
    });
  });

  // Set styles scope ID
  var styleEl = void 0;
  if (options.style) {
    styleEl = _ssrWindow.document.createElement('style');
    styleEl.innerHTML = options.style;
  }
  if (options.styleScopeId) {
    el.setAttribute('data-scope', options.styleScopeId);
  }

  // Attach events
  function attachEvents() {
    if (options.on) {
      Object.keys(options.on).forEach(function (eventName) {
        $el.on(_utils2.default.eventNameToColonCase(eventName), options.on[eventName]);
      });
    }
    if (options.once) {
      Object.keys(options.once).forEach(function (eventName) {
        $el.once(_utils2.default.eventNameToColonCase(eventName), options.once[eventName]);
      });
    }
    events.forEach(function (event) {
      (0, _dom2.default)(event.el)[event.once ? 'once' : 'on'](event.name, event.handler);
    });
  }

  function detachEvents() {
    if (options.on) {
      Object.keys(options.on).forEach(function (eventName) {
        $el.off(_utils2.default.eventNameToColonCase(eventName), options.on[eventName]);
      });
    }
    if (options.once) {
      Object.keys(options.once).forEach(function (eventName) {
        $el.off(_utils2.default.eventNameToColonCase(eventName), options.once[eventName]);
      });
    }
    events.forEach(function (event) {
      (0, _dom2.default)(event.el).off(event.name, event.handler);
    });
  }

  attachEvents();

  // Created callback
  if (options.created) options.created();

  // Mount
  component.$mount = function mount(mountMethod) {
    if (options.beforeMount) options.beforeMount();
    if (styleEl) (0, _dom2.default)('head').append(styleEl);
    if (mountMethod) mountMethod(el);
    if (options.mounted) options.mounted();
  };

  // Destroy
  component.$destroy = function destroy() {
    if (options.beforeDestroy) options.beforeDestroy();
    if (styleEl) (0, _dom2.default)(styleEl).remove();
    detachEvents();
    if (options.destroyed) options.destroyed();
    // Delete component instance
    if (el && el.f7Component) {
      el.f7Component = null;
      delete el.f7Component;
    }
    _utils2.default.deleteProps(component);
    component = null;
  };

  // Store component instance
  for (var i = 0; i < tempDom.children.length; i += 1) {
    tempDom.children[i].f7Component = component;
  }

  return component;
};

var Component = {
  parse: function parse(componentString) {
    var callbackName = 'f7_component_callback_' + new Date().getTime();

    // Template
    var template = void 0;
    if (componentString.indexOf('<template>') >= 0) {
      template = componentString.split('<template>').filter(function (item, index) {
        return index > 0;
      }).join('<template>').split('</template>').filter(function (item, index, arr) {
        return index < arr.length - 1;
      }).join('</template>').replace(/{{#raw}}([ \n]*)<template/g, '{{#raw}}<template').replace(/\/template>([ \n]*){{\/raw}}/g, '/template>{{/raw}}').replace(/([ \n])<template/g, '$1{{#raw}}<template').replace(/\/template>([ \n])/g, '/template>{{/raw}}$1');
    }

    // Styles
    var style = void 0;
    var styleScopeId = _utils2.default.now();
    if (componentString.indexOf('<style>') >= 0) {
      style = componentString.split('<style>')[1].split('</style>')[0];
    } else if (componentString.indexOf('<style scoped>') >= 0) {
      style = componentString.split('<style scoped>')[1].split('</style>')[0];
      style = style.split('\n').map(function (line) {
        if (line.indexOf('{') >= 0) {
          if (line.indexOf('{{this}}') >= 0) {
            return line.replace('{{this}}', '[data-scope="' + styleScopeId + '"]');
          }
          return '[data-scope="' + styleScopeId + '"] ' + line.trim();
        }
        return line;
      }).join('\n');
    }

    var scriptContent = void 0;
    if (componentString.indexOf('<script>') >= 0) {
      var scripts = componentString.split('<script>');
      scriptContent = scripts[scripts.length - 1].split('</script>')[0].trim();
    } else {
      scriptContent = 'return {}';
    }
    scriptContent = 'window.' + callbackName + ' = function () {' + scriptContent + '}';

    // Insert Script El
    var scriptEl = _ssrWindow.document.createElement('script');
    scriptEl.innerHTML = scriptContent;
    (0, _dom2.default)('head').append(scriptEl);

    var component = _ssrWindow.window[callbackName]();

    // Remove Script El
    (0, _dom2.default)(scriptEl).remove();

    if (!component.template && !component.render) {
      component.template = template;
    }
    if (style) {
      component.style = style;
      component.styleScopeId = styleScopeId;
    }
    return component;
  },
  create: function create(c) {
    var extendContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    return new Framework7Component(c, extendContext);
  }
};
exports.default = Component;

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _history = __webpack_require__(4);

var _history2 = _interopRequireDefault(_history);

var _support = __webpack_require__(6);

var _support2 = _interopRequireDefault(_support);

var _device = __webpack_require__(3);

var _device2 = _interopRequireDefault(_device);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function SwipeBack(r) {
  var router = r;
  var $el = router.$el,
      $navbarEl = router.$navbarEl,
      app = router.app,
      params = router.params;

  var isTouched = false;
  var isMoved = false;
  var touchesStart = {};
  var isScrolling = void 0;
  var currentPage = [];
  var previousPage = [];
  var viewContainerWidth = void 0;
  var touchesDiff = void 0;
  var allowViewTouchMove = true;
  var touchStartTime = void 0;
  var currentNavbar = [];
  var previousNavbar = [];
  var currentNavElements = void 0;
  var previousNavElements = void 0;
  var activeNavBackIcon = void 0;
  var activeNavBackIconText = void 0;
  var previousNavBackIcon = void 0;
  // let previousNavBackIconText;
  var dynamicNavbar = void 0;
  var separateNavbar = void 0;
  var pageShadow = void 0;
  var pageOpacity = void 0;
  var navbarWidth = void 0;

  var paramsSwipeBackAnimateShadow = params[app.theme + 'SwipeBackAnimateShadow'];
  var paramsSwipeBackAnimateOpacity = params[app.theme + 'SwipeBackAnimateOpacity'];
  var paramsSwipeBackActiveArea = params[app.theme + 'SwipeBackActiveArea'];
  var paramsSwipeBackThreshold = params[app.theme + 'SwipeBackThreshold'];

  function handleTouchStart(e) {
    var swipeBackEnabled = params[app.theme + 'SwipeBack'];
    if (!allowViewTouchMove || !swipeBackEnabled || isTouched || app.swipeout && app.swipeout.el || !router.allowPageChange) return;
    if ((0, _dom2.default)(e.target).closest('.range-slider, .calendar-months').length > 0) return;
    isMoved = false;
    isTouched = true;
    isScrolling = undefined;
    touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;
    touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;
    touchStartTime = _utils2.default.now();
    dynamicNavbar = router.dynamicNavbar;
    separateNavbar = router.separateNavbar;
  }
  function handleTouchMove(e) {
    if (!isTouched) return;
    var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;
    var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;
    if (typeof isScrolling === 'undefined') {
      isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x)) || pageX < touchesStart.x;
    }
    if (isScrolling || e.f7PreventSwipeBack || app.preventSwipeBack) {
      isTouched = false;
      return;
    }
    if (!isMoved) {
      // Calc values during first move fired
      var cancel = false;
      var target = (0, _dom2.default)(e.target);

      var swipeout = target.closest('.swipeout');
      if (swipeout.length > 0) {
        if (!app.rtl && swipeout.find('.swipeout-actions-left').length > 0) cancel = true;
        if (app.rtl && swipeout.find('.swipeout-actions-right').length > 0) cancel = true;
      }

      currentPage = target.closest('.page');
      if (currentPage.hasClass('no-swipeback') || target.closest('.no-swipeback').length > 0) cancel = true;
      previousPage = $el.find('.page-previous:not(.stacked)');

      var notFromBorder = touchesStart.x - $el.offset().left > paramsSwipeBackActiveArea;
      viewContainerWidth = $el.width();
      if (app.rtl) {
        notFromBorder = touchesStart.x < $el.offset().left - $el[0].scrollLeft + (viewContainerWidth - paramsSwipeBackActiveArea);
      } else {
        notFromBorder = touchesStart.x - $el.offset().left > paramsSwipeBackActiveArea;
      }
      if (notFromBorder) cancel = true;
      if (previousPage.length === 0 || currentPage.length === 0) cancel = true;
      if (cancel) {
        isTouched = false;
        return;
      }

      if (paramsSwipeBackAnimateShadow) {
        pageShadow = currentPage.find('.page-shadow-effect');
        if (pageShadow.length === 0) {
          pageShadow = (0, _dom2.default)('<div class="page-shadow-effect"></div>');
          currentPage.append(pageShadow);
        }
      }
      if (paramsSwipeBackAnimateOpacity) {
        pageOpacity = previousPage.find('.page-opacity-effect');
        if (pageOpacity.length === 0) {
          pageOpacity = (0, _dom2.default)('<div class="page-opacity-effect"></div>');
          previousPage.append(pageOpacity);
        }
      }

      if (dynamicNavbar) {
        if (separateNavbar) {
          currentNavbar = $navbarEl.find('.navbar-current:not(.stacked)');
          previousNavbar = $navbarEl.find('.navbar-previous:not(.stacked)');
        } else {
          currentNavbar = currentPage.children('.navbar').children('.navbar-inner');
          previousNavbar = previousPage.children('.navbar').children('.navbar-inner');
        }
        navbarWidth = $navbarEl[0].offsetWidth;
        currentNavElements = currentNavbar.children('.left, .title, .right, .subnavbar, .fading');
        previousNavElements = previousNavbar.children('.left, .title, .right, .subnavbar, .fading');
        if (params.iosAnimateNavbarBackIcon) {
          if (currentNavbar.hasClass('sliding')) {
            activeNavBackIcon = currentNavbar.children('.left').find('.back .icon');
            activeNavBackIconText = currentNavbar.children('.left').find('.back span').eq(0);
          } else {
            activeNavBackIcon = currentNavbar.children('.left.sliding').find('.back .icon');
            activeNavBackIconText = currentNavbar.children('.left.sliding').find('.back span').eq(0);
          }
          if (previousNavbar.hasClass('sliding')) {
            previousNavBackIcon = previousNavbar.children('.left').find('.back .icon');
            // previousNavBackIconText = previousNavbar.children('left').find('.back span').eq(0);
          } else {
            previousNavBackIcon = previousNavbar.children('.left.sliding').find('.back .icon');
            // previousNavBackIconText = previousNavbar.children('.left.sliding').find('.back span').eq(0);
          }
        }
      }

      // Close/Hide Any Picker
      if ((0, _dom2.default)('.sheet.modal-in').length > 0 && app.sheet) {
        app.sheet.close((0, _dom2.default)('.sheet.modal-in'));
      }
    }
    e.f7PreventPanelSwipe = true;
    isMoved = true;
    app.preventSwipePanelBySwipeBack = true;
    e.preventDefault();

    // RTL inverter
    var inverter = app.rtl ? -1 : 1;

    // Touches diff
    touchesDiff = (pageX - touchesStart.x - paramsSwipeBackThreshold) * inverter;
    if (touchesDiff < 0) touchesDiff = 0;
    var percentage = touchesDiff / viewContainerWidth;

    // Swipe Back Callback
    var callbackData = {
      percentage: percentage,
      currentPageEl: currentPage[0],
      previousPageEl: previousPage[0],
      currentNavbarEl: currentNavbar[0],
      previousNavbarEl: previousNavbar[0]
    };
    $el.trigger('swipeback:move', callbackData);
    router.emit('swipebackMove', callbackData);

    // Transform pages
    var currentPageTranslate = touchesDiff * inverter;
    var previousPageTranslate = (touchesDiff / 5 - viewContainerWidth / 5) * inverter;
    if (_device2.default.pixelRatio === 1) {
      currentPageTranslate = Math.round(currentPageTranslate);
      previousPageTranslate = Math.round(previousPageTranslate);
    }

    currentPage.transform('translate3d(' + currentPageTranslate + 'px,0,0)');
    if (paramsSwipeBackAnimateShadow) pageShadow[0].style.opacity = 1 - 1 * percentage;

    if (app.theme !== 'md') {
      previousPage.transform('translate3d(' + previousPageTranslate + 'px,0,0)');
    }
    if (paramsSwipeBackAnimateOpacity) pageOpacity[0].style.opacity = 1 - 1 * percentage;

    // Dynamic Navbars Animation
    if (dynamicNavbar) {
      currentNavElements.each(function (index, navEl) {
        var $navEl = (0, _dom2.default)(navEl);
        if (!$navEl.is('.subnavbar')) $navEl[0].style.opacity = 1 - Math.pow(percentage, 0.33);
        if ($navEl[0].className.indexOf('sliding') >= 0 || currentNavbar.hasClass('sliding')) {
          var activeNavTranslate = percentage * $navEl[0].f7NavbarRightOffset;
          if (_device2.default.pixelRatio === 1) activeNavTranslate = Math.round(activeNavTranslate);
          $navEl.transform('translate3d(' + activeNavTranslate + 'px,0,0)');
          if (params.iosAnimateNavbarBackIcon) {
            if ($navEl[0].className.indexOf('left') >= 0 && activeNavBackIcon.length > 0) {
              var iconTranslate = -activeNavTranslate;
              if (!separateNavbar) {
                iconTranslate -= navbarWidth * percentage;
              }
              activeNavBackIcon.transform('translate3d(' + iconTranslate + 'px,0,0)');
            }
          }
        }
      });
      previousNavElements.each(function (index, navEl) {
        var $navEl = (0, _dom2.default)(navEl);
        if (!$navEl.is('.subnavbar')) $navEl[0].style.opacity = Math.pow(percentage, 3);
        if ($navEl[0].className.indexOf('sliding') >= 0 || previousNavbar.hasClass('sliding')) {
          var previousNavTranslate = $navEl[0].f7NavbarLeftOffset * (1 - percentage);
          if ($navEl[0].className.indexOf('title') >= 0 && activeNavBackIcon && activeNavBackIcon.length && activeNavBackIconText.length) {
            previousNavTranslate = ($navEl[0].f7NavbarLeftOffset + activeNavBackIconText[0].offsetLeft) * (1 - percentage);
          } else {
            previousNavTranslate = $navEl[0].f7NavbarLeftOffset * (1 - percentage);
          }
          if (_device2.default.pixelRatio === 1) previousNavTranslate = Math.round(previousNavTranslate);
          $navEl.transform('translate3d(' + previousNavTranslate + 'px,0,0)');
          if (params.iosAnimateNavbarBackIcon) {
            if ($navEl[0].className.indexOf('left') >= 0 && previousNavBackIcon.length > 0) {
              var iconTranslate = -previousNavTranslate;
              if (!separateNavbar) {
                iconTranslate += navbarWidth / 5 * (1 - percentage);
              }
              previousNavBackIcon.transform('translate3d(' + iconTranslate + 'px,0,0)');
            }
          }
        }
      });
    }
  }
  function handleTouchEnd() {
    app.preventSwipePanelBySwipeBack = false;
    if (!isTouched || !isMoved) {
      isTouched = false;
      isMoved = false;
      return;
    }
    isTouched = false;
    isMoved = false;
    if (touchesDiff === 0) {
      (0, _dom2.default)([currentPage[0], previousPage[0]]).transform('');
      if (pageShadow && pageShadow.length > 0) pageShadow.remove();
      if (pageOpacity && pageOpacity.length > 0) pageOpacity.remove();
      if (dynamicNavbar) {
        currentNavElements.transform('').css({ opacity: '' });
        previousNavElements.transform('').css({ opacity: '' });
        if (activeNavBackIcon && activeNavBackIcon.length > 0) activeNavBackIcon.transform('');
        if (previousNavBackIcon && activeNavBackIcon.length > 0) previousNavBackIcon.transform('');
      }
      return;
    }
    var timeDiff = _utils2.default.now() - touchStartTime;
    var pageChanged = false;
    // Swipe back to previous page
    if (timeDiff < 300 && touchesDiff > 10 || timeDiff >= 300 && touchesDiff > viewContainerWidth / 2) {
      currentPage.removeClass('page-current').addClass('page-next' + (app.theme === 'md' ? ' page-next-on-right' : ''));
      previousPage.removeClass('page-previous').addClass('page-current').removeAttr('aria-hidden');
      if (pageShadow) pageShadow[0].style.opacity = '';
      if (pageOpacity) pageOpacity[0].style.opacity = '';
      if (dynamicNavbar) {
        currentNavbar.removeClass('navbar-current').addClass('navbar-next');
        previousNavbar.removeClass('navbar-previous').addClass('navbar-current').removeAttr('aria-hidden');
      }
      pageChanged = true;
    }
    // Reset custom styles
    // Add transitioning class for transition-duration
    (0, _dom2.default)([currentPage[0], previousPage[0]]).addClass('page-transitioning page-transitioning-swipeback').transform('');

    if (dynamicNavbar) {
      currentNavElements.css({ opacity: '' }).each(function (navElIndex, navEl) {
        var translate = pageChanged ? navEl.f7NavbarRightOffset : 0;
        var sliding = (0, _dom2.default)(navEl);
        var iconTranslate = pageChanged ? -translate : 0;
        if (!separateNavbar && pageChanged) iconTranslate -= navbarWidth;
        sliding.transform('translate3d(' + translate + 'px,0,0)');
        if (params.iosAnimateNavbarBackIcon) {
          if (sliding.hasClass('left') && activeNavBackIcon.length > 0) {
            activeNavBackIcon.addClass('navbar-transitioning').transform('translate3d(' + iconTranslate + 'px,0,0)');
          }
        }
      }).addClass('navbar-transitioning');

      previousNavElements.transform('').css({ opacity: '' }).each(function (navElIndex, navEl) {
        var translate = pageChanged ? 0 : navEl.f7NavbarLeftOffset;
        var sliding = (0, _dom2.default)(navEl);
        var iconTranslate = pageChanged ? 0 : -translate;
        if (!separateNavbar && !pageChanged) iconTranslate += navbarWidth / 5;
        sliding.transform('translate3d(' + translate + 'px,0,0)');
        if (params.iosAnimateNavbarBackIcon) {
          if (sliding.hasClass('left') && previousNavBackIcon.length > 0) {
            previousNavBackIcon.addClass('navbar-transitioning').transform('translate3d(' + iconTranslate + 'px,0,0)');
          }
        }
      }).addClass('navbar-transitioning');
    }
    allowViewTouchMove = false;
    router.allowPageChange = false;

    // Swipe Back Callback
    var callbackData = {
      currentPage: currentPage[0],
      previousPage: previousPage[0],
      currentNavbar: currentNavbar[0],
      previousNavbar: previousNavbar[0]
    };

    if (pageChanged) {
      // Update Route
      router.currentRoute = previousPage[0].f7Page.route;
      router.currentPage = previousPage[0];

      // Page before animation callback
      router.pageCallback('beforeOut', currentPage, currentNavbar, 'current', 'next', { route: currentPage[0].f7Page.route, swipeBack: true });
      router.pageCallback('beforeIn', previousPage, previousNavbar, 'previous', 'current', { route: previousPage[0].f7Page.route, swipeBack: true });

      $el.trigger('swipeback:beforechange', callbackData);
      router.emit('swipebackBeforeChange', callbackData);
    } else {
      $el.trigger('swipeback:beforereset', callbackData);
      router.emit('swipebackBeforeReset', callbackData);
    }

    currentPage.transitionEnd(function () {
      (0, _dom2.default)([currentPage[0], previousPage[0]]).removeClass('page-transitioning page-transitioning-swipeback');

      if (dynamicNavbar) {
        currentNavElements.removeClass('navbar-transitioning').css({ opacity: '' }).transform('');
        previousNavElements.removeClass('navbar-transitioning').css({ opacity: '' }).transform('');
        if (activeNavBackIcon && activeNavBackIcon.length > 0) activeNavBackIcon.removeClass('navbar-transitioning');
        if (previousNavBackIcon && previousNavBackIcon.length > 0) previousNavBackIcon.removeClass('navbar-transitioning');
      }
      allowViewTouchMove = true;
      router.allowPageChange = true;
      if (pageChanged) {
        // Update History
        if (router.history.length === 1) {
          router.history.unshift(router.url);
        }
        router.history.pop();
        router.saveHistory();

        // Update push state
        if (params.pushState) {
          _history2.default.back();
        }

        // Page after animation callback
        router.pageCallback('afterOut', currentPage, currentNavbar, 'current', 'next', { route: currentPage[0].f7Page.route, swipeBack: true });
        router.pageCallback('afterIn', previousPage, previousNavbar, 'previous', 'current', { route: previousPage[0].f7Page.route, swipeBack: true });

        // Remove Old Page
        if (params.stackPages && router.initialPages.indexOf(currentPage[0]) >= 0) {
          currentPage.addClass('stacked');
          if (separateNavbar) {
            currentNavbar.addClass('stacked');
          }
        } else {
          router.pageCallback('beforeRemove', currentPage, currentNavbar, 'next', { swipeBack: true });
          router.removePage(currentPage);
          if (separateNavbar) {
            router.removeNavbar(currentNavbar);
          }
        }

        $el.trigger('swipeback:afterchange', callbackData);
        router.emit('swipebackAfterChange', callbackData);

        router.emit('routeChanged', router.currentRoute, router.previousRoute, router);

        if (params.preloadPreviousPage) {
          router.back(router.history[router.history.length - 2], { preload: true });
        }
      } else {
        $el.trigger('swipeback:afterreset', callbackData);
        router.emit('swipebackAfterReset', callbackData);
      }
      if (pageShadow && pageShadow.length > 0) pageShadow.remove();
      if (pageOpacity && pageOpacity.length > 0) pageOpacity.remove();
    });
  }

  function attachEvents() {
    var passiveListener = app.touchEvents.start === 'touchstart' && _support2.default.passiveListener ? { passive: true, capture: false } : false;
    $el.on(app.touchEvents.start, handleTouchStart, passiveListener);
    app.on('touchmove:active', handleTouchMove);
    app.on('touchend:passive', handleTouchEnd);
  }
  function detachEvents() {
    var passiveListener = app.touchEvents.start === 'touchstart' && _support2.default.passiveListener ? { passive: true, capture: false } : false;
    $el.off(app.touchEvents.start, handleTouchStart, passiveListener);
    app.off('touchmove:active', handleTouchMove);
    app.off('touchend:passive', handleTouchEnd);
  }

  attachEvents();

  router.on('routerDestroy', detachEvents);
}

exports.default = SwipeBack;

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.navigate = exports.load = exports.forward = exports.refreshPage = undefined;

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _ssrWindow = __webpack_require__(2);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _history = __webpack_require__(4);

var _history2 = _interopRequireDefault(_history);

var _redirect = __webpack_require__(12);

var _redirect2 = _interopRequireDefault(_redirect);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function refreshPage() {
  var router = this;
  return router.navigate(router.currentRoute.url, {
    ignoreCache: true,
    reloadCurrent: true
  });
}

function forward(el) {
  var forwardOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var router = this;
  var app = router.app;
  var view = router.view;

  var options = _utils2.default.extend({
    animate: router.params.animate,
    pushState: true,
    replaceState: false,
    history: true,
    reloadCurrent: router.params.reloadPages,
    reloadPrevious: false,
    reloadAll: false,
    clearPreviousHistory: false,
    on: {}
  }, forwardOptions);

  var dynamicNavbar = router.dynamicNavbar;
  var separateNavbar = router.separateNavbar;

  var $viewEl = router.$el;
  var $newPage = (0, _dom2.default)(el);
  var reload = options.reloadPrevious || options.reloadCurrent || options.reloadAll;
  var $oldPage = void 0;

  var $navbarEl = void 0;
  var $newNavbarInner = void 0;
  var $oldNavbarInner = void 0;

  if ($newPage.length) {
    // Remove theme elements
    router.removeThemeElements($newPage);
  }

  if (dynamicNavbar) {
    $newNavbarInner = $newPage.children('.navbar').children('.navbar-inner');
    if (separateNavbar) {
      $navbarEl = router.$navbarEl;
      if ($newNavbarInner.length > 0) {
        $newPage.children('.navbar').remove();
      }
      if ($newNavbarInner.length === 0 && $newPage[0].f7Page) {
        // Try from pageData
        $newNavbarInner = $newPage[0].f7Page.$navbarEl;
      }
    }
  }

  router.allowPageChange = false;
  if ($newPage.length === 0) {
    router.allowPageChange = true;
    return router;
  }

  // Pages In View
  var $pagesInView = $viewEl.children('.page:not(.stacked)').filter(function (index, pageInView) {
    return pageInView !== $newPage[0];
  });

  // Navbars In View
  var $navbarsInView = void 0;
  if (separateNavbar) {
    $navbarsInView = $navbarEl.children('.navbar-inner:not(.stacked)').filter(function (index, navbarInView) {
      return navbarInView !== $newNavbarInner[0];
    });
  }

  // Exit when reload previous and only 1 page in view so nothing ro reload
  if (options.reloadPrevious && $pagesInView.length < 2) {
    router.allowPageChange = true;
    return router;
  }

  // New Page
  var newPagePosition = 'next';
  if (options.reloadCurrent || options.reloadAll) {
    newPagePosition = 'current';
  } else if (options.reloadPrevious) {
    newPagePosition = 'previous';
  }
  $newPage.addClass('page-' + newPagePosition).removeClass('stacked');

  if (dynamicNavbar && $newNavbarInner.length) {
    $newNavbarInner.addClass('navbar-' + newPagePosition).removeClass('stacked');
  }

  // Find Old Page
  if (options.reloadCurrent) {
    $oldPage = $pagesInView.eq($pagesInView.length - 1);
    if (separateNavbar) {
      // $oldNavbarInner = $navbarsInView.eq($pagesInView.length - 1);
      $oldNavbarInner = (0, _dom2.default)(app.navbar.getElByPage($oldPage));
    }
  } else if (options.reloadPrevious) {
    $oldPage = $pagesInView.eq($pagesInView.length - 2);
    if (separateNavbar) {
      // $oldNavbarInner = $navbarsInView.eq($pagesInView.length - 2);
      $oldNavbarInner = (0, _dom2.default)(app.navbar.getElByPage($oldPage));
    }
  } else if (options.reloadAll) {
    $oldPage = $pagesInView.filter(function (index, pageEl) {
      return pageEl !== $newPage[0];
    });
    if (separateNavbar) {
      $oldNavbarInner = $navbarsInView.filter(function (index, navbarEl) {
        return navbarEl !== $newNavbarInner[0];
      });
    }
  } else {
    if ($pagesInView.length > 1) {
      var i = 0;
      for (i = 0; i < $pagesInView.length - 1; i += 1) {
        var oldNavbarInnerEl = app.navbar.getElByPage($pagesInView.eq(i));
        if (router.params.stackPages) {
          $pagesInView.eq(i).addClass('stacked');
          if (separateNavbar) {
            // $navbarsInView.eq(i).addClass('stacked');
            (0, _dom2.default)(oldNavbarInnerEl).addClass('stacked');
          }
        } else {
          // Page remove event
          router.pageCallback('beforeRemove', $pagesInView[i], $navbarsInView && $navbarsInView[i], 'previous', undefined, options);
          router.removePage($pagesInView[i]);
          if (separateNavbar && oldNavbarInnerEl) {
            router.removeNavbar(oldNavbarInnerEl);
          }
        }
      }
    }
    $oldPage = $viewEl.children('.page:not(.stacked)').filter(function (index, page) {
      return page !== $newPage[0];
    });
    if (separateNavbar) {
      $oldNavbarInner = $navbarEl.children('.navbar-inner:not(.stacked)').filter(function (index, navbarInner) {
        return navbarInner !== $newNavbarInner[0];
      });
    }
  }
  if (dynamicNavbar && !separateNavbar) {
    $oldNavbarInner = $oldPage.children('.navbar').children('.navbar-inner');
  }

  // Push State
  if (router.params.pushState && (options.pushState || options.replaceState) && !options.reloadPrevious) {
    var pushStateRoot = router.params.pushStateRoot || '';
    _history2.default[options.reloadCurrent || options.reloadAll || options.replaceState ? 'replace' : 'push'](view.id, {
      url: options.route.url
    }, pushStateRoot + router.params.pushStateSeparator + options.route.url);
  }

  if (!options.reloadPrevious) {
    // Current Page & Navbar
    router.currentPageEl = $newPage[0];
    if (dynamicNavbar && $newNavbarInner.length) {
      router.currentNavbarEl = $newNavbarInner[0];
    } else {
      delete router.currentNavbarEl;
    }

    // Current Route
    router.currentRoute = options.route;
  }

  // Update router history
  var url = options.route.url;

  if (options.history) {
    if ((options.reloadCurrent && router.history.length) > 0 || options.replaceState) {
      router.history[router.history.length - (options.reloadPrevious ? 2 : 1)] = url;
    } else if (options.reloadPrevious) {
      router.history[router.history.length - 2] = url;
    } else if (options.reloadAll) {
      router.history = [url];
    } else {
      router.history.push(url);
    }
  }
  router.saveHistory();

  // Insert new page and navbar
  var newPageInDom = $newPage.parents(_ssrWindow.document).length > 0;
  var f7Component = $newPage[0].f7Component;
  if (options.reloadPrevious) {
    if (f7Component && !newPageInDom) {
      f7Component.$mount(function (componentEl) {
        (0, _dom2.default)(componentEl).insertBefore($oldPage);
      });
    } else {
      $newPage.insertBefore($oldPage);
    }
    if (separateNavbar && $newNavbarInner.length) {
      if ($oldNavbarInner.length) {
        $newNavbarInner.insertBefore($oldNavbarInner);
      } else {
        if (!router.$navbarEl.parents(_ssrWindow.document).length) {
          router.$el.prepend(router.$navbarEl);
        }
        $navbarEl.append($newNavbarInner);
      }
    }
  } else {
    if ($oldPage.next('.page')[0] !== $newPage[0]) {
      if (f7Component && !newPageInDom) {
        f7Component.$mount(function (componentEl) {
          $viewEl.append(componentEl);
        });
      } else {
        $viewEl.append($newPage[0]);
      }
    }
    if (separateNavbar && $newNavbarInner.length) {
      if (!router.$navbarEl.parents(_ssrWindow.document).length) {
        router.$el.prepend(router.$navbarEl);
      }
      $navbarEl.append($newNavbarInner[0]);
    }
  }
  if (!newPageInDom) {
    router.pageCallback('mounted', $newPage, $newNavbarInner, newPagePosition, reload ? newPagePosition : 'current', options, $oldPage);
  }

  // Remove old page
  if (options.reloadCurrent && $oldPage.length > 0) {
    if (router.params.stackPages && router.initialPages.indexOf($oldPage[0]) >= 0) {
      $oldPage.addClass('stacked');
      if (separateNavbar) {
        $oldNavbarInner.addClass('stacked');
      }
    } else {
      // Page remove event
      router.pageCallback('beforeRemove', $oldPage, $oldNavbarInner, 'previous', undefined, options);
      router.removePage($oldPage);
      if (separateNavbar && $oldNavbarInner && $oldNavbarInner.length) {
        router.removeNavbar($oldNavbarInner);
      }
    }
  } else if (options.reloadAll) {
    $oldPage.each(function (index, pageEl) {
      var $oldPageEl = (0, _dom2.default)(pageEl);
      var $oldNavbarInnerEl = (0, _dom2.default)(app.navbar.getElByPage($oldPageEl));
      if (router.params.stackPages && router.initialPages.indexOf($oldPageEl[0]) >= 0) {
        $oldPageEl.addClass('stacked');
        if (separateNavbar) {
          $oldNavbarInnerEl.addClass('stacked');
        }
      } else {
        // Page remove event
        router.pageCallback('beforeRemove', $oldPageEl, $oldNavbarInner && $oldNavbarInner.eq(index), 'previous', undefined, options);
        router.removePage($oldPageEl);
        if (separateNavbar && $oldNavbarInnerEl.length) {
          router.removeNavbar($oldNavbarInnerEl);
        }
      }
    });
  } else if (options.reloadPrevious) {
    if (router.params.stackPages && router.initialPages.indexOf($oldPage[0]) >= 0) {
      $oldPage.addClass('stacked');
      if (separateNavbar) {
        $oldNavbarInner.addClass('stacked');
      }
    } else {
      // Page remove event
      router.pageCallback('beforeRemove', $oldPage, $oldNavbarInner, 'previous', undefined, options);
      router.removePage($oldPage);
      if (separateNavbar && $oldNavbarInner && $oldNavbarInner.length) {
        router.removeNavbar($oldNavbarInner);
      }
    }
  }

  // Load Tab
  if (options.route.route.tab) {
    router.tabLoad(options.route.route.tab, _utils2.default.extend({}, options, {
      history: false,
      pushState: false
    }));
  }

  // Page init and before init events
  router.pageCallback('init', $newPage, $newNavbarInner, newPagePosition, reload ? newPagePosition : 'current', options, $oldPage);

  if (options.reloadCurrent || options.reloadAll) {
    router.allowPageChange = true;
    router.pageCallback('beforeIn', $newPage, $newNavbarInner, newPagePosition, 'current', options);
    router.pageCallback('afterIn', $newPage, $newNavbarInner, newPagePosition, 'current', options);
    if (options.reloadCurrent && options.clearPreviousHistory) router.clearPreviousHistory();
    return router;
  }
  if (options.reloadPrevious) {
    router.allowPageChange = true;
    return router;
  }

  // Before animation event
  router.pageCallback('beforeIn', $newPage, $newNavbarInner, 'next', 'current', options);
  router.pageCallback('beforeOut', $oldPage, $oldNavbarInner, 'current', 'previous', options);

  // Animation
  function afterAnimation() {
    var pageClasses = 'page-previous page-current page-next';
    var navbarClasses = 'navbar-previous navbar-current navbar-next';
    $newPage.removeClass(pageClasses).addClass('page-current').removeAttr('aria-hidden');
    $oldPage.removeClass(pageClasses).addClass('page-previous').attr('aria-hidden', 'true');
    if (dynamicNavbar) {
      $newNavbarInner.removeClass(navbarClasses).addClass('navbar-current').removeAttr('aria-hidden');
      $oldNavbarInner.removeClass(navbarClasses).addClass('navbar-previous').attr('aria-hidden', 'true');
    }
    // After animation event
    router.allowPageChange = true;
    router.pageCallback('afterIn', $newPage, $newNavbarInner, 'next', 'current', options);
    router.pageCallback('afterOut', $oldPage, $oldNavbarInner, 'current', 'previous', options);

    var keepOldPage = app.theme === 'ios' ? router.params.preloadPreviousPage || router.params.iosSwipeBack : router.params.preloadPreviousPage;
    if (!keepOldPage) {
      if ($newPage.hasClass('smart-select-page') || $newPage.hasClass('photo-browser-page') || $newPage.hasClass('autocomplete-page')) {
        keepOldPage = true;
      }
    }
    if (!keepOldPage) {
      if (router.params.stackPages) {
        $oldPage.addClass('stacked');
        if (separateNavbar) {
          $oldNavbarInner.addClass('stacked');
        }
      } else if (!($newPage.attr('data-name') && $newPage.attr('data-name') === 'smart-select-page')) {
        // Remove event
        router.pageCallback('beforeRemove', $oldPage, $oldNavbarInner, 'previous', undefined, options);
        router.removePage($oldPage);
        if (separateNavbar && $oldNavbarInner.length) {
          router.removeNavbar($oldNavbarInner);
        }
      }
    }
    if (options.clearPreviousHistory) router.clearPreviousHistory();
    router.emit('routeChanged', router.currentRoute, router.previousRoute, router);

    if (router.params.pushState) {
      _history2.default.clearRouterQueue();
    }
  }
  function setPositionClasses() {
    var pageClasses = 'page-previous page-current page-next';
    var navbarClasses = 'navbar-previous navbar-current navbar-next';
    $oldPage.removeClass(pageClasses).addClass('page-current').removeAttr('aria-hidden');
    $newPage.removeClass(pageClasses).addClass('page-next').removeAttr('aria-hidden');
    if (dynamicNavbar) {
      $oldNavbarInner.removeClass(navbarClasses).addClass('navbar-current').removeAttr('aria-hidden');
      $newNavbarInner.removeClass(navbarClasses).addClass('navbar-next').removeAttr('aria-hidden');
    }
  }
  if (options.animate) {
    var delay = router.app.theme === 'md' ? router.params.materialPageLoadDelay : router.params.iosPageLoadDelay;
    if (delay) {
      setTimeout(function () {
        setPositionClasses();
        router.animate($oldPage, $newPage, $oldNavbarInner, $newNavbarInner, 'forward', function () {
          afterAnimation();
        });
      }, delay);
    } else {
      setPositionClasses();
      router.animate($oldPage, $newPage, $oldNavbarInner, $newNavbarInner, 'forward', function () {
        afterAnimation();
      });
    }
  } else {
    afterAnimation();
  }
  return router;
}
function load() {
  var loadParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var loadOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var ignorePageChange = arguments[2];

  var router = this;
  if (!router.allowPageChange && !ignorePageChange) return router;
  var params = loadParams;
  var options = loadOptions;
  var url = params.url,
      content = params.content,
      el = params.el,
      pageName = params.pageName,
      template = params.template,
      templateUrl = params.templateUrl,
      component = params.component,
      componentUrl = params.componentUrl;


  if (!options.reloadCurrent && options.route && options.route.route && options.route.route.parentPath && router.currentRoute.route && router.currentRoute.route.parentPath === options.route.route.parentPath) {
    // Do something nested
    if (options.route.url === router.url) {
      return false;
    }
    // Check for same params
    var sameParams = Object.keys(options.route.params).length === Object.keys(router.currentRoute.params).length;
    if (sameParams) {
      // Check for equal params name
      Object.keys(options.route.params).forEach(function (paramName) {
        if (!(paramName in router.currentRoute.params) || router.currentRoute.params[paramName] !== options.route.params[paramName]) {
          sameParams = false;
        }
      });
    }
    if (sameParams) {
      if (options.route.route.tab) {
        return router.tabLoad(options.route.route.tab, options);
      }
      return false;
    }
  }

  if (options.route && options.route.url && router.url === options.route.url && !(options.reloadCurrent || options.reloadPrevious) && !router.params.allowDuplicateUrls) {
    router.allowPageChange = true;
    return false;
  }

  if (!options.route && url) {
    options.route = router.parseRouteUrl(url);
    _utils2.default.extend(options.route, { route: { url: url, path: url } });
  }

  // Component Callbacks
  function resolve(pageEl, newOptions) {
    return router.forward(pageEl, _utils2.default.extend(options, newOptions));
  }
  function reject() {
    router.allowPageChange = true;
    return router;
  }

  if (url || templateUrl || componentUrl) {
    router.allowPageChange = false;
  }

  // Proceed
  if (content) {
    router.forward(router.getPageEl(content), options);
  } else if (template || templateUrl) {
    // Parse template and send page element
    try {
      router.pageTemplateLoader(template, templateUrl, options, resolve, reject);
    } catch (err) {
      router.allowPageChange = true;
      throw err;
    }
  } else if (el) {
    // Load page from specified HTMLElement or by page name in pages container
    router.forward(router.getPageEl(el), options);
  } else if (pageName) {
    // Load page by page name in pages container
    router.forward(router.$el.children('.page[data-name="' + pageName + '"]').eq(0), options);
  } else if (component || componentUrl) {
    // Load from component (F7/Vue/React/...)
    try {
      router.pageComponentLoader(router.el, component, componentUrl, options, resolve, reject);
    } catch (err) {
      router.allowPageChange = true;
      throw err;
    }
  } else if (url) {
    // Load using XHR
    if (router.xhr) {
      router.xhr.abort();
      router.xhr = false;
    }
    router.xhrRequest(url, options).then(function (pageContent) {
      router.forward(router.getPageEl(pageContent), options);
    }).catch(function () {
      router.allowPageChange = true;
    });
  }
  return router;
}
function navigate(navigateParams) {
  var navigateOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var router = this;
  var url = void 0;
  var createRoute = void 0;
  if (typeof navigateParams === 'string') {
    url = navigateParams;
  } else {
    url = navigateParams.url;
    createRoute = navigateParams.route;
  }
  var app = router.app;
  if (!router.view) {
    if (app.views.main) {
      app.views.main.router.navigate(url, navigateOptions);
    }
    return router;
  }
  if (url === '#' || url === '') {
    return router;
  }

  var navigateUrl = url.replace('./', '');
  if (navigateUrl[0] !== '/' && navigateUrl.indexOf('#') !== 0) {
    var currentPath = router.currentRoute.parentPath || router.currentRoute.path;
    navigateUrl = ((currentPath ? currentPath + '/' : '/') + navigateUrl).replace('///', '/').replace('//', '/');
  }
  var route = void 0;
  if (createRoute) {
    route = _utils2.default.extend(router.parseRouteUrl(navigateUrl), {
      route: _utils2.default.extend({}, createRoute)
    });
  } else {
    route = router.findMatchingRoute(navigateUrl);
  }

  if (!route) {
    return router;
  }

  if (route.route.redirect) {
    return _redirect2.default.call(router, 'navigate', route, navigateOptions);
  }

  var options = {};
  if (route.route.options) {
    _utils2.default.extend(options, route.route.options, navigateOptions, { route: route });
  } else {
    _utils2.default.extend(options, navigateOptions, { route: route });
  }
  if (options && options.context) {
    route.context = options.context;
    options.route.context = options.context;
  }
  'popup popover sheet loginScreen actions customModal'.split(' ').forEach(function (modalLoadProp) {
    if (route.route[modalLoadProp]) {
      router.modalLoad(modalLoadProp, route, options);
    }
  });
  'url content component pageName el componentUrl template templateUrl'.split(' ').forEach(function (pageLoadProp) {
    if (route.route[pageLoadProp]) {
      router.load(_defineProperty({}, pageLoadProp, route.route[pageLoadProp]), options);
    }
  });
  // Async
  function asyncResolve(resolveParams, resolveOptions) {
    router.allowPageChange = false;
    var resolvedAsModal = false;
    if (resolveOptions && resolveOptions.context) {
      if (!route.context) route.context = resolveOptions.context;else route.context = _utils2.default.extend({}, route.context, resolveOptions.context);
      options.route.context = route.context;
    }
    'popup popover sheet loginScreen actions customModal'.split(' ').forEach(function (modalLoadProp) {
      if (resolveParams[modalLoadProp]) {
        resolvedAsModal = true;
        var modalRoute = _utils2.default.extend({}, route, { route: resolveParams });
        router.allowPageChange = true;
        router.modalLoad(modalLoadProp, modalRoute, _utils2.default.extend(options, resolveOptions));
      }
    });
    if (resolvedAsModal) return;
    router.load(resolveParams, _utils2.default.extend(options, resolveOptions), true);
  }
  function asyncReject() {
    router.allowPageChange = true;
  }
  if (route.route.async) {
    router.allowPageChange = false;

    route.route.async.call(router, route, router.currentRoute, asyncResolve, asyncReject);
  }
  // Return Router
  return router;
}
exports.refreshPage = refreshPage;
exports.forward = forward;
exports.load = load;
exports.navigate = navigate;

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.tabRemove = exports.tabLoad = undefined;

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _history = __webpack_require__(4);

var _history2 = _interopRequireDefault(_history);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function tabLoad(tabRoute) {
  var loadOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var router = this;
  var options = _utils2.default.extend({
    animate: router.params.animate,
    pushState: true,
    history: true,
    parentPageEl: null,
    preload: false,
    on: {}
  }, loadOptions);

  var currentRoute = void 0;
  var previousRoute = void 0;
  if (options.route) {
    // Set Route
    if (!options.preload && options.route !== router.currentRoute) {
      previousRoute = router.previousRoute;
      router.currentRoute = options.route;
    }
    if (options.preload) {
      currentRoute = options.route;
      previousRoute = router.currentRoute;
    } else {
      currentRoute = router.currentRoute;
      if (!previousRoute) previousRoute = router.previousRoute;
    }

    // Update Browser History
    if (router.params.pushState && options.pushState && !options.reloadPrevious) {
      _history2.default.replace(router.view.id, {
        url: options.route.url
      }, (router.params.pushStateRoot || '') + router.params.pushStateSeparator + options.route.url);
    }

    // Update Router History
    if (options.history) {
      router.history[Math.max(router.history.length - 1, 0)] = options.route.url;
      router.saveHistory();
    }
  }

  // Show Tab
  var $parentPageEl = (0, _dom2.default)(options.parentPageEl || router.currentPageEl);
  var tabEl = void 0;
  if ($parentPageEl.length && $parentPageEl.find('#' + tabRoute.id).length) {
    tabEl = $parentPageEl.find('#' + tabRoute.id).eq(0);
  } else if (router.view.selector) {
    tabEl = router.view.selector + ' #' + tabRoute.id;
  } else {
    tabEl = '#' + tabRoute.id;
  }
  var tabShowResult = router.app.tab.show({
    tabEl: tabEl,
    animate: options.animate,
    tabRoute: options.route
  });

  var $newTabEl = tabShowResult.$newTabEl,
      $oldTabEl = tabShowResult.$oldTabEl,
      animated = tabShowResult.animated,
      onTabsChanged = tabShowResult.onTabsChanged;


  if ($newTabEl && $newTabEl.parents('.page').length > 0 && options.route) {
    var tabParentPageData = $newTabEl.parents('.page')[0].f7Page;
    if (tabParentPageData && options.route) {
      tabParentPageData.route = options.route;
    }
  }

  // Tab Content Loaded
  function onTabLoaded(contentEl) {
    // Remove theme elements
    router.removeThemeElements($newTabEl);

    var tabEventTarget = $newTabEl;
    if (typeof contentEl !== 'string') tabEventTarget = (0, _dom2.default)(contentEl);

    tabEventTarget.trigger('tab:init tab:mounted', tabRoute);
    router.emit('tabInit tabMounted', $newTabEl[0], tabRoute);

    if ($oldTabEl && router.params.unloadTabContent) {
      if (animated) {
        onTabsChanged(function () {
          router.tabRemove($oldTabEl, $newTabEl, tabRoute);
        });
      } else {
        router.tabRemove($oldTabEl, $newTabEl, tabRoute);
      }
    }
  }
  if (!router.params.unloadTabContent) {
    if ($newTabEl[0].f7RouterTabLoaded) return router;
  }

  // Load Tab Content
  function loadTab(loadTabParams, loadTabOptions) {
    // Load Tab Props
    var url = loadTabParams.url,
        content = loadTabParams.content,
        el = loadTabParams.el,
        template = loadTabParams.template,
        templateUrl = loadTabParams.templateUrl,
        component = loadTabParams.component,
        componentUrl = loadTabParams.componentUrl;
    // Component/Template Callbacks

    function resolve(contentEl) {
      router.allowPageChange = true;
      if (!contentEl) return;
      if (typeof contentEl === 'string') {
        $newTabEl.html(contentEl);
      } else {
        $newTabEl.html('');
        if (contentEl.f7Component) {
          contentEl.f7Component.$mount(function (componentEl) {
            $newTabEl.append(componentEl);
          });
        } else {
          $newTabEl.append(contentEl);
        }
      }
      if (!router.params.unloadTabContent) {
        $newTabEl[0].f7RouterTabLoaded = true;
      }
      onTabLoaded(contentEl);
    }
    function reject() {
      router.allowPageChange = true;
      return router;
    }

    if (content) {
      resolve(content);
    } else if (template || templateUrl) {
      try {
        router.tabTemplateLoader(template, templateUrl, loadTabOptions, resolve, reject);
      } catch (err) {
        router.allowPageChange = true;
        throw err;
      }
    } else if (el) {
      resolve(el);
    } else if (component || componentUrl) {
      // Load from component (F7/Vue/React/...)
      try {
        router.tabComponentLoader($newTabEl[0], component, componentUrl, loadTabOptions, resolve, reject);
      } catch (err) {
        router.allowPageChange = true;
        throw err;
      }
    } else if (url) {
      // Load using XHR
      if (router.xhr) {
        router.xhr.abort();
        router.xhr = false;
      }
      router.xhrRequest(url, loadTabOptions).then(function (tabContent) {
        resolve(tabContent);
      }).catch(function () {
        router.allowPageChange = true;
      });
    }
  }

  'url content component el componentUrl template templateUrl'.split(' ').forEach(function (tabLoadProp) {
    if (tabRoute[tabLoadProp]) {
      loadTab(_defineProperty({}, tabLoadProp, tabRoute[tabLoadProp]), options);
    }
  });

  // Async
  function asyncResolve(resolveParams, resolveOptions) {
    loadTab(resolveParams, _utils2.default.extend(options, resolveOptions));
  }
  function asyncReject() {
    router.allowPageChange = true;
  }
  if (tabRoute.async) {
    tabRoute.async.call(router, currentRoute, previousRoute, asyncResolve, asyncReject);
  }
  return router;
}
function tabRemove($oldTabEl, $newTabEl, tabRoute) {
  var router = this;
  var hasTabComponentChild = void 0;
  $oldTabEl.children().each(function (index, tabChild) {
    if (tabChild.f7Component) {
      hasTabComponentChild = true;
      (0, _dom2.default)(tabChild).trigger('tab:beforeremove', tabRoute);
      tabChild.f7Component.$destroy();
    }
  });
  if (!hasTabComponentChild) {
    $oldTabEl.trigger('tab:beforeremove', tabRoute);
  }
  router.emit('tabBeforeRemove', $oldTabEl[0], $newTabEl[0], tabRoute);
  router.removeTabContent($oldTabEl[0], tabRoute);
}

exports.tabLoad = tabLoad;
exports.tabRemove = tabRemove;

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.modalRemove = exports.modalLoad = undefined;

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _history = __webpack_require__(4);

var _history2 = _interopRequireDefault(_history);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function modalLoad(modalType, route) {
  var loadOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

  var router = this;
  var app = router.app;

  var options = _utils2.default.extend({
    animate: router.params.animate,
    pushState: true,
    history: true,
    on: {}
  }, loadOptions);

  var modalParams = _utils2.default.extend({}, route.route[modalType]);
  var modalRoute = route.route;

  function onModalLoaded() {
    // Create Modal
    var modal = app[modalType].create(modalParams);
    modalRoute.modalInstance = modal;

    var hasEl = modal.el;

    function closeOnSwipeBack() {
      modal.close();
    }
    modal.on('modalOpen', function () {
      if (!hasEl) {
        // Remove theme elements
        router.removeThemeElements(modal.el);

        // Emit events
        modal.$el.trigger(modalType.toLowerCase() + ':init ' + modalType.toLowerCase() + ':mounted', route, modal);
        router.emit('modalInit ' + modalType + 'Init ' + modalType + 'Mounted', modal.el, route, modal);
      }
      router.once('swipeBackMove', closeOnSwipeBack);
    });
    modal.on('modalClose', function () {
      router.off('swipeBackMove', closeOnSwipeBack);
      if (!modal.closeByRouter) {
        router.back();
      }
    });

    modal.on('modalClosed', function () {
      modal.$el.trigger(modalType.toLowerCase() + ':beforeremove', route, modal);
      modal.emit('modalBeforeRemove ' + modalType + 'BeforeRemove', modal.el, route, modal);
      var modalComponent = modal.el.f7Component;
      if (modalComponent) {
        modalComponent.$destroy();
      }
      _utils2.default.nextTick(function () {
        if (modalComponent || modalParams.component) {
          router.removeModal(modal.el);
        }
        modal.destroy();
        delete modalRoute.modalInstance;
      });
    });

    if (options.route) {
      // Update Browser History
      if (router.params.pushState && options.pushState) {
        _history2.default.push(router.view.id, {
          url: options.route.url,
          modal: modalType
        }, (router.params.pushStateRoot || '') + router.params.pushStateSeparator + options.route.url);
      }

      // Set Route
      if (options.route !== router.currentRoute) {
        router.currentRoute = _utils2.default.extend(options.route, { modal: modal });
      }

      // Update Router History
      if (options.history) {
        router.history.push(options.route.url);
        router.saveHistory();
      }
    }

    if (hasEl) {
      // Remove theme elements
      router.removeThemeElements(modal.el);

      // Emit events
      modal.$el.trigger(modalType.toLowerCase() + ':init ' + modalType.toLowerCase() + ':mounted', route, modal);
      router.emit('modalInit ' + modalType + 'Init ' + modalType + 'Mounted', modal.el, route, modal);
    }

    // Open
    modal.open();
  }

  // Load Modal Content
  function loadModal(loadModalParams, loadModalOptions) {
    // Load Modal Props
    var url = loadModalParams.url,
        content = loadModalParams.content,
        template = loadModalParams.template,
        templateUrl = loadModalParams.templateUrl,
        component = loadModalParams.component,
        componentUrl = loadModalParams.componentUrl;

    // Component/Template Callbacks

    function resolve(contentEl) {
      if (contentEl) {
        if (typeof contentEl === 'string') {
          modalParams.content = contentEl;
        } else if (contentEl.f7Component) {
          contentEl.f7Component.$mount(function (componentEl) {
            modalParams.el = componentEl;
            app.root.append(componentEl);
          });
        } else {
          modalParams.el = contentEl;
        }
        onModalLoaded();
      }
    }
    function reject() {
      router.allowPageChange = true;
      return router;
    }

    if (content) {
      resolve(content);
    } else if (template || templateUrl) {
      try {
        router.modalTemplateLoader(template, templateUrl, loadModalOptions, resolve, reject);
      } catch (err) {
        router.allowPageChange = true;
        throw err;
      }
    } else if (component || componentUrl) {
      // Load from component (F7/Vue/React/...)
      try {
        router.modalComponentLoader(app.root[0], component, componentUrl, loadModalOptions, resolve, reject);
      } catch (err) {
        router.allowPageChange = true;
        throw err;
      }
    } else if (url) {
      // Load using XHR
      if (router.xhr) {
        router.xhr.abort();
        router.xhr = false;
      }
      router.xhrRequest(url, loadModalOptions).then(function (modalContent) {
        modalParams.content = modalContent;
        onModalLoaded();
      }).catch(function () {
        router.allowPageChange = true;
      });
    } else {
      onModalLoaded();
    }
  }

  var foundLoadProp = void 0;
  'url content component el componentUrl template templateUrl'.split(' ').forEach(function (modalLoadProp) {
    if (modalParams[modalLoadProp] && !foundLoadProp) {
      foundLoadProp = true;
      loadModal(_defineProperty({}, modalLoadProp, modalParams[modalLoadProp]), options);
    }
  });
  if (!foundLoadProp && modalType === 'actions') {
    onModalLoaded();
  }

  // Async
  function asyncResolve(resolveParams, resolveOptions) {
    loadModal(resolveParams, _utils2.default.extend(options, resolveOptions));
  }
  function asyncReject() {
    router.allowPageChange = true;
  }
  if (modalParams.async) {
    modalParams.async.call(router, options.route, router.currentRoute, asyncResolve, asyncReject);
  }
  return router;
}
function modalRemove(modal) {
  _utils2.default.extend(modal, { closeByRouter: true });
  modal.close();
}

exports.modalLoad = modalLoad;
exports.modalRemove = modalRemove;

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.back = exports.loadBack = exports.backward = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _ssrWindow = __webpack_require__(2);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _history = __webpack_require__(4);

var _history2 = _interopRequireDefault(_history);

var _redirect = __webpack_require__(12);

var _redirect2 = _interopRequireDefault(_redirect);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function backward(el, backwardOptions) {
  var router = this;
  var app = router.app;
  var view = router.view;

  var options = _utils2.default.extend({
    animate: router.params.animate,
    pushState: true
  }, backwardOptions);

  var dynamicNavbar = router.dynamicNavbar;
  var separateNavbar = router.separateNavbar;

  var $newPage = (0, _dom2.default)(el);
  var $oldPage = router.$el.children('.page-current');

  if ($newPage.length) {
    // Remove theme elements
    router.removeThemeElements($newPage);
  }

  var $navbarEl = void 0;
  var $newNavbarInner = void 0;
  var $oldNavbarInner = void 0;

  if (dynamicNavbar) {
    $newNavbarInner = $newPage.children('.navbar').children('.navbar-inner');
    if (separateNavbar) {
      $navbarEl = router.$navbarEl;
      if ($newNavbarInner.length > 0) {
        $newPage.children('.navbar').remove();
      }
      if ($newNavbarInner.length === 0 && $newPage[0].f7Page) {
        // Try from pageData
        $newNavbarInner = $newPage[0].f7Page.$navbarEl;
      }
      $oldNavbarInner = $navbarEl.find('.navbar-current');
    } else {
      $oldNavbarInner = $oldPage.children('.navbar').children('.navbar-inner');
    }
  }

  router.allowPageChange = false;
  if ($newPage.length === 0 || $oldPage.length === 0) {
    router.allowPageChange = true;
    return router;
  }

  // Remove theme elements
  router.removeThemeElements($newPage);

  // New Page
  $newPage.addClass('page-previous').removeClass('stacked').removeAttr('aria-hidden');

  if (dynamicNavbar && $newNavbarInner.length > 0) {
    $newNavbarInner.addClass('navbar-previous').removeClass('stacked').removeAttr('aria-hidden');
  }

  // Remove previous page in case of "forced"
  var backIndex = void 0;
  if (options.force) {
    if ($oldPage.prev('.page-previous:not(.stacked)').length > 0 || $oldPage.prev('.page-previous').length === 0) {
      if (router.history.indexOf(options.route.url) >= 0) {
        backIndex = router.history.length - router.history.indexOf(options.route.url) - 1;
        router.history = router.history.slice(0, router.history.indexOf(options.route.url) + 2);
        view.history = router.history;
      } else if (router.history[[router.history.length - 2]]) {
        router.history[router.history.length - 2] = options.route.url;
      } else {
        router.history.unshift(router.url);
      }

      if (backIndex && router.params.stackPages) {
        $oldPage.prevAll('.page-previous').each(function (index, pageToRemove) {
          var $pageToRemove = (0, _dom2.default)(pageToRemove);
          var $navbarToRemove = void 0;
          if (separateNavbar) {
            // $navbarToRemove = $oldNavbarInner.prevAll('.navbar-previous').eq(index);
            $navbarToRemove = (0, _dom2.default)(app.navbar.getElByPage($pageToRemove));
          }
          if ($pageToRemove[0] !== $newPage[0] && $pageToRemove.index() > $newPage.index()) {
            if (router.initialPages.indexOf($pageToRemove[0]) >= 0) {
              $pageToRemove.addClass('stacked');
              if (separateNavbar) {
                $navbarToRemove.addClass('stacked');
              }
            } else {
              router.pageCallback('beforeRemove', $pageToRemove, $navbarToRemove, 'previous', undefined, options);
              router.removePage($pageToRemove);
              if (separateNavbar && $navbarToRemove.length > 0) {
                router.removeNavbar($navbarToRemove);
              }
            }
          }
        });
      } else {
        var $pageToRemove = $oldPage.prev('.page-previous:not(.stacked)');
        var $navbarToRemove = void 0;
        if (separateNavbar) {
          // $navbarToRemove = $oldNavbarInner.prev('.navbar-inner:not(.stacked)');
          $navbarToRemove = (0, _dom2.default)(app.navbar.getElByPage($pageToRemove));
        }
        if (router.params.stackPages && router.initialPages.indexOf($pageToRemove[0]) >= 0) {
          $pageToRemove.addClass('stacked');
          $navbarToRemove.addClass('stacked');
        } else if ($pageToRemove.length > 0) {
          router.pageCallback('beforeRemove', $pageToRemove, $navbarToRemove, 'previous', undefined, options);
          router.removePage($pageToRemove);
          if (separateNavbar && $navbarToRemove.length) {
            router.removeNavbar($navbarToRemove);
          }
        }
      }
    }
  }

  // Insert new page
  var newPageInDom = $newPage.parents(_ssrWindow.document).length > 0;
  var f7Component = $newPage[0].f7Component;

  function insertPage() {
    if ($newPage.next($oldPage).length === 0) {
      if (!newPageInDom && f7Component) {
        f7Component.$mount(function (componentEl) {
          (0, _dom2.default)(componentEl).insertBefore($oldPage);
        });
      } else {
        $newPage.insertBefore($oldPage);
      }
    }
    if (separateNavbar && $newNavbarInner.length) {
      $newNavbarInner.insertBefore($oldNavbarInner);
      if ($oldNavbarInner.length > 0) {
        $newNavbarInner.insertBefore($oldNavbarInner);
      } else {
        if (!router.$navbarEl.parents(_ssrWindow.document).length) {
          router.$el.prepend(router.$navbarEl);
        }
        $navbarEl.append($newNavbarInner);
      }
    }
    if (!newPageInDom) {
      router.pageCallback('mounted', $newPage, $newNavbarInner, 'previous', 'current', options, $oldPage);
    }
  }

  if (options.preload) {
    // Insert Page
    insertPage();
    // Tab route
    if (options.route.route.tab) {
      router.tabLoad(options.route.route.tab, _utils2.default.extend({}, options, {
        history: false,
        pushState: false,
        preload: true
      }));
    }
    // Page init and before init events
    router.pageCallback('init', $newPage, $newNavbarInner, 'previous', 'current', options, $oldPage);
    if ($newPage.prevAll('.page-previous:not(.stacked)').length > 0) {
      $newPage.prevAll('.page-previous:not(.stacked)').each(function (index, pageToRemove) {
        var $pageToRemove = (0, _dom2.default)(pageToRemove);
        var $navbarToRemove = void 0;
        if (separateNavbar) {
          // $navbarToRemove = $newNavbarInner.prevAll('.navbar-previous:not(.stacked)').eq(index);
          $navbarToRemove = (0, _dom2.default)(app.navbar.getElByPage($pageToRemove));
        }
        if (router.params.stackPages && router.initialPages.indexOf(pageToRemove) >= 0) {
          $pageToRemove.addClass('stacked');
          if (separateNavbar) {
            $navbarToRemove.addClass('stacked');
          }
        } else {
          router.pageCallback('beforeRemove', $pageToRemove, $navbarToRemove, 'previous', undefined);
          router.removePage($pageToRemove);
          if (separateNavbar && $navbarToRemove.length) {
            router.removeNavbar($navbarToRemove);
          }
        }
      });
    }
    router.allowPageChange = true;
    return router;
  }

  // History State
  if (router.params.pushState && options.pushState) {
    if (backIndex) _history2.default.go(-backIndex);else _history2.default.back();
  }

  // Update History
  if (router.history.length === 1) {
    router.history.unshift(router.url);
  }
  router.history.pop();
  router.saveHistory();

  // Current Page & Navbar
  router.currentPageEl = $newPage[0];
  if (dynamicNavbar && $newNavbarInner.length) {
    router.currentNavbarEl = $newNavbarInner[0];
  } else {
    delete router.currentNavbarEl;
  }

  // Current Route
  router.currentRoute = options.route;

  // Insert Page
  insertPage();

  // Load Tab
  if (options.route.route.tab) {
    router.tabLoad(options.route.route.tab, _utils2.default.extend({}, options, {
      history: false,
      pushState: false
    }));
  }

  // Page init and before init events
  router.pageCallback('init', $newPage, $newNavbarInner, 'previous', 'current', options, $oldPage);

  // Before animation callback
  router.pageCallback('beforeIn', $newPage, $newNavbarInner, 'previous', 'current', options);
  router.pageCallback('beforeOut', $oldPage, $oldNavbarInner, 'current', 'next', options);

  // Animation
  function afterAnimation() {
    // Set classes
    var pageClasses = 'page-previous page-current page-next';
    var navbarClasses = 'navbar-previous navbar-current navbar-next';
    $newPage.removeClass(pageClasses).addClass('page-current').removeAttr('aria-hidden');
    $oldPage.removeClass(pageClasses).addClass('page-next').attr('aria-hidden', 'true');
    if (dynamicNavbar) {
      $newNavbarInner.removeClass(navbarClasses).addClass('navbar-current').removeAttr('aria-hidden');
      $oldNavbarInner.removeClass(navbarClasses).addClass('navbar-next').attr('aria-hidden', 'true');
    }

    // After animation event
    router.pageCallback('afterIn', $newPage, $newNavbarInner, 'previous', 'current', options);
    router.pageCallback('afterOut', $oldPage, $oldNavbarInner, 'current', 'next', options);

    // Remove Old Page
    if (router.params.stackPages && router.initialPages.indexOf($oldPage[0]) >= 0) {
      $oldPage.addClass('stacked');
      if (separateNavbar) {
        $oldNavbarInner.addClass('stacked');
      }
    } else {
      router.pageCallback('beforeRemove', $oldPage, $oldNavbarInner, 'next', undefined, options);
      router.removePage($oldPage);
      if (separateNavbar && $oldNavbarInner.length) {
        router.removeNavbar($oldNavbarInner);
      }
    }

    router.allowPageChange = true;
    router.emit('routeChanged', router.currentRoute, router.previousRoute, router);

    // Preload previous page
    var preloadPreviousPage = app.theme === 'ios' ? router.params.preloadPreviousPage || router.params.iosSwipeBack : router.params.preloadPreviousPage;
    if (preloadPreviousPage) {
      router.back(router.history[router.history.length - 2], { preload: true });
    }
    if (router.params.pushState) {
      _history2.default.clearRouterQueue();
    }
  }

  function setPositionClasses() {
    var pageClasses = 'page-previous page-current page-next';
    var navbarClasses = 'navbar-previous navbar-current navbar-next';
    $oldPage.removeClass(pageClasses).addClass('page-current');
    $newPage.removeClass(pageClasses).addClass('page-previous').removeAttr('aria-hidden');
    if (dynamicNavbar) {
      $oldNavbarInner.removeClass(navbarClasses).addClass('navbar-current');
      $newNavbarInner.removeClass(navbarClasses).addClass('navbar-previous').removeAttr('aria-hidden');
    }
  }

  if (options.animate) {
    setPositionClasses();
    router.animate($oldPage, $newPage, $oldNavbarInner, $newNavbarInner, 'backward', function () {
      afterAnimation();
    });
  } else {
    afterAnimation();
  }

  return router;
}
function loadBack(backParams, backOptions, ignorePageChange) {
  var router = this;

  if (!router.allowPageChange && !ignorePageChange) return router;
  var params = backParams;
  var options = backOptions;
  var url = params.url,
      content = params.content,
      el = params.el,
      pageName = params.pageName,
      template = params.template,
      templateUrl = params.templateUrl,
      component = params.component,
      componentUrl = params.componentUrl;


  if (options.route.url && router.url === options.route.url && !(options.reloadCurrent || options.reloadPrevious) && !router.params.allowDuplicateUrls) {
    return false;
  }

  if (!options.route && url) {
    options.route = router.parseRouteUrl(url);
  }

  // Component Callbacks
  function resolve(pageEl, newOptions) {
    return router.backward(pageEl, _utils2.default.extend(options, newOptions));
  }
  function reject() {
    router.allowPageChange = true;
    return router;
  }

  if (url || templateUrl || componentUrl) {
    router.allowPageChange = false;
  }

  // Proceed
  if (content) {
    router.backward(router.getPageEl(content), options);
  } else if (template || templateUrl) {
    // Parse template and send page element
    try {
      router.pageTemplateLoader(template, templateUrl, options, resolve, reject);
    } catch (err) {
      router.allowPageChange = true;
      throw err;
    }
  } else if (el) {
    // Load page from specified HTMLElement or by page name in pages container
    router.backward(router.getPageEl(el), options);
  } else if (pageName) {
    // Load page by page name in pages container
    router.backward(router.$el.children('.page[data-name="' + pageName + '"]').eq(0), options);
  } else if (component || componentUrl) {
    // Load from component (F7/Vue/React/...)
    try {
      router.pageComponentLoader(router.el, component, componentUrl, options, resolve, reject);
    } catch (err) {
      router.allowPageChange = true;
      throw err;
    }
  } else if (url) {
    // Load using XHR
    if (router.xhr) {
      router.xhr.abort();
      router.xhr = false;
    }
    router.xhrRequest(url, options).then(function (pageContent) {
      router.backward(router.getPageEl(pageContent), options);
    }).catch(function () {
      router.allowPageChange = true;
    });
  }
  return router;
}
function back() {
  var navigateUrl = void 0;
  var navigateOptions = void 0;
  if (_typeof(arguments.length <= 0 ? undefined : arguments[0]) === 'object') {
    navigateOptions = (arguments.length <= 0 ? undefined : arguments[0]) || {};
  } else {
    navigateUrl = arguments.length <= 0 ? undefined : arguments[0];
    navigateOptions = (arguments.length <= 1 ? undefined : arguments[1]) || {};
  }

  var router = this;
  var app = router.app;
  if (!router.view) {
    app.views.main.router.back(navigateUrl, navigateOptions);
    return router;
  }

  var currentRouteIsModal = router.currentRoute.modal;
  var modalType = void 0;
  if (!currentRouteIsModal) {
    'popup popover sheet loginScreen actions customModal'.split(' ').forEach(function (modalLoadProp) {
      if (router.currentRoute.route[modalLoadProp]) {
        currentRouteIsModal = true;
        modalType = modalLoadProp;
      }
    });
  }
  if (currentRouteIsModal) {
    var modalToClose = router.currentRoute.modal || router.currentRoute.route.modalInstance || app[modalType].get();
    var previousUrl = router.history[router.history.length - 2];
    var previousRoute = router.findMatchingRoute(previousUrl);
    if (!previousRoute && previousUrl) {
      previousRoute = {
        url: previousUrl,
        path: previousUrl.split('?')[0],
        query: _utils2.default.parseUrlQuery(previousUrl),
        route: {
          path: previousUrl.split('?')[0],
          url: previousUrl
        }
      };
    }
    if (!previousRoute || !modalToClose) {
      return router;
    }
    if (router.params.pushState && navigateOptions.pushState !== false) {
      _history2.default.back();
    }
    router.currentRoute = previousRoute;
    router.history.pop();
    router.saveHistory();
    router.modalRemove(modalToClose);
    return router;
  }
  var $previousPage = router.$el.children('.page-current').prevAll('.page-previous').eq(0);
  if (!navigateOptions.force && $previousPage.length > 0) {
    if (router.params.pushState && $previousPage[0].f7Page && router.history[router.history.length - 2] !== $previousPage[0].f7Page.route.url) {
      router.back(router.history[router.history.length - 2], _utils2.default.extend(navigateOptions, { force: true }));
      return router;
    }
    router.loadBack({ el: $previousPage }, _utils2.default.extend(navigateOptions, {
      route: $previousPage[0].f7Page.route
    }));
    return router;
  }

  // Navigate URL
  if (navigateUrl === '#') {
    navigateUrl = undefined;
  }
  if (navigateUrl && navigateUrl[0] !== '/' && navigateUrl.indexOf('#') !== 0) {
    navigateUrl = ((router.path || '/') + navigateUrl).replace('//', '/');
  }
  if (!navigateUrl && router.history.length > 1) {
    navigateUrl = router.history[router.history.length - 2];
  }

  // Find route to load
  var route = router.findMatchingRoute(navigateUrl);
  if (!route) {
    if (navigateUrl) {
      route = {
        url: navigateUrl,
        path: navigateUrl.split('?')[0],
        query: _utils2.default.parseUrlQuery(navigateUrl),
        route: {
          path: navigateUrl.split('?')[0],
          url: navigateUrl
        }
      };
    }
  }
  if (!route) {
    return router;
  }

  if (route.route.redirect) {
    return _redirect2.default.call(router, 'back', route, navigateOptions);
  }

  var options = {};
  if (route.route.options) {
    _utils2.default.extend(options, route.route.options, navigateOptions, { route: route });
  } else {
    _utils2.default.extend(options, navigateOptions, { route: route });
  }

  if (options && options.context) {
    route.context = options.context;
    options.route.context = options.context;
  }

  if (options.force && router.params.stackPages) {
    router.$el.children('.page-previous.stacked').each(function (index, pageEl) {
      if (pageEl.f7Page && pageEl.f7Page.route && pageEl.f7Page.route.url === route.url) {
        router.loadBack({ el: pageEl }, options);
      }
    });
  }

  'url content component pageName el componentUrl template templateUrl'.split(' ').forEach(function (pageLoadProp) {
    if (route.route[pageLoadProp]) {
      router.loadBack(_defineProperty({}, pageLoadProp, route.route[pageLoadProp]), options);
    }
  });
  // Async
  function asyncResolve(resolveParams, resolveOptions) {
    router.allowPageChange = false;
    if (resolveOptions && resolveOptions.context) {
      if (!route.context) route.context = resolveOptions.context;else route.context = _utils2.default.extend({}, route.context, resolveOptions.context);
      options.route.context = route.context;
    }
    router.loadBack(resolveParams, _utils2.default.extend(options, resolveOptions), true);
  }
  function asyncReject() {
    router.allowPageChange = true;
  }
  if (route.route.async) {
    router.allowPageChange = false;

    route.route.async.call(router, route, router.currentRoute, asyncResolve, asyncReject);
  }
  // Return Router
  return router;
}
exports.backward = backward;
exports.loadBack = loadBack;
exports.back = back;

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clearPreviousHistory = undefined;

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function clearPreviousHistory() {
  var router = this;
  var app = router.app;
  var separateNavbar = router.separateNavbar;
  var url = router.history[router.history.length - 1];

  var $currentPageEl = (0, _dom2.default)(router.currentPageEl);

  var $pagesToRemove = router.$el.children('.page:not(.stacked)').filter(function (index, pageInView) {
    return pageInView !== $currentPageEl[0];
  });

  $pagesToRemove.each(function (index, pageEl) {
    var $oldPageEl = (0, _dom2.default)(pageEl);
    var $oldNavbarInnerEl = (0, _dom2.default)(app.navbar.getElByPage($oldPageEl));
    if (router.params.stackPages && router.initialPages.indexOf($oldPageEl[0]) >= 0) {
      $oldPageEl.addClass('stacked');
      if (separateNavbar) {
        $oldNavbarInnerEl.addClass('stacked');
      }
    } else {
      // Page remove event
      router.pageCallback('beforeRemove', $oldPageEl, $oldNavbarInnerEl, 'previous', undefined, {});
      router.removePage($oldPageEl);
      if (separateNavbar && $oldNavbarInnerEl.length) {
        router.removeNavbar($oldNavbarInnerEl);
      }
    }
  });

  router.history = [url];
  router.view.history = [url];
  router.saveHistory();
}

exports.clearPreviousHistory = clearPreviousHistory; // eslint-disable-line

/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _history = __webpack_require__(4);

var _history2 = _interopRequireDefault(_history);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  name: 'history',
  static: {
    history: _history2.default
  },
  on: {
    init: function init() {
      _history2.default.init(this);
    }
  }
};

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _ssrWindow = __webpack_require__(2);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var keyPrefix = 'f7storage-';
var Storage = {
  get: function get(key) {
    return _utils2.default.promise(function (resolve, reject) {
      try {
        var value = JSON.parse(_ssrWindow.window.localStorage.getItem('' + keyPrefix + key));
        resolve(value);
      } catch (e) {
        reject(e);
      }
    });
  },
  set: function set(key, value) {
    return _utils2.default.promise(function (resolve, reject) {
      try {
        _ssrWindow.window.localStorage.setItem('' + keyPrefix + key, JSON.stringify(value));
        resolve();
      } catch (e) {
        reject(e);
      }
    });
  },
  remove: function remove(key) {
    return _utils2.default.promise(function (resolve, reject) {
      try {
        _ssrWindow.window.localStorage.removeItem('' + keyPrefix + key);
        resolve();
      } catch (e) {
        reject(e);
      }
    });
  },
  clear: function clear() {},
  length: function length() {},
  keys: function keys() {
    return _utils2.default.promise(function (resolve, reject) {
      try {
        var keys = Object.keys(_ssrWindow.window.localStorage).filter(function (keyName) {
          return keyName.indexOf(keyPrefix) === 0;
        }).map(function (keyName) {
          return keyName.replace(keyPrefix, '');
        });
        resolve(keys);
      } catch (e) {
        reject(e);
      }
    });
  },
  forEach: function forEach(callback) {
    return _utils2.default.promise(function (resolve, reject) {
      try {
        Object.keys(_ssrWindow.window.localStorage).filter(function (keyName) {
          return keyName.indexOf(keyPrefix) === 0;
        }).forEach(function (keyName, index) {
          var key = keyName.replace(keyPrefix, '');
          Storage.get(key).then(function (value) {
            callback(key, value, index);
          });
        });
        resolve();
      } catch (e) {
        reject(e);
      }
    });
  }
};

exports.default = {
  name: 'storage',
  static: {
    Storage: Storage,
    storage: Storage
  }
};

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _ssrWindow = __webpack_require__(2);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _device = __webpack_require__(3);

var _device2 = _interopRequireDefault(_device);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Statusbar = {
  hide: function hide() {
    (0, _dom2.default)('html').removeClass('with-statusbar');
    if (_device2.default.cordova && _ssrWindow.window.StatusBar) {
      _ssrWindow.window.StatusBar.hide();
    }
  },
  show: function show() {
    if (_device2.default.cordova && _ssrWindow.window.StatusBar) {
      _ssrWindow.window.StatusBar.show();
      _utils2.default.nextTick(function () {
        if (_device2.default.needsStatusbarOverlay()) {
          (0, _dom2.default)('html').addClass('with-statusbar');
        }
      });
      return;
    }
    (0, _dom2.default)('html').addClass('with-statusbar');
  },
  onClick: function onClick() {
    var app = this;
    var pageContent = void 0;
    if ((0, _dom2.default)('.popup.modal-in').length > 0) {
      // Check for opened popup
      pageContent = (0, _dom2.default)('.popup.modal-in').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');
    } else if ((0, _dom2.default)('.panel.panel-active').length > 0) {
      // Check for opened panel
      pageContent = (0, _dom2.default)('.panel.panel-active').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');
    } else if ((0, _dom2.default)('.views > .view.tab-active').length > 0) {
      // View in tab bar app layout
      pageContent = (0, _dom2.default)('.views > .view.tab-active').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');
    } else if ((0, _dom2.default)('.views').length > 0) {
      pageContent = (0, _dom2.default)('.views').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');
    } else {
      pageContent = app.root.children('.view').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');
    }

    if (pageContent && pageContent.length > 0) {
      // Check for tab
      if (pageContent.hasClass('tab')) {
        pageContent = pageContent.parent('.tabs').children('.page-content.tab-active');
      }
      if (pageContent.length > 0) pageContent.scrollTop(0, 300);
    }
  },
  setIosTextColor: function setIosTextColor(color) {
    if (_device2.default.cordova && _ssrWindow.window.StatusBar) {
      if (color === 'white') {
        _ssrWindow.window.StatusBar.styleLightContent();
      } else {
        _ssrWindow.window.StatusBar.styleDefault();
      }
    }
  },
  setBackgroundColor: function setBackgroundColor(color) {
    (0, _dom2.default)('.statusbar').css('background-color', color);
    if (_device2.default.cordova && _ssrWindow.window.StatusBar) {
      _ssrWindow.window.StatusBar.backgroundColorByHexString(color);
    }
  },
  isVisible: function isVisible() {
    if (_device2.default.cordova && _ssrWindow.window.StatusBar) {
      return _ssrWindow.window.StatusBar.isVisible;
    }
    return false;
  },
  iosOverlaysWebView: function iosOverlaysWebView() {
    var overlays = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

    if (!_device2.default.ios) return;
    if (_device2.default.cordova && _ssrWindow.window.StatusBar) {
      _ssrWindow.window.StatusBar.overlaysWebView(overlays);
      if (overlays) {
        (0, _dom2.default)('html').addClass('with-statusbar');
      } else {
        (0, _dom2.default)('html').removeClass('with-statusbar');
      }
    }
  },
  checkOverlay: function checkOverlay() {
    if (_device2.default.needsStatusbarOverlay()) {
      (0, _dom2.default)('html').addClass('with-statusbar');
    } else {
      (0, _dom2.default)('html').removeClass('with-statusbar');
    }
  },
  init: function init() {
    var app = this;
    var params = app.params.statusbar;
    if (!params.enabled) return;

    if (params.overlay === 'auto') {
      if (_device2.default.needsStatusbarOverlay()) {
        (0, _dom2.default)('html').addClass('with-statusbar');
      } else {
        (0, _dom2.default)('html').removeClass('with-statusbar');
      }

      if (_device2.default.ios && (_device2.default.cordova || _device2.default.webView)) {
        if (_ssrWindow.window.orientation === 0) {
          app.once('resize', function () {
            Statusbar.checkOverlay();
          });
        }

        (0, _dom2.default)(_ssrWindow.document).on('resume', function () {
          Statusbar.checkOverlay();
        }, false);

        app.on(_device2.default.ios ? 'orientationchange' : 'orientationchange resize', function () {
          Statusbar.checkOverlay();
        });
      }
    } else if (params.overlay === true) {
      (0, _dom2.default)('html').addClass('with-statusbar');
    } else if (params.overlay === false) {
      (0, _dom2.default)('html').removeClass('with-statusbar');
    }

    if (_device2.default.cordova && _ssrWindow.window.StatusBar) {
      if (params.scrollTopOnClick) {
        (0, _dom2.default)(_ssrWindow.window).on('statusTap', Statusbar.onClick.bind(app));
      }
      if (params.iosOverlaysWebView) {
        _ssrWindow.window.StatusBar.overlaysWebView(true);
      } else {
        _ssrWindow.window.StatusBar.overlaysWebView(false);
      }

      if (params.iosTextColor === 'white') {
        _ssrWindow.window.StatusBar.styleLightContent();
      } else {
        _ssrWindow.window.StatusBar.styleDefault();
      }
    }
    if (params.iosBackgroundColor && app.theme === 'ios') {
      Statusbar.setBackgroundColor(params.iosBackgroundColor);
    }
    if (params.materialBackgroundColor && app.theme === 'md') {
      Statusbar.setBackgroundColor(params.materialBackgroundColor);
    }
  }
};

exports.default = {
  name: 'statusbar',
  params: {
    statusbar: {
      enabled: true,
      overlay: 'auto',
      scrollTopOnClick: true,
      iosOverlaysWebView: true,
      iosTextColor: 'black',
      iosBackgroundColor: null,
      materialBackgroundColor: null
    }
  },
  create: function create() {
    var app = this;
    _utils2.default.extend(app, {
      statusbar: {
        checkOverlay: Statusbar.checkOverlay,
        hide: Statusbar.hide,
        show: Statusbar.show,
        iosOverlaysWebView: Statusbar.iosOverlaysWebView,
        setIosTextColor: Statusbar.setIosTextColor,
        setBackgroundColor: Statusbar.setBackgroundColor,
        isVisible: Statusbar.isVisible,
        init: Statusbar.init.bind(app)
      }
    });
  },

  on: {
    init: function init() {
      var app = this;
      Statusbar.init.call(app);
    }
  },
  clicks: {
    '.statusbar': function onStatusbarClick() {
      var app = this;
      if (!app.params.statusbar.enabled) return;
      if (!app.params.statusbar.scrollTopOnClick) return;
      Statusbar.onClick.call(app);
    }
  }
};

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _viewClass = __webpack_require__(9);

var _viewClass2 = _interopRequireDefault(_viewClass);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getCurrentView(app) {
  var popoverView = (0, _dom2.default)('.popover.modal-in .view');
  var popupView = (0, _dom2.default)('.popup.modal-in .view');
  var panelView = (0, _dom2.default)('.panel.panel-active .view');
  var appViews = (0, _dom2.default)('.views');
  if (appViews.length === 0) appViews = app.root;
  // Find active view as tab
  var appView = appViews.children('.view');
  // Propably in tabs or split view
  if (appView.length > 1) {
    if (appView.hasClass('tab')) {
      // Tabs
      appView = appViews.children('.view.tab-active');
    } else {
      // Split View, leave appView intact
    }
  }
  if (popoverView.length > 0 && popoverView[0].f7View) return popoverView[0].f7View;
  if (popupView.length > 0 && popupView[0].f7View) return popupView[0].f7View;
  if (panelView.length > 0 && panelView[0].f7View) return panelView[0].f7View;
  if (appView.length > 0) {
    if (appView.length === 1 && appView[0].f7View) return appView[0].f7View;
    if (appView.length > 1) {
      return app.views.main;
    }
  }
  return undefined;
}

exports.default = {
  name: 'view',
  params: {
    view: {
      name: undefined,
      main: false,
      router: true,
      linksView: null,
      stackPages: false,
      xhrCache: true,
      xhrCacheIgnore: [],
      xhrCacheIgnoreGetParameters: false,
      xhrCacheDuration: 1000 * 60 * 10, // Ten minutes
      preloadPreviousPage: true,
      uniqueHistory: false,
      uniqueHistoryIgnoreGetParameters: false,
      allowDuplicateUrls: false,
      reloadPages: false,
      removeElements: true,
      removeElementsWithTimeout: false,
      removeElementsTimeout: 0,
      restoreScrollTopOnBack: true,
      unloadTabContent: true,
      passRouteQueryToRequest: true,
      passRouteParamsToRequest: false,
      // Swipe Back
      iosSwipeBack: true,
      iosSwipeBackAnimateShadow: true,
      iosSwipeBackAnimateOpacity: true,
      iosSwipeBackActiveArea: 30,
      iosSwipeBackThreshold: 0,
      mdSwipeBack: false,
      mdSwipeBackAnimateShadow: true,
      mdSwipeBackAnimateOpacity: false,
      mdSwipeBackActiveArea: 30,
      mdSwipeBackThreshold: 0,
      // Push State
      pushState: false,
      pushStateRoot: undefined,
      pushStateAnimate: true,
      pushStateAnimateOnLoad: false,
      pushStateSeparator: '#!',
      pushStateOnLoad: true,
      // Animate Pages
      animate: true,
      animateWithJS: false,
      // iOS Dynamic Navbar
      iosDynamicNavbar: true,
      iosSeparateDynamicNavbar: true,
      // Animate iOS Navbar Back Icon
      iosAnimateNavbarBackIcon: true,
      // Delays
      iosPageLoadDelay: 0,
      materialPageLoadDelay: 0
    }
  },
  static: {
    View: _viewClass2.default
  },
  create: function create() {
    var app = this;
    _utils2.default.extend(app, {
      views: _utils2.default.extend([], {
        create: function create(el, params) {
          return new _viewClass2.default(app, el, params);
        },
        get: function get(viewEl) {
          var $viewEl = (0, _dom2.default)(viewEl);
          if ($viewEl.length && $viewEl[0].f7View) return $viewEl[0].f7View;
          return undefined;
        }
      })
    });
    Object.defineProperty(app.views, 'current', {
      enumerable: true,
      configurable: true,
      get: function get() {
        return getCurrentView(app);
      }
    });
    // Alias
    app.view = app.views;
  },

  on: {
    init: function init() {
      var app = this;
      (0, _dom2.default)('.view-init').each(function (index, viewEl) {
        if (viewEl.f7View) return;
        var viewParams = (0, _dom2.default)(viewEl).dataset();
        app.views.create(viewEl, viewParams);
      });
    },
    modalOpen: function modalOpen(modal) {
      var app = this;
      modal.$el.find('.view-init').each(function (index, viewEl) {
        if (viewEl.f7View) return;
        var viewParams = (0, _dom2.default)(viewEl).dataset();
        app.views.create(viewEl, viewParams);
      });
    },
    modalBeforeDestroy: function modalBeforeDestroy(modal) {
      if (!modal || !modal.$el) return;
      modal.$el.find('.view-init').each(function (index, viewEl) {
        var view = viewEl.f7View;
        if (!view) return;
        view.destroy();
      });
    }
  }
};

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Navbar = {
  size: function size(el) {
    var app = this;
    if (app.theme !== 'ios') return;
    var $el = (0, _dom2.default)(el);
    if ($el.hasClass('navbar')) {
      $el = $el.children('.navbar-inner').each(function (index, navbarEl) {
        app.navbar.size(navbarEl);
      });
      return;
    }
    if ($el.hasClass('stacked') || $el.parents('.stacked').length > 0 || $el.parents('.tab:not(.tab-active)').length > 0 || $el.parents('.popup:not(.modal-in)').length > 0) {
      return;
    }
    var $viewEl = $el.parents('.view').eq(0);
    var left = app.rtl ? $el.children('.right') : $el.children('.left');
    var right = app.rtl ? $el.children('.left') : $el.children('.right');
    var title = $el.children('.title');
    var subnavbar = $el.children('.subnavbar');
    var noLeft = left.length === 0;
    var noRight = right.length === 0;
    var leftWidth = noLeft ? 0 : left.outerWidth(true);
    var rightWidth = noRight ? 0 : right.outerWidth(true);
    var titleWidth = title.outerWidth(true);
    var navbarStyles = $el.styles();
    var navbarWidth = $el[0].offsetWidth;
    var navbarInnerWidth = navbarWidth - parseInt(navbarStyles.paddingLeft, 10) - parseInt(navbarStyles.paddingRight, 10);
    var isPrevious = $el.hasClass('navbar-previous');
    var sliding = $el.hasClass('sliding');

    var router = void 0;
    var dynamicNavbar = void 0;
    var separateNavbar = void 0;
    var separateNavbarRightOffset = 0;
    var separateNavbarLeftOffset = 0;

    if ($viewEl.length > 0 && $viewEl[0].f7View) {
      router = $viewEl[0].f7View.router;
      dynamicNavbar = router && router.dynamicNavbar;
      separateNavbar = router && router.separateNavbar;
      if (!separateNavbar) {
        separateNavbarRightOffset = navbarWidth;
        separateNavbarLeftOffset = navbarWidth / 5;
      }
    }

    var currLeft = void 0;
    var diff = void 0;
    if (noRight) {
      currLeft = navbarInnerWidth - titleWidth;
    }
    if (noLeft) {
      currLeft = 0;
    }
    if (!noLeft && !noRight) {
      currLeft = (navbarInnerWidth - rightWidth - titleWidth + leftWidth) / 2;
    }
    var requiredLeft = (navbarInnerWidth - titleWidth) / 2;
    if (navbarInnerWidth - leftWidth - rightWidth > titleWidth) {
      if (requiredLeft < leftWidth) {
        requiredLeft = leftWidth;
      }
      if (requiredLeft + titleWidth > navbarInnerWidth - rightWidth) {
        requiredLeft = navbarInnerWidth - rightWidth - titleWidth;
      }
      diff = requiredLeft - currLeft;
    } else {
      diff = 0;
    }

    // RTL inverter
    var inverter = app.rtl ? -1 : 1;

    if (dynamicNavbar) {
      if (title.hasClass('sliding') || title.length > 0 && sliding) {
        var titleLeftOffset = -(currLeft + diff) * inverter + separateNavbarLeftOffset;
        var titleRightOffset = (navbarInnerWidth - currLeft - diff - titleWidth) * inverter - separateNavbarRightOffset;

        if (isPrevious) {
          if (router && router.params.iosAnimateNavbarBackIcon) {
            var activeNavbarBackLink = $el.parent().find('.navbar-current').children('.left.sliding').find('.back .icon ~ span');
            if (activeNavbarBackLink.length > 0) {
              titleLeftOffset += activeNavbarBackLink[0].offsetLeft;
            }
          }
        }
        title[0].f7NavbarLeftOffset = titleLeftOffset;
        title[0].f7NavbarRightOffset = titleRightOffset;
      }
      if (!noLeft && (left.hasClass('sliding') || sliding)) {
        if (app.rtl) {
          left[0].f7NavbarLeftOffset = -(navbarInnerWidth - left[0].offsetWidth) / 2 * inverter;
          left[0].f7NavbarRightOffset = leftWidth * inverter;
        } else {
          left[0].f7NavbarLeftOffset = -leftWidth + separateNavbarLeftOffset;
          left[0].f7NavbarRightOffset = (navbarInnerWidth - left[0].offsetWidth) / 2 - separateNavbarRightOffset;
          if (router && router.params.iosAnimateNavbarBackIcon && left.find('.back .icon').length > 0) {
            left[0].f7NavbarRightOffset -= left.find('.back .icon')[0].offsetWidth;
          }
        }
      }
      if (!noRight && (right.hasClass('sliding') || sliding)) {
        if (app.rtl) {
          right[0].f7NavbarLeftOffset = -rightWidth * inverter;
          right[0].f7NavbarRightOffset = (navbarInnerWidth - right[0].offsetWidth) / 2 * inverter;
        } else {
          right[0].f7NavbarLeftOffset = -(navbarInnerWidth - right[0].offsetWidth) / 2 + separateNavbarLeftOffset;
          right[0].f7NavbarRightOffset = rightWidth - separateNavbarRightOffset;
        }
      }
      if (subnavbar.length && (subnavbar.hasClass('sliding') || sliding)) {
        subnavbar[0].f7NavbarLeftOffset = app.rtl ? subnavbar[0].offsetWidth : -subnavbar[0].offsetWidth + separateNavbarLeftOffset;
        subnavbar[0].f7NavbarRightOffset = -subnavbar[0].f7NavbarLeftOffset - separateNavbarRightOffset + separateNavbarLeftOffset;
      }
    }

    // Title left
    if (app.params.navbar.iosCenterTitle) {
      var titleLeft = diff;
      if (app.rtl && noLeft && noRight && title.length > 0) titleLeft = -titleLeft;
      title.css({ left: titleLeft + 'px' });
    }
  },
  hide: function hide(el) {
    var animate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

    var $el = (0, _dom2.default)(el);
    if ($el.hasClass('navbar-inner')) $el = $el.parents('.navbar');
    if (!$el.length) return;
    if ($el.hasClass('navbar-hidden')) return;
    var className = 'navbar-hidden' + (animate ? ' navbar-transitioning' : '');
    $el.transitionEnd(function () {
      $el.removeClass('navbar-transitioning');
    });
    $el.addClass(className);
  },
  show: function show() {
    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '.navbar-hidden';
    var animate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

    var $el = (0, _dom2.default)(el);
    if ($el.hasClass('navbar-inner')) $el = $el.parents('.navbar');
    if (!$el.length) return;
    if (!$el.hasClass('navbar-hidden')) return;
    if (animate) {
      $el.addClass('navbar-transitioning');
      $el.transitionEnd(function () {
        $el.removeClass('navbar-transitioning');
      });
    }
    $el.removeClass('navbar-hidden');
  },
  getElByPage: function getElByPage(page) {
    var $pageEl = void 0;
    var $navbarEl = void 0;
    var pageData = void 0;
    if (page.$navbarEl || page.$el) {
      pageData = page;
      $pageEl = page.$el;
    } else {
      $pageEl = (0, _dom2.default)(page);
      if ($pageEl.length > 0) pageData = $pageEl[0].f7Page;
    }
    if (pageData && pageData.$navbarEl && pageData.$navbarEl.length > 0) {
      $navbarEl = pageData.$navbarEl;
    } else if ($pageEl) {
      $navbarEl = $pageEl.children('.navbar').children('.navbar-inner');
    }
    if (!$navbarEl || $navbarEl && $navbarEl.length === 0) return undefined;
    return $navbarEl[0];
  },
  getPageByEl: function getPageByEl(navbarInnerEl) {
    var $navbarInnerEl = (0, _dom2.default)(navbarInnerEl);
    if ($navbarInnerEl.hasClass('navbar')) {
      $navbarInnerEl = $navbarInnerEl.find('.navbar-inner');
      if ($navbarInnerEl.length > 1) return undefined;
    }
    return $navbarInnerEl[0].f7Page;
  },
  initHideNavbarOnScroll: function initHideNavbarOnScroll(pageEl, navbarInnerEl) {
    var app = this;
    var $pageEl = (0, _dom2.default)(pageEl);
    var $navbarEl = (0, _dom2.default)(navbarInnerEl || app.navbar.getElByPage(pageEl)).closest('.navbar');

    var previousScrollTop = void 0;
    var currentScrollTop = void 0;

    var scrollHeight = void 0;
    var offsetHeight = void 0;
    var reachEnd = void 0;
    var action = void 0;
    var navbarHidden = void 0;
    function handleScroll() {
      var scrollContent = this;
      if ($pageEl.hasClass('page-previous')) return;
      currentScrollTop = scrollContent.scrollTop;
      scrollHeight = scrollContent.scrollHeight;
      offsetHeight = scrollContent.offsetHeight;
      reachEnd = currentScrollTop + offsetHeight >= scrollHeight;
      navbarHidden = $navbarEl.hasClass('navbar-hidden');

      if (reachEnd) {
        if (app.params.navbar.showOnPageScrollEnd) {
          action = 'show';
        }
      } else if (previousScrollTop > currentScrollTop) {
        if (app.params.navbar.showOnPageScrollTop || currentScrollTop <= 44) {
          action = 'show';
        } else {
          action = 'hide';
        }
      } else if (currentScrollTop > 44) {
        action = 'hide';
      } else {
        action = 'show';
      }

      if (action === 'show' && navbarHidden) {
        app.navbar.show($navbarEl);
        navbarHidden = false;
      } else if (action === 'hide' && !navbarHidden) {
        app.navbar.hide($navbarEl);
        navbarHidden = true;
      }

      previousScrollTop = currentScrollTop;
    }
    $pageEl.on('scroll', '.page-content', handleScroll, true);
    $pageEl[0].f7ScrollNavbarHandler = handleScroll;
  }
};
exports.default = {
  name: 'navbar',
  create: function create() {
    var app = this;
    _utils2.default.extend(app, {
      navbar: {
        size: Navbar.size.bind(app),
        hide: Navbar.hide.bind(app),
        show: Navbar.show.bind(app),
        getElByPage: Navbar.getElByPage.bind(app),
        initHideNavbarOnScroll: Navbar.initHideNavbarOnScroll.bind(app)
      }
    });
  },

  params: {
    navbar: {
      scrollTopOnTitleClick: true,
      iosCenterTitle: true,
      hideOnPageScroll: false,
      showOnPageScrollEnd: true,
      showOnPageScrollTop: true
    }
  },
  on: {
    'panelBreakpoint resize': function onResize() {
      var app = this;
      if (app.theme !== 'ios') return;
      (0, _dom2.default)('.navbar').each(function (index, navbarEl) {
        app.navbar.size(navbarEl);
      });
    },
    pageBeforeRemove: function pageBeforeRemove(page) {
      if (page.$el[0].f7ScrollNavbarHandler) {
        page.$el.off('scroll', '.page-content', page.$el[0].f7ScrollNavbarHandler, true);
      }
    },
    pageBeforeIn: function pageBeforeIn(page) {
      var app = this;
      if (app.theme !== 'ios') return;
      var $navbarEl = void 0;
      var view = page.$el.parents('.view')[0].f7View;
      var navbarInnerEl = app.navbar.getElByPage(page);
      if (!navbarInnerEl) {
        $navbarEl = page.$el.parents('.view').children('.navbar');
      } else {
        $navbarEl = (0, _dom2.default)(navbarInnerEl).parents('.navbar');
      }
      if (page.$el.hasClass('no-navbar') || view.router.dynamicNavbar && !navbarInnerEl) {
        var animate = !!(page.pageFrom && page.router.history.length > 0);
        app.navbar.hide($navbarEl, animate);
      } else {
        app.navbar.show($navbarEl);
      }
    },
    pageReinit: function pageReinit(page) {
      var app = this;
      if (app.theme !== 'ios') return;
      var $navbarEl = (0, _dom2.default)(app.navbar.getElByPage(page));
      if (!$navbarEl || $navbarEl.length === 0) return;
      app.navbar.size($navbarEl);
    },
    pageInit: function pageInit(page) {
      var app = this;
      var $navbarEl = (0, _dom2.default)(app.navbar.getElByPage(page));
      if (!$navbarEl || $navbarEl.length === 0) return;
      if (app.theme === 'ios') {
        app.navbar.size($navbarEl);
      }
      if (app.params.navbar.hideOnPageScroll || page.$el.find('.hide-navbar-on-scroll').length || page.$el.hasClass('hide-navbar-on-scroll') || page.$el.find('.hide-bars-on-scroll').length || page.$el.hasClass('hide-bars-on-scroll')) {
        if (page.$el.find('.keep-navbar-on-scroll').length || page.$el.hasClass('keep-navbar-on-scroll') || page.$el.find('.keep-bars-on-scroll').length || page.$el.hasClass('keep-bars-on-scroll')) {
          return;
        }
        app.navbar.initHideNavbarOnScroll(page.el, $navbarEl[0]);
      }
    },
    modalOpen: function modalOpen(modal) {
      var app = this;
      if (app.theme !== 'ios') return;
      modal.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function (index, navbarEl) {
        app.navbar.size(navbarEl);
      });
    },
    panelOpen: function panelOpen(panel) {
      var app = this;
      if (app.theme !== 'ios') return;
      panel.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function (index, navbarEl) {
        app.navbar.size(navbarEl);
      });
    },
    panelSwipeOpen: function panelSwipeOpen(panel) {
      var app = this;
      if (app.theme !== 'ios') return;
      panel.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function (index, navbarEl) {
        app.navbar.size(navbarEl);
      });
    },
    tabShow: function tabShow(tabEl) {
      var app = this;
      (0, _dom2.default)(tabEl).find('.navbar:not(.navbar-previous):not(.stacked)').each(function (index, navbarEl) {
        app.navbar.size(navbarEl);
      });
    }
  },
  clicks: {
    '.navbar .title': function onTitleClick($clickedEl) {
      var app = this;
      if (!app.params.navbar.scrollTopOnTitleClick) return;
      if ($clickedEl.closest('a').length > 0) {
        return;
      }
      var pageContent = void 0;
      // Find active page
      var navbar = $clickedEl.parents('.navbar');

      // Static Layout
      pageContent = navbar.parents('.page-content');

      if (pageContent.length === 0) {
        // Fixed Layout
        if (navbar.parents('.page').length > 0) {
          pageContent = navbar.parents('.page').find('.page-content');
        }
        // Through Layout
        if (pageContent.length === 0) {
          if (navbar.nextAll('.page-current:not(.stacked)').length > 0) {
            pageContent = navbar.nextAll('.page-current:not(.stacked)').find('.page-content');
          }
        }
      }
      if (pageContent && pageContent.length > 0) {
        // Check for tab
        if (pageContent.hasClass('tab')) {
          pageContent = pageContent.parent('.tabs').children('.page-content.tab-active');
        }
        if (pageContent.length > 0) pageContent.scrollTop(0, 300);
      }
    }
  }
};

/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Toolbar = {
  setHighlight: function setHighlight(tabbarEl) {
    var app = this;
    if (app.theme !== 'md') return;

    var $tabbarEl = (0, _dom2.default)(tabbarEl);

    if ($tabbarEl.length === 0 || !($tabbarEl.hasClass('tabbar') || $tabbarEl.hasClass('tabbar-labels'))) return;

    if ($tabbarEl.find('.tab-link-highlight').length === 0) {
      $tabbarEl.children('.toolbar-inner').append('<span class="tab-link-highlight"></span>');
    }

    var $highlightEl = $tabbarEl.find('.tab-link-highlight');
    var $activeLink = $tabbarEl.find('.tab-link-active');
    var highlightWidth = void 0;
    var highlightTranslate = void 0;

    if ($tabbarEl.hasClass('tabbar-scrollable') && $activeLink && $activeLink[0]) {
      highlightWidth = $activeLink[0].offsetWidth + 'px';
      highlightTranslate = $activeLink[0].offsetLeft + 'px';
    } else {
      var activeIndex = $activeLink.index();
      var tabLinksCount = $tabbarEl.find('.tab-link').length;
      highlightWidth = 100 / tabLinksCount + '%';
      highlightTranslate = (app.rtl ? -activeIndex : activeIndex) * 100 + '%';
    }

    $highlightEl.css('width', highlightWidth).transform('translate3d(' + highlightTranslate + ',0,0)');
  },
  init: function init(tabbarEl) {
    var app = this;
    app.toolbar.setHighlight(tabbarEl);
  },
  hide: function hide(el) {
    var animate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

    var $el = (0, _dom2.default)(el);
    if ($el.hasClass('toolbar-hidden')) return;
    var className = 'toolbar-hidden' + (animate ? ' toolbar-transitioning' : '');
    $el.transitionEnd(function () {
      $el.removeClass('toolbar-transitioning');
    });
    $el.addClass(className);
  },
  show: function show(el) {
    var animate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

    var $el = (0, _dom2.default)(el);
    if (!$el.hasClass('toolbar-hidden')) return;
    if (animate) {
      $el.addClass('toolbar-transitioning');
      $el.transitionEnd(function () {
        $el.removeClass('toolbar-transitioning');
      });
    }
    $el.removeClass('toolbar-hidden');
  },
  initHideToolbarOnScroll: function initHideToolbarOnScroll(pageEl) {
    var app = this;
    var $pageEl = (0, _dom2.default)(pageEl);
    var $toolbarEl = $pageEl.parents('.view').children('.toolbar');
    if ($toolbarEl.length === 0) {
      $toolbarEl = $pageEl.find('.toolbar');
    }
    if ($toolbarEl.length === 0) {
      $toolbarEl = $pageEl.parents('.views').children('.tabbar, .tabbar-labels');
    }
    if ($toolbarEl.length === 0) {
      return;
    }

    var previousScrollTop = void 0;
    var currentScrollTop = void 0;

    var scrollHeight = void 0;
    var offsetHeight = void 0;
    var reachEnd = void 0;
    var action = void 0;
    var toolbarHidden = void 0;
    function handleScroll() {
      var scrollContent = this;
      if ($pageEl.hasClass('page-previous')) return;
      currentScrollTop = scrollContent.scrollTop;
      scrollHeight = scrollContent.scrollHeight;
      offsetHeight = scrollContent.offsetHeight;
      reachEnd = currentScrollTop + offsetHeight >= scrollHeight;
      toolbarHidden = $toolbarEl.hasClass('toolbar-hidden');

      if (reachEnd) {
        if (app.params.toolbar.showOnPageScrollEnd) {
          action = 'show';
        }
      } else if (previousScrollTop > currentScrollTop) {
        if (app.params.toolbar.showOnPageScrollTop || currentScrollTop <= 44) {
          action = 'show';
        } else {
          action = 'hide';
        }
      } else if (currentScrollTop > 44) {
        action = 'hide';
      } else {
        action = 'show';
      }

      if (action === 'show' && toolbarHidden) {
        app.toolbar.show($toolbarEl);
        toolbarHidden = false;
      } else if (action === 'hide' && !toolbarHidden) {
        app.toolbar.hide($toolbarEl);
        toolbarHidden = true;
      }

      previousScrollTop = currentScrollTop;
    }
    $pageEl.on('scroll', '.page-content', handleScroll, true);
    $pageEl[0].f7ScrollToolbarHandler = handleScroll;
  }
};
exports.default = {
  name: 'toolbar',
  create: function create() {
    var app = this;
    _utils2.default.extend(app, {
      toolbar: {
        hide: Toolbar.hide.bind(app),
        show: Toolbar.show.bind(app),
        setHighlight: Toolbar.setHighlight.bind(app),
        initHideToolbarOnScroll: Toolbar.initHideToolbarOnScroll.bind(app),
        init: Toolbar.init.bind(app)
      }
    });
  },

  params: {
    toolbar: {
      hideOnPageScroll: false,
      showOnPageScrollEnd: true,
      showOnPageScrollTop: true
    }
  },
  on: {
    pageBeforeRemove: function pageBeforeRemove(page) {
      if (page.$el[0].f7ScrollToolbarHandler) {
        page.$el.off('scroll', '.page-content', page.$el[0].f7ScrollToolbarHandler, true);
      }
    },
    pageBeforeIn: function pageBeforeIn(page) {
      var app = this;
      var $toolbarEl = page.$el.parents('.view').children('.toolbar');
      if ($toolbarEl.length === 0) {
        $toolbarEl = page.$el.find('.toolbar');
      }
      if ($toolbarEl.length === 0) {
        $toolbarEl = page.$el.parents('.views').children('.tabbar, .tabbar-labels');
      }
      if ($toolbarEl.length === 0) {
        return;
      }
      if (page.$el.hasClass('no-toolbar')) {
        app.toolbar.hide($toolbarEl);
      } else {
        app.toolbar.show($toolbarEl);
      }
    },
    pageInit: function pageInit(page) {
      var app = this;
      page.$el.find('.tabbar, .tabbar-labels').each(function (index, tabbarEl) {
        app.toolbar.init(tabbarEl);
      });
      if (app.params.toolbar.hideOnPageScroll || page.$el.find('.hide-toolbar-on-scroll').length || page.$el.hasClass('hide-toolbar-on-scroll') || page.$el.find('.hide-bars-on-scroll').length || page.$el.hasClass('hide-bars-on-scroll')) {
        if (page.$el.find('.keep-toolbar-on-scroll').length || page.$el.hasClass('keep-toolbar-on-scroll') || page.$el.find('.keep-bars-on-scroll').length || page.$el.hasClass('keep-bars-on-scroll')) {
          return;
        }
        app.toolbar.initHideToolbarOnScroll(page.el);
      }
    },
    init: function init() {
      var app = this;
      app.root.find('.tabbar, .tabbar-labels').each(function (index, tabbarEl) {
        app.toolbar.init(tabbarEl);
      });
    }
  }
};

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  name: 'subnavbar',
  on: {
    pageInit: function pageInit(page) {
      if (page.$navbarEl && page.$navbarEl.length && page.$navbarEl.find('.subnavbar').length) {
        page.$el.addClass('page-with-subnavbar');
      }
      if (page.$el.find('.subnavbar').length) {
        page.$el.addClass('page-with-subnavbar');
      }
    }
  }
};

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _touchRippleClass = __webpack_require__(43);

var _touchRippleClass2 = _interopRequireDefault(_touchRippleClass);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

exports.default = {
  name: 'touch-ripple',
  static: {
    TouchRipple: _touchRippleClass2.default
  },
  create: function create() {
    var app = this;
    app.touchRipple = {
      create: function create() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        return new (Function.prototype.bind.apply(_touchRippleClass2.default, [null].concat(_toConsumableArray(args))))();
      }
    };
  }
};

/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var TouchRipple = function () {
  function TouchRipple($el, x, y) {
    _classCallCheck(this, TouchRipple);

    var ripple = this;
    if (!$el) return undefined;
    var box = $el[0].getBoundingClientRect();
    var center = {
      x: x - box.left,
      y: y - box.top
    };
    var width = box.width;
    var height = box.height;
    var diameter = Math.max(Math.pow(Math.pow(height, 2) + Math.pow(width, 2), 0.5), 48);

    ripple.$rippleWaveEl = (0, _dom2.default)('<div class="ripple-wave" style="width: ' + diameter + 'px; height: ' + diameter + 'px; margin-top:-' + diameter / 2 + 'px; margin-left:-' + diameter / 2 + 'px; left:' + center.x + 'px; top:' + center.y + 'px;"></div>');

    $el.prepend(ripple.$rippleWaveEl);

    /* eslint no-underscore-dangle: ["error", { "allow": ["_clientLeft"] }] */
    ripple._clientLeft = ripple.$rippleWaveEl[0].clientLeft;

    ripple.rippleTransform = 'translate3d(' + (-center.x + width / 2) + 'px, ' + (-center.y + height / 2) + 'px, 0) scale(1)';

    ripple.$rippleWaveEl.transform(ripple.rippleTransform);

    return ripple;
  }

  _createClass(TouchRipple, [{
    key: 'onRemove',
    value: function onRemove() {
      var ripple = this;
      ripple.$rippleWaveEl.remove();
      Object.keys(ripple).forEach(function (key) {
        ripple[key] = null;
        delete ripple[key];
      });
      ripple = null;
    }
  }, {
    key: 'remove',
    value: function remove() {
      var ripple = this;
      if (ripple.removing) return;
      var $rippleWaveEl = this.$rippleWaveEl;
      var rippleTransform = this.rippleTransform;
      var removeTimeout = _utils2.default.nextTick(function () {
        ripple.onRemove();
      }, 400);
      ripple.removing = true;
      $rippleWaveEl.addClass('ripple-wave-fill').transform(rippleTransform.replace('scale(1)', 'scale(1.01)')).transitionEnd(function () {
        clearTimeout(removeTimeout);
        _utils2.default.nextFrame(function () {
          $rippleWaveEl.addClass('ripple-wave-out').transform(rippleTransform.replace('scale(1)', 'scale(1.01)'));

          removeTimeout = _utils2.default.nextTick(function () {
            ripple.onRemove();
          }, 700);

          $rippleWaveEl.transitionEnd(function () {
            clearTimeout(removeTimeout);
            ripple.onRemove();
          });
        });
      });
    }
  }]);

  return TouchRipple;
}();

exports.default = TouchRipple;

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _modalClass = __webpack_require__(13);

var _modalClass2 = _interopRequireDefault(_modalClass);

var _customModalClass = __webpack_require__(45);

var _customModalClass2 = _interopRequireDefault(_customModalClass);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  name: 'modal',
  static: {
    Modal: _modalClass2.default,
    CustomModal: _customModalClass2.default
  },
  create: function create() {
    var app = this;
    app.customModal = {
      create: function create(params) {
        return new _customModalClass2.default(app, params);
      }
    };
  },

  params: {
    modal: {
      moveToRoot: true,
      queueDialogs: true
    }
  }
};

/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dom = __webpack_require__(1);

var _dom2 = _interopRequireDefault(_dom);

var _utils = __webpack_require__(0);

var _utils2 = _interopRequireDefault(_utils);

var _modalClass = __webpack_require__(13);

var _modalClass2 = _interopRequireDefault(_modalClass);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CustomModal = function (_Modal) {
  _inherits(CustomModal, _Modal);

  function CustomModal(app, params) {
    var _ret3;

    _classCallCheck(this, CustomModal);

    var extendedParams = _utils2.default.extend({
      backdrop: true,
      closeByBackdropClick: true,
      on: {}
    }, params);

    // Extends with open/close Modal methods;

    var _this = _possibleConstructorReturn(this, (CustomModal.__proto__ || Object.getPrototypeOf(CustomModal)).call(this, app, extendedParams));

    var customModal = _this;

    customModal.params = extendedParams;

    // Find Element
    var $el = void 0;
    if (!customModal.params.el) {
      $el = (0, _dom2.default)(customModal.params.content);
    } else {
      $el = (0, _dom2.default)(customModal.params.el);
    }

    if ($el && $el.length > 0 && $el[0].f7Modal) {
      var _ret;

      return _ret = $el[0].f7Modal, _possibleConstructorReturn(_this, _ret);
    }

    if ($el.length === 0) {
      var _ret2;

      return _ret2 = customModal.destroy(), _possibleConstructorReturn(_this, _ret2);
    }
    var $backdropEl = void 0;
    if (customModal.params.backdrop) {
      $backdropEl = app.root.children('.custom-modal-backdrop');
      if ($backdropEl.length === 0) {
        $backdropEl = (0, _dom2.default)('<div class="custom-modal-backdrop"></div>');
        app.root.append($backdropEl);
      }
    }

    function handleClick(e) {
      if (!customModal || customModal.destroyed) return;
      if ($backdropEl && e.target === $backdropEl[0]) {
        customModal.close();
      }
    }

    customModal.on('customModalOpened', function () {
      if (customModal.params.closeByBackdropClick && customModal.params.backdrop) {
        app.on('click', handleClick);
      }
    });
    customModal.on('customModalClose', function () {
      if (customModal.params.closeByBackdropClick && customModal.params.backdrop) {
        app.off('click', handleClick);
      }
    });

    _utils2.default.extend(customModal, {
      app: app,
      $el: $el,
      el: $el[0],
      $backdropEl: $backdropEl,
      backdropEl: $backdropEl && $backdropEl[0],
      type: 'customModal'
    });

    $el[0].f7Modal = customModal;

    return _ret3 = customModal, _possibleConstructorReturn(_this, _ret3);
  }

  return CustomModal;
}(_modalClass2.default);

exports.default = CustomModal;

/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports,"__esModule",{value:true});exports.Support=exports.Device=exports.Utils=exports.Request=exports.Template7=exports.Dom7=undefined;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var _dom=__webpack_require__(1);Object.defineProperty(exports,'Dom7',{enumerable:true,get:function get(){return _interopRequireDefault(_dom).default;}});var _template=__webpack_require__(5);Object.defineProperty(exports,'Template7',{enumerable:true,get:function get(){return _interopRequireDefault(_template).default;}});var _ssrWindow=__webpack_require__(2);var _dom2=_interopRequireDefault(_dom);var _template2=_interopRequireDefault(_template);var _pathToRegexp=__webpack_require__(11);var _pathToRegexp2=_interopRequireDefault(_pathToRegexp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}/**
 * Framework7 2.3.1
 * Full featured mobile HTML framework for building iOS & Android apps
 * http://framework7.io/
 *
 * Copyright 2014-2018 Vladimir Kharlampidi
 *
 * Released under the MIT License
 *
 * Released on: June 1, 2018
 *//**
 * https://github.com/gre/bezier-easing
 * BezierEasing - use bezier curve for transition easing function
 * by Gaëtan Renaudeau 2014 - 2015 – MIT License
 *//* eslint-disable */// These values are established by empiricism with tests (tradeoff: performance VS precision)
var NEWTON_ITERATIONS=4;var NEWTON_MIN_SLOPE=0.001;var SUBDIVISION_PRECISION=0.0000001;var SUBDIVISION_MAX_ITERATIONS=10;var kSplineTableSize=11;var kSampleStepSize=1.0/(kSplineTableSize-1.0);var float32ArraySupported=typeof Float32Array==='function';function A(aA1,aA2){return 1.0-3.0*aA2+3.0*aA1;}function B(aA1,aA2){return 3.0*aA2-6.0*aA1;}function C(aA1){return 3.0*aA1;}// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.
function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT;}// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.
function getSlope(aT,aA1,aA2){return 3.0*A(aA1,aA2)*aT*aT+2.0*B(aA1,aA2)*aT+C(aA1);}function binarySubdivide(aX,aA,aB,mX1,mX2){var currentX,currentT,i=0;do{currentT=aA+(aB-aA)/2.0;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0.0){aB=currentT;}else{aA=currentT;}}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT;}function newtonRaphsonIterate(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0.0){return aGuessT;}var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope;}return aGuessT;}function _bezier(mX1,mY1,mX2,mY2){if(!(0<=mX1&&mX1<=1&&0<=mX2&&mX2<=1)){throw new Error('bezier x values must be in [0, 1] range');}// Precompute samples table
var sampleValues=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);if(mX1!==mY1||mX2!==mY2){for(var i=0;i<kSplineTableSize;++i){sampleValues[i]=calcBezier(i*kSampleStepSize,mX1,mX2);}}function getTForX(aX){var intervalStart=0.0;var currentSample=1;var lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&sampleValues[currentSample]<=aX;++currentSample){intervalStart+=kSampleStepSize;}--currentSample;// Interpolate to provide an initial guess for t
var dist=(aX-sampleValues[currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample]);var guessForT=intervalStart+dist*kSampleStepSize;var initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=NEWTON_MIN_SLOPE){return newtonRaphsonIterate(aX,guessForT,mX1,mX2);}else if(initialSlope===0.0){return guessForT;}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2);}}return function BezierEasing(x){if(mX1===mY1&&mX2===mY2){return x;// linear
}// Because JavaScript number are imprecise, we should guarantee the extremes are right.
if(x===0){return 0;}if(x===1){return 1;}return calcBezier(getTForX(x),mY1,mY2);};}/* eslint no-control-regex: "off" */// Remove Diacritics
var defaultDiacriticsRemovalap=[{base:'A',letters:'A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F'},{base:'AA',letters:'\uA732'},{base:'AE',letters:'\xC6\u01FC\u01E2'},{base:'AO',letters:'\uA734'},{base:'AU',letters:'\uA736'},{base:'AV',letters:'\uA738\uA73A'},{base:'AY',letters:'\uA73C'},{base:'B',letters:'B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181'},{base:'C',letters:'C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E'},{base:'D',letters:'D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779'},{base:'DZ',letters:'\u01F1\u01C4'},{base:'Dz',letters:'\u01F2\u01C5'},{base:'E',letters:'E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E'},{base:'F',letters:'F\u24BB\uFF26\u1E1E\u0191\uA77B'},{base:'G',letters:'G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E'},{base:'H',letters:'H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D'},{base:'I',letters:'I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197'},{base:'J',letters:'J\u24BF\uFF2A\u0134\u0248'},{base:'K',letters:'K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2'},{base:'L',letters:'L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780'},{base:'LJ',letters:'\u01C7'},{base:'Lj',letters:'\u01C8'},{base:'M',letters:'M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C'},{base:'N',letters:'N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4'},{base:'NJ',letters:'\u01CA'},{base:'Nj',letters:'\u01CB'},{base:'O',letters:'O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C'},{base:'OI',letters:'\u01A2'},{base:'OO',letters:'\uA74E'},{base:'OU',letters:'\u0222'},{base:'OE',letters:'\x8C\u0152'},{base:'oe',letters:'\x9C\u0153'},{base:'P',letters:'P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754'},{base:'Q',letters:'Q\u24C6\uFF31\uA756\uA758\u024A'},{base:'R',letters:'R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782'},{base:'S',letters:'S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784'},{base:'T',letters:'T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786'},{base:'TZ',letters:'\uA728'},{base:'U',letters:'U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244'},{base:'V',letters:'V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245'},{base:'VY',letters:'\uA760'},{base:'W',letters:'W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72'},{base:'X',letters:'X\u24CD\uFF38\u1E8A\u1E8C'},{base:'Y',letters:'Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE'},{base:'Z',letters:'Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762'},{base:'a',letters:'a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250'},{base:'aa',letters:'\uA733'},{base:'ae',letters:'\xE6\u01FD\u01E3'},{base:'ao',letters:'\uA735'},{base:'au',letters:'\uA737'},{base:'av',letters:'\uA739\uA73B'},{base:'ay',letters:'\uA73D'},{base:'b',letters:'b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253'},{base:'c',letters:'c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184'},{base:'d',letters:'d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A'},{base:'dz',letters:'\u01F3\u01C6'},{base:'e',letters:'e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD'},{base:'f',letters:'f\u24D5\uFF46\u1E1F\u0192\uA77C'},{base:'g',letters:'g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F'},{base:'h',letters:'h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265'},{base:'hv',letters:'\u0195'},{base:'i',letters:'i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131'},{base:'j',letters:'j\u24D9\uFF4A\u0135\u01F0\u0249'},{base:'k',letters:'k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3'},{base:'l',letters:'l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747'},{base:'lj',letters:'\u01C9'},{base:'m',letters:'m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F'},{base:'n',letters:'n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5'},{base:'nj',letters:'\u01CC'},{base:'o',letters:'o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275'},{base:'oi',letters:'\u01A3'},{base:'ou',letters:'\u0223'},{base:'oo',letters:'\uA74F'},{base:'p',letters:'p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755'},{base:'q',letters:'q\u24E0\uFF51\u024B\uA757\uA759'},{base:'r',letters:'r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783'},{base:'s',letters:'s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B'},{base:'t',letters:'t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787'},{base:'tz',letters:'\uA729'},{base:'u',letters:'u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289'},{base:'v',letters:'v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C'},{base:'vy',letters:'\uA761'},{base:'w',letters:'w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73'},{base:'x',letters:'x\u24E7\uFF58\u1E8B\u1E8D'},{base:'y',letters:'y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF'},{base:'z',letters:'z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763'}];var diacriticsMap={};for(var i=0;i<defaultDiacriticsRemovalap.length;i+=1){var letters=defaultDiacriticsRemovalap[i].letters;for(var j=0;j<letters.length;j+=1){diacriticsMap[letters[j]]=defaultDiacriticsRemovalap[i].base;}}var createPromise=function createPromise(handler){var resolved=false;var rejected=false;var resolveArgs=void 0;var rejectArgs=void 0;var promiseHandlers={then:undefined,catch:undefined};var promise={then:function then(thenHandler){if(resolved){thenHandler.apply(undefined,_toConsumableArray(resolveArgs));}else{promiseHandlers.then=thenHandler;}return promise;},catch:function _catch(catchHandler){if(rejected){catchHandler.apply(undefined,_toConsumableArray(rejectArgs));}else{promiseHandlers.catch=catchHandler;}return promise;}};function resolve(){resolved=true;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}if(promiseHandlers.then)promiseHandlers.then.apply(promiseHandlers,args);else resolveArgs=args;}function reject(){rejected=true;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}if(promiseHandlers.catch)promiseHandlers.catch.apply(promiseHandlers,args);else rejectArgs=args;}handler(resolve,reject);return promise;};var Utils={mdPreloaderContent:'\n    <span class="preloader-inner">\n      <span class="preloader-inner-gap"></span>\n      <span class="preloader-inner-left">\n          <span class="preloader-inner-half-circle"></span>\n      </span>\n      <span class="preloader-inner-right">\n          <span class="preloader-inner-half-circle"></span>\n      </span>\n    </span>\n  '.trim(),eventNameToColonCase:function eventNameToColonCase(eventName){var hasColon=void 0;return eventName.split('').map(function(char,index){if(char.match(/[A-Z]/)&&index!==0&&!hasColon){hasColon=true;return':'+char.toLowerCase();}return char.toLowerCase();}).join('');},deleteProps:function deleteProps(obj){var object=obj;Object.keys(object).forEach(function(key){try{object[key]=null;}catch(e){// no getter for object
}try{delete object[key];}catch(e){// something got wrong
}});},bezier:function bezier(){return _bezier.apply(undefined,arguments);},nextTick:function nextTick(callback){var delay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return setTimeout(callback,delay);},nextFrame:function nextFrame(callback){return Utils.requestAnimationFrame(callback);},now:function now(){return Date.now();},promise:function promise(handler){return _ssrWindow.window.Promise?new Promise(handler):createPromise(handler);},requestAnimationFrame:function requestAnimationFrame(callback){if(_ssrWindow.window.requestAnimationFrame)return _ssrWindow.window.requestAnimationFrame(callback);else if(_ssrWindow.window.webkitRequestAnimationFrame)return _ssrWindow.window.webkitRequestAnimationFrame(callback);return _ssrWindow.window.setTimeout(callback,1000/60);},cancelAnimationFrame:function cancelAnimationFrame(id){if(_ssrWindow.window.cancelAnimationFrame)return _ssrWindow.window.cancelAnimationFrame(id);else if(_ssrWindow.window.webkitCancelAnimationFrame)return _ssrWindow.window.webkitCancelAnimationFrame(id);return _ssrWindow.window.clearTimeout(id);},removeDiacritics:function removeDiacritics(str){return str.replace(/[^\u0000-\u007E]/g,function(a){return diacriticsMap[a]||a;});},parseUrlQuery:function parseUrlQuery(url){var query={};var urlToParse=url||_ssrWindow.window.location.href;var i=void 0;var params=void 0;var param=void 0;var length=void 0;if(typeof urlToParse==='string'&&urlToParse.length){urlToParse=urlToParse.indexOf('?')>-1?urlToParse.replace(/\S*\?/,''):'';params=urlToParse.split('&').filter(function(paramsPart){return paramsPart!=='';});length=params.length;for(i=0;i<length;i+=1){param=params[i].replace(/#\S+/g,'').split('=');query[decodeURIComponent(param[0])]=typeof param[1]==='undefined'?undefined:decodeURIComponent(param[1])||'';}}return query;},getTranslate:function getTranslate(el){var axis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'x';var matrix=void 0;var curTransform=void 0;var transformMatrix=void 0;var curStyle=_ssrWindow.window.getComputedStyle(el,null);if(_ssrWindow.window.WebKitCSSMatrix){curTransform=curStyle.transform||curStyle.webkitTransform;if(curTransform.split(',').length>6){curTransform=curTransform.split(', ').map(function(a){return a.replace(',','.');}).join(', ');}// Some old versions of Webkit choke when 'none' is passed; pass
// empty string instead in this case
transformMatrix=new _ssrWindow.window.WebKitCSSMatrix(curTransform==='none'?'':curTransform);}else{transformMatrix=curStyle.MozTransform||curStyle.OTransform||curStyle.MsTransform||curStyle.msTransform||curStyle.transform||curStyle.getPropertyValue('transform').replace('translate(','matrix(1, 0, 0, 1,');matrix=transformMatrix.toString().split(',');}if(axis==='x'){// Latest Chrome and webkits Fix
if(_ssrWindow.window.WebKitCSSMatrix)curTransform=transformMatrix.m41;// Crazy IE10 Matrix
else if(matrix.length===16)curTransform=parseFloat(matrix[12]);// Normal Browsers
else curTransform=parseFloat(matrix[4]);}if(axis==='y'){// Latest Chrome and webkits Fix
if(_ssrWindow.window.WebKitCSSMatrix)curTransform=transformMatrix.m42;// Crazy IE10 Matrix
else if(matrix.length===16)curTransform=parseFloat(matrix[13]);// Normal Browsers
else curTransform=parseFloat(matrix[5]);}return curTransform||0;},serializeObject:function serializeObject(obj){var parents=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(typeof obj==='string')return obj;var resultArray=[];var separator='&';var newParents=void 0;function varName(name){if(parents.length>0){var parentParts='';for(var _j=0;_j<parents.length;_j+=1){if(_j===0)parentParts+=parents[_j];else parentParts+='['+encodeURIComponent(parents[_j])+']';}return parentParts+'['+encodeURIComponent(name)+']';}return encodeURIComponent(name);}function varValue(value){return encodeURIComponent(value);}Object.keys(obj).forEach(function(prop){var toPush=void 0;if(Array.isArray(obj[prop])){toPush=[];for(var _i=0;_i<obj[prop].length;_i+=1){if(!Array.isArray(obj[prop][_i])&&_typeof(obj[prop][_i])==='object'){newParents=parents.slice();newParents.push(prop);newParents.push(String(_i));toPush.push(Utils.serializeObject(obj[prop][_i],newParents));}else{toPush.push(varName(prop)+'[]='+varValue(obj[prop][_i]));}}if(toPush.length>0)resultArray.push(toPush.join(separator));}else if(obj[prop]===null||obj[prop]===''){resultArray.push(varName(prop)+'=');}else if(_typeof(obj[prop])==='object'){// Object, convert to named array
newParents=parents.slice();newParents.push(prop);toPush=Utils.serializeObject(obj[prop],newParents);if(toPush!=='')resultArray.push(toPush);}else if(typeof obj[prop]!=='undefined'&&obj[prop]!==''){// Should be string or plain value
resultArray.push(varName(prop)+'='+varValue(obj[prop]));}else if(obj[prop]==='')resultArray.push(varName(prop));});return resultArray.join(separator);},isObject:function isObject(o){return(typeof o==='undefined'?'undefined':_typeof(o))==='object'&&o!==null&&o.constructor&&o.constructor===Object;},merge:function merge(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}var to=args[0];args.splice(0,1);var from=args;for(var _i2=0;_i2<from.length;_i2+=1){var nextSource=args[_i2];if(nextSource!==undefined&&nextSource!==null){var keysArray=Object.keys(Object(nextSource));for(var nextIndex=0,len=keysArray.length;nextIndex<len;nextIndex+=1){var nextKey=keysArray[nextIndex];var desc=Object.getOwnPropertyDescriptor(nextSource,nextKey);if(desc!==undefined&&desc.enumerable){to[nextKey]=nextSource[nextKey];}}}}return to;},extend:function extend(){var deep=true;var to=void 0;var from=void 0;for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}if(typeof args[0]==='boolean'){deep=args[0];to=args[1];args.splice(0,2);from=args;}else{to=args[0];args.splice(0,1);from=args;}for(var _i3=0;_i3<from.length;_i3+=1){var nextSource=args[_i3];if(nextSource!==undefined&&nextSource!==null){var keysArray=Object.keys(Object(nextSource));for(var nextIndex=0,len=keysArray.length;nextIndex<len;nextIndex+=1){var nextKey=keysArray[nextIndex];var desc=Object.getOwnPropertyDescriptor(nextSource,nextKey);if(desc!==undefined&&desc.enumerable){if(!deep){to[nextKey]=nextSource[nextKey];}else if(Utils.isObject(to[nextKey])&&Utils.isObject(nextSource[nextKey])){Utils.extend(to[nextKey],nextSource[nextKey]);}else if(!Utils.isObject(to[nextKey])&&Utils.isObject(nextSource[nextKey])){to[nextKey]={};Utils.extend(to[nextKey],nextSource[nextKey]);}else{to[nextKey]=nextSource[nextKey];}}}}}return to;}};var Device=function Device(){var ua=_ssrWindow.window.navigator.userAgent;var device={ios:false,android:false,androidChrome:false,desktop:false,windows:false,iphone:false,iphoneX:false,ipod:false,ipad:false,cordova:_ssrWindow.window.cordova||_ssrWindow.window.phonegap,phonegap:_ssrWindow.window.cordova||_ssrWindow.window.phonegap};var windows=ua.match(/(Windows Phone);?[\s\/]+([\d.]+)?/);// eslint-disable-line
var android=ua.match(/(Android);?[\s\/]+([\d.]+)?/);// eslint-disable-line
var ipad=ua.match(/(iPad).*OS\s([\d_]+)/);var ipod=ua.match(/(iPod)(.*OS\s([\d_]+))?/);var iphone=!ipad&&ua.match(/(iPhone\sOS|iOS)\s([\d_]+)/);var iphoneX=iphone&&_ssrWindow.window.screen.width===375&&_ssrWindow.window.screen.height===812;// Windows
if(windows){device.os='windows';device.osVersion=windows[2];device.windows=true;}// Android
if(android&&!windows){device.os='android';device.osVersion=android[2];device.android=true;device.androidChrome=ua.toLowerCase().indexOf('chrome')>=0;}if(ipad||iphone||ipod){device.os='ios';device.ios=true;}// iOS
if(iphone&&!ipod){device.osVersion=iphone[2].replace(/_/g,'.');device.iphone=true;device.iphoneX=iphoneX;}if(ipad){device.osVersion=ipad[2].replace(/_/g,'.');device.ipad=true;}if(ipod){device.osVersion=ipod[3]?ipod[3].replace(/_/g,'.'):null;device.iphone=true;}// iOS 8+ changed UA
if(device.ios&&device.osVersion&&ua.indexOf('Version/')>=0){if(device.osVersion.split('.')[0]==='10'){device.osVersion=ua.toLowerCase().split('version/')[1].split(' ')[0];}}// Webview
device.webView=(iphone||ipad||ipod)&&(ua.match(/.*AppleWebKit(?!.*Safari)/i)||_ssrWindow.window.navigator.standalone);device.webview=device.webView;// Desktop
device.desktop=!(device.os||device.android||device.webView);// Minimal UI
if(device.os&&device.os==='ios'){var osVersionArr=device.osVersion.split('.');var metaViewport=_ssrWindow.document.querySelector('meta[name="viewport"]');device.minimalUi=!device.webView&&(ipod||iphone)&&(osVersionArr[0]*1===7?osVersionArr[1]*1>=1:osVersionArr[0]*1>7)&&metaViewport&&metaViewport.getAttribute('content').indexOf('minimal-ui')>=0;}// Check for status bar and fullscreen app mode
device.needsStatusbarOverlay=function needsStatusbarOverlay(){if((device.webView||device.android&&device.cordova)&&_ssrWindow.window.innerWidth*_ssrWindow.window.innerHeight===_ssrWindow.window.screen.width*_ssrWindow.window.screen.height){if(device.iphoneX&&(_ssrWindow.window.orientation===90||_ssrWindow.window.orientation===-90)){return false;}return true;}return false;};device.statusbar=device.needsStatusbarOverlay();// Pixel Ratio
device.pixelRatio=_ssrWindow.window.devicePixelRatio||1;// Export object
return device;}();var Framework7Class=function(){function Framework7Class(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var parents=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,Framework7Class);var self=this;self.params=params;// Events
self.eventsParents=parents;self.eventsListeners={};if(self.params&&self.params.on){Object.keys(self.params.on).forEach(function(eventName){self.on(eventName,self.params.on[eventName]);});}}_createClass(Framework7Class,[{key:'on',value:function on(events,handler,priority){var self=this;if(typeof handler!=='function')return self;var method=priority?'unshift':'push';events.split(' ').forEach(function(event){if(!self.eventsListeners[event])self.eventsListeners[event]=[];self.eventsListeners[event][method](handler);});return self;}},{key:'once',value:function once(events,handler,priority){var self=this;if(typeof handler!=='function')return self;function onceHandler(){for(var _len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}handler.apply(self,args);self.off(events,onceHandler);}return self.on(events,onceHandler,priority);}},{key:'off',value:function off(events,handler){var self=this;if(!self.eventsListeners)return self;events.split(' ').forEach(function(event){if(typeof handler==='undefined'){self.eventsListeners[event]=[];}else{self.eventsListeners[event].forEach(function(eventHandler,index){if(eventHandler===handler){self.eventsListeners[event].splice(index,1);}});}});return self;}},{key:'emit',value:function emit(){var self=this;if(!self.eventsListeners)return self;var events=void 0;var data=void 0;var context=void 0;var eventsParents=void 0;for(var _len6=arguments.length,args=Array(_len6),_key6=0;_key6<_len6;_key6++){args[_key6]=arguments[_key6];}if(typeof args[0]==='string'||Array.isArray(args[0])){events=args[0];data=args.slice(1,args.length);context=self;eventsParents=self.eventsParents;}else{events=args[0].events;data=args[0].data;context=args[0].context||self;eventsParents=args[0].local?[]:args[0].parents||self.eventsParents;}var eventsArray=Array.isArray(events)?events:events.split(' ');var localEvents=eventsArray.map(function(eventName){return eventName.replace('local::','');});var parentEvents=eventsArray.filter(function(eventName){return eventName.indexOf('local::')<0;});localEvents.forEach(function(event){if(self.eventsListeners&&self.eventsListeners[event]){var handlers=[];self.eventsListeners[event].forEach(function(eventHandler){handlers.push(eventHandler);});handlers.forEach(function(eventHandler){eventHandler.apply(context,data);});}});if(eventsParents&&eventsParents.length>0){eventsParents.forEach(function(eventsParent){eventsParent.emit.apply(eventsParent,[parentEvents].concat(_toConsumableArray(data)));});}return self;}},{key:'useModulesParams',value:function useModulesParams(instanceParams){var instance=this;if(!instance.modules)return;Object.keys(instance.modules).forEach(function(moduleName){var module=instance.modules[moduleName];// Extend params
if(module.params){Utils.extend(instanceParams,module.params);}});}},{key:'useModules',value:function useModules(){var modulesParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var instance=this;if(!instance.modules)return;Object.keys(instance.modules).forEach(function(moduleName){var module=instance.modules[moduleName];var moduleParams=modulesParams[moduleName]||{};// Extend instance methods and props
if(module.instance){Object.keys(module.instance).forEach(function(modulePropName){var moduleProp=module.instance[modulePropName];if(typeof moduleProp==='function'){instance[modulePropName]=moduleProp.bind(instance);}else{instance[modulePropName]=moduleProp;}});}// Add event listeners
if(module.on&&instance.on){Object.keys(module.on).forEach(function(moduleEventName){instance.on(moduleEventName,module.on[moduleEventName]);});}// Module create callback
if(module.create){module.create.bind(instance)(moduleParams);}});}}],[{key:'installModule',value:function installModule(module){var Class=this;if(!Class.prototype.modules)Class.prototype.modules={};var name=module.name||Object.keys(Class.prototype.modules).length+'_'+Utils.now();Class.prototype.modules[name]=module;// Prototype
if(module.proto){Object.keys(module.proto).forEach(function(key){Class.prototype[key]=module.proto[key];});}// Class
if(module.static){Object.keys(module.static).forEach(function(key){Class[key]=module.static[key];});}// Callback
if(module.install){for(var _len7=arguments.length,params=Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++){params[_key7-1]=arguments[_key7];}module.install.apply(Class,params);}return Class;}},{key:'use',value:function use(module){var Class=this;if(Array.isArray(module)){module.forEach(function(m){return Class.installModule(m);});return Class;}for(var _len8=arguments.length,params=Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++){params[_key8-1]=arguments[_key8];}return Class.installModule.apply(Class,[module].concat(params));}},{key:'components',set:function set(components){var Class=this;if(!Class.use)return;Class.use(components);}}]);return Framework7Class;}();var Framework7=function(_Framework7Class){_inherits(Framework7,_Framework7Class);function Framework7(params){var _ret;_classCallCheck(this,Framework7);var _this=_possibleConstructorReturn(this,(Framework7.__proto__||Object.getPrototypeOf(Framework7)).call(this,params));var passedParams=Utils.extend({},params);// App Instance
var app=_this;// Default
var defaults={version:'1.0.0',id:'io.framework7.testapp',root:'body',theme:'auto',language:_ssrWindow.window.navigator.language,routes:[],name:'Framework7',initOnDeviceReady:true,init:true};// Extend defaults with modules params
app.useModulesParams(defaults);// Extend defaults with passed params
app.params=Utils.extend(defaults,params);var $rootEl=(0,_dom2.default)(app.params.root);Utils.extend(app,{// App Id
id:app.params.id,// App Name
name:app.params.name,// App version
version:app.params.version,// Routes
routes:app.params.routes,// Lang
language:app.params.language,// Root
root:$rootEl,// RTL
rtl:$rootEl.css('direction')==='rtl',// Theme
theme:function getTheme(){if(app.params.theme==='auto'){return Device.ios?'ios':'md';}return app.params.theme;}(),// Initially passed parameters
passedParams:passedParams});// Save Root
if(app.root&&app.root[0]){app.root[0].f7=app;}// Install Modules
app.useModules();// Init
if(app.params.init){if(Device.cordova&&app.params.initOnDeviceReady){(0,_dom2.default)(_ssrWindow.document).on('deviceready',function(){app.init();});}else{app.init();}}// Return app instance
return _ret=app,_possibleConstructorReturn(_this,_ret);}_createClass(Framework7,[{key:'init',value:function init(){var app=this;if(app.initialized)return;app.root.addClass('framework7-initializing');// RTL attr
if(app.rtl){(0,_dom2.default)('html').attr('dir','rtl');}// Root class
app.root.addClass('framework7-root');// Theme class
(0,_dom2.default)('html').removeClass('ios md').addClass(app.theme);// Data
app.data={};if(app.params.data&&typeof app.params.data==='function'){Utils.extend(app.data,app.params.data.bind(app)());}else if(app.params.data){Utils.extend(app.data,app.params.data);}// Methods
app.methods={};if(app.params.methods){Utils.extend(app.methods,app.params.methods);}// Init class
Utils.nextFrame(function(){app.root.removeClass('framework7-initializing');});// Emit, init other modules
app.initialized=true;app.emit('init');}// eslint-disable-next-line
},{key:'$',get:function get(){return _dom2.default;}// eslint-disable-next-line
},{key:'t7',get:function get(){return _template2.default;}}],[{key:'Dom7',get:function get(){return _dom2.default;}},{key:'$',get:function get(){return _dom2.default;}},{key:'Template7',get:function get(){return _template2.default;}},{key:'Class',get:function get(){return Framework7Class;}}]);return Framework7;}(Framework7Class);var globals={};var jsonpRequests=0;function Request(requestOptions){var globalsNoCallbacks=Utils.extend({},globals);'beforeCreate beforeOpen beforeSend error complete success statusCode'.split(' ').forEach(function(callbackName){delete globalsNoCallbacks[callbackName];});var defaults=Utils.extend({url:_ssrWindow.window.location.toString(),method:'GET',data:false,async:true,cache:true,user:'',password:'',headers:{},xhrFields:{},statusCode:{},processData:true,dataType:'text',contentType:'application/x-www-form-urlencoded',timeout:0},globalsNoCallbacks);var options=Utils.extend({},defaults,requestOptions);var proceedRequest=void 0;// Function to run XHR callbacks and events
function fireCallback(callbackName){/*
      Callbacks:
      beforeCreate (options),
      beforeOpen (xhr, options),
      beforeSend (xhr, options),
      error (xhr, status),
      complete (xhr, stautus),
      success (response, status, xhr),
      statusCode ()
    */var globalCallbackValue=void 0;var optionCallbackValue=void 0;for(var _len9=arguments.length,data=Array(_len9>1?_len9-1:0),_key9=1;_key9<_len9;_key9++){data[_key9-1]=arguments[_key9];}if(globals[callbackName]){globalCallbackValue=globals[callbackName].apply(globals,data);}if(options[callbackName]){optionCallbackValue=options[callbackName].apply(options,data);}if(typeof globalCallbackValue!=='boolean')globalCallbackValue=true;if(typeof optionCallbackValue!=='boolean')optionCallbackValue=true;return globalCallbackValue&&optionCallbackValue;}// Before create callback
proceedRequest=fireCallback('beforeCreate',options);if(proceedRequest===false)return undefined;// For jQuery guys
if(options.type)options.method=options.type;// Parameters Prefix
var paramsPrefix=options.url.indexOf('?')>=0?'&':'?';// UC method
var method=options.method.toUpperCase();// Data to modify GET URL
if((method==='GET'||method==='HEAD'||method==='OPTIONS'||method==='DELETE')&&options.data){var stringData=void 0;if(typeof options.data==='string'){// Should be key=value string
if(options.data.indexOf('?')>=0)stringData=options.data.split('?')[1];else stringData=options.data;}else{// Should be key=value object
stringData=Utils.serializeObject(options.data);}if(stringData.length){options.url+=paramsPrefix+stringData;if(paramsPrefix==='?')paramsPrefix='&';}}// JSONP
if(options.dataType==='json'&&options.url.indexOf('callback=')>=0){var callbackName='f7jsonp_'+(Date.now()+(jsonpRequests+=1));var abortTimeout=void 0;var callbackSplit=options.url.split('callback=');var requestUrl=callbackSplit[0]+'callback='+callbackName;if(callbackSplit[1].indexOf('&')>=0){var addVars=callbackSplit[1].split('&').filter(function(el){return el.indexOf('=')>0;}).join('&');if(addVars.length>0)requestUrl+='&'+addVars;}// Create script
var script=_ssrWindow.document.createElement('script');script.type='text/javascript';script.onerror=function onerror(){clearTimeout(abortTimeout);fireCallback('error',null,'scripterror');fireCallback('complete',null,'scripterror');};script.src=requestUrl;// Handler
_ssrWindow.window[callbackName]=function jsonpCallback(data){clearTimeout(abortTimeout);fireCallback('success',data);script.parentNode.removeChild(script);script=null;delete _ssrWindow.window[callbackName];};_ssrWindow.document.querySelector('head').appendChild(script);if(options.timeout>0){abortTimeout=setTimeout(function(){script.parentNode.removeChild(script);script=null;fireCallback('error',null,'timeout');},options.timeout);}return undefined;}// Cache for GET/HEAD requests
if(method==='GET'||method==='HEAD'||method==='OPTIONS'||method==='DELETE'){if(options.cache===false){options.url+=paramsPrefix+'_nocache'+Date.now();}}// Create XHR
var xhr=new XMLHttpRequest();// Save Request URL
xhr.requestUrl=options.url;xhr.requestParameters=options;// Before open callback
proceedRequest=fireCallback('beforeOpen',xhr,options);if(proceedRequest===false)return xhr;// Open XHR
xhr.open(method,options.url,options.async,options.user,options.password);// Create POST Data
var postData=null;if((method==='POST'||method==='PUT'||method==='PATCH')&&options.data){if(options.processData){var postDataInstances=[ArrayBuffer,Blob,Document,FormData];// Post Data
if(postDataInstances.indexOf(options.data.constructor)>=0){postData=options.data;}else{// POST Headers
var boundary='---------------------------'+Date.now().toString(16);if(options.contentType==='multipart/form-data'){xhr.setRequestHeader('Content-Type','multipart/form-data; boundary='+boundary);}else{xhr.setRequestHeader('Content-Type',options.contentType);}postData='';var data=Utils.serializeObject(options.data);if(options.contentType==='multipart/form-data'){data=data.split('&');var newData=[];for(var _i4=0;_i4<data.length;_i4+=1){newData.push('Content-Disposition: form-data; name="'+data[_i4].split('=')[0]+'"\r\n\r\n'+data[_i4].split('=')[1]+'\r\n');}postData='--'+boundary+'\r\n'+newData.join('--'+boundary+'\r\n')+'--'+boundary+'--\r\n';}else{postData=data;}}}else{postData=options.data;xhr.setRequestHeader('Content-Type',options.contentType);}}// Additional headers
if(options.headers){Object.keys(options.headers).forEach(function(headerName){xhr.setRequestHeader(headerName,options.headers[headerName]);});}// Check for crossDomain
if(typeof options.crossDomain==='undefined'){// eslint-disable-next-line
options.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(options.url)&&RegExp.$2!==_ssrWindow.window.location.host;}if(!options.crossDomain){xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');}if(options.xhrFields){Utils.extend(xhr,options.xhrFields);}var xhrTimeout=void 0;// Handle XHR
xhr.onload=function onload(){if(xhrTimeout)clearTimeout(xhrTimeout);if(xhr.status>=200&&xhr.status<300||xhr.status===0){var responseData=void 0;if(options.dataType==='json'){var parseError=void 0;try{responseData=JSON.parse(xhr.responseText);}catch(err){parseError=true;}if(!parseError){fireCallback('success',responseData,xhr.status,xhr);}else{fireCallback('error',xhr,'parseerror');}}else{responseData=xhr.responseType==='text'||xhr.responseType===''?xhr.responseText:xhr.response;fireCallback('success',responseData,xhr.status,xhr);}}else{fireCallback('error',xhr,xhr.status);}if(options.statusCode){if(globals.statusCode&&globals.statusCode[xhr.status])globals.statusCode[xhr.status](xhr);if(options.statusCode[xhr.status])options.statusCode[xhr.status](xhr);}fireCallback('complete',xhr,xhr.status);};xhr.onerror=function onerror(){if(xhrTimeout)clearTimeout(xhrTimeout);fireCallback('error',xhr,xhr.status);fireCallback('complete',xhr,'error');};// Timeout
if(options.timeout>0){xhr.onabort=function onabort(){if(xhrTimeout)clearTimeout(xhrTimeout);};xhrTimeout=setTimeout(function(){xhr.abort();fireCallback('error',xhr,'timeout');fireCallback('complete',xhr,'timeout');},options.timeout);}// Ajax start callback
proceedRequest=fireCallback('beforeSend',xhr,options);if(proceedRequest===false)return xhr;// Send XHR
xhr.send(postData);// Return XHR object
return xhr;}function RequestShortcut(method){var _ref=[],url=_ref[0],data=_ref[1],success=_ref[2],error=_ref[3],dataType=_ref[4];for(var _len10=arguments.length,args=Array(_len10>1?_len10-1:0),_key10=1;_key10<_len10;_key10++){args[_key10-1]=arguments[_key10];}if(typeof args[1]==='function'){url=args[0];success=args[1];error=args[2];dataType=args[3];}else{url=args[0];data=args[1];success=args[2];error=args[3];dataType=args[4];}[success,error].forEach(function(callback){if(typeof callback==='string'){dataType=callback;if(callback===success)success=undefined;else error=undefined;}});dataType=dataType||(method==='json'||method==='postJSON'?'json':undefined);var requestOptions={url:url,method:method==='post'||method==='postJSON'?'POST':'GET',data:data,success:success,error:error,dataType:dataType};if(method==='postJSON'){Utils.extend(requestOptions,{contentType:'application/json',processData:false,crossDomain:true,data:typeof data==='string'?data:JSON.stringify(data)});}return Request(requestOptions);}Request.get=function get(){for(var _len11=arguments.length,args=Array(_len11),_key11=0;_key11<_len11;_key11++){args[_key11]=arguments[_key11];}return RequestShortcut.apply(undefined,['get'].concat(args));};Request.post=function post(){for(var _len12=arguments.length,args=Array(_len12),_key12=0;_key12<_len12;_key12++){args[_key12]=arguments[_key12];}return RequestShortcut.apply(undefined,['post'].concat(args));};Request.json=function json(){for(var _len13=arguments.length,args=Array(_len13),_key13=0;_key13<_len13;_key13++){args[_key13]=arguments[_key13];}return RequestShortcut.apply(undefined,['json'].concat(args));};Request.getJSON=Request.json;Request.postJSON=function postJSON(){for(var _len14=arguments.length,args=Array(_len14),_key14=0;_key14<_len14;_key14++){args[_key14]=arguments[_key14];}return RequestShortcut.apply(undefined,['postJSON'].concat(args));};Request.setup=function setup(options){if(options.type&&!options.method){Utils.extend(options,{method:options.type});}Utils.extend(globals,options);};var Support=function Support(){var positionSticky=function supportPositionSticky(){var support=false;var div=_ssrWindow.document.createElement('div');'sticky -webkit-sticky -moz-sticky'.split(' ').forEach(function(prop){if(support)return;div.style.position=prop;if(div.style.position===prop){support=true;}});return support;}();var testDiv=_ssrWindow.document.createElement('div');return{positionSticky:positionSticky,touch:function checkTouch(){return!!('ontouchstart'in _ssrWindow.window||_ssrWindow.window.DocumentTouch&&_ssrWindow.document instanceof _ssrWindow.window.DocumentTouch);}(),pointerEvents:!!(_ssrWindow.window.navigator.pointerEnabled||_ssrWindow.window.PointerEvent),prefixedPointerEvents:!!_ssrWindow.window.navigator.msPointerEnabled,transition:function checkTransition(){var style=testDiv.style;return'transition'in style||'webkitTransition'in style||'MozTransition'in style;}(),transforms3d:_ssrWindow.window.Modernizr&&_ssrWindow.window.Modernizr.csstransforms3d===true||function checkTransforms3d(){var style=testDiv.style;return'webkitPerspective'in style||'MozPerspective'in style||'OPerspective'in style||'MsPerspective'in style||'perspective'in style;}(),flexbox:function checkFlexbox(){var div=_ssrWindow.document.createElement('div').style;var styles='alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient'.split(' ');for(var _i5=0;_i5<styles.length;_i5+=1){if(styles[_i5]in div)return true;}return false;}(),observer:function checkObserver(){return'MutationObserver'in _ssrWindow.window||'WebkitMutationObserver'in _ssrWindow.window;}(),passiveListener:function checkPassiveListener(){var supportsPassive=false;try{var opts=Object.defineProperty({},'passive',{// eslint-disable-next-line
get:function get(){supportsPassive=true;}});_ssrWindow.window.addEventListener('testPassiveListener',null,opts);}catch(e){// No support
}return supportsPassive;}(),gestures:function checkGestures(){return'ongesturestart'in _ssrWindow.window;}()};}();var DeviceModule={name:'device',proto:{device:Device},static:{device:Device},on:{init:function init(){var classNames=[];var html=_ssrWindow.document.querySelector('html');if(!html)return;// Pixel Ratio
classNames.push('device-pixel-ratio-'+Math.floor(Device.pixelRatio));if(Device.pixelRatio>=2){classNames.push('device-retina');}// OS classes
if(Device.os){classNames.push('device-'+Device.os,'device-'+Device.os+'-'+Device.osVersion.split('.')[0],'device-'+Device.os+'-'+Device.osVersion.replace(/\./g,'-'));if(Device.os==='ios'){var major=parseInt(Device.osVersion.split('.')[0],10);for(var _i6=major-1;_i6>=6;_i6-=1){classNames.push('device-ios-gt-'+_i6);}if(Device.iphoneX){classNames.push('device-iphone-x');}}}else if(Device.desktop){classNames.push('device-desktop');}if(Device.cordova||Device.phonegap){classNames.push('device-cordova');}// Add html classes
classNames.forEach(function(className){html.classList.add(className);});}}};var SupportModule={name:'support',proto:{support:Support},static:{support:Support},on:{init:function init(){var html=_ssrWindow.document.querySelector('html');if(!html)return;var classNames=[];if(Support.positionSticky){classNames.push('support-position-sticky');}// Add html classes
classNames.forEach(function(className){html.classList.add(className);});}}};var UtilsModule={name:'utils',proto:{utils:Utils},static:{utils:Utils}};var ResizeModule={name:'resize',instance:{getSize:function getSize(){var app=this;if(!app.root[0])return{width:0,height:0,left:0,top:0};var offset=app.root.offset();var _ref2=[app.root[0].offsetWidth,app.root[0].offsetHeight,offset.left,offset.top],width=_ref2[0],height=_ref2[1],left=_ref2[2],top=_ref2[3];app.width=width;app.height=height;app.left=left;app.top=top;return{width:width,height:height,left:left,top:top};}},on:{init:function init(){var app=this;// Get Size
app.getSize();// Emit resize
_ssrWindow.window.addEventListener('resize',function(){app.emit('resize');},false);// Emit orientationchange
_ssrWindow.window.addEventListener('orientationchange',function(){app.emit('orientationchange');});},orientationchange:function orientationchange(){var app=this;if(app.device&&app.device.minimalUi){if(_ssrWindow.window.orientation===90||_ssrWindow.window.orientation===-90){_ssrWindow.document.body.scrollTop=0;}}// Fix iPad weird body scroll
if(app.device.ipad){_ssrWindow.document.body.scrollLeft=0;setTimeout(function(){_ssrWindow.document.body.scrollLeft=0;},0);}},resize:function resize(){var app=this;app.getSize();}}};/* eslint no-param-reassign: "off" */var RequestModule={name:'request',proto:{request:Request},static:{request:Request}};function initTouch(){var app=this;var params=app.params.touch;var useRipple=app.theme==='md'&&params.materialRipple;if(Device.ios&&Device.webView){// Strange hack required for iOS 8 webview to work on inputs
_ssrWindow.window.addEventListener('touchstart',function(){});}var touchStartX=void 0;var touchStartY=void 0;var touchStartTime=void 0;var targetElement=void 0;var trackClick=void 0;var activeSelection=void 0;var scrollParent=void 0;var lastClickTime=void 0;var isMoved=void 0;var tapHoldFired=void 0;var tapHoldTimeout=void 0;var activableElement=void 0;var activeTimeout=void 0;var needsFastClick=void 0;var needsFastClickTimeOut=void 0;var rippleWave=void 0;var rippleTarget=void 0;var rippleTimeout=void 0;function findActivableElement(el){var target=(0,_dom2.default)(el);var parents=target.parents(params.activeStateElements);var activable=void 0;if(target.is(params.activeStateElements)){activable=target;}if(parents.length>0){activable=activable?activable.add(parents):parents;}return activable||target;}function isInsideScrollableView(el){var pageContent=el.parents('.page-content, .panel');if(pageContent.length===0){return false;}
// This event handler covers the "tap to stop scrolling".
if(pageContent.prop('scrollHandlerSet')!=='yes'){
    pageContent.on('scroll',function(){
        clearTimeout(activeTimeout);
        clearTimeout(rippleTimeout);
    });
    pageContent.prop('scrollHandlerSet','yes');
}
return true;
}
function addActive(){
    if(!activableElement) return;
    activableElement.addClass('active-state');
}
function removeActive(){
    if(!activableElement) return;
    activableElement.removeClass('active-state');
    activableElement = null;
}
function isFormElement(el){
    var nodes='input select textarea label'.split(' ');
    if(el.nodeName&&nodes.indexOf(el.nodeName.toLowerCase()) >= 0)return true;
    return false;
}function androidNeedsBlur(el){
    var noBlur='button input textarea select'.split(' ');
    if(_ssrWindow.document.activeElement&&el!==_ssrWindow.document.activeElement&&_ssrWindow.document.activeElement!==_ssrWindow.document.body){
        if(noBlur.indexOf(el.nodeName.toLowerCase()) >= 0){
            return false;
        }
        return true;
    }
    return false;
}function targetNeedsFastClick(el){/*
    if (
      Device.ios
      &&
      (
        Device.osVersion.split('.')[0] > 9
        ||
        (Device.osVersion.split('.')[0] * 1 === 9 && Device.osVersion.split('.')[1] >= 1)
      )
    ) {
      return false;
    }
    */var $el=(0,_dom2.default)(el);if(el.nodeName.toLowerCase()==='input'&&(el.type==='file'||el.type==='range'))return false;if(el.nodeName.toLowerCase()==='select'&&Device.android)return false;if($el.hasClass('no-fastclick')||$el.parents('.no-fastclick').length>0)return false;if(params.fastClicksExclude&&$el.is(params.fastClicksExclude))return false;return true;}function targetNeedsFocus(el){if(_ssrWindow.document.activeElement===el){return false;}var tag=el.nodeName.toLowerCase();var skipInputs='button checkbox file image radio submit'.split(' ');if(el.disabled||el.readOnly)return false;if(tag==='textarea')return true;if(tag==='select'){if(Device.android)return false;return true;}if(tag==='input'&&skipInputs.indexOf(el.type)<0)return true;return false;}function targetNeedsPrevent(el){var $el=(0,_dom2.default)(el);var prevent=true;if($el.is('label')||$el.parents('label').length>0){if(Device.android){prevent=false;}else if(Device.ios&&$el.is('input')){prevent=true;}else prevent=false;}return prevent;}// Ripple handlers
function findRippleElement(el){var rippleElements=params.materialRippleElements;var $el=(0,_dom2.default)(el);if($el.is(rippleElements)){if($el.hasClass('no-ripple')){return false;}return $el;}else if($el.parents(rippleElements).length>0){var rippleParent=$el.parents(rippleElements).eq(0);if(rippleParent.hasClass('no-ripple')){return false;}return rippleParent;}return false;}function createRipple($el,x,y){if(!$el)return;rippleWave=app.touchRipple.create($el,x,y);}function removeRipple(){if(!rippleWave)return;rippleWave.remove();rippleWave=undefined;rippleTarget=undefined;}function rippleTouchStart(el){rippleTarget=findRippleElement(el);if(!rippleTarget||rippleTarget.length===0){rippleTarget=undefined;return;}if(!isInsideScrollableView(rippleTarget)){createRipple(rippleTarget,touchStartX,touchStartY);}else{rippleTimeout=setTimeout(function(){createRipple(rippleTarget,touchStartX,touchStartY);},80);}}function rippleTouchMove(){clearTimeout(rippleTimeout);removeRipple();}function rippleTouchEnd(){if(rippleWave){removeRipple();}else if(rippleTarget&&!isMoved){clearTimeout(rippleTimeout);createRipple(rippleTarget,touchStartX,touchStartY);setTimeout(removeRipple,0);}else{removeRipple();}}// Mouse Handlers
function handleMouseDown(e){findActivableElement(e.target).addClass('active-state');if('which'in e&&e.which===3){setTimeout(function(){(0,_dom2.default)('.active-state').removeClass('active-state');},0);}if(useRipple){touchStartX=e.pageX;touchStartY=e.pageY;rippleTouchStart(e.target,e.pageX,e.pageY);}}function handleMouseMove(){(0,_dom2.default)('.active-state').removeClass('active-state');if(useRipple){rippleTouchMove();}}function handleMouseUp(){(0,_dom2.default)('.active-state').removeClass('active-state');if(useRipple){rippleTouchEnd();}}// Send Click
function sendClick(e){var touch=e.changedTouches[0];var evt=_ssrWindow.document.createEvent('MouseEvents');var eventType='click';if(Device.android&&targetElement.nodeName.toLowerCase()==='select'){eventType='mousedown';}evt.initMouseEvent(eventType,true,true,_ssrWindow.window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);evt.forwardedTouchEvent=true;if(app.device.ios&&_ssrWindow.window.navigator.standalone){// Fix the issue happens in iOS home screen apps where the wrong element is selected during a momentum scroll.
// Upon tapping, we give the scrolling time to stop, then we grab the element based where the user tapped.
setTimeout(function(){targetElement=_ssrWindow.document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);targetElement.dispatchEvent(evt);},10);}else{targetElement.dispatchEvent(evt);}}// Touch Handlers
function handleTouchStart(e){var _this2=this;isMoved=false;tapHoldFired=false;if(e.targetTouches.length>1){if(activableElement)removeActive();return true;}if(e.touches.length>1&&activableElement){removeActive();}if(params.tapHold){if(tapHoldTimeout)clearTimeout(tapHoldTimeout);tapHoldTimeout=setTimeout(function(){if(e&&e.touches&&e.touches.length>1)return;tapHoldFired=true;e.preventDefault();(0,_dom2.default)(e.target).trigger('taphold');},params.tapHoldDelay);}if(needsFastClickTimeOut)clearTimeout(needsFastClickTimeOut);needsFastClick=targetNeedsFastClick(e.target);if(!needsFastClick){trackClick=false;return true;}if(Device.ios||Device.android&&'getSelection'in _ssrWindow.window){var selection=_ssrWindow.window.getSelection();if(selection.rangeCount&&selection.focusNode!==_ssrWindow.document.body&&(!selection.isCollapsed||_ssrWindow.document.activeElement===selection.focusNode)){activeSelection=true;return true;}activeSelection=false;}if(Device.android){if(androidNeedsBlur(e.target)){_ssrWindow.document.activeElement.blur();}}trackClick=true;targetElement=e.target;touchStartTime=new Date().getTime();touchStartX=e.targetTouches[0].pageX;touchStartY=e.targetTouches[0].pageY;// Detect scroll parent
if(Device.ios){scrollParent=undefined;(0,_dom2.default)(targetElement).parents().each(function(){var parent=_this2;if(parent.scrollHeight>parent.offsetHeight&&!scrollParent){scrollParent=parent;scrollParent.f7ScrollTop=scrollParent.scrollTop;}});}if(touchStartTime-lastClickTime<params.fastClicksDelayBetweenClicks){e.preventDefault();}if(params.activeState){activableElement=findActivableElement(targetElement);// If it's inside a scrollable view, we don't trigger active-state yet,
// because it can be a scroll instead. Based on the link:
// http://labnote.beedesk.com/click-scroll-and-pseudo-active-on-mobile-webk
if(!isInsideScrollableView(activableElement)){addActive();}else{activeTimeout=setTimeout(addActive,80);}}if(useRipple){rippleTouchStart(targetElement,touchStartX,touchStartY);}return true;}function handleTouchMove(e){if(!trackClick)return;var distance=params.fastClicksDistanceThreshold;if(distance){var pageX=e.targetTouches[0].pageX;var pageY=e.targetTouches[0].pageY;if(Math.abs(pageX-touchStartX)>distance||Math.abs(pageY-touchStartY)>distance){isMoved=true;}}else{isMoved=true;}if(isMoved){trackClick=false;targetElement=null;isMoved=true;if(params.tapHold){clearTimeout(tapHoldTimeout);}if(params.activeState){clearTimeout(activeTimeout);removeActive();}if(useRipple){rippleTouchMove();}}}function handleTouchEnd(e){clearTimeout(activeTimeout);clearTimeout(tapHoldTimeout);var touchEndTime=new Date().getTime();if(!trackClick){if(!activeSelection&&needsFastClick){if(!(Device.android&&!e.cancelable)&&e.cancelable){e.preventDefault();}}return true;}if(_ssrWindow.document.activeElement===e.target){if(params.activeState)removeActive();if(useRipple){rippleTouchEnd();}return true;}if(!activeSelection){e.preventDefault();}if(touchEndTime-lastClickTime<params.fastClicksDelayBetweenClicks){setTimeout(removeActive,0);return true;}lastClickTime=touchEndTime;trackClick=false;if(Device.ios&&scrollParent){if(scrollParent.scrollTop!==scrollParent.f7ScrollTop){return false;}}// Add active-state here because, in a very fast tap, the timeout didn't
// have the chance to execute. Removing active-state in a timeout gives
// the chance to the animation execute.
if(params.activeState){addActive();setTimeout(removeActive,0);}// Remove Ripple
if(useRipple){rippleTouchEnd();}// Trigger focus when required
if(targetNeedsFocus(targetElement)){if(Device.ios&&Device.webView){targetElement.focus();return false;}targetElement.focus();}// Blur active elements
if(_ssrWindow.document.activeElement&&targetElement!==_ssrWindow.document.activeElement&&_ssrWindow.document.activeElement!==_ssrWindow.document.body&&targetElement.nodeName.toLowerCase()!=='label'){_ssrWindow.document.activeElement.blur();}// Send click
e.preventDefault();if(params.tapHoldPreventClicks&&tapHoldFired){return false;}sendClick(e);return false;}function handleTouchCancel(){trackClick=false;targetElement=null;// Remove Active State
clearTimeout(activeTimeout);clearTimeout(tapHoldTimeout);if(params.activeState){removeActive();}// Remove Ripple
if(useRipple){rippleTouchEnd();}}function handleClick(e){var allowClick=false;if(trackClick){targetElement=null;trackClick=false;return true;}if(e.target.type==='submit'&&e.detail===0||e.target.type==='file'){return true;}if(!targetElement){if(!isFormElement(e.target)){allowClick=true;}}if(!needsFastClick){allowClick=true;}if(_ssrWindow.document.activeElement===targetElement){allowClick=true;}if(e.forwardedTouchEvent){allowClick=true;}if(!e.cancelable){allowClick=true;}if(params.tapHold&&params.tapHoldPreventClicks&&tapHoldFired){allowClick=false;}if(!allowClick){e.stopImmediatePropagation();e.stopPropagation();if(targetElement){if(targetNeedsPrevent(targetElement)||isMoved){e.preventDefault();}}else{e.preventDefault();}targetElement=null;}needsFastClickTimeOut=setTimeout(function(){needsFastClick=false;},Device.ios||Device.androidChrome?100:400);if(params.tapHold){tapHoldTimeout=setTimeout(function(){tapHoldFired=false;},Device.ios||Device.androidChrome?100:400);}return allowClick;}function emitAppTouchEvent(name,e){app.emit({events:name,data:[e]});}function appClick(e){emitAppTouchEvent('click',e);}function appTouchStartActive(e){emitAppTouchEvent('touchstart touchstart:active',e);}function appTouchMoveActive(e){emitAppTouchEvent('touchmove touchmove:active',e);}function appTouchEndActive(e){emitAppTouchEvent('touchend touchend:active',e);}function appTouchStartPassive(e){emitAppTouchEvent('touchstart:passive',e);}function appTouchMovePassive(e){emitAppTouchEvent('touchmove:passive',e);}function appTouchEndPassive(e){emitAppTouchEvent('touchend:passive',e);}var passiveListener=Support.passiveListener?{passive:true}:false;var activeListener=Support.passiveListener?{passive:false}:false;_ssrWindow.document.addEventListener('click',appClick,true);if(Support.passiveListener){_ssrWindow.document.addEventListener(app.touchEvents.start,appTouchStartActive,activeListener);_ssrWindow.document.addEventListener(app.touchEvents.move,appTouchMoveActive,activeListener);_ssrWindow.document.addEventListener(app.touchEvents.end,appTouchEndActive,activeListener);_ssrWindow.document.addEventListener(app.touchEvents.start,appTouchStartPassive,passiveListener);_ssrWindow.document.addEventListener(app.touchEvents.move,appTouchMovePassive,passiveListener);_ssrWindow.document.addEventListener(app.touchEvents.end,appTouchEndPassive,passiveListener);}else{_ssrWindow.document.addEventListener(app.touchEvents.start,function(e){appTouchStartActive(e);appTouchStartPassive(e);},false);_ssrWindow.document.addEventListener(app.touchEvents.move,function(e){appTouchMoveActive(e);appTouchMovePassive(e);},false);_ssrWindow.document.addEventListener(app.touchEvents.end,function(e){appTouchEndActive(e);appTouchEndPassive(e);},false);}if(Support.touch){app.on('click',handleClick);app.on('touchstart',handleTouchStart);app.on('touchmove',handleTouchMove);app.on('touchend',handleTouchEnd);_ssrWindow.document.addEventListener('touchcancel',handleTouchCancel,{passive:true});}else if(params.activeState){app.on('touchstart',handleMouseDown);app.on('touchmove',handleMouseMove);app.on('touchend',handleMouseUp);}_ssrWindow.document.addEventListener('contextmenu',function(e){if(params.disableContextMenu&&(Device.ios||Device.android||Device.cordova)){e.preventDefault();}if(useRipple){if(activableElement)removeActive();rippleTouchEnd();}});}var TouchModule={name:'touch',params:{touch:{// Fast clicks
fastClicks:true,fastClicksDistanceThreshold:10,fastClicksDelayBetweenClicks:50,fastClicksExclude:'',// CSS selector
// ContextMenu
disableContextMenu:true,// Tap Hold
tapHold:false,tapHoldDelay:750,tapHoldPreventClicks:true,// Active State
activeState:true,activeStateElements:'a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus',materialRipple:true,materialRippleElements:'.ripple, .link, .item-link, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus'}},instance:{touchEvents:{start:Support.touch?'touchstart':'mousedown',move:Support.touch?'touchmove':'mousemove',end:Support.touch?'touchend':'mouseup'}},on:{init:initTouch}};var tempDom=_ssrWindow.document.createElement('div');var Framework7Component=function Framework7Component(opts){var extendContext=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Framework7Component);var options=Utils.extend({},opts);var component=Utils.merge(this,extendContext,{$options:options});// Apply context
'beforeCreate created beforeMount mounted beforeDestroy destroyed'.split(' ').forEach(function(cycleKey){if(options[cycleKey])options[cycleKey]=options[cycleKey].bind(component);});if(options.data){options.data=options.data.bind(component);// Data
Utils.extend(component,options.data());}if(options.render)options.render=options.render.bind(component);if(options.methods){Object.keys(options.methods).forEach(function(methodName){component[methodName]=options.methods[methodName].bind(component);});}// Bind Events
if(options.on){Object.keys(options.on).forEach(function(eventName){options.on[eventName]=options.on[eventName].bind(component);});}if(options.once){Object.keys(options.once).forEach(function(eventName){options.once[eventName]=options.once[eventName].bind(component);});}if(options.beforeCreate)options.beforeCreate();// Watchers
if(options.watch){Object.keys(options.watch).forEach(function(watchKey){var dataKeyValue=component[watchKey];Object.defineProperty(component,watchKey,{enumerable:true,configurable:true,set:function set(newValue){var previousValue=dataKeyValue;dataKeyValue=newValue;if(previousValue===newValue)return;options.watch[watchKey].call(component,newValue,previousValue);},get:function get(){return dataKeyValue;}});});}// Render template
function render(){var html='';if(options.render){html=options.render();}else if(options.template){if(typeof options.template==='string'){try{html=_template2.default.compile(options.template)(component);}catch(err){throw err;}}else{// Supposed to be function
html=options.template(component);}}return html;}var html=render();// Make Dom
if(html&&typeof html==='string'){html=html.trim();tempDom.innerHTML=html;}else if(html){tempDom.innerHTML='';tempDom.appendChild(html);}// Extend component with $el
var el=tempDom.children[0];var $el=(0,_dom2.default)(el);component.$el=$el;component.el=el;component.el=el;// Find Events
var events=[];(0,_dom2.default)(tempDom).find('*').each(function(index,element){var attrs=[];for(var _i7=0;_i7<element.attributes.length;_i7+=1){var attr=element.attributes[_i7];if(attr.name.indexOf('@')===0){attrs.push({name:attr.name,value:attr.value});}}attrs.forEach(function(attr){element.removeAttribute(attr.name);var event=attr.name.replace('@','');var name=event;var stop=false;var prevent=false;var once=false;if(event.indexOf('.')>=0){event.split('.').forEach(function(eventNamePart,eventNameIndex){if(eventNameIndex===0)name=eventNamePart;else{if(eventNamePart==='stop')stop=true;if(eventNamePart==='prevent')prevent=true;if(eventNamePart==='once')once=true;}});}var value=attr.value.toString();events.push({el:element,name:name,once:once,handler:function handler(){for(var _len15=arguments.length,args=Array(_len15),_key15=0;_key15<_len15;_key15++){args[_key15]=arguments[_key15];}var e=args[0];if(stop)e.stopPropagation();if(prevent)e.preventDefault();var methodName=void 0;var method=void 0;var customArgs=[];if(value.indexOf('(')<0){customArgs=args;methodName=value;}else{methodName=value.split('(')[0];value.split('(')[1].split(')')[0].split(',').forEach(function(argument){var arg=argument.trim();// eslint-disable-next-line
if(!isNaN(arg))arg=parseFloat(arg);else if(arg==='true')arg=true;else if(arg==='false')arg=false;else if(arg==='null')arg=null;else if(arg==='undefined')arg=undefined;else if(arg[0]==='"')arg=arg.replace(/"/g,'');else if(arg[0]==='\'')arg=arg.replace(/'/g,'');else if(arg.indexOf('.')>0){var deepArg=void 0;arg.split('.').forEach(function(path){if(!deepArg)deepArg=component;deepArg=deepArg[path];});arg=deepArg;}else{arg=component[arg];}customArgs.push(arg);});}if(methodName.indexOf('.')>=0){methodName.split('.').forEach(function(path,pathIndex){if(!method)method=component;if(method[path])method=method[path];else{throw new Error('Component doesn\'t have method "'+methodName.split('.').slice(0,pathIndex+1).join('.')+'"');}});}else{if(!component[methodName]){throw new Error('Component doesn\'t have method "'+methodName+'"');}method=component[methodName];}method.apply(undefined,_toConsumableArray(customArgs));}});});});// Set styles scope ID
var styleEl=void 0;if(options.style){styleEl=_ssrWindow.document.createElement('style');styleEl.innerHTML=options.style;}if(options.styleScopeId){el.setAttribute('data-scope',options.styleScopeId);}// Attach events
function attachEvents(){if(options.on){Object.keys(options.on).forEach(function(eventName){$el.on(Utils.eventNameToColonCase(eventName),options.on[eventName]);});}if(options.once){Object.keys(options.once).forEach(function(eventName){$el.once(Utils.eventNameToColonCase(eventName),options.once[eventName]);});}events.forEach(function(event){(0,_dom2.default)(event.el)[event.once?'once':'on'](event.name,event.handler);});}function detachEvents(){if(options.on){Object.keys(options.on).forEach(function(eventName){$el.off(Utils.eventNameToColonCase(eventName),options.on[eventName]);});}if(options.once){Object.keys(options.once).forEach(function(eventName){$el.off(Utils.eventNameToColonCase(eventName),options.once[eventName]);});}events.forEach(function(event){(0,_dom2.default)(event.el).off(event.name,event.handler);});}attachEvents();// Created callback
if(options.created)options.created();// Mount
component.$mount=function mount(mountMethod){if(options.beforeMount)options.beforeMount();if(styleEl)(0,_dom2.default)('head').append(styleEl);if(mountMethod)mountMethod(el);if(options.mounted)options.mounted();};// Destroy
component.$destroy=function destroy(){if(options.beforeDestroy)options.beforeDestroy();if(styleEl)(0,_dom2.default)(styleEl).remove();detachEvents();if(options.destroyed)options.destroyed();// Delete component instance
if(el&&el.f7Component){el.f7Component=null;delete el.f7Component;}Utils.deleteProps(component);component=null;};// Store component instance
for(var _i8=0;_i8<tempDom.children.length;_i8+=1){tempDom.children[_i8].f7Component=component;}return component;};var Component={parse:function parse(componentString){var callbackName='f7_component_callback_'+new Date().getTime();// Template
var template=void 0;if(componentString.indexOf('<template>')>=0){template=componentString.split('<template>').filter(function(item,index){return index>0;}).join('<template>').split('</template>').filter(function(item,index,arr){return index<arr.length-1;}).join('</template>').replace(/{{#raw}}([ \n]*)<template/g,'{{#raw}}<template').replace(/\/template>([ \n]*){{\/raw}}/g,'/template>{{/raw}}').replace(/([ \n])<template/g,'$1{{#raw}}<template').replace(/\/template>([ \n])/g,'/template>{{/raw}}$1');}// Styles
var style=void 0;var styleScopeId=Utils.now();if(componentString.indexOf('<style>')>=0){style=componentString.split('<style>')[1].split('</style>')[0];}else if(componentString.indexOf('<style scoped>')>=0){style=componentString.split('<style scoped>')[1].split('</style>')[0];style=style.split('\n').map(function(line){if(line.indexOf('{')>=0){if(line.indexOf('{{this}}')>=0){return line.replace('{{this}}','[data-scope="'+styleScopeId+'"]');}return'[data-scope="'+styleScopeId+'"] '+line.trim();}return line;}).join('\n');}var scriptContent=void 0;if(componentString.indexOf('<script>')>=0){var scripts=componentString.split('<script>');scriptContent=scripts[scripts.length-1].split('</script>')[0].trim();}else{scriptContent='return {}';}scriptContent='window.'+callbackName+' = function () {'+scriptContent+'}';// Insert Script El
var scriptEl=_ssrWindow.document.createElement('script');scriptEl.innerHTML=scriptContent;(0,_dom2.default)('head').append(scriptEl);var component=_ssrWindow.window[callbackName]();// Remove Script El
(0,_dom2.default)(scriptEl).remove();if(!component.template&&!component.render){component.template=template;}if(style){component.style=style;component.styleScopeId=styleScopeId;}return component;},create:function create(c){var extendContext=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Framework7Component(c,extendContext);}};var History={queue:[],clearQueue:function clearQueue(){if(History.queue.length===0)return;var currentQueue=History.queue.shift();currentQueue();},routerQueue:[],clearRouterQueue:function clearRouterQueue(){if(History.routerQueue.length===0)return;var currentQueue=History.routerQueue.pop();var router=currentQueue.router,stateUrl=currentQueue.stateUrl,action=currentQueue.action;var animate=router.params.animate;if(router.params.pushStateAnimate===false)animate=false;if(action==='back'){router.back({animate:animate,pushState:false});}if(action==='load'){router.navigate(stateUrl,{animate:animate,pushState:false});}},handle:function handle(e){if(History.blockPopstate)return;var app=this;// const mainView = app.views.main;
var state=e.state;History.previousState=History.state;History.state=state;History.allowChange=true;History.clearQueue();state=History.state;if(!state)state={};app.views.forEach(function(view){var router=view.router;var viewState=state[view.id];if(!viewState&&view.params.pushState){viewState={url:view.router.history[0]};}if(!viewState)return;var stateUrl=viewState.url||undefined;var animate=router.params.animate;if(router.params.pushStateAnimate===false)animate=false;if(stateUrl!==router.url){if(router.history.indexOf(stateUrl)>=0){// Go Back
if(router.allowPageChange){router.back({animate:animate,pushState:false});}else{History.routerQueue.push({action:'back',router:router});}}else if(router.allowPageChange){// Load page
router.navigate(stateUrl,{animate:animate,pushState:false});}else{History.routerQueue.unshift({action:'load',stateUrl:stateUrl,router:router});}}});},initViewState:function initViewState(viewId,viewState){var newState=Utils.extend({},History.state||{},_defineProperty({},viewId,viewState));History.state=newState;_ssrWindow.window.history.replaceState(newState,'');},push:function push(viewId,viewState,url){if(!History.allowChange){History.queue.push(function(){History.push(viewId,viewState,url);});return;}History.previousState=History.state;var newState=Utils.extend({},History.previousState||{},_defineProperty({},viewId,viewState));History.state=newState;_ssrWindow.window.history.pushState(newState,'',url);},replace:function replace(viewId,viewState,url){if(!History.allowChange){History.queue.push(function(){History.replace(viewId,viewState,url);});return;}History.previousState=History.state;var newState=Utils.extend({},History.previousState||{},_defineProperty({},viewId,viewState));History.state=newState;_ssrWindow.window.history.replaceState(newState,'',url);},go:function go(index){History.allowChange=false;_ssrWindow.window.history.go(index);},back:function back(){History.allowChange=false;_ssrWindow.window.history.back();},allowChange:true,previousState:{},state:_ssrWindow.window.history.state,blockPopstate:true,init:function init(app){(0,_dom2.default)(_ssrWindow.window).on('load',function(){setTimeout(function(){History.blockPopstate=false;},0);});if(_ssrWindow.document.readyState&&_ssrWindow.document.readyState==='complete'){History.blockPopstate=false;}(0,_dom2.default)(_ssrWindow.window).on('popstate',History.handle.bind(app));}};function SwipeBack(r){var router=r;var $el=router.$el,$navbarEl=router.$navbarEl,app=router.app,params=router.params;var isTouched=false;var isMoved=false;var touchesStart={};var isScrolling=void 0;var currentPage=[];var previousPage=[];var viewContainerWidth=void 0;var touchesDiff=void 0;var allowViewTouchMove=true;var touchStartTime=void 0;var currentNavbar=[];var previousNavbar=[];var currentNavElements=void 0;var previousNavElements=void 0;var activeNavBackIcon=void 0;var activeNavBackIconText=void 0;var previousNavBackIcon=void 0;// let previousNavBackIconText;
var dynamicNavbar=void 0;var separateNavbar=void 0;var pageShadow=void 0;var pageOpacity=void 0;var navbarWidth=void 0;var paramsSwipeBackAnimateShadow=params[app.theme+'SwipeBackAnimateShadow'];var paramsSwipeBackAnimateOpacity=params[app.theme+'SwipeBackAnimateOpacity'];var paramsSwipeBackActiveArea=params[app.theme+'SwipeBackActiveArea'];var paramsSwipeBackThreshold=params[app.theme+'SwipeBackThreshold'];function handleTouchStart(e){var swipeBackEnabled=params[app.theme+'SwipeBack'];if(!allowViewTouchMove||!swipeBackEnabled||isTouched||app.swipeout&&app.swipeout.el||!router.allowPageChange)return;if((0,_dom2.default)(e.target).closest('.range-slider, .calendar-months').length>0)return;isMoved=false;isTouched=true;isScrolling=undefined;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;touchStartTime=Utils.now();dynamicNavbar=router.dynamicNavbar;separateNavbar=router.separateNavbar;}function handleTouchMove(e){if(!isTouched)return;var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x))||pageX<touchesStart.x;}if(isScrolling||e.f7PreventSwipeBack||app.preventSwipeBack){isTouched=false;return;}if(!isMoved){// Calc values during first move fired
var cancel=false;var target=(0,_dom2.default)(e.target);var swipeout=target.closest('.swipeout');if(swipeout.length>0){if(!app.rtl&&swipeout.find('.swipeout-actions-left').length>0)cancel=true;if(app.rtl&&swipeout.find('.swipeout-actions-right').length>0)cancel=true;}currentPage=target.closest('.page');if(currentPage.hasClass('no-swipeback')||target.closest('.no-swipeback').length>0)cancel=true;previousPage=$el.find('.page-previous:not(.stacked)');var notFromBorder=touchesStart.x-$el.offset().left>paramsSwipeBackActiveArea;viewContainerWidth=$el.width();if(app.rtl){notFromBorder=touchesStart.x<$el.offset().left-$el[0].scrollLeft+(viewContainerWidth-paramsSwipeBackActiveArea);}else{notFromBorder=touchesStart.x-$el.offset().left>paramsSwipeBackActiveArea;}if(notFromBorder)cancel=true;if(previousPage.length===0||currentPage.length===0)cancel=true;if(cancel){isTouched=false;return;}if(paramsSwipeBackAnimateShadow){pageShadow=currentPage.find('.page-shadow-effect');if(pageShadow.length===0){pageShadow=(0,_dom2.default)('<div class="page-shadow-effect"></div>');currentPage.append(pageShadow);}}if(paramsSwipeBackAnimateOpacity){pageOpacity=previousPage.find('.page-opacity-effect');if(pageOpacity.length===0){pageOpacity=(0,_dom2.default)('<div class="page-opacity-effect"></div>');previousPage.append(pageOpacity);}}if(dynamicNavbar){if(separateNavbar){currentNavbar=$navbarEl.find('.navbar-current:not(.stacked)');previousNavbar=$navbarEl.find('.navbar-previous:not(.stacked)');}else{currentNavbar=currentPage.children('.navbar').children('.navbar-inner');previousNavbar=previousPage.children('.navbar').children('.navbar-inner');}navbarWidth=$navbarEl[0].offsetWidth;currentNavElements=currentNavbar.children('.left, .title, .right, .subnavbar, .fading');previousNavElements=previousNavbar.children('.left, .title, .right, .subnavbar, .fading');if(params.iosAnimateNavbarBackIcon){if(currentNavbar.hasClass('sliding')){activeNavBackIcon=currentNavbar.children('.left').find('.back .icon');activeNavBackIconText=currentNavbar.children('.left').find('.back span').eq(0);}else{activeNavBackIcon=currentNavbar.children('.left.sliding').find('.back .icon');activeNavBackIconText=currentNavbar.children('.left.sliding').find('.back span').eq(0);}if(previousNavbar.hasClass('sliding')){previousNavBackIcon=previousNavbar.children('.left').find('.back .icon');// previousNavBackIconText = previousNavbar.children('left').find('.back span').eq(0);
}else{previousNavBackIcon=previousNavbar.children('.left.sliding').find('.back .icon');// previousNavBackIconText = previousNavbar.children('.left.sliding').find('.back span').eq(0);
}}}// Close/Hide Any Picker
if((0,_dom2.default)('.sheet.modal-in').length>0&&app.sheet){app.sheet.close((0,_dom2.default)('.sheet.modal-in'));}}e.f7PreventPanelSwipe=true;isMoved=true;app.preventSwipePanelBySwipeBack=true;e.preventDefault();// RTL inverter
var inverter=app.rtl?-1:1;// Touches diff
touchesDiff=(pageX-touchesStart.x-paramsSwipeBackThreshold)*inverter;if(touchesDiff<0)touchesDiff=0;var percentage=touchesDiff/viewContainerWidth;// Swipe Back Callback
var callbackData={percentage:percentage,currentPageEl:currentPage[0],previousPageEl:previousPage[0],currentNavbarEl:currentNavbar[0],previousNavbarEl:previousNavbar[0]};$el.trigger('swipeback:move',callbackData);router.emit('swipebackMove',callbackData);// Transform pages
var currentPageTranslate=touchesDiff*inverter;var previousPageTranslate=(touchesDiff/5-viewContainerWidth/5)*inverter;if(Device.pixelRatio===1){currentPageTranslate=Math.round(currentPageTranslate);previousPageTranslate=Math.round(previousPageTranslate);}currentPage.transform('translate3d('+currentPageTranslate+'px,0,0)');if(paramsSwipeBackAnimateShadow)pageShadow[0].style.opacity=1-1*percentage;if(app.theme!=='md'){previousPage.transform('translate3d('+previousPageTranslate+'px,0,0)');}if(paramsSwipeBackAnimateOpacity)pageOpacity[0].style.opacity=1-1*percentage;// Dynamic Navbars Animation
if(dynamicNavbar){currentNavElements.each(function(index,navEl){var $navEl=(0,_dom2.default)(navEl);if(!$navEl.is('.subnavbar'))$navEl[0].style.opacity=1-Math.pow(percentage,0.33);if($navEl[0].className.indexOf('sliding')>=0||currentNavbar.hasClass('sliding')){var activeNavTranslate=percentage*$navEl[0].f7NavbarRightOffset;if(Device.pixelRatio===1)activeNavTranslate=Math.round(activeNavTranslate);$navEl.transform('translate3d('+activeNavTranslate+'px,0,0)');if(params.iosAnimateNavbarBackIcon){if($navEl[0].className.indexOf('left')>=0&&activeNavBackIcon.length>0){var iconTranslate=-activeNavTranslate;if(!separateNavbar){iconTranslate-=navbarWidth*percentage;}activeNavBackIcon.transform('translate3d('+iconTranslate+'px,0,0)');}}}});previousNavElements.each(function(index,navEl){var $navEl=(0,_dom2.default)(navEl);if(!$navEl.is('.subnavbar'))$navEl[0].style.opacity=Math.pow(percentage,3);if($navEl[0].className.indexOf('sliding')>=0||previousNavbar.hasClass('sliding')){var previousNavTranslate=$navEl[0].f7NavbarLeftOffset*(1-percentage);if($navEl[0].className.indexOf('title')>=0&&activeNavBackIcon&&activeNavBackIcon.length&&activeNavBackIconText.length){previousNavTranslate=($navEl[0].f7NavbarLeftOffset+activeNavBackIconText[0].offsetLeft)*(1-percentage);}else{previousNavTranslate=$navEl[0].f7NavbarLeftOffset*(1-percentage);}if(Device.pixelRatio===1)previousNavTranslate=Math.round(previousNavTranslate);$navEl.transform('translate3d('+previousNavTranslate+'px,0,0)');if(params.iosAnimateNavbarBackIcon){if($navEl[0].className.indexOf('left')>=0&&previousNavBackIcon.length>0){var iconTranslate=-previousNavTranslate;if(!separateNavbar){iconTranslate+=navbarWidth/5*(1-percentage);}previousNavBackIcon.transform('translate3d('+iconTranslate+'px,0,0)');}}}});}}function handleTouchEnd(){app.preventSwipePanelBySwipeBack=false;if(!isTouched||!isMoved){isTouched=false;isMoved=false;return;}isTouched=false;isMoved=false;if(touchesDiff===0){(0,_dom2.default)([currentPage[0],previousPage[0]]).transform('');if(pageShadow&&pageShadow.length>0)pageShadow.remove();if(pageOpacity&&pageOpacity.length>0)pageOpacity.remove();if(dynamicNavbar){currentNavElements.transform('').css({opacity:''});previousNavElements.transform('').css({opacity:''});if(activeNavBackIcon&&activeNavBackIcon.length>0)activeNavBackIcon.transform('');if(previousNavBackIcon&&activeNavBackIcon.length>0)previousNavBackIcon.transform('');}return;}var timeDiff=Utils.now()-touchStartTime;var pageChanged=false;// Swipe back to previous page
if(timeDiff<300&&touchesDiff>10||timeDiff>=300&&touchesDiff>viewContainerWidth/2){currentPage.removeClass('page-current').addClass('page-next'+(app.theme==='md'?' page-next-on-right':''));previousPage.removeClass('page-previous').addClass('page-current').removeAttr('aria-hidden');if(pageShadow)pageShadow[0].style.opacity='';if(pageOpacity)pageOpacity[0].style.opacity='';if(dynamicNavbar){currentNavbar.removeClass('navbar-current').addClass('navbar-next');previousNavbar.removeClass('navbar-previous').addClass('navbar-current').removeAttr('aria-hidden');}pageChanged=true;}// Reset custom styles
// Add transitioning class for transition-duration
(0,_dom2.default)([currentPage[0],previousPage[0]]).addClass('page-transitioning page-transitioning-swipeback').transform('');if(dynamicNavbar){currentNavElements.css({opacity:''}).each(function(navElIndex,navEl){var translate=pageChanged?navEl.f7NavbarRightOffset:0;var sliding=(0,_dom2.default)(navEl);var iconTranslate=pageChanged?-translate:0;if(!separateNavbar&&pageChanged)iconTranslate-=navbarWidth;sliding.transform('translate3d('+translate+'px,0,0)');if(params.iosAnimateNavbarBackIcon){if(sliding.hasClass('left')&&activeNavBackIcon.length>0){activeNavBackIcon.addClass('navbar-transitioning').transform('translate3d('+iconTranslate+'px,0,0)');}}}).addClass('navbar-transitioning');previousNavElements.transform('').css({opacity:''}).each(function(navElIndex,navEl){var translate=pageChanged?0:navEl.f7NavbarLeftOffset;var sliding=(0,_dom2.default)(navEl);var iconTranslate=pageChanged?0:-translate;if(!separateNavbar&&!pageChanged)iconTranslate+=navbarWidth/5;sliding.transform('translate3d('+translate+'px,0,0)');if(params.iosAnimateNavbarBackIcon){if(sliding.hasClass('left')&&previousNavBackIcon.length>0){previousNavBackIcon.addClass('navbar-transitioning').transform('translate3d('+iconTranslate+'px,0,0)');}}}).addClass('navbar-transitioning');}allowViewTouchMove=false;router.allowPageChange=false;// Swipe Back Callback
var callbackData={currentPage:currentPage[0],previousPage:previousPage[0],currentNavbar:currentNavbar[0],previousNavbar:previousNavbar[0]};if(pageChanged){// Update Route
router.currentRoute=previousPage[0].f7Page.route;router.currentPage=previousPage[0];// Page before animation callback
router.pageCallback('beforeOut',currentPage,currentNavbar,'current','next',{route:currentPage[0].f7Page.route,swipeBack:true});router.pageCallback('beforeIn',previousPage,previousNavbar,'previous','current',{route:previousPage[0].f7Page.route,swipeBack:true});$el.trigger('swipeback:beforechange',callbackData);router.emit('swipebackBeforeChange',callbackData);}else{$el.trigger('swipeback:beforereset',callbackData);router.emit('swipebackBeforeReset',callbackData);}currentPage.transitionEnd(function(){(0,_dom2.default)([currentPage[0],previousPage[0]]).removeClass('page-transitioning page-transitioning-swipeback');if(dynamicNavbar){currentNavElements.removeClass('navbar-transitioning').css({opacity:''}).transform('');previousNavElements.removeClass('navbar-transitioning').css({opacity:''}).transform('');if(activeNavBackIcon&&activeNavBackIcon.length>0)activeNavBackIcon.removeClass('navbar-transitioning');if(previousNavBackIcon&&previousNavBackIcon.length>0)previousNavBackIcon.removeClass('navbar-transitioning');}allowViewTouchMove=true;router.allowPageChange=true;if(pageChanged){// Update History
if(router.history.length===1){router.history.unshift(router.url);}router.history.pop();router.saveHistory();// Update push state
if(params.pushState){History.back();}// Page after animation callback
router.pageCallback('afterOut',currentPage,currentNavbar,'current','next',{route:currentPage[0].f7Page.route,swipeBack:true});router.pageCallback('afterIn',previousPage,previousNavbar,'previous','current',{route:previousPage[0].f7Page.route,swipeBack:true});// Remove Old Page
if(params.stackPages&&router.initialPages.indexOf(currentPage[0])>=0){currentPage.addClass('stacked');if(separateNavbar){currentNavbar.addClass('stacked');}}else{router.pageCallback('beforeRemove',currentPage,currentNavbar,'next',{swipeBack:true});router.removePage(currentPage);if(separateNavbar){router.removeNavbar(currentNavbar);}}$el.trigger('swipeback:afterchange',callbackData);router.emit('swipebackAfterChange',callbackData);router.emit('routeChanged',router.currentRoute,router.previousRoute,router);if(params.preloadPreviousPage){router.back(router.history[router.history.length-2],{preload:true});}}else{$el.trigger('swipeback:afterreset',callbackData);router.emit('swipebackAfterReset',callbackData);}if(pageShadow&&pageShadow.length>0)pageShadow.remove();if(pageOpacity&&pageOpacity.length>0)pageOpacity.remove();});}function attachEvents(){var passiveListener=app.touchEvents.start==='touchstart'&&Support.passiveListener?{passive:true,capture:false}:false;$el.on(app.touchEvents.start,handleTouchStart,passiveListener);app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);}function detachEvents(){var passiveListener=app.touchEvents.start==='touchstart'&&Support.passiveListener?{passive:true,capture:false}:false;$el.off(app.touchEvents.start,handleTouchStart,passiveListener);app.off('touchmove:active',handleTouchMove);app.off('touchend:passive',handleTouchEnd);}attachEvents();router.on('routerDestroy',detachEvents);}function redirect(direction,route,options){var router=this;var redirect=route.route.redirect;if(options.initial&&router.params.pushState){options.replaceState=true;// eslint-disable-line
options.history=true;// eslint-disable-line
}function redirectResolve(redirectUrl){var redirectOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};router.allowPageChange=true;router[direction](redirectUrl,Utils.extend({},options,redirectOptions));}function redirectReject(){router.allowPageChange=true;}if(typeof redirect==='function'){router.allowPageChange=false;var redirectUrl=redirect.call(router,route,redirectResolve,redirectReject);if(redirectUrl&&typeof redirectUrl==='string'){router.allowPageChange=true;return router[direction](redirectUrl,options);}return router;}return router[direction](redirect,options);}function refreshPage(){var router=this;return router.navigate(router.currentRoute.url,{ignoreCache:true,reloadCurrent:true});}function forward(el){var forwardOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var router=this;var app=router.app;var view=router.view;var options=Utils.extend({animate:router.params.animate,pushState:true,replaceState:false,history:true,reloadCurrent:router.params.reloadPages,reloadPrevious:false,reloadAll:false,clearPreviousHistory:false,on:{}},forwardOptions);var dynamicNavbar=router.dynamicNavbar;var separateNavbar=router.separateNavbar;var $viewEl=router.$el;var $newPage=(0,_dom2.default)(el);var reload=options.reloadPrevious||options.reloadCurrent||options.reloadAll;var $oldPage=void 0;var $navbarEl=void 0;var $newNavbarInner=void 0;var $oldNavbarInner=void 0;if($newPage.length){// Remove theme elements
router.removeThemeElements($newPage);}if(dynamicNavbar){$newNavbarInner=$newPage.children('.navbar').children('.navbar-inner');if(separateNavbar){$navbarEl=router.$navbarEl;if($newNavbarInner.length>0){$newPage.children('.navbar').remove();}if($newNavbarInner.length===0&&$newPage[0].f7Page){// Try from pageData
$newNavbarInner=$newPage[0].f7Page.$navbarEl;}}}router.allowPageChange=false;if($newPage.length===0){router.allowPageChange=true;return router;}// Pages In View
var $pagesInView=$viewEl.children('.page:not(.stacked)').filter(function(index,pageInView){return pageInView!==$newPage[0];});// Navbars In View
var $navbarsInView=void 0;if(separateNavbar){$navbarsInView=$navbarEl.children('.navbar-inner:not(.stacked)').filter(function(index,navbarInView){return navbarInView!==$newNavbarInner[0];});}// Exit when reload previous and only 1 page in view so nothing ro reload
if(options.reloadPrevious&&$pagesInView.length<2){router.allowPageChange=true;return router;}// New Page
var newPagePosition='next';if(options.reloadCurrent||options.reloadAll){newPagePosition='current';}else if(options.reloadPrevious){newPagePosition='previous';}$newPage.addClass('page-'+newPagePosition).removeClass('stacked');if(dynamicNavbar&&$newNavbarInner.length){$newNavbarInner.addClass('navbar-'+newPagePosition).removeClass('stacked');}// Find Old Page
if(options.reloadCurrent){$oldPage=$pagesInView.eq($pagesInView.length-1);if(separateNavbar){// $oldNavbarInner = $navbarsInView.eq($pagesInView.length - 1);
$oldNavbarInner=(0,_dom2.default)(app.navbar.getElByPage($oldPage));}}else if(options.reloadPrevious){$oldPage=$pagesInView.eq($pagesInView.length-2);if(separateNavbar){// $oldNavbarInner = $navbarsInView.eq($pagesInView.length - 2);
$oldNavbarInner=(0,_dom2.default)(app.navbar.getElByPage($oldPage));}}else if(options.reloadAll){$oldPage=$pagesInView.filter(function(index,pageEl){return pageEl!==$newPage[0];});if(separateNavbar){$oldNavbarInner=$navbarsInView.filter(function(index,navbarEl){return navbarEl!==$newNavbarInner[0];});}}else{if($pagesInView.length>1){var _i9=0;for(_i9=0;_i9<$pagesInView.length-1;_i9+=1){var oldNavbarInnerEl=app.navbar.getElByPage($pagesInView.eq(_i9));if(router.params.stackPages){$pagesInView.eq(_i9).addClass('stacked');if(separateNavbar){// $navbarsInView.eq(i).addClass('stacked');
(0,_dom2.default)(oldNavbarInnerEl).addClass('stacked');}}else{// Page remove event
router.pageCallback('beforeRemove',$pagesInView[_i9],$navbarsInView&&$navbarsInView[_i9],'previous',undefined,options);router.removePage($pagesInView[_i9]);if(separateNavbar&&oldNavbarInnerEl){router.removeNavbar(oldNavbarInnerEl);}}}}$oldPage=$viewEl.children('.page:not(.stacked)').filter(function(index,page){return page!==$newPage[0];});if(separateNavbar){$oldNavbarInner=$navbarEl.children('.navbar-inner:not(.stacked)').filter(function(index,navbarInner){return navbarInner!==$newNavbarInner[0];});}}if(dynamicNavbar&&!separateNavbar){$oldNavbarInner=$oldPage.children('.navbar').children('.navbar-inner');}// Push State
if(router.params.pushState&&(options.pushState||options.replaceState)&&!options.reloadPrevious){var pushStateRoot=router.params.pushStateRoot||'';History[options.reloadCurrent||options.reloadAll||options.replaceState?'replace':'push'](view.id,{url:options.route.url},pushStateRoot+router.params.pushStateSeparator+options.route.url);}if(!options.reloadPrevious){// Current Page & Navbar
router.currentPageEl=$newPage[0];if(dynamicNavbar&&$newNavbarInner.length){router.currentNavbarEl=$newNavbarInner[0];}else{delete router.currentNavbarEl;}// Current Route
router.currentRoute=options.route;}// Update router history
var url=options.route.url;if(options.history){if((options.reloadCurrent&&router.history.length)>0||options.replaceState){router.history[router.history.length-(options.reloadPrevious?2:1)]=url;}else if(options.reloadPrevious){router.history[router.history.length-2]=url;}else if(options.reloadAll){router.history=[url];}else{router.history.push(url);}}router.saveHistory();// Insert new page and navbar
var newPageInDom=$newPage.parents(_ssrWindow.document).length>0;var f7Component=$newPage[0].f7Component;if(options.reloadPrevious){if(f7Component&&!newPageInDom){f7Component.$mount(function(componentEl){(0,_dom2.default)(componentEl).insertBefore($oldPage);});}else{$newPage.insertBefore($oldPage);}if(separateNavbar&&$newNavbarInner.length){if($oldNavbarInner.length){$newNavbarInner.insertBefore($oldNavbarInner);}else{if(!router.$navbarEl.parents(_ssrWindow.document).length){router.$el.prepend(router.$navbarEl);}$navbarEl.append($newNavbarInner);}}}else{if($oldPage.next('.page')[0]!==$newPage[0]){if(f7Component&&!newPageInDom){f7Component.$mount(function(componentEl){$viewEl.append(componentEl);});}else{$viewEl.append($newPage[0]);}}if(separateNavbar&&$newNavbarInner.length){if(!router.$navbarEl.parents(_ssrWindow.document).length){router.$el.prepend(router.$navbarEl);}$navbarEl.append($newNavbarInner[0]);}}if(!newPageInDom){router.pageCallback('mounted',$newPage,$newNavbarInner,newPagePosition,reload?newPagePosition:'current',options,$oldPage);}// Remove old page
if(options.reloadCurrent&&$oldPage.length>0){if(router.params.stackPages&&router.initialPages.indexOf($oldPage[0])>=0){$oldPage.addClass('stacked');if(separateNavbar){$oldNavbarInner.addClass('stacked');}}else{// Page remove event
router.pageCallback('beforeRemove',$oldPage,$oldNavbarInner,'previous',undefined,options);router.removePage($oldPage);if(separateNavbar&&$oldNavbarInner&&$oldNavbarInner.length){router.removeNavbar($oldNavbarInner);}}}else if(options.reloadAll){$oldPage.each(function(index,pageEl){var $oldPageEl=(0,_dom2.default)(pageEl);var $oldNavbarInnerEl=(0,_dom2.default)(app.navbar.getElByPage($oldPageEl));if(router.params.stackPages&&router.initialPages.indexOf($oldPageEl[0])>=0){$oldPageEl.addClass('stacked');if(separateNavbar){$oldNavbarInnerEl.addClass('stacked');}}else{// Page remove event
router.pageCallback('beforeRemove',$oldPageEl,$oldNavbarInner&&$oldNavbarInner.eq(index),'previous',undefined,options);router.removePage($oldPageEl);if(separateNavbar&&$oldNavbarInnerEl.length){router.removeNavbar($oldNavbarInnerEl);}}});}else if(options.reloadPrevious){if(router.params.stackPages&&router.initialPages.indexOf($oldPage[0])>=0){$oldPage.addClass('stacked');if(separateNavbar){$oldNavbarInner.addClass('stacked');}}else{// Page remove event
router.pageCallback('beforeRemove',$oldPage,$oldNavbarInner,'previous',undefined,options);router.removePage($oldPage);if(separateNavbar&&$oldNavbarInner&&$oldNavbarInner.length){router.removeNavbar($oldNavbarInner);}}}// Load Tab
if(options.route.route.tab){router.tabLoad(options.route.route.tab,Utils.extend({},options,{history:false,pushState:false}));}// Page init and before init events
router.pageCallback('init',$newPage,$newNavbarInner,newPagePosition,reload?newPagePosition:'current',options,$oldPage);if(options.reloadCurrent||options.reloadAll){router.allowPageChange=true;router.pageCallback('beforeIn',$newPage,$newNavbarInner,newPagePosition,'current',options);router.pageCallback('afterIn',$newPage,$newNavbarInner,newPagePosition,'current',options);if(options.reloadCurrent&&options.clearPreviousHistory)router.clearPreviousHistory();return router;}if(options.reloadPrevious){router.allowPageChange=true;return router;}// Before animation event
router.pageCallback('beforeIn',$newPage,$newNavbarInner,'next','current',options);router.pageCallback('beforeOut',$oldPage,$oldNavbarInner,'current','previous',options);// Animation
function afterAnimation(){var pageClasses='page-previous page-current page-next';var navbarClasses='navbar-previous navbar-current navbar-next';$newPage.removeClass(pageClasses).addClass('page-current').removeAttr('aria-hidden');$oldPage.removeClass(pageClasses).addClass('page-previous').attr('aria-hidden','true');if(dynamicNavbar){$newNavbarInner.removeClass(navbarClasses).addClass('navbar-current').removeAttr('aria-hidden');$oldNavbarInner.removeClass(navbarClasses).addClass('navbar-previous').attr('aria-hidden','true');}// After animation event
router.allowPageChange=true;router.pageCallback('afterIn',$newPage,$newNavbarInner,'next','current',options);router.pageCallback('afterOut',$oldPage,$oldNavbarInner,'current','previous',options);var keepOldPage=app.theme==='ios'?router.params.preloadPreviousPage||router.params.iosSwipeBack:router.params.preloadPreviousPage;if(!keepOldPage){if($newPage.hasClass('smart-select-page')||$newPage.hasClass('photo-browser-page')||$newPage.hasClass('autocomplete-page')){keepOldPage=true;}}if(!keepOldPage){if(router.params.stackPages){$oldPage.addClass('stacked');if(separateNavbar){$oldNavbarInner.addClass('stacked');}}else if(!($newPage.attr('data-name')&&$newPage.attr('data-name')==='smart-select-page')){// Remove event
router.pageCallback('beforeRemove',$oldPage,$oldNavbarInner,'previous',undefined,options);router.removePage($oldPage);if(separateNavbar&&$oldNavbarInner.length){router.removeNavbar($oldNavbarInner);}}}if(options.clearPreviousHistory)router.clearPreviousHistory();router.emit('routeChanged',router.currentRoute,router.previousRoute,router);if(router.params.pushState){History.clearRouterQueue();}}function setPositionClasses(){var pageClasses='page-previous page-current page-next';var navbarClasses='navbar-previous navbar-current navbar-next';$oldPage.removeClass(pageClasses).addClass('page-current').removeAttr('aria-hidden');$newPage.removeClass(pageClasses).addClass('page-next').removeAttr('aria-hidden');if(dynamicNavbar){$oldNavbarInner.removeClass(navbarClasses).addClass('navbar-current').removeAttr('aria-hidden');$newNavbarInner.removeClass(navbarClasses).addClass('navbar-next').removeAttr('aria-hidden');}}if(options.animate){var delay=router.app.theme==='md'?router.params.materialPageLoadDelay:router.params.iosPageLoadDelay;if(delay){setTimeout(function(){setPositionClasses();router.animate($oldPage,$newPage,$oldNavbarInner,$newNavbarInner,'forward',function(){afterAnimation();});},delay);}else{setPositionClasses();router.animate($oldPage,$newPage,$oldNavbarInner,$newNavbarInner,'forward',function(){afterAnimation();});}}else{afterAnimation();}return router;}function load(){var loadParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var loadOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var ignorePageChange=arguments[2];var router=this;if(!router.allowPageChange&&!ignorePageChange)return router;var params=loadParams;var options=loadOptions;var url=params.url,content=params.content,el=params.el,pageName=params.pageName,template=params.template,templateUrl=params.templateUrl,component=params.component,componentUrl=params.componentUrl;if(!options.reloadCurrent&&options.route&&options.route.route&&options.route.route.parentPath&&router.currentRoute.route&&router.currentRoute.route.parentPath===options.route.route.parentPath){// Do something nested
if(options.route.url===router.url){return false;}// Check for same params
var sameParams=Object.keys(options.route.params).length===Object.keys(router.currentRoute.params).length;if(sameParams){// Check for equal params name
Object.keys(options.route.params).forEach(function(paramName){if(!(paramName in router.currentRoute.params)||router.currentRoute.params[paramName]!==options.route.params[paramName]){sameParams=false;}});}if(sameParams){if(options.route.route.tab){return router.tabLoad(options.route.route.tab,options);}return false;}}if(options.route&&options.route.url&&router.url===options.route.url&&!(options.reloadCurrent||options.reloadPrevious)&&!router.params.allowDuplicateUrls){router.allowPageChange=true;return false;}if(!options.route&&url){options.route=router.parseRouteUrl(url);Utils.extend(options.route,{route:{url:url,path:url}});}// Component Callbacks
function resolve(pageEl,newOptions){return router.forward(pageEl,Utils.extend(options,newOptions));}function reject(){router.allowPageChange=true;return router;}if(url||templateUrl||componentUrl){router.allowPageChange=false;}// Proceed
if(content){router.forward(router.getPageEl(content),options);}else if(template||templateUrl){// Parse template and send page element
try{router.pageTemplateLoader(template,templateUrl,options,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(el){// Load page from specified HTMLElement or by page name in pages container
router.forward(router.getPageEl(el),options);}else if(pageName){// Load page by page name in pages container
router.forward(router.$el.children('.page[data-name="'+pageName+'"]').eq(0),options);}else if(component||componentUrl){// Load from component (F7/Vue/React/...)
try{router.pageComponentLoader(router.el,component,componentUrl,options,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(url){// Load using XHR
if(router.xhr){router.xhr.abort();router.xhr=false;}router.xhrRequest(url,options).then(function(pageContent){router.forward(router.getPageEl(pageContent),options);}).catch(function(){router.allowPageChange=true;});}return router;}function navigate(navigateParams){var navigateOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var router=this;var url=void 0;var createRoute=void 0;if(typeof navigateParams==='string'){url=navigateParams;}else{url=navigateParams.url;createRoute=navigateParams.route;}var app=router.app;if(!router.view){if(app.views.main){app.views.main.router.navigate(url,navigateOptions);}return router;}if(url==='#'||url===''){return router;}var navigateUrl=url.replace('./','');if(navigateUrl[0]!=='/'&&navigateUrl.indexOf('#')!==0){var currentPath=router.currentRoute.parentPath||router.currentRoute.path;navigateUrl=((currentPath?currentPath+'/':'/')+navigateUrl).replace('///','/').replace('//','/');}var route=void 0;if(createRoute){route=Utils.extend(router.parseRouteUrl(navigateUrl),{route:Utils.extend({},createRoute)});}else{route=router.findMatchingRoute(navigateUrl);}if(!route){return router;}if(route.route.redirect){return redirect.call(router,'navigate',route,navigateOptions);}var options={};if(route.route.options){Utils.extend(options,route.route.options,navigateOptions,{route:route});}else{Utils.extend(options,navigateOptions,{route:route});}if(options&&options.context){route.context=options.context;options.route.context=options.context;}'popup popover sheet loginScreen actions customModal'.split(' ').forEach(function(modalLoadProp){if(route.route[modalLoadProp]){router.modalLoad(modalLoadProp,route,options);}});'url content component pageName el componentUrl template templateUrl'.split(' ').forEach(function(pageLoadProp){if(route.route[pageLoadProp]){router.load(_defineProperty({},pageLoadProp,route.route[pageLoadProp]),options);}});// Async
function asyncResolve(resolveParams,resolveOptions){router.allowPageChange=false;var resolvedAsModal=false;if(resolveOptions&&resolveOptions.context){if(!route.context)route.context=resolveOptions.context;else route.context=Utils.extend({},route.context,resolveOptions.context);options.route.context=route.context;}'popup popover sheet loginScreen actions customModal'.split(' ').forEach(function(modalLoadProp){if(resolveParams[modalLoadProp]){resolvedAsModal=true;var modalRoute=Utils.extend({},route,{route:resolveParams});router.allowPageChange=true;router.modalLoad(modalLoadProp,modalRoute,Utils.extend(options,resolveOptions));}});if(resolvedAsModal)return;router.load(resolveParams,Utils.extend(options,resolveOptions),true);}function asyncReject(){router.allowPageChange=true;}if(route.route.async){router.allowPageChange=false;route.route.async.call(router,route,router.currentRoute,asyncResolve,asyncReject);}// Return Router
return router;}function tabLoad(tabRoute){var loadOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var router=this;var options=Utils.extend({animate:router.params.animate,pushState:true,history:true,parentPageEl:null,preload:false,on:{}},loadOptions);var currentRoute=void 0;var previousRoute=void 0;if(options.route){// Set Route
if(!options.preload&&options.route!==router.currentRoute){previousRoute=router.previousRoute;router.currentRoute=options.route;}if(options.preload){currentRoute=options.route;previousRoute=router.currentRoute;}else{currentRoute=router.currentRoute;if(!previousRoute)previousRoute=router.previousRoute;}// Update Browser History
if(router.params.pushState&&options.pushState&&!options.reloadPrevious){History.replace(router.view.id,{url:options.route.url},(router.params.pushStateRoot||'')+router.params.pushStateSeparator+options.route.url);}// Update Router History
if(options.history){router.history[Math.max(router.history.length-1,0)]=options.route.url;router.saveHistory();}}// Show Tab
var $parentPageEl=(0,_dom2.default)(options.parentPageEl||router.currentPageEl);var tabEl=void 0;if($parentPageEl.length&&$parentPageEl.find('#'+tabRoute.id).length){tabEl=$parentPageEl.find('#'+tabRoute.id).eq(0);}else if(router.view.selector){tabEl=router.view.selector+' #'+tabRoute.id;}else{tabEl='#'+tabRoute.id;}var tabShowResult=router.app.tab.show({tabEl:tabEl,animate:options.animate,tabRoute:options.route});var $newTabEl=tabShowResult.$newTabEl,$oldTabEl=tabShowResult.$oldTabEl,animated=tabShowResult.animated,onTabsChanged=tabShowResult.onTabsChanged;if($newTabEl&&$newTabEl.parents('.page').length>0&&options.route){var tabParentPageData=$newTabEl.parents('.page')[0].f7Page;if(tabParentPageData&&options.route){tabParentPageData.route=options.route;}}// Tab Content Loaded
function onTabLoaded(contentEl){// Remove theme elements
router.removeThemeElements($newTabEl);var tabEventTarget=$newTabEl;if(typeof contentEl!=='string')tabEventTarget=(0,_dom2.default)(contentEl);tabEventTarget.trigger('tab:init tab:mounted',tabRoute);router.emit('tabInit tabMounted',$newTabEl[0],tabRoute);if($oldTabEl&&router.params.unloadTabContent){if(animated){onTabsChanged(function(){router.tabRemove($oldTabEl,$newTabEl,tabRoute);});}else{router.tabRemove($oldTabEl,$newTabEl,tabRoute);}}}if(!router.params.unloadTabContent){if($newTabEl[0].f7RouterTabLoaded)return router;}// Load Tab Content
function loadTab(loadTabParams,loadTabOptions){// Load Tab Props
var url=loadTabParams.url,content=loadTabParams.content,el=loadTabParams.el,template=loadTabParams.template,templateUrl=loadTabParams.templateUrl,component=loadTabParams.component,componentUrl=loadTabParams.componentUrl;// Component/Template Callbacks
function resolve(contentEl){router.allowPageChange=true;if(!contentEl)return;if(typeof contentEl==='string'){$newTabEl.html(contentEl);}else{$newTabEl.html('');if(contentEl.f7Component){contentEl.f7Component.$mount(function(componentEl){$newTabEl.append(componentEl);});}else{$newTabEl.append(contentEl);}}if(!router.params.unloadTabContent){$newTabEl[0].f7RouterTabLoaded=true;}onTabLoaded(contentEl);}function reject(){router.allowPageChange=true;return router;}if(content){resolve(content);}else if(template||templateUrl){try{router.tabTemplateLoader(template,templateUrl,loadTabOptions,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(el){resolve(el);}else if(component||componentUrl){// Load from component (F7/Vue/React/...)
try{router.tabComponentLoader($newTabEl[0],component,componentUrl,loadTabOptions,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(url){// Load using XHR
if(router.xhr){router.xhr.abort();router.xhr=false;}router.xhrRequest(url,loadTabOptions).then(function(tabContent){resolve(tabContent);}).catch(function(){router.allowPageChange=true;});}}'url content component el componentUrl template templateUrl'.split(' ').forEach(function(tabLoadProp){if(tabRoute[tabLoadProp]){loadTab(_defineProperty({},tabLoadProp,tabRoute[tabLoadProp]),options);}});// Async
function asyncResolve(resolveParams,resolveOptions){loadTab(resolveParams,Utils.extend(options,resolveOptions));}function asyncReject(){router.allowPageChange=true;}if(tabRoute.async){tabRoute.async.call(router,currentRoute,previousRoute,asyncResolve,asyncReject);}return router;}function tabRemove($oldTabEl,$newTabEl,tabRoute){var router=this;var hasTabComponentChild=void 0;$oldTabEl.children().each(function(index,tabChild){if(tabChild.f7Component){hasTabComponentChild=true;(0,_dom2.default)(tabChild).trigger('tab:beforeremove',tabRoute);tabChild.f7Component.$destroy();}});if(!hasTabComponentChild){$oldTabEl.trigger('tab:beforeremove',tabRoute);}router.emit('tabBeforeRemove',$oldTabEl[0],$newTabEl[0],tabRoute);router.removeTabContent($oldTabEl[0],tabRoute);}function modalLoad(modalType,route){var loadOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var router=this;var app=router.app;var options=Utils.extend({animate:router.params.animate,pushState:true,history:true,on:{}},loadOptions);var modalParams=Utils.extend({},route.route[modalType]);var modalRoute=route.route;function onModalLoaded(){// Create Modal
var modal=app[modalType].create(modalParams);modalRoute.modalInstance=modal;var hasEl=modal.el;function closeOnSwipeBack(){modal.close();}modal.on('modalOpen',function(){if(!hasEl){// Remove theme elements
router.removeThemeElements(modal.el);// Emit events
modal.$el.trigger(modalType.toLowerCase()+':init '+modalType.toLowerCase()+':mounted',route,modal);router.emit('modalInit '+modalType+'Init '+modalType+'Mounted',modal.el,route,modal);}router.once('swipeBackMove',closeOnSwipeBack);});modal.on('modalClose',function(){router.off('swipeBackMove',closeOnSwipeBack);if(!modal.closeByRouter){router.back();}});modal.on('modalClosed',function(){modal.$el.trigger(modalType.toLowerCase()+':beforeremove',route,modal);modal.emit('modalBeforeRemove '+modalType+'BeforeRemove',modal.el,route,modal);var modalComponent=modal.el.f7Component;if(modalComponent){modalComponent.$destroy();}Utils.nextTick(function(){if(modalComponent||modalParams.component){router.removeModal(modal.el);}modal.destroy();delete modalRoute.modalInstance;});});if(options.route){// Update Browser History
if(router.params.pushState&&options.pushState){History.push(router.view.id,{url:options.route.url,modal:modalType},(router.params.pushStateRoot||'')+router.params.pushStateSeparator+options.route.url);}// Set Route
if(options.route!==router.currentRoute){router.currentRoute=Utils.extend(options.route,{modal:modal});}// Update Router History
if(options.history){router.history.push(options.route.url);router.saveHistory();}}if(hasEl){// Remove theme elements
router.removeThemeElements(modal.el);// Emit events
modal.$el.trigger(modalType.toLowerCase()+':init '+modalType.toLowerCase()+':mounted',route,modal);router.emit('modalInit '+modalType+'Init '+modalType+'Mounted',modal.el,route,modal);}// Open
modal.open();}// Load Modal Content
function loadModal(loadModalParams,loadModalOptions){// Load Modal Props
var url=loadModalParams.url,content=loadModalParams.content,template=loadModalParams.template,templateUrl=loadModalParams.templateUrl,component=loadModalParams.component,componentUrl=loadModalParams.componentUrl;// Component/Template Callbacks
function resolve(contentEl){if(contentEl){if(typeof contentEl==='string'){modalParams.content=contentEl;}else if(contentEl.f7Component){contentEl.f7Component.$mount(function(componentEl){modalParams.el=componentEl;app.root.append(componentEl);});}else{modalParams.el=contentEl;}onModalLoaded();}}function reject(){router.allowPageChange=true;return router;}if(content){resolve(content);}else if(template||templateUrl){try{router.modalTemplateLoader(template,templateUrl,loadModalOptions,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(component||componentUrl){// Load from component (F7/Vue/React/...)
try{router.modalComponentLoader(app.root[0],component,componentUrl,loadModalOptions,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(url){// Load using XHR
if(router.xhr){router.xhr.abort();router.xhr=false;}router.xhrRequest(url,loadModalOptions).then(function(modalContent){modalParams.content=modalContent;onModalLoaded();}).catch(function(){router.allowPageChange=true;});}else{onModalLoaded();}}var foundLoadProp=void 0;'url content component el componentUrl template templateUrl'.split(' ').forEach(function(modalLoadProp){if(modalParams[modalLoadProp]&&!foundLoadProp){foundLoadProp=true;loadModal(_defineProperty({},modalLoadProp,modalParams[modalLoadProp]),options);}});if(!foundLoadProp&&modalType==='actions'){onModalLoaded();}// Async
function asyncResolve(resolveParams,resolveOptions){loadModal(resolveParams,Utils.extend(options,resolveOptions));}function asyncReject(){router.allowPageChange=true;}if(modalParams.async){modalParams.async.call(router,options.route,router.currentRoute,asyncResolve,asyncReject);}return router;}function modalRemove(modal){Utils.extend(modal,{closeByRouter:true});modal.close();}function backward(el,backwardOptions){var router=this;var app=router.app;var view=router.view;var options=Utils.extend({animate:router.params.animate,pushState:true},backwardOptions);var dynamicNavbar=router.dynamicNavbar;var separateNavbar=router.separateNavbar;var $newPage=(0,_dom2.default)(el);var $oldPage=router.$el.children('.page-current');if($newPage.length){// Remove theme elements
router.removeThemeElements($newPage);}var $navbarEl=void 0;var $newNavbarInner=void 0;var $oldNavbarInner=void 0;if(dynamicNavbar){$newNavbarInner=$newPage.children('.navbar').children('.navbar-inner');if(separateNavbar){$navbarEl=router.$navbarEl;if($newNavbarInner.length>0){$newPage.children('.navbar').remove();}if($newNavbarInner.length===0&&$newPage[0].f7Page){// Try from pageData
$newNavbarInner=$newPage[0].f7Page.$navbarEl;}$oldNavbarInner=$navbarEl.find('.navbar-current');}else{$oldNavbarInner=$oldPage.children('.navbar').children('.navbar-inner');}}router.allowPageChange=false;if($newPage.length===0||$oldPage.length===0){router.allowPageChange=true;return router;}// Remove theme elements
router.removeThemeElements($newPage);// New Page
$newPage.addClass('page-previous').removeClass('stacked').removeAttr('aria-hidden');if(dynamicNavbar&&$newNavbarInner.length>0){$newNavbarInner.addClass('navbar-previous').removeClass('stacked').removeAttr('aria-hidden');}// Remove previous page in case of "forced"
var backIndex=void 0;if(options.force){if($oldPage.prev('.page-previous:not(.stacked)').length>0||$oldPage.prev('.page-previous').length===0){if(router.history.indexOf(options.route.url)>=0){backIndex=router.history.length-router.history.indexOf(options.route.url)-1;router.history=router.history.slice(0,router.history.indexOf(options.route.url)+2);view.history=router.history;}else if(router.history[[router.history.length-2]]){router.history[router.history.length-2]=options.route.url;}else{router.history.unshift(router.url);}if(backIndex&&router.params.stackPages){$oldPage.prevAll('.page-previous').each(function(index,pageToRemove){var $pageToRemove=(0,_dom2.default)(pageToRemove);var $navbarToRemove=void 0;if(separateNavbar){// $navbarToRemove = $oldNavbarInner.prevAll('.navbar-previous').eq(index);
$navbarToRemove=(0,_dom2.default)(app.navbar.getElByPage($pageToRemove));}if($pageToRemove[0]!==$newPage[0]&&$pageToRemove.index()>$newPage.index()){if(router.initialPages.indexOf($pageToRemove[0])>=0){$pageToRemove.addClass('stacked');if(separateNavbar){$navbarToRemove.addClass('stacked');}}else{router.pageCallback('beforeRemove',$pageToRemove,$navbarToRemove,'previous',undefined,options);router.removePage($pageToRemove);if(separateNavbar&&$navbarToRemove.length>0){router.removeNavbar($navbarToRemove);}}}});}else{var $pageToRemove=$oldPage.prev('.page-previous:not(.stacked)');var $navbarToRemove=void 0;if(separateNavbar){// $navbarToRemove = $oldNavbarInner.prev('.navbar-inner:not(.stacked)');
$navbarToRemove=(0,_dom2.default)(app.navbar.getElByPage($pageToRemove));}if(router.params.stackPages&&router.initialPages.indexOf($pageToRemove[0])>=0){$pageToRemove.addClass('stacked');$navbarToRemove.addClass('stacked');}else if($pageToRemove.length>0){router.pageCallback('beforeRemove',$pageToRemove,$navbarToRemove,'previous',undefined,options);router.removePage($pageToRemove);if(separateNavbar&&$navbarToRemove.length){router.removeNavbar($navbarToRemove);}}}}}// Insert new page
var newPageInDom=$newPage.parents(_ssrWindow.document).length>0;var f7Component=$newPage[0].f7Component;function insertPage(){if($newPage.next($oldPage).length===0){if(!newPageInDom&&f7Component){f7Component.$mount(function(componentEl){(0,_dom2.default)(componentEl).insertBefore($oldPage);});}else{$newPage.insertBefore($oldPage);}}if(separateNavbar&&$newNavbarInner.length){$newNavbarInner.insertBefore($oldNavbarInner);if($oldNavbarInner.length>0){$newNavbarInner.insertBefore($oldNavbarInner);}else{if(!router.$navbarEl.parents(_ssrWindow.document).length){router.$el.prepend(router.$navbarEl);}$navbarEl.append($newNavbarInner);}}if(!newPageInDom){router.pageCallback('mounted',$newPage,$newNavbarInner,'previous','current',options,$oldPage);}}if(options.preload){// Insert Page
insertPage();// Tab route
if(options.route.route.tab){router.tabLoad(options.route.route.tab,Utils.extend({},options,{history:false,pushState:false,preload:true}));}// Page init and before init events
router.pageCallback('init',$newPage,$newNavbarInner,'previous','current',options,$oldPage);if($newPage.prevAll('.page-previous:not(.stacked)').length>0){$newPage.prevAll('.page-previous:not(.stacked)').each(function(index,pageToRemove){var $pageToRemove=(0,_dom2.default)(pageToRemove);var $navbarToRemove=void 0;if(separateNavbar){// $navbarToRemove = $newNavbarInner.prevAll('.navbar-previous:not(.stacked)').eq(index);
$navbarToRemove=(0,_dom2.default)(app.navbar.getElByPage($pageToRemove));}if(router.params.stackPages&&router.initialPages.indexOf(pageToRemove)>=0){$pageToRemove.addClass('stacked');if(separateNavbar){$navbarToRemove.addClass('stacked');}}else{router.pageCallback('beforeRemove',$pageToRemove,$navbarToRemove,'previous',undefined);router.removePage($pageToRemove);if(separateNavbar&&$navbarToRemove.length){router.removeNavbar($navbarToRemove);}}});}router.allowPageChange=true;return router;}// History State
if(router.params.pushState&&options.pushState){if(backIndex)History.go(-backIndex);else History.back();}// Update History
if(router.history.length===1){router.history.unshift(router.url);}router.history.pop();router.saveHistory();// Current Page & Navbar
router.currentPageEl=$newPage[0];if(dynamicNavbar&&$newNavbarInner.length){router.currentNavbarEl=$newNavbarInner[0];}else{delete router.currentNavbarEl;}// Current Route
router.currentRoute=options.route;// Insert Page
insertPage();// Load Tab
if(options.route.route.tab){router.tabLoad(options.route.route.tab,Utils.extend({},options,{history:false,pushState:false}));}// Page init and before init events
router.pageCallback('init',$newPage,$newNavbarInner,'previous','current',options,$oldPage);// Before animation callback
router.pageCallback('beforeIn',$newPage,$newNavbarInner,'previous','current',options);router.pageCallback('beforeOut',$oldPage,$oldNavbarInner,'current','next',options);// Animation
function afterAnimation(){// Set classes
var pageClasses='page-previous page-current page-next';var navbarClasses='navbar-previous navbar-current navbar-next';$newPage.removeClass(pageClasses).addClass('page-current').removeAttr('aria-hidden');$oldPage.removeClass(pageClasses).addClass('page-next').attr('aria-hidden','true');if(dynamicNavbar){$newNavbarInner.removeClass(navbarClasses).addClass('navbar-current').removeAttr('aria-hidden');$oldNavbarInner.removeClass(navbarClasses).addClass('navbar-next').attr('aria-hidden','true');}// After animation event
router.pageCallback('afterIn',$newPage,$newNavbarInner,'previous','current',options);router.pageCallback('afterOut',$oldPage,$oldNavbarInner,'current','next',options);// Remove Old Page
if(router.params.stackPages&&router.initialPages.indexOf($oldPage[0])>=0){$oldPage.addClass('stacked');if(separateNavbar){$oldNavbarInner.addClass('stacked');}}else{router.pageCallback('beforeRemove',$oldPage,$oldNavbarInner,'next',undefined,options);router.removePage($oldPage);if(separateNavbar&&$oldNavbarInner.length){router.removeNavbar($oldNavbarInner);}}router.allowPageChange=true;router.emit('routeChanged',router.currentRoute,router.previousRoute,router);// Preload previous page
var preloadPreviousPage=app.theme==='ios'?router.params.preloadPreviousPage||router.params.iosSwipeBack:router.params.preloadPreviousPage;if(preloadPreviousPage){router.back(router.history[router.history.length-2],{preload:true});}if(router.params.pushState){History.clearRouterQueue();}}function setPositionClasses(){var pageClasses='page-previous page-current page-next';var navbarClasses='navbar-previous navbar-current navbar-next';$oldPage.removeClass(pageClasses).addClass('page-current');$newPage.removeClass(pageClasses).addClass('page-previous').removeAttr('aria-hidden');if(dynamicNavbar){$oldNavbarInner.removeClass(navbarClasses).addClass('navbar-current');$newNavbarInner.removeClass(navbarClasses).addClass('navbar-previous').removeAttr('aria-hidden');}}if(options.animate){setPositionClasses();router.animate($oldPage,$newPage,$oldNavbarInner,$newNavbarInner,'backward',function(){afterAnimation();});}else{afterAnimation();}return router;}function loadBack(backParams,backOptions,ignorePageChange){var router=this;if(!router.allowPageChange&&!ignorePageChange)return router;var params=backParams;var options=backOptions;var url=params.url,content=params.content,el=params.el,pageName=params.pageName,template=params.template,templateUrl=params.templateUrl,component=params.component,componentUrl=params.componentUrl;if(options.route.url&&router.url===options.route.url&&!(options.reloadCurrent||options.reloadPrevious)&&!router.params.allowDuplicateUrls){return false;}if(!options.route&&url){options.route=router.parseRouteUrl(url);}// Component Callbacks
function resolve(pageEl,newOptions){return router.backward(pageEl,Utils.extend(options,newOptions));}function reject(){router.allowPageChange=true;return router;}if(url||templateUrl||componentUrl){router.allowPageChange=false;}// Proceed
if(content){router.backward(router.getPageEl(content),options);}else if(template||templateUrl){// Parse template and send page element
try{router.pageTemplateLoader(template,templateUrl,options,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(el){// Load page from specified HTMLElement or by page name in pages container
router.backward(router.getPageEl(el),options);}else if(pageName){// Load page by page name in pages container
router.backward(router.$el.children('.page[data-name="'+pageName+'"]').eq(0),options);}else if(component||componentUrl){// Load from component (F7/Vue/React/...)
try{router.pageComponentLoader(router.el,component,componentUrl,options,resolve,reject);}catch(err){router.allowPageChange=true;throw err;}}else if(url){// Load using XHR
if(router.xhr){router.xhr.abort();router.xhr=false;}router.xhrRequest(url,options).then(function(pageContent){router.backward(router.getPageEl(pageContent),options);}).catch(function(){router.allowPageChange=true;});}return router;}function back(){var navigateUrl=void 0;var navigateOptions=void 0;if(_typeof(arguments.length<=0?undefined:arguments[0])==='object'){navigateOptions=(arguments.length<=0?undefined:arguments[0])||{};}else{navigateUrl=arguments.length<=0?undefined:arguments[0];navigateOptions=(arguments.length<=1?undefined:arguments[1])||{};}var router=this;var app=router.app;if(!router.view){app.views.main.router.back(navigateUrl,navigateOptions);return router;}var currentRouteIsModal=router.currentRoute.modal;var modalType=void 0;if(!currentRouteIsModal){'popup popover sheet loginScreen actions customModal'.split(' ').forEach(function(modalLoadProp){if(router.currentRoute.route[modalLoadProp]){currentRouteIsModal=true;modalType=modalLoadProp;}});}if(currentRouteIsModal){var modalToClose=router.currentRoute.modal||router.currentRoute.route.modalInstance||app[modalType].get();var previousUrl=router.history[router.history.length-2];var previousRoute=router.findMatchingRoute(previousUrl);if(!previousRoute&&previousUrl){previousRoute={url:previousUrl,path:previousUrl.split('?')[0],query:Utils.parseUrlQuery(previousUrl),route:{path:previousUrl.split('?')[0],url:previousUrl}};}if(!previousRoute||!modalToClose){return router;}if(router.params.pushState&&navigateOptions.pushState!==false){History.back();}router.currentRoute=previousRoute;router.history.pop();router.saveHistory();router.modalRemove(modalToClose);return router;}var $previousPage=router.$el.children('.page-current').prevAll('.page-previous').eq(0);if(!navigateOptions.force&&$previousPage.length>0){if(router.params.pushState&&$previousPage[0].f7Page&&router.history[router.history.length-2]!==$previousPage[0].f7Page.route.url){router.back(router.history[router.history.length-2],Utils.extend(navigateOptions,{force:true}));return router;}router.loadBack({el:$previousPage},Utils.extend(navigateOptions,{route:$previousPage[0].f7Page.route}));return router;}// Navigate URL
if(navigateUrl==='#'){navigateUrl=undefined;}if(navigateUrl&&navigateUrl[0]!=='/'&&navigateUrl.indexOf('#')!==0){navigateUrl=((router.path||'/')+navigateUrl).replace('//','/');}if(!navigateUrl&&router.history.length>1){navigateUrl=router.history[router.history.length-2];}// Find route to load
var route=router.findMatchingRoute(navigateUrl);if(!route){if(navigateUrl){route={url:navigateUrl,path:navigateUrl.split('?')[0],query:Utils.parseUrlQuery(navigateUrl),route:{path:navigateUrl.split('?')[0],url:navigateUrl}};}}if(!route){return router;}if(route.route.redirect){return redirect.call(router,'back',route,navigateOptions);}var options={};if(route.route.options){Utils.extend(options,route.route.options,navigateOptions,{route:route});}else{Utils.extend(options,navigateOptions,{route:route});}if(options&&options.context){route.context=options.context;options.route.context=options.context;}if(options.force&&router.params.stackPages){router.$el.children('.page-previous.stacked').each(function(index,pageEl){if(pageEl.f7Page&&pageEl.f7Page.route&&pageEl.f7Page.route.url===route.url){router.loadBack({el:pageEl},options);}});}'url content component pageName el componentUrl template templateUrl'.split(' ').forEach(function(pageLoadProp){if(route.route[pageLoadProp]){router.loadBack(_defineProperty({},pageLoadProp,route.route[pageLoadProp]),options);}});// Async
function asyncResolve(resolveParams,resolveOptions){router.allowPageChange=false;if(resolveOptions&&resolveOptions.context){if(!route.context)route.context=resolveOptions.context;else route.context=Utils.extend({},route.context,resolveOptions.context);options.route.context=route.context;}router.loadBack(resolveParams,Utils.extend(options,resolveOptions),true);}function asyncReject(){router.allowPageChange=true;}if(route.route.async){router.allowPageChange=false;route.route.async.call(router,route,router.currentRoute,asyncResolve,asyncReject);}// Return Router
return router;}function clearPreviousHistory(){var router=this;var app=router.app;var separateNavbar=router.separateNavbar;var url=router.history[router.history.length-1];var $currentPageEl=(0,_dom2.default)(router.currentPageEl);var $pagesToRemove=router.$el.children('.page:not(.stacked)').filter(function(index,pageInView){return pageInView!==$currentPageEl[0];});$pagesToRemove.each(function(index,pageEl){var $oldPageEl=(0,_dom2.default)(pageEl);var $oldNavbarInnerEl=(0,_dom2.default)(app.navbar.getElByPage($oldPageEl));if(router.params.stackPages&&router.initialPages.indexOf($oldPageEl[0])>=0){$oldPageEl.addClass('stacked');if(separateNavbar){$oldNavbarInnerEl.addClass('stacked');}}else{// Page remove event
router.pageCallback('beforeRemove',$oldPageEl,$oldNavbarInnerEl,'previous',undefined,{});router.removePage($oldPageEl);if(separateNavbar&&$oldNavbarInnerEl.length){router.removeNavbar($oldNavbarInnerEl);}}});router.history=[url];router.view.history=[url];router.saveHistory();}var Router=function(_Framework7Class2){_inherits(Router,_Framework7Class2);function Router(app,view){var _ret2;_classCallCheck(this,Router);var _this3=_possibleConstructorReturn(this,(Router.__proto__||Object.getPrototypeOf(Router)).call(this,{},[typeof view==='undefined'?app:view]));var router=_this3;// Is App Router
router.isAppRouter=typeof view==='undefined';if(router.isAppRouter){// App Router
Utils.extend(false,router,{app:app,params:app.params.view,routes:app.routes||[],cache:app.cache});}else{// View Router
Utils.extend(false,router,{app:app,view:view,viewId:view.id,params:view.params,routes:view.routes,$el:view.$el,el:view.el,$navbarEl:view.$navbarEl,navbarEl:view.navbarEl,history:view.history,scrollHistory:view.scrollHistory,cache:app.cache,dynamicNavbar:app.theme==='ios'&&view.params.iosDynamicNavbar,separateNavbar:app.theme==='ios'&&view.params.iosDynamicNavbar&&view.params.iosSeparateDynamicNavbar,initialPages:[],initialNavbars:[]});}// Install Modules
router.useModules();// Temporary Dom
router.tempDom=_ssrWindow.document.createElement('div');// AllowPageChage
router.allowPageChange=true;// Current Route
var currentRoute={};var previousRoute={};Object.defineProperty(router,'currentRoute',{enumerable:true,configurable:true,set:function set(){var newRoute=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};previousRoute=Utils.extend({},currentRoute);currentRoute=newRoute;if(!currentRoute)return;router.url=currentRoute.url;router.emit('routeChange',newRoute,previousRoute,router);},get:function get(){return currentRoute;}});Object.defineProperty(router,'previousRoute',{enumerable:true,configurable:true,get:function get(){return previousRoute;},set:function set(newRoute){previousRoute=newRoute;}});Utils.extend(router,{// Load
forward:forward,load:load,navigate:navigate,refreshPage:refreshPage,// Tab
tabLoad:tabLoad,tabRemove:tabRemove,// Modal
modalLoad:modalLoad,modalRemove:modalRemove,// Back
backward:backward,loadBack:loadBack,back:back,// Clear history
clearPreviousHistory:clearPreviousHistory});return _ret2=router,_possibleConstructorReturn(_this3,_ret2);}_createClass(Router,[{key:'animatableNavElements',value:function animatableNavElements(newNavbarInner,oldNavbarInner){var router=this;var dynamicNavbar=router.dynamicNavbar;var animateIcon=router.params.iosAnimateNavbarBackIcon;var newNavEls=void 0;var oldNavEls=void 0;function animatableNavEl(el,navbarInner){var $el=(0,_dom2.default)(el);var isSliding=$el.hasClass('sliding')||navbarInner.hasClass('sliding');var isSubnavbar=$el.hasClass('subnavbar');var needsOpacityTransition=isSliding?!isSubnavbar:true;var hasIcon=isSliding&&animateIcon&&$el.hasClass('left')&&$el.find('.back .icon').length>0;var $iconEl=void 0;if(hasIcon)$iconEl=$el.find('.back .icon');return{$el:$el,$iconEl:$iconEl,hasIcon:hasIcon,leftOffset:$el[0].f7NavbarLeftOffset,rightOffset:$el[0].f7NavbarRightOffset,isSliding:isSliding,isSubnavbar:isSubnavbar,needsOpacityTransition:needsOpacityTransition};}if(dynamicNavbar){newNavEls=[];oldNavEls=[];newNavbarInner.children('.left, .right, .title, .subnavbar').each(function(index,navEl){newNavEls.push(animatableNavEl(navEl,newNavbarInner));});oldNavbarInner.children('.left, .right, .title, .subnavbar').each(function(index,navEl){oldNavEls.push(animatableNavEl(navEl,oldNavbarInner));});[oldNavEls,newNavEls].forEach(function(navEls){navEls.forEach(function(navEl){var n=navEl;var isSliding=navEl.isSliding,$el=navEl.$el;var otherEls=navEls===oldNavEls?newNavEls:oldNavEls;if(!(isSliding&&$el.hasClass('title')&&otherEls))return;otherEls.forEach(function(otherNavEl){if(otherNavEl.$el.hasClass('left')&&otherNavEl.hasIcon){var iconTextEl=otherNavEl.$el.find('.back span')[0];n.leftOffset+=iconTextEl?iconTextEl.offsetLeft:0;}});});});}return{newNavEls:newNavEls,oldNavEls:oldNavEls};}},{key:'animateWithCSS',value:function animateWithCSS(oldPage,newPage,oldNavbarInner,newNavbarInner,direction,callback){var router=this;var dynamicNavbar=router.dynamicNavbar;var separateNavbar=router.separateNavbar;var ios=router.app.theme==='ios';// Router Animation class
var routerTransitionClass='router-transition-'+direction+' router-transition-css-'+direction;var newNavEls=void 0;var oldNavEls=void 0;var navbarWidth=0;if(ios&&dynamicNavbar){if(!separateNavbar){navbarWidth=newNavbarInner[0].offsetWidth;}var navEls=router.animatableNavElements(newNavbarInner,oldNavbarInner);newNavEls=navEls.newNavEls;oldNavEls=navEls.oldNavEls;}function animateNavbars(progress){if(ios&&dynamicNavbar){newNavEls.forEach(function(navEl){var $el=navEl.$el;var offset=direction==='forward'?navEl.rightOffset:navEl.leftOffset;if(navEl.isSliding){$el.transform('translate3d('+offset*(1-progress)+'px,0,0)');}if(navEl.hasIcon){if(direction==='forward'){navEl.$iconEl.transform('translate3d('+(-offset-navbarWidth)*(1-progress)+'px,0,0)');}else{navEl.$iconEl.transform('translate3d('+(-offset+navbarWidth/5)*(1-progress)+'px,0,0)');}}});oldNavEls.forEach(function(navEl){var $el=navEl.$el;var offset=direction==='forward'?navEl.leftOffset:navEl.rightOffset;if(navEl.isSliding){$el.transform('translate3d('+offset*progress+'px,0,0)');}if(navEl.hasIcon){if(direction==='forward'){navEl.$iconEl.transform('translate3d('+(-offset+navbarWidth/5)*progress+'px,0,0)');}else{navEl.$iconEl.transform('translate3d('+(-offset-navbarWidth)*progress+'px,0,0)');}}});}}// AnimationEnd Callback
function onDone(){if(router.dynamicNavbar){if(newNavbarInner.hasClass('sliding')){newNavbarInner.find('.title, .left, .right, .left .icon, .subnavbar').transform('');}else{newNavbarInner.find('.sliding').transform('');}if(oldNavbarInner.hasClass('sliding')){oldNavbarInner.find('.title, .left, .right, .left .icon, .subnavbar').transform('');}else{oldNavbarInner.find('.sliding').transform('');}}router.$el.removeClass(routerTransitionClass);if(callback)callback();}(direction==='forward'?newPage:oldPage).animationEnd(function(){onDone();});// Animate
if(dynamicNavbar){// Prepare Navbars
animateNavbars(0);Utils.nextTick(function(){// Add class, start animation
animateNavbars(1);router.$el.addClass(routerTransitionClass);});}else{// Add class, start animation
router.$el.addClass(routerTransitionClass);}}},{key:'animateWithJS',value:function animateWithJS(oldPage,newPage,oldNavbarInner,newNavbarInner,direction,callback){var router=this;var dynamicNavbar=router.dynamicNavbar;var separateNavbar=router.separateNavbar;var ios=router.app.theme==='ios';var duration=ios?400:250;var routerTransitionClass='router-transition-'+direction+' router-transition-js-'+direction;var startTime=null;var done=false;var newNavEls=void 0;var oldNavEls=void 0;var navbarWidth=0;if(ios&&dynamicNavbar){if(!separateNavbar){navbarWidth=newNavbarInner[0].offsetWidth;}var navEls=router.animatableNavElements(newNavbarInner,oldNavbarInner);newNavEls=navEls.newNavEls;oldNavEls=navEls.oldNavEls;}var $shadowEl=void 0;var $opacityEl=void 0;if(ios){$shadowEl=(0,_dom2.default)('<div class="page-shadow-effect"></div>');$opacityEl=(0,_dom2.default)('<div class="page-opacity-effect"></div>');if(direction==='forward'){newPage.append($shadowEl);oldPage.append($opacityEl);}else{newPage.append($opacityEl);oldPage.append($shadowEl);}}var easing=Utils.bezier(0.25,0.1,0.25,1);function onDone(){newPage.transform('').css('opacity','');oldPage.transform('').css('opacity','');if(ios){$shadowEl.remove();$opacityEl.remove();if(dynamicNavbar){newNavEls.forEach(function(navEl){navEl.$el.transform('');navEl.$el.css('opacity','');});oldNavEls.forEach(function(navEl){navEl.$el.transform('');navEl.$el.css('opacity','');});newNavEls=[];oldNavEls=[];}}router.$el.removeClass(routerTransitionClass);if(callback)callback();}function render(){var time=Utils.now();if(!startTime)startTime=time;var progress=Math.max(Math.min((time-startTime)/duration,1),0);var easeProgress=easing(progress);if(progress>=1){done=true;}var inverter=router.app.rtl?-1:1;if(ios){if(direction==='forward'){newPage.transform('translate3d('+(1-easeProgress)*100*inverter+'%,0,0)');oldPage.transform('translate3d('+-easeProgress*20*inverter+'%,0,0)');$shadowEl[0].style.opacity=easeProgress;$opacityEl[0].style.opacity=easeProgress;}else{newPage.transform('translate3d('+-(1-easeProgress)*20*inverter+'%,0,0)');oldPage.transform('translate3d('+easeProgress*100*inverter+'%,0,0)');$shadowEl[0].style.opacity=1-easeProgress;$opacityEl[0].style.opacity=1-easeProgress;}if(dynamicNavbar){newNavEls.forEach(function(navEl){var $el=navEl.$el;var offset=direction==='forward'?navEl.rightOffset:navEl.leftOffset;if(navEl.needsOpacityTransition){$el[0].style.opacity=easeProgress;}if(navEl.isSliding){$el.transform('translate3d('+offset*(1-easeProgress)+'px,0,0)');}if(navEl.hasIcon){if(direction==='forward'){navEl.$iconEl.transform('translate3d('+(-offset-navbarWidth)*(1-easeProgress)+'px,0,0)');}else{navEl.$iconEl.transform('translate3d('+(-offset+navbarWidth/5)*(1-easeProgress)+'px,0,0)');}}});oldNavEls.forEach(function(navEl){var $el=navEl.$el;var offset=direction==='forward'?navEl.leftOffset:navEl.rightOffset;if(navEl.needsOpacityTransition){$el[0].style.opacity=1-easeProgress;}if(navEl.isSliding){$el.transform('translate3d('+offset*easeProgress+'px,0,0)');}if(navEl.hasIcon){if(direction==='forward'){navEl.$iconEl.transform('translate3d('+(-offset+navbarWidth/5)*easeProgress+'px,0,0)');}else{navEl.$iconEl.transform('translate3d('+(-offset-navbarWidth)*easeProgress+'px,0,0)');}}});}}else if(direction==='forward'){newPage.transform('translate3d(0, '+(1-easeProgress)*56+'px,0)');newPage.css('opacity',easeProgress);}else{oldPage.transform('translate3d(0, '+easeProgress*56+'px,0)');oldPage.css('opacity',1-easeProgress);}if(done){onDone();return;}Utils.nextFrame(render);}router.$el.addClass(routerTransitionClass);Utils.nextFrame(render);}},{key:'animate',value:function animate(){// Args: oldPage, newPage, oldNavbarInner, newNavbarInner, direction, callback
var router=this;for(var _len16=arguments.length,args=Array(_len16),_key16=0;_key16<_len16;_key16++){args[_key16]=arguments[_key16];}if(router.params.animateCustom){router.params.animateCustom.apply(router,args);}else if(router.params.animateWithJS){router.animateWithJS.apply(router,args);}else{router.animateWithCSS.apply(router,args);}}},{key:'removeModal',value:function removeModal(modalEl){var router=this;router.removeEl(modalEl);}// eslint-disable-next-line
},{key:'removeTabContent',value:function removeTabContent(tabEl){var $tabEl=(0,_dom2.default)(tabEl);$tabEl.html('');}},{key:'removeNavbar',value:function removeNavbar(el){var router=this;router.removeEl(el);}},{key:'removePage',value:function removePage(el){var router=this;router.removeEl(el);}},{key:'removeEl',value:function removeEl(el){if(!el)return;var router=this;var $el=(0,_dom2.default)(el);if($el.length===0)return;if($el[0].f7Component&&$el[0].f7Component.$destroy){$el[0].f7Component.$destroy();}$el.find('.tab').each(function(tabIndex,tabEl){(0,_dom2.default)(tabEl).children().each(function(index,tabChild){if(tabChild.f7Component){(0,_dom2.default)(tabChild).trigger('tab:beforeremove');tabChild.f7Component.$destroy();}});});if(!router.params.removeElements){return;}if(router.params.removeElementsWithTimeout){setTimeout(function(){$el.remove();},router.params.removeElementsTimeout);}else{$el.remove();}}},{key:'getPageEl',value:function getPageEl(content){var router=this;if(typeof content==='string'){router.tempDom.innerHTML=content;}else{if((0,_dom2.default)(content).hasClass('page')){return content;}router.tempDom.innerHTML='';(0,_dom2.default)(router.tempDom).append(content);}return router.findElement('.page',router.tempDom);}},{key:'findElement',value:function findElement(stringSelector,container,notStacked){var router=this;var view=router.view;var app=router.app;// Modals Selector
var modalsSelector='.popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page';var $container=(0,_dom2.default)(container);var selector=stringSelector;if(notStacked)selector+=':not(.stacked)';var found=$container.find(selector).filter(function(index,el){return(0,_dom2.default)(el).parents(modalsSelector).length===0;});if(found.length>1){if(typeof view.selector==='string'){// Search in related view
found=$container.find(view.selector+' '+selector);}if(found.length>1){// Search in main view
found=$container.find('.'+app.params.viewMainClass+' '+selector);}}if(found.length===1)return found;// Try to find not stacked
if(!notStacked)found=router.findElement(selector,$container,true);if(found&&found.length===1)return found;if(found&&found.length>1)return(0,_dom2.default)(found[0]);return undefined;}},{key:'flattenRoutes',value:function flattenRoutes(){var _this4=this;var routes=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.routes;var flattenedRoutes=[];routes.forEach(function(route){if('routes'in route){var mergedPathsRoutes=route.routes.map(function(childRoute){var cRoute=Utils.extend({},childRoute);cRoute.path=(route.path+'/'+cRoute.path).replace('///','/').replace('//','/');return cRoute;});flattenedRoutes=flattenedRoutes.concat(route,_this4.flattenRoutes(mergedPathsRoutes));}else if('tabs'in route&&route.tabs){var _mergedPathsRoutes=route.tabs.map(function(tabRoute){var tRoute=Utils.extend({},route,{path:(route.path+'/'+tabRoute.path).replace('///','/').replace('//','/'),parentPath:route.path,tab:tabRoute});delete tRoute.tabs;return tRoute;});flattenedRoutes=flattenedRoutes.concat(_this4.flattenRoutes(_mergedPathsRoutes));}else{flattenedRoutes.push(route);}});return flattenedRoutes;}// eslint-disable-next-line
},{key:'parseRouteUrl',value:function parseRouteUrl(url){if(!url)return{};var query=Utils.parseUrlQuery(url);var hash=url.split('#')[1];var params={};var path=url.split('#')[0].split('?')[0];return{query:query,hash:hash,params:params,url:url,path:path};}},{key:'findTabRoute',value:function findTabRoute(tabEl){var router=this;var $tabEl=(0,_dom2.default)(tabEl);var parentPath=router.currentRoute.route.parentPath;var tabId=$tabEl.attr('id');var flattenedRoutes=router.flattenRoutes(router.routes);var foundTabRoute=void 0;flattenedRoutes.forEach(function(route){if(route.parentPath===parentPath&&route.tab&&route.tab.id===tabId){foundTabRoute=route;}});return foundTabRoute;}},{key:'findRouteByKey',value:function findRouteByKey(key,value){var router=this;var routes=router.routes;var flattenedRoutes=router.flattenRoutes(routes);var matchingRoute=void 0;flattenedRoutes.forEach(function(route){if(matchingRoute)return;if(route[key]===value){matchingRoute=route;}});return matchingRoute;}},{key:'findMatchingRoute',value:function findMatchingRoute(url){if(!url)return undefined;var router=this;var routes=router.routes;var flattenedRoutes=router.flattenRoutes(routes);var _router$parseRouteUrl=router.parseRouteUrl(url),path=_router$parseRouteUrl.path,query=_router$parseRouteUrl.query,hash=_router$parseRouteUrl.hash,params=_router$parseRouteUrl.params;var matchingRoute=void 0;flattenedRoutes.forEach(function(route){if(matchingRoute)return;var keys=[];var pathsToMatch=[route.path];if(route.alias){if(typeof route.alias==='string')pathsToMatch.push(route.alias);else if(Array.isArray(route.alias)){route.alias.forEach(function(aliasPath){pathsToMatch.push(aliasPath);});}}var matched=void 0;pathsToMatch.forEach(function(pathToMatch){if(matched)return;matched=(0,_pathToRegexp2.default)(pathToMatch,keys).exec(path);});if(matched){keys.forEach(function(keyObj,index){var paramValue=matched[index+1];params[keyObj.name]=paramValue;});var parentPath=void 0;if(route.parentPath){parentPath=path.split('/').slice(0,route.parentPath.split('/').length-1).join('/');}matchingRoute={query:query,hash:hash,params:params,url:url,path:path,parentPath:parentPath,route:route,name:route.name};}});return matchingRoute;}},{key:'removeFromXhrCache',value:function removeFromXhrCache(url){var router=this;var xhrCache=router.cache.xhr;var index=false;for(var _i10=0;_i10<xhrCache.length;_i10+=1){if(xhrCache[_i10].url===url)index=_i10;}if(index!==false)xhrCache.splice(index,1);}},{key:'xhrRequest',value:function xhrRequest(requestUrl,options){var router=this;var params=router.params;var ignoreCache=options.ignoreCache;var url=requestUrl;var hasQuery=url.indexOf('?')>=0;if(params.passRouteQueryToRequest&&options&&options.route&&options.route.query&&Object.keys(options.route.query).length){url+=''+(hasQuery?'&':'?')+Utils.serializeObject(options.route.query);hasQuery=true;}if(params.passRouteParamsToRequest&&options&&options.route&&options.route.params&&Object.keys(options.route.params).length){url+=''+(hasQuery?'&':'?')+Utils.serializeObject(options.route.params);hasQuery=true;}if(url.indexOf('{{')>=0&&options&&options.route&&options.route.params&&Object.keys(options.route.params).length){Object.keys(options.route.params).forEach(function(paramName){var regExp=new RegExp('{{'+paramName+'}}','g');url=url.replace(regExp,options.route.params[paramName]||'');});}// should we ignore get params or not
if(params.xhrCacheIgnoreGetParameters&&url.indexOf('?')>=0){url=url.split('?')[0];}return Utils.promise(function(resolve,reject){if(params.xhrCache&&!ignoreCache&&url.indexOf('nocache')<0&&params.xhrCacheIgnore.indexOf(url)<0){for(var _i11=0;_i11<router.cache.xhr.length;_i11+=1){var cachedUrl=router.cache.xhr[_i11];if(cachedUrl.url===url){// Check expiration
if(Utils.now()-cachedUrl.time<params.xhrCacheDuration){// Load from cache
resolve(cachedUrl.content);return;}}}}router.xhr=router.app.request({url:url,method:'GET',beforeSend:function beforeSend(xhr){router.emit('routerAjaxStart',xhr,options);},complete:function complete(xhr,status){router.emit('routerAjaxComplete',xhr);if(status!=='error'&&status!=='timeout'&&xhr.status>=200&&xhr.status<300||xhr.status===0){if(params.xhrCache&&xhr.responseText!==''){router.removeFromXhrCache(url);router.cache.xhr.push({url:url,time:Utils.now(),content:xhr.responseText});}router.emit('routerAjaxSuccess',xhr,options);resolve(xhr.responseText);}else{router.emit('routerAjaxError',xhr,options);reject(xhr);}},error:function error(xhr){router.emit('routerAjaxError',xhr,options);reject(xhr);}});});}// Remove theme elements
},{key:'removeThemeElements',value:function removeThemeElements(el){var router=this;var theme=router.app.theme;(0,_dom2.default)(el).find('.'+(theme==='md'?'ios':'md')+'-only, .if-'+(theme==='md'?'ios':'md')).remove();}},{key:'templateLoader',value:function templateLoader(template,templateUrl,options,resolve,reject){var router=this;function compile(t){var compiledHtml=void 0;var context=void 0;try{context=options.context||{};if(typeof context==='function')context=context.call(router);else if(typeof context==='string'){try{context=JSON.parse(context);}catch(err){reject();throw err;}}if(typeof t==='function'){compiledHtml=t(context);}else{compiledHtml=_template2.default.compile(t)(Utils.extend({},context||{},{$app:router.app,$root:Utils.extend({},router.app.data,router.app.methods),$route:options.route,$router:router,$theme:{ios:router.app.theme==='ios',md:router.app.theme==='md'}}));}}catch(err){reject();throw err;}resolve(compiledHtml,{context:context});}if(templateUrl){// Load via XHR
if(router.xhr){router.xhr.abort();router.xhr=false;}router.xhrRequest(templateUrl,options).then(function(templateContent){compile(templateContent);}).catch(function(){reject();});}else{compile(template);}}},{key:'modalTemplateLoader',value:function modalTemplateLoader(template,templateUrl,options,resolve,reject){var router=this;return router.templateLoader(template,templateUrl,options,function(html){resolve(html);},reject);}},{key:'tabTemplateLoader',value:function tabTemplateLoader(template,templateUrl,options,resolve,reject){var router=this;return router.templateLoader(template,templateUrl,options,function(html){resolve(html);},reject);}},{key:'pageTemplateLoader',value:function pageTemplateLoader(template,templateUrl,options,resolve,reject){var router=this;return router.templateLoader(template,templateUrl,options,function(html){var newOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};resolve(router.getPageEl(html),newOptions);},reject);}},{key:'componentLoader',value:function componentLoader(component,componentUrl){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var resolve=arguments[3];var reject=arguments[4];var router=this;var url=typeof component==='string'?component:componentUrl;function compile(c){var context=options.context||{};if(typeof context==='function')context=context.call(router);else if(typeof context==='string'){try{context=JSON.parse(context);}catch(err){reject();throw err;}}var extendContext=Utils.merge({},context,{$:_dom2.default,$$:_dom2.default,$app:router.app,$root:Utils.merge({},router.app.data,router.app.methods),$route:options.route,$router:router,$dom7:_dom2.default,$theme:{ios:router.app.theme==='ios',md:router.app.theme==='md'}});var createdComponent=Component.create(c,extendContext);resolve(createdComponent.el);}if(url){// Load via XHR
if(router.xhr){router.xhr.abort();router.xhr=false;}router.xhrRequest(url,options).then(function(loadedComponent){compile(Component.parse(loadedComponent));}).catch(function(err){reject();throw err;});}else{compile(component);}}},{key:'modalComponentLoader',value:function modalComponentLoader(rootEl,component,componentUrl,options,resolve,reject){var router=this;router.componentLoader(component,componentUrl,options,function(el){resolve(el);},reject);}},{key:'tabComponentLoader',value:function tabComponentLoader(tabEl,component,componentUrl,options,resolve,reject){var router=this;router.componentLoader(component,componentUrl,options,function(el){resolve(el);},reject);}},{key:'pageComponentLoader',value:function pageComponentLoader(routerEl,component,componentUrl,options,resolve,reject){var router=this;router.componentLoader(component,componentUrl,options,function(el){var newOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};resolve(el,newOptions);},reject);}},{key:'getPageData',value:function getPageData(pageEl,navbarEl,from,to){var route=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var pageFromEl=arguments[5];var router=this;var $pageEl=(0,_dom2.default)(pageEl);var $navbarEl=(0,_dom2.default)(navbarEl);var currentPage=$pageEl[0].f7Page||{};var direction=void 0;var pageFrom=void 0;if(from==='next'&&to==='current'||from==='current'&&to==='previous')direction='forward';if(from==='current'&&to==='next'||from==='previous'&&to==='current')direction='backward';if(currentPage&&!currentPage.fromPage){var $pageFromEl=(0,_dom2.default)(pageFromEl);if($pageFromEl.length){pageFrom=$pageFromEl[0].f7Page;}}pageFrom=currentPage.pageFrom||pageFrom;if(pageFrom&&pageFrom.pageFrom){pageFrom.pageFrom=null;}var page={app:router.app,view:router.view,router:router,$el:$pageEl,el:$pageEl[0],$pageEl:$pageEl,pageEl:$pageEl[0],$navbarEl:$navbarEl,navbarEl:$navbarEl[0],name:$pageEl.attr('data-name'),position:from,from:from,to:to,direction:direction,route:currentPage.route?currentPage.route:route,pageFrom:pageFrom};if($navbarEl&&$navbarEl[0]){$navbarEl[0].f7Page=page;}$pageEl[0].f7Page=page;return page;}// Callbacks
},{key:'pageCallback',value:function pageCallback(callback,pageEl,navbarEl,from,to){var options=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};var pageFromEl=arguments[6];if(!pageEl)return;var router=this;var $pageEl=(0,_dom2.default)(pageEl);if(!$pageEl.length)return;var route=options.route;var restoreScrollTopOnBack=router.params.restoreScrollTopOnBack;var camelName='page'+(callback[0].toUpperCase()+callback.slice(1,callback.length));var colonName='page:'+callback.toLowerCase();var page={};if(callback==='beforeRemove'&&$pageEl[0].f7Page){page=Utils.extend($pageEl[0].f7Page,{from:from,to:to,position:from});}else{page=router.getPageData(pageEl,navbarEl,from,to,route,pageFromEl);}page.swipeBack=!!options.swipeBack;var _ref3=options.route?options.route.route:{},_ref3$on=_ref3.on,on=_ref3$on===undefined?{}:_ref3$on,_ref3$once=_ref3.once,once=_ref3$once===undefined?{}:_ref3$once;if(options.on){Utils.extend(on,options.on);}if(options.once){Utils.extend(once,options.once);}function attachEvents(){if($pageEl[0].f7RouteEventsAttached)return;$pageEl[0].f7RouteEventsAttached=true;if(on&&Object.keys(on).length>0){$pageEl[0].f7RouteEventsOn=on;Object.keys(on).forEach(function(eventName){on[eventName]=on[eventName].bind(router);$pageEl.on(Utils.eventNameToColonCase(eventName),on[eventName]);});}if(once&&Object.keys(once).length>0){$pageEl[0].f7RouteEventsOnce=once;Object.keys(once).forEach(function(eventName){once[eventName]=once[eventName].bind(router);$pageEl.once(Utils.eventNameToColonCase(eventName),once[eventName]);});}}function detachEvents(){if(!$pageEl[0].f7RouteEventsAttached)return;if($pageEl[0].f7RouteEventsOn){Object.keys($pageEl[0].f7RouteEventsOn).forEach(function(eventName){$pageEl.off(Utils.eventNameToColonCase(eventName),$pageEl[0].f7RouteEventsOn[eventName]);});}if($pageEl[0].f7RouteEventsOnce){Object.keys($pageEl[0].f7RouteEventsOnce).forEach(function(eventName){$pageEl.off(Utils.eventNameToColonCase(eventName),$pageEl[0].f7RouteEventsOnce[eventName]);});}$pageEl[0].f7RouteEventsAttached=null;$pageEl[0].f7RouteEventsOn=null;$pageEl[0].f7RouteEventsOnce=null;delete $pageEl[0].f7RouteEventsAttached;delete $pageEl[0].f7RouteEventsOn;delete $pageEl[0].f7RouteEventsOnce;}if(callback==='mounted'){attachEvents();}if(callback==='init'){if(restoreScrollTopOnBack&&(from==='previous'||!from)&&to==='current'&&router.scrollHistory[page.route.url]&&!$pageEl.hasClass('no-restore-scroll')){var $pageContent=$pageEl.find('.page-content');if($pageContent.length>0){// eslint-disable-next-line
$pageContent=$pageContent.filter(function(pageContentIndex,pageContentEl){return(0,_dom2.default)(pageContentEl).parents('.tab:not(.tab-active)').length===0&&!(0,_dom2.default)(pageContentEl).is('.tab:not(.tab-active)');});}$pageContent.scrollTop(router.scrollHistory[page.route.url]);}attachEvents();if($pageEl[0].f7PageInitialized){$pageEl.trigger('page:reinit',page);router.emit('pageReinit',page);return;}$pageEl[0].f7PageInitialized=true;}if(restoreScrollTopOnBack&&callback==='beforeOut'&&from==='current'&&to==='previous'){// Save scroll position
var _$pageContent=$pageEl.find('.page-content');if(_$pageContent.length>0){// eslint-disable-next-line
_$pageContent=_$pageContent.filter(function(pageContentIndex,pageContentEl){return(0,_dom2.default)(pageContentEl).parents('.tab:not(.tab-active)').length===0&&!(0,_dom2.default)(pageContentEl).is('.tab:not(.tab-active)');});}router.scrollHistory[page.route.url]=_$pageContent.scrollTop();}if(restoreScrollTopOnBack&&callback==='beforeOut'&&from==='current'&&to==='next'){// Delete scroll position
delete router.scrollHistory[page.route.url];}$pageEl.trigger(colonName,page);router.emit(camelName,page);if(callback==='beforeRemove'){detachEvents();$pageEl[0].f7Page=null;}}},{key:'saveHistory',value:function saveHistory(){var router=this;router.view.history=router.history;if(router.params.pushState){_ssrWindow.window.localStorage['f7router-'+router.view.id+'-history']=JSON.stringify(router.history);}}},{key:'restoreHistory',value:function restoreHistory(){var router=this;if(router.params.pushState&&_ssrWindow.window.localStorage['f7router-'+router.view.id+'-history']){router.history=JSON.parse(_ssrWindow.window.localStorage['f7router-'+router.view.id+'-history']);router.view.history=router.history;}}},{key:'clearHistory',value:function clearHistory(){var router=this;router.history=[];if(router.view)router.view.history=[];router.saveHistory();}},{key:'init',value:function init(){var router=this;var app=router.app,view=router.view;// Init Swipeback
{if(view&&router.params.iosSwipeBack&&app.theme==='ios'||view&&router.params.mdSwipeBack&&app.theme==='md'){SwipeBack(router);}}// Dynamic not separated navbbar
if(router.dynamicNavbar&&!router.separateNavbar){router.$el.addClass('router-dynamic-navbar-inside');}var initUrl=router.params.url;var documentUrl=_ssrWindow.document.location.href.split(_ssrWindow.document.location.origin)[1];var historyRestored=void 0;if(!router.params.pushState||!router.params.pushStateOnLoad){if(!initUrl){initUrl=documentUrl;}if(_ssrWindow.document.location.search&&initUrl.indexOf('?')<0){initUrl+=_ssrWindow.document.location.search;}if(_ssrWindow.document.location.hash&&initUrl.indexOf('#')<0){initUrl+=_ssrWindow.document.location.hash;}}else{if(router.params.pushStateRoot&&documentUrl.indexOf(router.params.pushStateRoot)>=0){documentUrl=documentUrl.split(router.params.pushStateRoot)[1];if(documentUrl==='')documentUrl='/';}if(router.params.pushStateSeparator.length>0&&documentUrl.indexOf(router.params.pushStateSeparator)>=0){initUrl=documentUrl.split(router.params.pushStateSeparator)[1];}else{initUrl=documentUrl;}router.restoreHistory();if(router.history.indexOf(initUrl)>=0){router.history=router.history.slice(0,router.history.indexOf(initUrl)+1);}else if(router.params.url===initUrl){router.history=[initUrl];}else if(History.state&&History.state[view.id]&&History.state[view.id].url===router.history[router.history.length-1]){initUrl=router.history[router.history.length-1];}else{router.history=[documentUrl.split(router.params.pushStateSeparator)[0]||'/',initUrl];}if(router.history.length>1){historyRestored=true;}else{router.history=[];}router.saveHistory();}var currentRoute=void 0;if(router.history.length>1){// Will load page
currentRoute=router.findMatchingRoute(router.history[0]);if(!currentRoute){currentRoute=Utils.extend(router.parseRouteUrl(router.history[0]),{route:{url:router.history[0],path:router.history[0].split('?')[0]}});}}else{// Don't load page
currentRoute=router.findMatchingRoute(initUrl);if(!currentRoute){currentRoute=Utils.extend(router.parseRouteUrl(initUrl),{route:{url:initUrl,path:initUrl.split('?')[0]}});}}if(router.params.stackPages){router.$el.children('.page').each(function(index,pageEl){var $pageEl=(0,_dom2.default)(pageEl);router.initialPages.push($pageEl[0]);if(router.separateNavbar&&$pageEl.children('.navbar').length>0){router.initialNavbars.push($pageEl.children('.navbar').find('.navbar-inner')[0]);}});}if(router.$el.children('.page:not(.stacked)').length===0&&initUrl){// No pages presented in DOM, reload new page
router.navigate(initUrl,{initial:true,reloadCurrent:true,pushState:false});}else{// Init current DOM page
var hasTabRoute=void 0;router.currentRoute=currentRoute;router.$el.children('.page:not(.stacked)').each(function(index,pageEl){var $pageEl=(0,_dom2.default)(pageEl);var $navbarInnerEl=void 0;$pageEl.addClass('page-current');if(router.separateNavbar){$navbarInnerEl=$pageEl.children('.navbar').children('.navbar-inner');if($navbarInnerEl.length>0){if(!router.$navbarEl.parents(_ssrWindow.document).length){router.$el.prepend(router.$navbarEl);}router.$navbarEl.append($navbarInnerEl);$pageEl.children('.navbar').remove();}else{router.$navbarEl.addClass('navbar-hidden');}}var initOptions={route:router.currentRoute};if(router.currentRoute&&router.currentRoute.route&&router.currentRoute.route.options){Utils.extend(initOptions,router.currentRoute.route.options);}router.currentPageEl=$pageEl[0];if(router.dynamicNavbar&&$navbarInnerEl.length){router.currentNavbarEl=$navbarInnerEl[0];}router.removeThemeElements($pageEl);if(router.dynamicNavbar&&$navbarInnerEl.length){router.removeThemeElements($navbarInnerEl);}if(initOptions.route.route.tab){hasTabRoute=true;router.tabLoad(initOptions.route.route.tab,Utils.extend({},initOptions));}router.pageCallback('init',$pageEl,$navbarInnerEl,'current',undefined,initOptions);});if(historyRestored){router.navigate(initUrl,{initial:true,pushState:false,history:false,animate:router.params.pushStateAnimateOnLoad,once:{pageAfterIn:function pageAfterIn(){if(router.history.length>2){router.back({preload:true});}}}});}if(!historyRestored&&!hasTabRoute){router.history.push(initUrl);router.saveHistory();}}if(initUrl&&router.params.pushState&&router.params.pushStateOnLoad&&(!History.state||!History.state[view.id])){History.initViewState(view.id,{url:initUrl});}router.emit('local::init routerInit',router);}},{key:'destroy',value:function destroy(){var router=this;router.emit('local::destroy routerDestroy',router);// Delete props & methods
Object.keys(router).forEach(function(routerProp){router[routerProp]=null;delete router[routerProp];});router=null;}}]);return Router;}(Framework7Class);var Router$1={name:'router',static:{Router:Router},instance:{cache:{xhr:[],templates:[],components:[]}},create:function create(){var instance=this;if(instance.app){// View Router
if(instance.params.router){instance.router=new Router(instance.app,instance);}}else{// App Router
instance.router=new Router(instance);}}};var View=function(_Framework7Class3){_inherits(View,_Framework7Class3);function View(appInstance,el){var _ret3;var viewParams=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,View);var _this5=_possibleConstructorReturn(this,(View.__proto__||Object.getPrototypeOf(View)).call(this,viewParams,[appInstance]));var app=appInstance;var $el=(0,_dom2.default)(el);var view=_this5;var defaults={routes:[],routesAdd:[]};// Default View params
view.params=Utils.extend(defaults,app.params.view,viewParams);// Routes
if(view.params.routes.length>0){view.routes=view.params.routes;}else{view.routes=[].concat(app.routes,view.params.routesAdd);}// Selector
var selector=void 0;if(typeof el==='string')selector=el;else{// Supposed to be HTMLElement or Dom7
selector=($el.attr('id')?'#'+$el.attr('id'):'')+($el.attr('class')?'.'+$el.attr('class').replace(/ /g,'.').replace('.active',''):'');}// DynamicNavbar
var $navbarEl=void 0;if(app.theme==='ios'&&view.params.iosDynamicNavbar&&view.params.iosSeparateDynamicNavbar){$navbarEl=$el.children('.navbar').eq(0);if($navbarEl.length===0){$navbarEl=(0,_dom2.default)('<div class="navbar"></div>');}}// View Props
Utils.extend(false,view,{app:app,$el:$el,el:$el[0],name:view.params.name,main:view.params.main||$el.hasClass('view-main'),$navbarEl:$navbarEl,navbarEl:$navbarEl?$navbarEl[0]:undefined,selector:selector,history:[],scrollHistory:{}});// Save in DOM
$el[0].f7View=view;// Install Modules
view.useModules();// Add to app
app.views.push(view);if(view.main){app.views.main=view;}if(view.name){app.views[view.name]=view;}// Index
view.index=app.views.indexOf(view);// View ID
var viewId=void 0;if(view.name){viewId='view_'+view.name;}else if(view.main){viewId='view_main';}else{viewId='view_'+view.index;}view.id=viewId;// Init View
if(app.initialized){view.init();}else{app.on('init',function(){view.init();});}return _ret3=view,_possibleConstructorReturn(_this5,_ret3);}_createClass(View,[{key:'destroy',value:function destroy(){var view=this;var app=view.app;view.$el.trigger('view:beforedestroy',view);view.emit('local::beforeDestroy viewBeforeDestroy',view);if(view.main){app.views.main=null;delete app.views.main;}else if(view.name){app.views[view.name]=null;delete app.views[view.name];}view.$el[0].f7View=null;delete view.$el[0].f7View;app.views.splice(app.views.indexOf(view),1);// Destroy Router
if(view.params.router&&view.router){view.router.destroy();}view.emit('local::destroy viewDestroy',view);// Delete props & methods
Object.keys(view).forEach(function(viewProp){view[viewProp]=null;delete view[viewProp];});view=null;}},{key:'init',value:function init(){var view=this;if(view.params.router){view.router.init();}}}]);return View;}(Framework7Class);// Use Router
View.use(Router$1);function initClicks(app){function handleClicks(e){var clicked=(0,_dom2.default)(e.target);var clickedLink=clicked.closest('a');var isLink=clickedLink.length>0;var url=isLink&&clickedLink.attr('href');var isTabLink=isLink&&clickedLink.hasClass('tab-link')&&(clickedLink.attr('data-tab')||url&&url.indexOf('#')===0);// Check if link is external
if(isLink){// eslint-disable-next-line
if(clickedLink.is(app.params.clicks.externalLinks)||url&&url.indexOf('javascript:')>=0){var target=clickedLink.attr('target');if(url&&(target==='_system'||target==='_blank'||target==='_browser')){e.preventDefault();if(target!=='_browser'&&_ssrWindow.window.cordova&&_ssrWindow.window.cordova.InAppBrowser){_ssrWindow.window.cordova.InAppBrowser.open(url,target);}else{_ssrWindow.window.open(url,target);}}return;}}// Modules Clicks
Object.keys(app.modules).forEach(function(moduleName){var moduleClicks=app.modules[moduleName].clicks;if(!moduleClicks)return;Object.keys(moduleClicks).forEach(function(clickSelector){var matchingClickedElement=clicked.closest(clickSelector).eq(0);if(matchingClickedElement.length>0){moduleClicks[clickSelector].call(app,matchingClickedElement,matchingClickedElement.dataset());}});});// Load Page
var clickedLinkData={};if(isLink){e.preventDefault();clickedLinkData=clickedLink.dataset();}var validUrl=url&&url.length>0&&url!=='#'&&!isTabLink;var template=clickedLinkData.template;if(validUrl||clickedLink.hasClass('back')||template){var view=void 0;if(clickedLinkData.view){view=(0,_dom2.default)(clickedLinkData.view)[0].f7View;}else{view=clicked.parents('.view')[0]&&clicked.parents('.view')[0].f7View;if(!clickedLink.hasClass('back')&&view&&view.params.linksView){if(typeof view.params.linksView==='string')view=(0,_dom2.default)(view.params.linksView)[0].f7View;else if(view.params.linksView instanceof View)view=view.params.linksView;}}if(!view){if(app.views.main)view=app.views.main;}if(!view||!view.router)return;if(clickedLinkData.context&&typeof clickedLinkData.context==='string'){try{clickedLinkData.context=JSON.parse(clickedLinkData.context);}catch(err){// something wrong there
}}if(clickedLink.hasClass('back'))view.router.back(url,clickedLinkData);else view.router.navigate(url,clickedLinkData);}}app.on('click',handleClicks);// Prevent scrolling on overlays
function preventScrolling(e){e.preventDefault();}if(Support.touch&&!Device.android){var activeListener=Support.passiveListener?{passive:false,capture:false}:false;(0,_dom2.default)(_ssrWindow.document).on(app.params.touch.fastClicks?'touchstart':'touchmove','.panel-backdrop, .dialog-backdrop, .preloader-backdrop, .popup-backdrop, .searchbar-backdrop',preventScrolling,activeListener);}}var ClicksModule={name:'clicks',params:{clicks:{// External Links
externalLinks:'.external'}},on:{init:function init(){var app=this;initClicks(app);}}};var HistoryModule={name:'history',static:{history:History},on:{init:function init(){History.init(this);}}};var keyPrefix='f7storage-';var Storage={get:function get(key){return Utils.promise(function(resolve,reject){try{var value=JSON.parse(_ssrWindow.window.localStorage.getItem(''+keyPrefix+key));resolve(value);}catch(e){reject(e);}});},set:function set(key,value){return Utils.promise(function(resolve,reject){try{_ssrWindow.window.localStorage.setItem(''+keyPrefix+key,JSON.stringify(value));resolve();}catch(e){reject(e);}});},remove:function remove(key){return Utils.promise(function(resolve,reject){try{_ssrWindow.window.localStorage.removeItem(''+keyPrefix+key);resolve();}catch(e){reject(e);}});},clear:function clear(){},length:function length(){},keys:function keys(){return Utils.promise(function(resolve,reject){try{var keys=Object.keys(_ssrWindow.window.localStorage).filter(function(keyName){return keyName.indexOf(keyPrefix)===0;}).map(function(keyName){return keyName.replace(keyPrefix,'');});resolve(keys);}catch(e){reject(e);}});},forEach:function forEach(callback){return Utils.promise(function(resolve,reject){try{Object.keys(_ssrWindow.window.localStorage).filter(function(keyName){return keyName.indexOf(keyPrefix)===0;}).forEach(function(keyName,index){var key=keyName.replace(keyPrefix,'');Storage.get(key).then(function(value){callback(key,value,index);});});resolve();}catch(e){reject(e);}});}};var StorageModule={name:'storage',static:{Storage:Storage,storage:Storage}};var Statusbar={hide:function hide(){(0,_dom2.default)('html').removeClass('with-statusbar');if(Device.cordova&&_ssrWindow.window.StatusBar){_ssrWindow.window.StatusBar.hide();}},show:function show(){if(Device.cordova&&_ssrWindow.window.StatusBar){_ssrWindow.window.StatusBar.show();Utils.nextTick(function(){if(Device.needsStatusbarOverlay()){(0,_dom2.default)('html').addClass('with-statusbar');}});return;}(0,_dom2.default)('html').addClass('with-statusbar');},onClick:function onClick(){var app=this;var pageContent=void 0;if((0,_dom2.default)('.popup.modal-in').length>0){// Check for opened popup
pageContent=(0,_dom2.default)('.popup.modal-in').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');}else if((0,_dom2.default)('.panel.panel-active').length>0){// Check for opened panel
pageContent=(0,_dom2.default)('.panel.panel-active').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');}else if((0,_dom2.default)('.views > .view.tab-active').length>0){// View in tab bar app layout
pageContent=(0,_dom2.default)('.views > .view.tab-active').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');}else if((0,_dom2.default)('.views').length>0){pageContent=(0,_dom2.default)('.views').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');}else{pageContent=app.root.children('.view').find('.page:not(.page-previous):not(.page-next):not(.cached)').find('.page-content');}if(pageContent&&pageContent.length>0){// Check for tab
if(pageContent.hasClass('tab')){pageContent=pageContent.parent('.tabs').children('.page-content.tab-active');}if(pageContent.length>0)pageContent.scrollTop(0,300);}},setIosTextColor:function setIosTextColor(color){if(Device.cordova&&_ssrWindow.window.StatusBar){if(color==='white'){_ssrWindow.window.StatusBar.styleLightContent();}else{_ssrWindow.window.StatusBar.styleDefault();}}},setBackgroundColor:function setBackgroundColor(color){(0,_dom2.default)('.statusbar').css('background-color',color);if(Device.cordova&&_ssrWindow.window.StatusBar){_ssrWindow.window.StatusBar.backgroundColorByHexString(color);}},isVisible:function isVisible(){if(Device.cordova&&_ssrWindow.window.StatusBar){return _ssrWindow.window.StatusBar.isVisible;}return false;},iosOverlaysWebView:function iosOverlaysWebView(){var overlays=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(!Device.ios)return;if(Device.cordova&&_ssrWindow.window.StatusBar){_ssrWindow.window.StatusBar.overlaysWebView(overlays);if(overlays){(0,_dom2.default)('html').addClass('with-statusbar');}else{(0,_dom2.default)('html').removeClass('with-statusbar');}}},checkOverlay:function checkOverlay(){if(Device.needsStatusbarOverlay()){(0,_dom2.default)('html').addClass('with-statusbar');}else{(0,_dom2.default)('html').removeClass('with-statusbar');}},init:function init(){var app=this;var params=app.params.statusbar;if(!params.enabled)return;if(params.overlay==='auto'){if(Device.needsStatusbarOverlay()){(0,_dom2.default)('html').addClass('with-statusbar');}else{(0,_dom2.default)('html').removeClass('with-statusbar');}if(Device.ios&&(Device.cordova||Device.webView)){if(_ssrWindow.window.orientation===0){app.once('resize',function(){Statusbar.checkOverlay();});}(0,_dom2.default)(_ssrWindow.document).on('resume',function(){Statusbar.checkOverlay();},false);app.on(Device.ios?'orientationchange':'orientationchange resize',function(){Statusbar.checkOverlay();});}}else if(params.overlay===true){(0,_dom2.default)('html').addClass('with-statusbar');}else if(params.overlay===false){(0,_dom2.default)('html').removeClass('with-statusbar');}if(Device.cordova&&_ssrWindow.window.StatusBar){if(params.scrollTopOnClick){(0,_dom2.default)(_ssrWindow.window).on('statusTap',Statusbar.onClick.bind(app));}if(params.iosOverlaysWebView){_ssrWindow.window.StatusBar.overlaysWebView(true);}else{_ssrWindow.window.StatusBar.overlaysWebView(false);}if(params.iosTextColor==='white'){_ssrWindow.window.StatusBar.styleLightContent();}else{_ssrWindow.window.StatusBar.styleDefault();}}if(params.iosBackgroundColor&&app.theme==='ios'){Statusbar.setBackgroundColor(params.iosBackgroundColor);}if(params.materialBackgroundColor&&app.theme==='md'){Statusbar.setBackgroundColor(params.materialBackgroundColor);}}};var Statusbar$1={name:'statusbar',params:{statusbar:{enabled:true,overlay:'auto',scrollTopOnClick:true,iosOverlaysWebView:true,iosTextColor:'black',iosBackgroundColor:null,materialBackgroundColor:null}},create:function create(){var app=this;Utils.extend(app,{statusbar:{checkOverlay:Statusbar.checkOverlay,hide:Statusbar.hide,show:Statusbar.show,iosOverlaysWebView:Statusbar.iosOverlaysWebView,setIosTextColor:Statusbar.setIosTextColor,setBackgroundColor:Statusbar.setBackgroundColor,isVisible:Statusbar.isVisible,init:Statusbar.init.bind(app)}});},on:{init:function init(){var app=this;Statusbar.init.call(app);}},clicks:{'.statusbar':function onStatusbarClick(){var app=this;if(!app.params.statusbar.enabled)return;if(!app.params.statusbar.scrollTopOnClick)return;Statusbar.onClick.call(app);}}};function getCurrentView(app){var popoverView=(0,_dom2.default)('.popover.modal-in .view');var popupView=(0,_dom2.default)('.popup.modal-in .view');var panelView=(0,_dom2.default)('.panel.panel-active .view');var appViews=(0,_dom2.default)('.views');if(appViews.length===0)appViews=app.root;// Find active view as tab
var appView=appViews.children('.view');// Propably in tabs or split view
if(appView.length>1){if(appView.hasClass('tab')){// Tabs
appView=appViews.children('.view.tab-active');}}if(popoverView.length>0&&popoverView[0].f7View)return popoverView[0].f7View;if(popupView.length>0&&popupView[0].f7View)return popupView[0].f7View;if(panelView.length>0&&panelView[0].f7View)return panelView[0].f7View;if(appView.length>0){if(appView.length===1&&appView[0].f7View)return appView[0].f7View;if(appView.length>1){return app.views.main;}}return undefined;}var View$1={name:'view',params:{view:{name:undefined,main:false,router:true,linksView:null,stackPages:false,xhrCache:true,xhrCacheIgnore:[],xhrCacheIgnoreGetParameters:false,xhrCacheDuration:1000*60*10,// Ten minutes
preloadPreviousPage:true,uniqueHistory:false,uniqueHistoryIgnoreGetParameters:false,allowDuplicateUrls:false,reloadPages:false,removeElements:true,removeElementsWithTimeout:false,removeElementsTimeout:0,restoreScrollTopOnBack:true,unloadTabContent:true,passRouteQueryToRequest:true,passRouteParamsToRequest:false,// Swipe Back
iosSwipeBack:true,iosSwipeBackAnimateShadow:true,iosSwipeBackAnimateOpacity:true,iosSwipeBackActiveArea:30,iosSwipeBackThreshold:0,mdSwipeBack:false,mdSwipeBackAnimateShadow:true,mdSwipeBackAnimateOpacity:false,mdSwipeBackActiveArea:30,mdSwipeBackThreshold:0,// Push State
pushState:false,pushStateRoot:undefined,pushStateAnimate:true,pushStateAnimateOnLoad:false,pushStateSeparator:'#!',pushStateOnLoad:true,// Animate Pages
animate:true,animateWithJS:false,// iOS Dynamic Navbar
iosDynamicNavbar:true,iosSeparateDynamicNavbar:true,// Animate iOS Navbar Back Icon
iosAnimateNavbarBackIcon:true,// Delays
iosPageLoadDelay:0,materialPageLoadDelay:0}},static:{View:View},create:function create(){var app=this;Utils.extend(app,{views:Utils.extend([],{create:function create(el,params){return new View(app,el,params);},get:function get(viewEl){var $viewEl=(0,_dom2.default)(viewEl);if($viewEl.length&&$viewEl[0].f7View)return $viewEl[0].f7View;return undefined;}})});Object.defineProperty(app.views,'current',{enumerable:true,configurable:true,get:function get(){return getCurrentView(app);}});// Alias
app.view=app.views;},on:{init:function init(){var app=this;(0,_dom2.default)('.view-init').each(function(index,viewEl){if(viewEl.f7View)return;var viewParams=(0,_dom2.default)(viewEl).dataset();app.views.create(viewEl,viewParams);});},modalOpen:function modalOpen(modal){var app=this;modal.$el.find('.view-init').each(function(index,viewEl){if(viewEl.f7View)return;var viewParams=(0,_dom2.default)(viewEl).dataset();app.views.create(viewEl,viewParams);});},modalBeforeDestroy:function modalBeforeDestroy(modal){if(!modal||!modal.$el)return;modal.$el.find('.view-init').each(function(index,viewEl){var view=viewEl.f7View;if(!view)return;view.destroy();});}}};var Navbar={size:function size(el){var app=this;if(app.theme!=='ios')return;var $el=(0,_dom2.default)(el);if($el.hasClass('navbar')){$el=$el.children('.navbar-inner').each(function(index,navbarEl){app.navbar.size(navbarEl);});return;}if($el.hasClass('stacked')||$el.parents('.stacked').length>0||$el.parents('.tab:not(.tab-active)').length>0||$el.parents('.popup:not(.modal-in)').length>0){return;}var $viewEl=$el.parents('.view').eq(0);var left=app.rtl?$el.children('.right'):$el.children('.left');var right=app.rtl?$el.children('.left'):$el.children('.right');var title=$el.children('.title');var subnavbar=$el.children('.subnavbar');var noLeft=left.length===0;var noRight=right.length===0;var leftWidth=noLeft?0:left.outerWidth(true);var rightWidth=noRight?0:right.outerWidth(true);var titleWidth=title.outerWidth(true);var navbarStyles=$el.styles();var navbarWidth=$el[0].offsetWidth;var navbarInnerWidth=navbarWidth-parseInt(navbarStyles.paddingLeft,10)-parseInt(navbarStyles.paddingRight,10);var isPrevious=$el.hasClass('navbar-previous');var sliding=$el.hasClass('sliding');var router=void 0;var dynamicNavbar=void 0;var separateNavbar=void 0;var separateNavbarRightOffset=0;var separateNavbarLeftOffset=0;if($viewEl.length>0&&$viewEl[0].f7View){router=$viewEl[0].f7View.router;dynamicNavbar=router&&router.dynamicNavbar;separateNavbar=router&&router.separateNavbar;if(!separateNavbar){separateNavbarRightOffset=navbarWidth;separateNavbarLeftOffset=navbarWidth/5;}}var currLeft=void 0;var diff=void 0;if(noRight){currLeft=navbarInnerWidth-titleWidth;}if(noLeft){currLeft=0;}if(!noLeft&&!noRight){currLeft=(navbarInnerWidth-rightWidth-titleWidth+leftWidth)/2;}var requiredLeft=(navbarInnerWidth-titleWidth)/2;if(navbarInnerWidth-leftWidth-rightWidth>titleWidth){if(requiredLeft<leftWidth){requiredLeft=leftWidth;}if(requiredLeft+titleWidth>navbarInnerWidth-rightWidth){requiredLeft=navbarInnerWidth-rightWidth-titleWidth;}diff=requiredLeft-currLeft;}else{diff=0;}// RTL inverter
var inverter=app.rtl?-1:1;if(dynamicNavbar){if(title.hasClass('sliding')||title.length>0&&sliding){var titleLeftOffset=-(currLeft+diff)*inverter+separateNavbarLeftOffset;var titleRightOffset=(navbarInnerWidth-currLeft-diff-titleWidth)*inverter-separateNavbarRightOffset;if(isPrevious){if(router&&router.params.iosAnimateNavbarBackIcon){var activeNavbarBackLink=$el.parent().find('.navbar-current').children('.left.sliding').find('.back .icon ~ span');if(activeNavbarBackLink.length>0){titleLeftOffset+=activeNavbarBackLink[0].offsetLeft;}}}title[0].f7NavbarLeftOffset=titleLeftOffset;title[0].f7NavbarRightOffset=titleRightOffset;}if(!noLeft&&(left.hasClass('sliding')||sliding)){if(app.rtl){left[0].f7NavbarLeftOffset=-(navbarInnerWidth-left[0].offsetWidth)/2*inverter;left[0].f7NavbarRightOffset=leftWidth*inverter;}else{left[0].f7NavbarLeftOffset=-leftWidth+separateNavbarLeftOffset;left[0].f7NavbarRightOffset=(navbarInnerWidth-left[0].offsetWidth)/2-separateNavbarRightOffset;if(router&&router.params.iosAnimateNavbarBackIcon&&left.find('.back .icon').length>0){left[0].f7NavbarRightOffset-=left.find('.back .icon')[0].offsetWidth;}}}if(!noRight&&(right.hasClass('sliding')||sliding)){if(app.rtl){right[0].f7NavbarLeftOffset=-rightWidth*inverter;right[0].f7NavbarRightOffset=(navbarInnerWidth-right[0].offsetWidth)/2*inverter;}else{right[0].f7NavbarLeftOffset=-(navbarInnerWidth-right[0].offsetWidth)/2+separateNavbarLeftOffset;right[0].f7NavbarRightOffset=rightWidth-separateNavbarRightOffset;}}if(subnavbar.length&&(subnavbar.hasClass('sliding')||sliding)){subnavbar[0].f7NavbarLeftOffset=app.rtl?subnavbar[0].offsetWidth:-subnavbar[0].offsetWidth+separateNavbarLeftOffset;subnavbar[0].f7NavbarRightOffset=-subnavbar[0].f7NavbarLeftOffset-separateNavbarRightOffset+separateNavbarLeftOffset;}}// Title left
if(app.params.navbar.iosCenterTitle){var titleLeft=diff;if(app.rtl&&noLeft&&noRight&&title.length>0)titleLeft=-titleLeft;title.css({left:titleLeft+'px'});}},hide:function hide(el){var animate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var $el=(0,_dom2.default)(el);if($el.hasClass('navbar-inner'))$el=$el.parents('.navbar');if(!$el.length)return;if($el.hasClass('navbar-hidden'))return;var className='navbar-hidden'+(animate?' navbar-transitioning':'');$el.transitionEnd(function(){$el.removeClass('navbar-transitioning');});$el.addClass(className);},show:function show(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.navbar-hidden';var animate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var $el=(0,_dom2.default)(el);if($el.hasClass('navbar-inner'))$el=$el.parents('.navbar');if(!$el.length)return;if(!$el.hasClass('navbar-hidden'))return;if(animate){$el.addClass('navbar-transitioning');$el.transitionEnd(function(){$el.removeClass('navbar-transitioning');});}$el.removeClass('navbar-hidden');},getElByPage:function getElByPage(page){var $pageEl=void 0;var $navbarEl=void 0;var pageData=void 0;if(page.$navbarEl||page.$el){pageData=page;$pageEl=page.$el;}else{$pageEl=(0,_dom2.default)(page);if($pageEl.length>0)pageData=$pageEl[0].f7Page;}if(pageData&&pageData.$navbarEl&&pageData.$navbarEl.length>0){$navbarEl=pageData.$navbarEl;}else if($pageEl){$navbarEl=$pageEl.children('.navbar').children('.navbar-inner');}if(!$navbarEl||$navbarEl&&$navbarEl.length===0)return undefined;return $navbarEl[0];},getPageByEl:function getPageByEl(navbarInnerEl){var $navbarInnerEl=(0,_dom2.default)(navbarInnerEl);if($navbarInnerEl.hasClass('navbar')){$navbarInnerEl=$navbarInnerEl.find('.navbar-inner');if($navbarInnerEl.length>1)return undefined;}return $navbarInnerEl[0].f7Page;},initHideNavbarOnScroll:function initHideNavbarOnScroll(pageEl,navbarInnerEl){var app=this;var $pageEl=(0,_dom2.default)(pageEl);var $navbarEl=(0,_dom2.default)(navbarInnerEl||app.navbar.getElByPage(pageEl)).closest('.navbar');var previousScrollTop=void 0;var currentScrollTop=void 0;var scrollHeight=void 0;var offsetHeight=void 0;var reachEnd=void 0;var action=void 0;var navbarHidden=void 0;function handleScroll(){var scrollContent=this;if($pageEl.hasClass('page-previous'))return;currentScrollTop=scrollContent.scrollTop;scrollHeight=scrollContent.scrollHeight;offsetHeight=scrollContent.offsetHeight;reachEnd=currentScrollTop+offsetHeight>=scrollHeight;navbarHidden=$navbarEl.hasClass('navbar-hidden');if(reachEnd){if(app.params.navbar.showOnPageScrollEnd){action='show';}}else if(previousScrollTop>currentScrollTop){if(app.params.navbar.showOnPageScrollTop||currentScrollTop<=44){action='show';}else{action='hide';}}else if(currentScrollTop>44){action='hide';}else{action='show';}if(action==='show'&&navbarHidden){app.navbar.show($navbarEl);navbarHidden=false;}else if(action==='hide'&&!navbarHidden){app.navbar.hide($navbarEl);navbarHidden=true;}previousScrollTop=currentScrollTop;}$pageEl.on('scroll','.page-content',handleScroll,true);$pageEl[0].f7ScrollNavbarHandler=handleScroll;}};var Navbar$1={name:'navbar',create:function create(){var app=this;Utils.extend(app,{navbar:{size:Navbar.size.bind(app),hide:Navbar.hide.bind(app),show:Navbar.show.bind(app),getElByPage:Navbar.getElByPage.bind(app),initHideNavbarOnScroll:Navbar.initHideNavbarOnScroll.bind(app)}});},params:{navbar:{scrollTopOnTitleClick:true,iosCenterTitle:true,hideOnPageScroll:false,showOnPageScrollEnd:true,showOnPageScrollTop:true}},on:{'panelBreakpoint resize':function onResize(){var app=this;if(app.theme!=='ios')return;(0,_dom2.default)('.navbar').each(function(index,navbarEl){app.navbar.size(navbarEl);});},pageBeforeRemove:function pageBeforeRemove(page){if(page.$el[0].f7ScrollNavbarHandler){page.$el.off('scroll','.page-content',page.$el[0].f7ScrollNavbarHandler,true);}},pageBeforeIn:function pageBeforeIn(page){var app=this;if(app.theme!=='ios')return;var $navbarEl=void 0;var view=page.$el.parents('.view')[0].f7View;var navbarInnerEl=app.navbar.getElByPage(page);if(!navbarInnerEl){$navbarEl=page.$el.parents('.view').children('.navbar');}else{$navbarEl=(0,_dom2.default)(navbarInnerEl).parents('.navbar');}if(page.$el.hasClass('no-navbar')||view.router.dynamicNavbar&&!navbarInnerEl){var animate=!!(page.pageFrom&&page.router.history.length>0);app.navbar.hide($navbarEl,animate);}else{app.navbar.show($navbarEl);}},pageReinit:function pageReinit(page){var app=this;if(app.theme!=='ios')return;var $navbarEl=(0,_dom2.default)(app.navbar.getElByPage(page));if(!$navbarEl||$navbarEl.length===0)return;app.navbar.size($navbarEl);},pageInit:function pageInit(page){var app=this;var $navbarEl=(0,_dom2.default)(app.navbar.getElByPage(page));if(!$navbarEl||$navbarEl.length===0)return;if(app.theme==='ios'){app.navbar.size($navbarEl);}if(app.params.navbar.hideOnPageScroll||page.$el.find('.hide-navbar-on-scroll').length||page.$el.hasClass('hide-navbar-on-scroll')||page.$el.find('.hide-bars-on-scroll').length||page.$el.hasClass('hide-bars-on-scroll')){if(page.$el.find('.keep-navbar-on-scroll').length||page.$el.hasClass('keep-navbar-on-scroll')||page.$el.find('.keep-bars-on-scroll').length||page.$el.hasClass('keep-bars-on-scroll')){return;}app.navbar.initHideNavbarOnScroll(page.el,$navbarEl[0]);}},modalOpen:function modalOpen(modal){var app=this;if(app.theme!=='ios')return;modal.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function(index,navbarEl){app.navbar.size(navbarEl);});},panelOpen:function panelOpen(panel){var app=this;if(app.theme!=='ios')return;panel.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function(index,navbarEl){app.navbar.size(navbarEl);});},panelSwipeOpen:function panelSwipeOpen(panel){var app=this;if(app.theme!=='ios')return;panel.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function(index,navbarEl){app.navbar.size(navbarEl);});},tabShow:function tabShow(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.navbar:not(.navbar-previous):not(.stacked)').each(function(index,navbarEl){app.navbar.size(navbarEl);});}},clicks:{'.navbar .title':function onTitleClick($clickedEl){var app=this;if(!app.params.navbar.scrollTopOnTitleClick)return;if($clickedEl.closest('a').length>0){return;}var pageContent=void 0;// Find active page
var navbar=$clickedEl.parents('.navbar');// Static Layout
pageContent=navbar.parents('.page-content');if(pageContent.length===0){// Fixed Layout
if(navbar.parents('.page').length>0){pageContent=navbar.parents('.page').find('.page-content');}// Through Layout
if(pageContent.length===0){if(navbar.nextAll('.page-current:not(.stacked)').length>0){pageContent=navbar.nextAll('.page-current:not(.stacked)').find('.page-content');}}}if(pageContent&&pageContent.length>0){// Check for tab
if(pageContent.hasClass('tab')){pageContent=pageContent.parent('.tabs').children('.page-content.tab-active');}if(pageContent.length>0)pageContent.scrollTop(0,300);}}}};var Toolbar={setHighlight:function setHighlight(tabbarEl){var app=this;if(app.theme!=='md')return;var $tabbarEl=(0,_dom2.default)(tabbarEl);if($tabbarEl.length===0||!($tabbarEl.hasClass('tabbar')||$tabbarEl.hasClass('tabbar-labels')))return;if($tabbarEl.find('.tab-link-highlight').length===0){$tabbarEl.children('.toolbar-inner').append('<span class="tab-link-highlight"></span>');}var $highlightEl=$tabbarEl.find('.tab-link-highlight');var $activeLink=$tabbarEl.find('.tab-link-active');var highlightWidth=void 0;var highlightTranslate=void 0;if($tabbarEl.hasClass('tabbar-scrollable')&&$activeLink&&$activeLink[0]){highlightWidth=$activeLink[0].offsetWidth+'px';highlightTranslate=$activeLink[0].offsetLeft+'px';}else{var activeIndex=$activeLink.index();var tabLinksCount=$tabbarEl.find('.tab-link').length;highlightWidth=100/tabLinksCount+'%';highlightTranslate=(app.rtl?-activeIndex:activeIndex)*100+'%';}$highlightEl.css('width',highlightWidth).transform('translate3d('+highlightTranslate+',0,0)');},init:function init(tabbarEl){var app=this;app.toolbar.setHighlight(tabbarEl);},hide:function hide(el){var animate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var $el=(0,_dom2.default)(el);if($el.hasClass('toolbar-hidden'))return;var className='toolbar-hidden'+(animate?' toolbar-transitioning':'');$el.transitionEnd(function(){$el.removeClass('toolbar-transitioning');});$el.addClass(className);},show:function show(el){var animate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var $el=(0,_dom2.default)(el);if(!$el.hasClass('toolbar-hidden'))return;if(animate){$el.addClass('toolbar-transitioning');$el.transitionEnd(function(){$el.removeClass('toolbar-transitioning');});}$el.removeClass('toolbar-hidden');},initHideToolbarOnScroll:function initHideToolbarOnScroll(pageEl){var app=this;var $pageEl=(0,_dom2.default)(pageEl);var $toolbarEl=$pageEl.parents('.view').children('.toolbar');if($toolbarEl.length===0){$toolbarEl=$pageEl.find('.toolbar');}if($toolbarEl.length===0){$toolbarEl=$pageEl.parents('.views').children('.tabbar, .tabbar-labels');}if($toolbarEl.length===0){return;}var previousScrollTop=void 0;var currentScrollTop=void 0;var scrollHeight=void 0;var offsetHeight=void 0;var reachEnd=void 0;var action=void 0;var toolbarHidden=void 0;function handleScroll(){var scrollContent=this;if($pageEl.hasClass('page-previous'))return;currentScrollTop=scrollContent.scrollTop;scrollHeight=scrollContent.scrollHeight;offsetHeight=scrollContent.offsetHeight;reachEnd=currentScrollTop+offsetHeight>=scrollHeight;toolbarHidden=$toolbarEl.hasClass('toolbar-hidden');if(reachEnd){if(app.params.toolbar.showOnPageScrollEnd){action='show';}}else if(previousScrollTop>currentScrollTop){if(app.params.toolbar.showOnPageScrollTop||currentScrollTop<=44){action='show';}else{action='hide';}}else if(currentScrollTop>44){action='hide';}else{action='show';}if(action==='show'&&toolbarHidden){app.toolbar.show($toolbarEl);toolbarHidden=false;}else if(action==='hide'&&!toolbarHidden){app.toolbar.hide($toolbarEl);toolbarHidden=true;}previousScrollTop=currentScrollTop;}$pageEl.on('scroll','.page-content',handleScroll,true);$pageEl[0].f7ScrollToolbarHandler=handleScroll;}};var Toolbar$1={name:'toolbar',create:function create(){var app=this;Utils.extend(app,{toolbar:{hide:Toolbar.hide.bind(app),show:Toolbar.show.bind(app),setHighlight:Toolbar.setHighlight.bind(app),initHideToolbarOnScroll:Toolbar.initHideToolbarOnScroll.bind(app),init:Toolbar.init.bind(app)}});},params:{toolbar:{hideOnPageScroll:false,showOnPageScrollEnd:true,showOnPageScrollTop:true}},on:{pageBeforeRemove:function pageBeforeRemove(page){if(page.$el[0].f7ScrollToolbarHandler){page.$el.off('scroll','.page-content',page.$el[0].f7ScrollToolbarHandler,true);}},pageBeforeIn:function pageBeforeIn(page){var app=this;var $toolbarEl=page.$el.parents('.view').children('.toolbar');if($toolbarEl.length===0){$toolbarEl=page.$el.find('.toolbar');}if($toolbarEl.length===0){$toolbarEl=page.$el.parents('.views').children('.tabbar, .tabbar-labels');}if($toolbarEl.length===0){return;}if(page.$el.hasClass('no-toolbar')){app.toolbar.hide($toolbarEl);}else{app.toolbar.show($toolbarEl);}},pageInit:function pageInit(page){var app=this;page.$el.find('.tabbar, .tabbar-labels').each(function(index,tabbarEl){app.toolbar.init(tabbarEl);});if(app.params.toolbar.hideOnPageScroll||page.$el.find('.hide-toolbar-on-scroll').length||page.$el.hasClass('hide-toolbar-on-scroll')||page.$el.find('.hide-bars-on-scroll').length||page.$el.hasClass('hide-bars-on-scroll')){if(page.$el.find('.keep-toolbar-on-scroll').length||page.$el.hasClass('keep-toolbar-on-scroll')||page.$el.find('.keep-bars-on-scroll').length||page.$el.hasClass('keep-bars-on-scroll')){return;}app.toolbar.initHideToolbarOnScroll(page.el);}},init:function init(){var app=this;app.root.find('.tabbar, .tabbar-labels').each(function(index,tabbarEl){app.toolbar.init(tabbarEl);});}}};var Subnavbar={name:'subnavbar',on:{pageInit:function pageInit(page){if(page.$navbarEl&&page.$navbarEl.length&&page.$navbarEl.find('.subnavbar').length){page.$el.addClass('page-with-subnavbar');}if(page.$el.find('.subnavbar').length){page.$el.addClass('page-with-subnavbar');}}}};var TouchRipple=function(){function TouchRipple($el,x,y){_classCallCheck(this,TouchRipple);var ripple=this;if(!$el)return undefined;var box=$el[0].getBoundingClientRect();var center={x:x-box.left,y:y-box.top};var width=box.width;var height=box.height;var diameter=Math.max(Math.pow(Math.pow(height,2)+Math.pow(width,2),0.5),48);ripple.$rippleWaveEl=(0,_dom2.default)('<div class="ripple-wave" style="width: '+diameter+'px; height: '+diameter+'px; margin-top:-'+diameter/2+'px; margin-left:-'+diameter/2+'px; left:'+center.x+'px; top:'+center.y+'px;"></div>');$el.prepend(ripple.$rippleWaveEl);/* eslint no-underscore-dangle: ["error", { "allow": ["_clientLeft"] }] */ripple._clientLeft=ripple.$rippleWaveEl[0].clientLeft;ripple.rippleTransform='translate3d('+(-center.x+width/2)+'px, '+(-center.y+height/2)+'px, 0) scale(1)';ripple.$rippleWaveEl.transform(ripple.rippleTransform);return ripple;}_createClass(TouchRipple,[{key:'onRemove',value:function onRemove(){var ripple=this;ripple.$rippleWaveEl.remove();Object.keys(ripple).forEach(function(key){ripple[key]=null;delete ripple[key];});ripple=null;}},{key:'remove',value:function remove(){var ripple=this;if(ripple.removing)return;var $rippleWaveEl=this.$rippleWaveEl;var rippleTransform=this.rippleTransform;var removeTimeout=Utils.nextTick(function(){ripple.onRemove();},400);ripple.removing=true;$rippleWaveEl.addClass('ripple-wave-fill').transform(rippleTransform.replace('scale(1)','scale(1.01)')).transitionEnd(function(){clearTimeout(removeTimeout);Utils.nextFrame(function(){$rippleWaveEl.addClass('ripple-wave-out').transform(rippleTransform.replace('scale(1)','scale(1.01)'));removeTimeout=Utils.nextTick(function(){ripple.onRemove();},700);$rippleWaveEl.transitionEnd(function(){clearTimeout(removeTimeout);ripple.onRemove();});});});}}]);return TouchRipple;}();var TouchRipple$1={name:'touch-ripple',static:{TouchRipple:TouchRipple},create:function create(){var app=this;app.touchRipple={create:function create(){for(var _len17=arguments.length,args=Array(_len17),_key17=0;_key17<_len17;_key17++){args[_key17]=arguments[_key17];}return new(Function.prototype.bind.apply(TouchRipple,[null].concat(_toConsumableArray(args))))();}};}};var openedModals=[];var dialogsQueue=[];function clearDialogsQueue(){if(dialogsQueue.length===0)return;var dialog=dialogsQueue.shift();dialog.open();}var Modal=function(_Framework7Class4){_inherits(Modal,_Framework7Class4);function Modal(app,params){var _ret4;_classCallCheck(this,Modal);var _this6=_possibleConstructorReturn(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).call(this,params,[app]));var modal=_this6;var defaults={};// Extend defaults with modules params
modal.useModulesParams(defaults);modal.params=Utils.extend(defaults,params);// Install Modules
modal.useModules();return _ret4=_this6,_possibleConstructorReturn(_this6,_ret4);}_createClass(Modal,[{key:'onOpen',value:function onOpen(){var modal=this;openedModals.push(modal);(0,_dom2.default)('html').addClass('with-modal-'+modal.type.toLowerCase());modal.$el.trigger('modal:open '+modal.type.toLowerCase()+':open',modal);modal.emit('local::open modalOpen '+modal.type+'Open',modal);}},{key:'onOpened',value:function onOpened(){var modal=this;modal.$el.trigger('modal:opened '+modal.type.toLowerCase()+':opened',modal);modal.emit('local::opened modalOpened '+modal.type+'Opened',modal);}},{key:'onClose',value:function onClose(){var modal=this;if(!modal.type||!modal.$el)return;openedModals.splice(openedModals.indexOf(modal),1);(0,_dom2.default)('html').removeClass('with-modal-'+modal.type.toLowerCase());modal.$el.trigger('modal:close '+modal.type.toLowerCase()+':close',modal);modal.emit('local::close modalClose '+modal.type+'Close',modal);}},{key:'onClosed',value:function onClosed(){var modal=this;if(!modal.type||!modal.$el)return;modal.$el.removeClass('modal-out');modal.$el.hide();modal.$el.trigger('modal:closed '+modal.type.toLowerCase()+':closed',modal);modal.emit('local::closed modalClosed '+modal.type+'Closed',modal);}},{key:'open',value:function open(animateModal){var modal=this;var app=modal.app;var $el=modal.$el;var $backdropEl=modal.$backdropEl;var type=modal.type;var animate=true;if(typeof animateModal!=='undefined')animate=animateModal;else if(typeof modal.params.animate!=='undefined'){animate=modal.params.animate;}if(!$el||$el.hasClass('modal-in')){return modal;}if(type==='dialog'&&app.params.modal.queueDialogs){var pushToQueue=void 0;if((0,_dom2.default)('.dialog.modal-in').length>0){pushToQueue=true;}else if(openedModals.length>0){openedModals.forEach(function(openedModal){if(openedModal.type==='dialog')pushToQueue=true;});}if(pushToQueue){dialogsQueue.push(modal);return modal;}}var $modalParentEl=$el.parent();var wasInDom=$el.parents(_ssrWindow.document).length>0;if(app.params.modal.moveToRoot&&!$modalParentEl.is(app.root)){app.root.append($el);modal.once(type+'Closed',function(){if(wasInDom){$modalParentEl.append($el);}else{$el.remove();}});}// Show Modal
$el.show();// Set Dialog offset
if(type==='dialog'){$el.css({marginTop:-Math.round($el.outerHeight()/2)+'px'});}// Emit open
/* eslint no-underscore-dangle: ["error", { "allow": ["_clientLeft"] }] */modal._clientLeft=$el[0].clientLeft;// Backdrop
if($backdropEl){$backdropEl[animate?'removeClass':'addClass']('not-animated');$backdropEl.addClass('backdrop-in');}// Modal
function transitionEnd(){if($el.hasClass('modal-out')){modal.onClosed();}else if($el.hasClass('modal-in')){modal.onOpened();}}if(animate){$el.animationEnd(function(){transitionEnd();});$el.transitionEnd(function(){transitionEnd();});$el.removeClass('modal-out not-animated').addClass('modal-in');modal.onOpen();}else{$el.removeClass('modal-out').addClass('modal-in not-animated');modal.onOpen();modal.onOpened();}return modal;}},{key:'close',value:function close(animateModal){var modal=this;var $el=modal.$el;var $backdropEl=modal.$backdropEl;var animate=true;if(typeof animateModal!=='undefined')animate=animateModal;else if(typeof modal.params.animate!=='undefined'){animate=modal.params.animate;}if(!$el||!$el.hasClass('modal-in')){return modal;}// backdrop
if($backdropEl){$backdropEl[animate?'removeClass':'addClass']('not-animated');$backdropEl.removeClass('backdrop-in');}// Modal
$el[animate?'removeClass':'addClass']('not-animated');function transitionEnd(){if($el.hasClass('modal-out')){modal.onClosed();}else if($el.hasClass('modal-in')){modal.onOpened();}}if(animate){$el.animationEnd(function(){transitionEnd();});$el.transitionEnd(function(){transitionEnd();});$el.removeClass('modal-in').addClass('modal-out');// Emit close
modal.onClose();}else{$el.addClass('not-animated').removeClass('modal-in').addClass('modal-out');// Emit close
modal.onClose();modal.onClosed();}if(modal.type==='dialog'){clearDialogsQueue();}return modal;}},{key:'destroy',value:function destroy(){var modal=this;if(modal.destroyed)return;modal.emit('local::beforeDestroy modalBeforeDestroy '+modal.type+'BeforeDestroy',modal);if(modal.$el){modal.$el.trigger('modal:beforedestroy '+modal.type.toLowerCase()+':beforedestroy',modal);if(modal.$el.length&&modal.$el[0].f7Modal){delete modal.$el[0].f7Modal;}}Utils.deleteProps(modal);modal.destroyed=true;}}]);return Modal;}(Framework7Class);var CustomModal=function(_Modal){_inherits(CustomModal,_Modal);function CustomModal(app,params){var _ret7;_classCallCheck(this,CustomModal);var extendedParams=Utils.extend({backdrop:true,closeByBackdropClick:true,on:{}},params);// Extends with open/close Modal methods;
var _this7=_possibleConstructorReturn(this,(CustomModal.__proto__||Object.getPrototypeOf(CustomModal)).call(this,app,extendedParams));var customModal=_this7;customModal.params=extendedParams;// Find Element
var $el=void 0;if(!customModal.params.el){$el=(0,_dom2.default)(customModal.params.content);}else{$el=(0,_dom2.default)(customModal.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret5;return _ret5=$el[0].f7Modal,_possibleConstructorReturn(_this7,_ret5);}if($el.length===0){var _ret6;return _ret6=customModal.destroy(),_possibleConstructorReturn(_this7,_ret6);}var $backdropEl=void 0;if(customModal.params.backdrop){$backdropEl=app.root.children('.custom-modal-backdrop');if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="custom-modal-backdrop"></div>');app.root.append($backdropEl);}}function handleClick(e){if(!customModal||customModal.destroyed)return;if($backdropEl&&e.target===$backdropEl[0]){customModal.close();}}customModal.on('customModalOpened',function(){if(customModal.params.closeByBackdropClick&&customModal.params.backdrop){app.on('click',handleClick);}});customModal.on('customModalClose',function(){if(customModal.params.closeByBackdropClick&&customModal.params.backdrop){app.off('click',handleClick);}});Utils.extend(customModal,{app:app,$el:$el,el:$el[0],$backdropEl:$backdropEl,backdropEl:$backdropEl&&$backdropEl[0],type:'customModal'});$el[0].f7Modal=customModal;return _ret7=customModal,_possibleConstructorReturn(_this7,_ret7);}return CustomModal;}(Modal);var Modal$1={name:'modal',static:{Modal:Modal,CustomModal:CustomModal},create:function create(){var app=this;app.customModal={create:function create(params){return new CustomModal(app,params);}};},params:{modal:{moveToRoot:true,queueDialogs:true}}};var Dialog=function(_Modal2){_inherits(Dialog,_Modal2);function Dialog(app,params){var _ret10;_classCallCheck(this,Dialog);var extendedParams=Utils.extend({title:app.params.dialog.title,text:undefined,content:'',buttons:[],verticalButtons:false,onClick:undefined,cssClass:undefined,destroyOnClose:false,on:{}},params);if(typeof extendedParams.closeByBackdropClick==='undefined'){extendedParams.closeByBackdropClick=app.params.dialog.closeByBackdropClick;}// Extends with open/close Modal methods;
var _this8=_possibleConstructorReturn(this,(Dialog.__proto__||Object.getPrototypeOf(Dialog)).call(this,app,extendedParams));var dialog=_this8;var title=extendedParams.title,text=extendedParams.text,content=extendedParams.content,buttons=extendedParams.buttons,verticalButtons=extendedParams.verticalButtons,cssClass=extendedParams.cssClass;dialog.params=extendedParams;// Find Element
var $el=void 0;if(!dialog.params.el){var dialogClasses=['dialog'];if(buttons.length===0)dialogClasses.push('dialog-no-buttons');if(buttons.length>0)dialogClasses.push('dialog-buttons-'+buttons.length);if(verticalButtons)dialogClasses.push('dialog-buttons-vertical');if(cssClass)dialogClasses.push(cssClass);var buttonsHTML='';if(buttons.length>0){buttonsHTML='\n          <div class="dialog-buttons">\n            '+buttons.map(function(button){return'\n              <span class="dialog-button'+(button.bold?' dialog-button-bold':'')+(button.color?' color-'+button.color:'')+(button.cssClass?' '+button.cssClass:'')+'">'+button.text+'</span>\n            ';}).join('')+'\n          </div>\n        ';}var dialogHtml='\n        <div class="'+dialogClasses.join(' ')+'">\n          <div class="dialog-inner">\n            '+(title?'<div class="dialog-title">'+title+'</div>':'')+'\n            '+(text?'<div class="dialog-text">'+text+'</div>':'')+'\n            '+content+'\n          </div>\n          '+buttonsHTML+'\n        </div>\n      ';$el=(0,_dom2.default)(dialogHtml);}else{$el=(0,_dom2.default)(dialog.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret8;return _ret8=$el[0].f7Modal,_possibleConstructorReturn(_this8,_ret8);}if($el.length===0){var _ret9;return _ret9=dialog.destroy(),_possibleConstructorReturn(_this8,_ret9);}var $backdropEl=app.root.children('.dialog-backdrop');if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="dialog-backdrop"></div>');app.root.append($backdropEl);}// Assign events
function buttonOnClick(e){var buttonEl=this;var index=(0,_dom2.default)(buttonEl).index();var button=buttons[index];if(button.onClick)button.onClick(dialog,e);if(dialog.params.onClick)dialog.params.onClick(dialog,index);if(button.close!==false)dialog.close();}var addKeyboardHander=void 0;function onKeyPress(e){var keyCode=e.keyCode;buttons.forEach(function(button,index){if(button.keyCodes&&button.keyCodes.indexOf(keyCode)>=0){if(_ssrWindow.document.activeElement)_ssrWindow.document.activeElement.blur();if(button.onClick)button.onClick(dialog,e);if(dialog.params.onClick)dialog.params.onClick(dialog,index);if(button.close!==false)dialog.close();}});}if(buttons&&buttons.length>0){dialog.on('open',function(){$el.find('.dialog-button').each(function(index,buttonEl){var button=buttons[index];if(button.keyCodes)addKeyboardHander=true;(0,_dom2.default)(buttonEl).on('click',buttonOnClick);});if(addKeyboardHander&&!app.device.ios&&!app.device.android&&!app.device.cordova){(0,_dom2.default)(_ssrWindow.document).on('keydown',onKeyPress);}});dialog.on('close',function(){$el.find('.dialog-button').each(function(index,buttonEl){(0,_dom2.default)(buttonEl).off('click',buttonOnClick);});if(addKeyboardHander&&!app.device.ios&&!app.device.android&&!app.device.cordova){(0,_dom2.default)(_ssrWindow.document).off('keydown',onKeyPress);}addKeyboardHander=false;});}Utils.extend(dialog,{app:app,$el:$el,el:$el[0],$backdropEl:$backdropEl,backdropEl:$backdropEl[0],type:'dialog',setProgress:function setProgress(progress,duration){app.progressbar.set($el.find('.progressbar'),progress,duration);return dialog;},setText:function setText(newText){var $textEl=$el.find('.dialog-text');if($textEl.length===0){$textEl=(0,_dom2.default)('<div class="dialog-text"></div>');if(typeof title!=='undefined'){$textEl.insertAfter($el.find('.dialog-title'));}else{$el.find('.dialog-inner').prepend($textEl);}}$textEl.html(newText);dialog.params.text=newText;return dialog;},setTitle:function setTitle(newTitle){var $titleEl=$el.find('.dialog-title');if($titleEl.length===0){$titleEl=(0,_dom2.default)('<div class="dialog-title"></div>');$el.find('.dialog-inner').prepend($titleEl);}$titleEl.html(newTitle);dialog.params.title=newTitle;return dialog;}});function handleClick(e){var target=e.target;var $target=(0,_dom2.default)(target);if($target.closest(dialog.el).length===0){if(dialog.params.closeByBackdropClick&&dialog.backdropEl&&dialog.backdropEl===target){dialog.close();}}}dialog.on('opened',function(){if(dialog.params.closeByBackdropClick){app.on('click',handleClick);}});dialog.on('close',function(){if(dialog.params.closeByBackdropClick){app.off('click',handleClick);}});$el[0].f7Modal=dialog;if(dialog.params.destroyOnClose){dialog.once('closed',function(){setTimeout(function(){dialog.destroy();},0);});}return _ret10=dialog,_possibleConstructorReturn(_this8,_ret10);}return Dialog;}(Modal);function ConstructorMethods(){var parameters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var defaultSelector=parameters.defaultSelector,constructor=parameters.constructor,domProp=parameters.domProp,app=parameters.app,addMethods=parameters.addMethods;var methods={create:function create(){for(var _len18=arguments.length,args=Array(_len18),_key18=0;_key18<_len18;_key18++){args[_key18]=arguments[_key18];}if(app)return new(Function.prototype.bind.apply(constructor,[null].concat([app],_toConsumableArray(args))))();return new(Function.prototype.bind.apply(constructor,[null].concat(_toConsumableArray(args))))();},get:function get(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultSelector;if(el instanceof constructor)return el;var $el=(0,_dom2.default)(el);if($el.length===0)return undefined;return $el[0][domProp];},destroy:function destroy(el){var instance=methods.get(el);if(instance&&instance.destroy)return instance.destroy();return undefined;}};if(addMethods&&Array.isArray(addMethods)){addMethods.forEach(function(methodName){methods[methodName]=function(){for(var _len19=arguments.length,args=Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++){args[_key19-1]=arguments[_key19];}var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultSelector;var instance=methods.get(el);if(instance&&instance[methodName])return instance[methodName].apply(instance,args);return undefined;};});}return methods;}function ModalMethods(){var parameters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var defaultSelector=parameters.defaultSelector,constructor=parameters.constructor,app=parameters.app;var methods=Utils.extend(ConstructorMethods({defaultSelector:defaultSelector,constructor:constructor,app:app,domProp:'f7Modal'}),{open:function open(el,animate){var $el=(0,_dom2.default)(el);var instance=$el[0].f7Modal;if(!instance)instance=new constructor(app,{el:$el});return instance.open(animate);},close:function close(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultSelector;var animate=arguments[1];var $el=(0,_dom2.default)(el);if($el.length===0)return undefined;var instance=$el[0].f7Modal;if(!instance)instance=new constructor(app,{el:$el});return instance.close(animate);}});return methods;}var Dialog$1={name:'dialog',params:{dialog:{title:undefined,buttonOk:'OK',buttonCancel:'Cancel',usernamePlaceholder:'Username',passwordPlaceholder:'Password',preloaderTitle:'Loading... ',progressTitle:'Loading... ',closeByBackdropClick:false,destroyPredefinedDialogs:true,keyboardActions:true}},static:{Dialog:Dialog},create:function create(){var app=this;var defaultDialogTitle=app.params.dialog.title||app.name;var destroyOnClose=app.params.dialog.destroyPredefinedDialogs;var keyboardActions=app.params.dialog.keyboardActions;app.dialog=Utils.extend(ModalMethods({app:app,constructor:Dialog,defaultSelector:'.dialog.modal-in'}),{// Shortcuts
alert:function alert(){for(var _len20=arguments.length,args=Array(_len20),_key20=0;_key20<_len20;_key20++){args[_key20]=arguments[_key20];}var _args=_slicedToArray(args,3),text=_args[0],title=_args[1],callbackOk=_args[2];if(args.length===2&&typeof args[1]==='function'){var _args2=_slicedToArray(args,3);text=_args2[0];callbackOk=_args2[1];title=_args2[2];}return new Dialog(app,{title:typeof title==='undefined'?defaultDialogTitle:title,text:text,buttons:[{text:app.params.dialog.buttonOk,bold:true,onClick:callbackOk,keyCodes:keyboardActions?[13,27]:null}],destroyOnClose:destroyOnClose}).open();},prompt:function prompt(){for(var _len21=arguments.length,args=Array(_len21),_key21=0;_key21<_len21;_key21++){args[_key21]=arguments[_key21];}var _args3=_slicedToArray(args,4),text=_args3[0],title=_args3[1],callbackOk=_args3[2],callbackCancel=_args3[3];if(typeof args[1]==='function'){var _args4=_slicedToArray(args,4);text=_args4[0];callbackOk=_args4[1];callbackCancel=_args4[2];title=_args4[3];}return new Dialog(app,{title:typeof title==='undefined'?defaultDialogTitle:title,text:text,content:'<div class="dialog-input-field item-input"><div class="item-input-wrap"><input type="text" class="dialog-input"></div></div>',buttons:[{text:app.params.dialog.buttonCancel,keyCodes:keyboardActions?[27]:null},{text:app.params.dialog.buttonOk,bold:true,keyCodes:keyboardActions?[13]:null}],onClick:function onClick(dialog,index){var inputValue=dialog.$el.find('.dialog-input').val();if(index===0&&callbackCancel)callbackCancel(inputValue);if(index===1&&callbackOk)callbackOk(inputValue);},destroyOnClose:destroyOnClose}).open();},confirm:function confirm(){for(var _len22=arguments.length,args=Array(_len22),_key22=0;_key22<_len22;_key22++){args[_key22]=arguments[_key22];}var _args5=_slicedToArray(args,4),text=_args5[0],title=_args5[1],callbackOk=_args5[2],callbackCancel=_args5[3];if(typeof args[1]==='function'){var _args6=_slicedToArray(args,4);text=_args6[0];callbackOk=_args6[1];callbackCancel=_args6[2];title=_args6[3];}return new Dialog(app,{title:typeof title==='undefined'?defaultDialogTitle:title,text:text,buttons:[{text:app.params.dialog.buttonCancel,onClick:callbackCancel,keyCodes:keyboardActions?[27]:null},{text:app.params.dialog.buttonOk,bold:true,onClick:callbackOk,keyCodes:keyboardActions?[13]:null}],destroyOnClose:destroyOnClose}).open();},login:function login(){for(var _len23=arguments.length,args=Array(_len23),_key23=0;_key23<_len23;_key23++){args[_key23]=arguments[_key23];}var _args7=_slicedToArray(args,4),text=_args7[0],title=_args7[1],callbackOk=_args7[2],callbackCancel=_args7[3];if(typeof args[1]==='function'){var _args8=_slicedToArray(args,4);text=_args8[0];callbackOk=_args8[1];callbackCancel=_args8[2];title=_args8[3];}return new Dialog(app,{title:typeof title==='undefined'?defaultDialogTitle:title,text:text,content:'\n              <div class="dialog-input-field dialog-input-double item-input">\n                <div class="item-input-wrap">\n                  <input type="text" name="dialog-username" placeholder="'+app.params.dialog.usernamePlaceholder+'" class="dialog-input">\n                </div>\n              </div>\n              <div class="dialog-input-field dialog-input-double item-input">\n                <div class="item-input-wrap">\n                  <input type="password" name="dialog-password" placeholder="'+app.params.dialog.passwordPlaceholder+'" class="dialog-input">\n                </div>\n              </div>',buttons:[{text:app.params.dialog.buttonCancel,keyCodes:keyboardActions?[27]:null},{text:app.params.dialog.buttonOk,bold:true,keyCodes:keyboardActions?[13]:null}],onClick:function onClick(dialog,index){var username=dialog.$el.find('[name="dialog-username"]').val();var password=dialog.$el.find('[name="dialog-password"]').val();if(index===0&&callbackCancel)callbackCancel(username,password);if(index===1&&callbackOk)callbackOk(username,password);},destroyOnClose:destroyOnClose}).open();},password:function password(){for(var _len24=arguments.length,args=Array(_len24),_key24=0;_key24<_len24;_key24++){args[_key24]=arguments[_key24];}var _args9=_slicedToArray(args,4),text=_args9[0],title=_args9[1],callbackOk=_args9[2],callbackCancel=_args9[3];if(typeof args[1]==='function'){var _args10=_slicedToArray(args,4);text=_args10[0];callbackOk=_args10[1];callbackCancel=_args10[2];title=_args10[3];}return new Dialog(app,{title:typeof title==='undefined'?defaultDialogTitle:title,text:text,content:'\n              <div class="dialog-input-field item-input">\n                <div class="item-input-wrap">\n                  <input type="password" name="dialog-password" placeholder="'+app.params.dialog.passwordPlaceholder+'" class="dialog-input">\n                </div>\n              </div>',buttons:[{text:app.params.dialog.buttonCancel,keyCodes:keyboardActions?[27]:null},{text:app.params.dialog.buttonOk,bold:true,keyCodes:keyboardActions?[13]:null}],onClick:function onClick(dialog,index){var password=dialog.$el.find('[name="dialog-password"]').val();if(index===0&&callbackCancel)callbackCancel(password);if(index===1&&callbackOk)callbackOk(password);},destroyOnClose:destroyOnClose}).open();},preloader:function preloader(title){var preloaderInner=app.theme!=='md'?'':Utils.mdPreloaderContent;return new Dialog(app,{title:typeof title==='undefined'?app.params.dialog.preloaderTitle:title,content:'<div class="preloader">'+preloaderInner+'</div>',cssClass:'dialog-preloader',destroyOnClose:destroyOnClose}).open();},progress:function progress(){for(var _len25=arguments.length,args=Array(_len25),_key25=0;_key25<_len25;_key25++){args[_key25]=arguments[_key25];}var _args11=_slicedToArray(args,3),title=_args11[0],progress=_args11[1],color=_args11[2];if(args.length===2){if(typeof args[0]==='number'){var _args12=_slicedToArray(args,3);progress=_args12[0];color=_args12[1];title=_args12[2];}else if(typeof args[0]==='string'&&typeof args[1]==='string'){var _args13=_slicedToArray(args,3);title=_args13[0];color=_args13[1];progress=_args13[2];}}else if(args.length===1){if(typeof args[0]==='number'){var _args14=_slicedToArray(args,3);progress=_args14[0];title=_args14[1];color=_args14[2];}}var infinite=typeof progress==='undefined';var dialog=new Dialog(app,{title:typeof title==='undefined'?app.params.dialog.progressTitle:title,cssClass:'dialog-progress',content:'\n              <div class="progressbar'+(infinite?'-infinite':'')+(color?' color-'+color:'')+'">\n                '+(!infinite?'<span></span>':'')+'\n              </div>\n            ',destroyOnClose:destroyOnClose});if(!infinite)dialog.setProgress(progress);return dialog.open();}});}};var Popup=function(_Modal3){_inherits(Popup,_Modal3);function Popup(app,params){var _ret13;_classCallCheck(this,Popup);var extendedParams=Utils.extend({on:{}},app.params.popup,params);// Extends with open/close Modal methods;
var _this9=_possibleConstructorReturn(this,(Popup.__proto__||Object.getPrototypeOf(Popup)).call(this,app,extendedParams));var popup=_this9;popup.params=extendedParams;// Find Element
var $el=void 0;if(!popup.params.el){$el=(0,_dom2.default)(popup.params.content);}else{$el=(0,_dom2.default)(popup.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret11;return _ret11=$el[0].f7Modal,_possibleConstructorReturn(_this9,_ret11);}if($el.length===0){var _ret12;return _ret12=popup.destroy(),_possibleConstructorReturn(_this9,_ret12);}var $backdropEl=void 0;if(popup.params.backdrop){$backdropEl=app.root.children('.popup-backdrop');if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="popup-backdrop"></div>');app.root.append($backdropEl);}}Utils.extend(popup,{app:app,$el:$el,el:$el[0],$backdropEl:$backdropEl,backdropEl:$backdropEl&&$backdropEl[0],type:'popup'});function handleClick(e){var target=e.target;var $target=(0,_dom2.default)(target);if($target.closest(popup.el).length===0){if(popup.params&&popup.params.closeByBackdropClick&&popup.params.backdrop&&popup.backdropEl&&popup.backdropEl===target){popup.close();}}}popup.on('popupOpened',function(){if(popup.params.closeByBackdropClick){app.on('click',handleClick);}});popup.on('popupClose',function(){if(popup.params.closeByBackdropClick){app.off('click',handleClick);}});$el[0].f7Modal=popup;return _ret13=popup,_possibleConstructorReturn(_this9,_ret13);}return Popup;}(Modal);var Popup$1={name:'popup',params:{popup:{backdrop:true,closeByBackdropClick:true}},static:{Popup:Popup},create:function create(){var app=this;app.popup=ModalMethods({app:app,constructor:Popup,defaultSelector:'.popup.modal-in'});},clicks:{'.popup-open':function openPopup($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.popup.open(data.popup,data.animate);},'.popup-close':function closePopup($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.popup.close(data.popup,data.animate);}}};var LoginScreen=function(_Modal4){_inherits(LoginScreen,_Modal4);function LoginScreen(app,params){var _ret16;_classCallCheck(this,LoginScreen);var extendedParams=Utils.extend({on:{}},params);// Extends with open/close Modal methods;
var _this10=_possibleConstructorReturn(this,(LoginScreen.__proto__||Object.getPrototypeOf(LoginScreen)).call(this,app,extendedParams));var loginScreen=_this10;loginScreen.params=extendedParams;// Find Element
var $el=void 0;if(!loginScreen.params.el){$el=(0,_dom2.default)(loginScreen.params.content);}else{$el=(0,_dom2.default)(loginScreen.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret14;return _ret14=$el[0].f7Modal,_possibleConstructorReturn(_this10,_ret14);}if($el.length===0){var _ret15;return _ret15=loginScreen.destroy(),_possibleConstructorReturn(_this10,_ret15);}Utils.extend(loginScreen,{app:app,$el:$el,el:$el[0],type:'loginScreen'});$el[0].f7Modal=loginScreen;return _ret16=loginScreen,_possibleConstructorReturn(_this10,_ret16);}return LoginScreen;}(Modal);var LoginScreen$1={name:'loginScreen',static:{LoginScreen:LoginScreen},create:function create(){var app=this;app.loginScreen=ModalMethods({app:app,constructor:LoginScreen,defaultSelector:'.login-screen.modal-in'});},clicks:{'.login-screen-open':function openLoginScreen($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.loginScreen.open(data.loginScreen,data.animate);},'.login-screen-close':function closeLoginScreen($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.loginScreen.close(data.loginScreen,data.animate);}}};var Popover=function(_Modal5){_inherits(Popover,_Modal5);function Popover(app,params){var _ret19;_classCallCheck(this,Popover);var extendedParams=Utils.extend({on:{}},app.params.popover,params);// Extends with open/close Modal methods;
var _this11=_possibleConstructorReturn(this,(Popover.__proto__||Object.getPrototypeOf(Popover)).call(this,app,extendedParams));var popover=_this11;popover.params=extendedParams;// Find Element
var $el=void 0;if(!popover.params.el){$el=(0,_dom2.default)(popover.params.content);}else{$el=(0,_dom2.default)(popover.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret17;return _ret17=$el[0].f7Modal,_possibleConstructorReturn(_this11,_ret17);}// Find Target
var $targetEl=(0,_dom2.default)(popover.params.targetEl).eq(0);if($el.length===0){var _ret18;return _ret18=popover.destroy(),_possibleConstructorReturn(_this11,_ret18);}// Backdrop
var $backdropEl=void 0;if(popover.params.backdrop){$backdropEl=app.root.children('.popover-backdrop');if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="popover-backdrop"></div>');app.root.append($backdropEl);}}// Find Angle
var $angleEl=void 0;if($el.find('.popover-angle').length===0){$angleEl=(0,_dom2.default)('<div class="popover-angle"></div>');$el.prepend($angleEl);}else{$angleEl=$el.find('.popover-angle');}// Open
var originalOpen=popover.open;Utils.extend(popover,{app:app,$el:$el,el:$el[0],$targetEl:$targetEl,targetEl:$targetEl[0],$angleEl:$angleEl,angleEl:$angleEl[0],$backdropEl:$backdropEl,backdropEl:$backdropEl&&$backdropEl[0],type:'popover',open:function open(){for(var _len26=arguments.length,args=Array(_len26),_key26=0;_key26<_len26;_key26++){args[_key26]=arguments[_key26];}var _args15=_slicedToArray(args,2),targetEl=_args15[0],animate=_args15[1];if(typeof args[0]==='boolean'){;var _args16=_slicedToArray(args,2);animate=_args16[0];targetEl=_args16[1];}if(targetEl){popover.$targetEl=(0,_dom2.default)(targetEl);popover.targetEl=popover.$targetEl[0];}originalOpen.call(popover,animate);}});function handleResize(){popover.resize();}popover.on('popoverOpen',function(){popover.resize();app.on('resize',handleResize);popover.on('popoverClose popoverBeforeDestroy',function(){app.off('resize',handleResize);});});function handleClick(e){var target=e.target;var $target=(0,_dom2.default)(target);if($target.closest(popover.el).length===0){if(popover.params.closeByBackdropClick&&popover.params.backdrop&&popover.backdropEl&&popover.backdropEl===target){popover.close();}else if(popover.params.closeByOutsideClick){popover.close();}}}popover.on('popoverOpened',function(){if(popover.params.closeByOutsideClick||popover.params.closeByBackdropClick){app.on('click',handleClick);}});popover.on('popoverClose',function(){if(popover.params.closeByOutsideClick||popover.params.closeByBackdropClick){app.off('click',handleClick);}});$el[0].f7Modal=popover;return _ret19=popover,_possibleConstructorReturn(_this11,_ret19);}_createClass(Popover,[{key:'resize',value:function resize(){var popover=this;var app=popover.app,$el=popover.$el,$targetEl=popover.$targetEl,$angleEl=popover.$angleEl;var _popover$params=popover.params,targetX=_popover$params.targetX,targetY=_popover$params.targetY;$el.css({left:'',top:''});var _ref4=[$el.width(),$el.height()],width=_ref4[0],height=_ref4[1];var angleSize=0;var angleLeft=void 0;var angleTop=void 0;if(app.theme==='ios'){$angleEl.removeClass('on-left on-right on-top on-bottom').css({left:'',top:''});angleSize=$angleEl.width()/2;}else{$el.removeClass('popover-on-left popover-on-right popover-on-top popover-on-bottom').css({left:'',top:''});}var targetWidth=void 0;var targetHeight=void 0;var targetOffsetLeft=void 0;var targetOffsetTop=void 0;if($targetEl&&$targetEl.length>0){targetWidth=$targetEl.outerWidth();targetHeight=$targetEl.outerHeight();var targetOffset=$targetEl.offset();targetOffsetLeft=targetOffset.left-app.left;targetOffsetTop=targetOffset.top-app.top;var targetParentPage=$targetEl.parents('.page');if(targetParentPage.length>0){targetOffsetTop-=targetParentPage[0].scrollTop;}}else if(typeof targetX!=='undefined'&&targetY!=='undefined'){targetOffsetLeft=targetX;targetOffsetTop=targetY;targetWidth=popover.params.targetWidth||0;targetHeight=popover.params.targetHeight||0;}var left=0,top=0,diff=0;// Top Position
var position=app.theme==='md'?'bottom':'top';if(app.theme==='md'){if(height<app.height-targetOffsetTop-targetHeight){// On bottom
position='bottom';top=targetOffsetTop;}else if(height<targetOffsetTop){// On top
top=targetOffsetTop-height+targetHeight;position='top';}else{// On middle
position='bottom';top=targetOffsetTop;}if(top<=0){top=8;}else if(top+height>=app.height){top=app.height-height-8;}// Horizontal Position
left=targetOffsetLeft+targetWidth-width-8;if(left+width>=app.width-8){left=targetOffsetLeft+targetWidth-width-8;}if(left<8){left=8;}if(position==='top'){$el.addClass('popover-on-top');}if(position==='bottom'){$el.addClass('popover-on-bottom');}}else{if(height+angleSize<targetOffsetTop){// On top
top=targetOffsetTop-height-angleSize;}else if(height+angleSize<app.height-targetOffsetTop-targetHeight){// On bottom
position='bottom';top=targetOffsetTop+targetHeight+angleSize;}else{// On middle
position='middle';top=targetHeight/2+targetOffsetTop-height/2;diff=top;if(top<=0){top=5;}else if(top+height>=app.height){top=app.height-height-5;}diff-=top;}// Horizontal Position
if(position==='top'||position==='bottom'){left=targetWidth/2+targetOffsetLeft-width/2;diff=left;if(left<5)left=5;if(left+width>app.width)left=app.width-width-5;if(left<0)left=0;if(position==='top'){$angleEl.addClass('on-bottom');}if(position==='bottom'){$angleEl.addClass('on-top');}diff-=left;angleLeft=width/2-angleSize+diff;angleLeft=Math.max(Math.min(angleLeft,width-angleSize*2-13),13);$angleEl.css({left:angleLeft+'px'});}else if(position==='middle'){left=targetOffsetLeft-width-angleSize;$angleEl.addClass('on-right');if(left<5||left+width>app.width){if(left<5)left=targetOffsetLeft+targetWidth+angleSize;if(left+width>app.width)left=app.width-width-5;$angleEl.removeClass('on-right').addClass('on-left');}angleTop=height/2-angleSize+diff;angleTop=Math.max(Math.min(angleTop,height-angleSize*2-13),13);$angleEl.css({top:angleTop+'px'});}}// Apply Styles
$el.css({top:top+'px',left:left+'px'});}}]);return Popover;}(Modal);var Popover$1={name:'popover',params:{popover:{closeByBackdropClick:true,closeByOutsideClick:false,backdrop:true}},static:{Popover:Popover},create:function create(){var app=this;app.popover=Utils.extend(ModalMethods({app:app,constructor:Popover,defaultSelector:'.popover.modal-in'}),{open:function open(popoverEl,targetEl,animate){var $popoverEl=(0,_dom2.default)(popoverEl);var popover=$popoverEl[0].f7Modal;if(!popover)popover=new Popover(app,{el:$popoverEl,targetEl:targetEl});return popover.open(targetEl,animate);}});},clicks:{'.popover-open':function openPopover($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.popover.open(data.popover,$clickedEl,data.animate);},'.popover-close':function closePopover($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.popover.close(data.popover,data.animate);}}};/* eslint indent: ["off"] */var Actions=function(_Modal6){_inherits(Actions,_Modal6);function Actions(app,params){var _ret22;_classCallCheck(this,Actions);var extendedParams=Utils.extend({on:{}},app.params.actions,params);// Extends with open/close Modal methods;
var _this12=_possibleConstructorReturn(this,(Actions.__proto__||Object.getPrototypeOf(Actions)).call(this,app,extendedParams));var actions=_this12;actions.params=extendedParams;// Buttons
var groups=void 0;if(actions.params.buttons){groups=actions.params.buttons;if(!Array.isArray(groups[0]))groups=[groups];}actions.groups=groups;// Find Element
var $el=void 0;if(actions.params.el){$el=(0,_dom2.default)(actions.params.el);}else if(actions.params.content){$el=(0,_dom2.default)(actions.params.content);}else if(actions.params.buttons){if(actions.params.convertToPopover){actions.popoverHtml=actions.renderPopover();}actions.actionsHtml=actions.render();}if($el&&$el.length>0&&$el[0].f7Modal){var _ret20;return _ret20=$el[0].f7Modal,_possibleConstructorReturn(_this12,_ret20);}if($el&&$el.length===0&&!(actions.actionsHtml||actions.popoverHtml)){var _ret21;return _ret21=actions.destroy(),_possibleConstructorReturn(_this12,_ret21);}// Backdrop
var $backdropEl=void 0;if(actions.params.backdrop){$backdropEl=app.root.children('.actions-backdrop');if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="actions-backdrop"></div>');app.root.append($backdropEl);}}var originalOpen=actions.open;var originalClose=actions.close;var popover=void 0;function buttonOnClick(e){var buttonEl=this;var buttonIndex=void 0;var groupIndex=void 0;if((0,_dom2.default)(buttonEl).hasClass('item-link')){buttonIndex=(0,_dom2.default)(buttonEl).parents('li').index();groupIndex=(0,_dom2.default)(buttonEl).parents('.list').index();}else{buttonIndex=(0,_dom2.default)(buttonEl).index();groupIndex=(0,_dom2.default)(buttonEl).parents('.actions-group').index();}if(typeof groups!=='undefined'){var button=groups[groupIndex][buttonIndex];if(button.onClick)button.onClick(actions,e);if(actions.params.onClick)actions.params.onClick(actions,e);if(button.close!==false)actions.close();}}actions.open=function open(animate){var convertToPopover=false;var _actions$params=actions.params,targetEl=_actions$params.targetEl,targetX=_actions$params.targetX,targetY=_actions$params.targetY,targetWidth=_actions$params.targetWidth,targetHeight=_actions$params.targetHeight;if(actions.params.convertToPopover&&(targetEl||targetX!==undefined&&targetY!==undefined)){// Popover
if(actions.params.forceToPopover||app.device.ios&&app.device.ipad||app.width>=768){convertToPopover=true;}}if(convertToPopover&&actions.popoverHtml){popover=app.popover.create({content:actions.popoverHtml,backdrop:actions.params.backdrop,targetEl:targetEl,targetX:targetX,targetY:targetY,targetWidth:targetWidth,targetHeight:targetHeight});popover.open(animate);popover.once('popoverOpened',function(){popover.$el.find('.item-link').each(function(groupIndex,buttonEl){(0,_dom2.default)(buttonEl).on('click',buttonOnClick);});});popover.once('popoverClosed',function(){popover.$el.find('.item-link').each(function(groupIndex,buttonEl){(0,_dom2.default)(buttonEl).off('click',buttonOnClick);});Utils.nextTick(function(){popover.destroy();popover=undefined;});});}else{actions.$el=actions.actionsHtml?(0,_dom2.default)(actions.actionsHtml):actions.$el;actions.$el[0].f7Modal=actions;if(actions.groups){actions.$el.find('.actions-button').each(function(groupIndex,buttonEl){(0,_dom2.default)(buttonEl).on('click',buttonOnClick);});actions.once('actionsClosed',function(){actions.$el.find('.actions-button').each(function(groupIndex,buttonEl){(0,_dom2.default)(buttonEl).off('click',buttonOnClick);});});}actions.el=actions.$el[0];originalOpen.call(actions,animate);}return actions;};actions.close=function close(animate){if(popover){popover.close(animate);}else{originalClose.call(actions,animate);}return actions;};Utils.extend(actions,{app:app,$el:$el,el:$el?$el[0]:undefined,$backdropEl:$backdropEl,backdropEl:$backdropEl&&$backdropEl[0],type:'actions'});function handleClick(e){var target=e.target;var $target=(0,_dom2.default)(target);if($target.closest(actions.el).length===0){if(actions.params.closeByBackdropClick&&actions.params.backdrop&&actions.backdropEl&&actions.backdropEl===target){actions.close();}else if(actions.params.closeByOutsideClick){actions.close();}}}actions.on('opened',function(){if(actions.params.closeByBackdropClick||actions.params.closeByOutsideClick){app.on('click',handleClick);}});actions.on('close',function(){if(actions.params.closeByBackdropClick||actions.params.closeByOutsideClick){app.off('click',handleClick);}});if($el){$el[0].f7Modal=actions;}return _ret22=actions,_possibleConstructorReturn(_this12,_ret22);}_createClass(Actions,[{key:'render',value:function render(){var actions=this;if(actions.params.render)return actions.params.render.call(actions,actions);var groups=actions.groups;return('\n      <div class="actions-modal'+(actions.params.grid?' actions-grid':'')+'">\n        '+groups.map(function(group){return'<div class="actions-group">\n            '+group.map(function(button){var buttonClasses=['actions-'+(button.label?'label':'button')];var color=button.color,bg=button.bg,bold=button.bold,disabled=button.disabled,label=button.label,text=button.text,icon=button.icon;if(color)buttonClasses.push('color-'+color);if(bg)buttonClasses.push('bg-color-'+bg);if(bold)buttonClasses.push('actions-button-bold');if(disabled)buttonClasses.push('disabled');if(label){return'<div class="'+buttonClasses.join(' ')+'">'+text+'</div>';}return('\n                <div class="'+buttonClasses.join(' ')+'">\n                  '+(icon?'<div class="actions-button-media">'+icon+'</div>':'')+'\n                  <div class="actions-button-text">'+text+'</div>\n                </div>').trim();}).join('')+'\n          </div>';}).join('')+'\n      </div>\n    ').trim();}},{key:'renderPopover',value:function renderPopover(){var actions=this;if(actions.params.renderPopover)return actions.params.renderPopover.call(actions,actions);var groups=actions.groups;return('\n      <div class="popover popover-from-actions">\n        <div class="popover-inner">\n          '+groups.map(function(group){return'\n            <div class="list">\n              <ul>\n                '+group.map(function(button){var itemClasses=[];var color=button.color,bg=button.bg,bold=button.bold,disabled=button.disabled,label=button.label,text=button.text,icon=button.icon;if(color)itemClasses.push('color-'+color);if(bg)itemClasses.push('bg-color-'+bg);if(bold)itemClasses.push('popover-from-actions-bold');if(disabled)itemClasses.push('disabled');if(label){itemClasses.push('popover-from-actions-label');return'<li class="'+itemClasses.join(' ')+'">'+text+'</li>';}itemClasses.push('item-link');if(icon){itemClasses.push('item-content');return'\n                      <li>\n                        <a class="'+itemClasses.join(' ')+'">\n                          <div class="item-media">\n                            '+icon+'\n                          </div>\n                          <div class="item-inner">\n                            <div class="item-title">\n                              '+text+'\n                            </div>\n                          </div>\n                        </a>\n                      </li>\n                    ';}itemClasses.push('list-button');return'\n                    <li>\n                      <a href="#" class="list-button '+itemClasses.join(' ')+'">'+text+'</a>\n                    </li>\n                  ';}).join('')+'\n              </ul>\n            </div>\n          ';}).join('')+'\n        </div>\n      </div>\n    ').trim();}}]);return Actions;}(Modal);var Actions$1={name:'actions',params:{actions:{convertToPopover:true,forceToPopover:false,closeByBackdropClick:true,render:null,renderPopover:null,backdrop:true}},static:{Actions:Actions},create:function create(){var app=this;app.actions=ModalMethods({app:app,constructor:Actions,defaultSelector:'.actions-modal.modal-in'});},clicks:{'.actions-open':function openActions($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.actions.open(data.actions,data.animate);},'.actions-close':function closeActions($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.actions.close(data.actions,data.animate);}}};var Sheet=function(_Modal7){_inherits(Sheet,_Modal7);function Sheet(app,params){var _ret25;_classCallCheck(this,Sheet);var extendedParams=Utils.extend({on:{}},app.params.sheet,params);// Extends with open/close Modal methods;
var _this13=_possibleConstructorReturn(this,(Sheet.__proto__||Object.getPrototypeOf(Sheet)).call(this,app,extendedParams));var sheet=_this13;sheet.params=extendedParams;// Find Element
var $el=void 0;if(!sheet.params.el){$el=(0,_dom2.default)(sheet.params.content);}else{$el=(0,_dom2.default)(sheet.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret23;return _ret23=$el[0].f7Modal,_possibleConstructorReturn(_this13,_ret23);}if($el.length===0){var _ret24;return _ret24=sheet.destroy(),_possibleConstructorReturn(_this13,_ret24);}var $backdropEl=void 0;if(sheet.params.backdrop){$backdropEl=app.root.children('.sheet-backdrop');if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="sheet-backdrop"></div>');app.root.append($backdropEl);}}var $pageContentEl=void 0;function scrollToOpen(){var $scrollEl=(0,_dom2.default)(sheet.params.scrollToEl).eq(0);if($scrollEl.length===0)return;$pageContentEl=$scrollEl.parents('.page-content');if($pageContentEl.length===0)return;var paddingTop=parseInt($pageContentEl.css('padding-top'),10);var paddingBottom=parseInt($pageContentEl.css('padding-bottom'),10);var pageHeight=$pageContentEl[0].offsetHeight-paddingTop-$el.height();var pageScrollHeight=$pageContentEl[0].scrollHeight-paddingTop-$el.height();var pageScroll=$pageContentEl.scrollTop();var newPaddingBottom=void 0;var scrollElTop=$scrollEl.offset().top-paddingTop+$scrollEl[0].offsetHeight;if(scrollElTop>pageHeight){var scrollTop=pageScroll+scrollElTop-pageHeight;if(scrollTop+pageHeight>pageScrollHeight){newPaddingBottom=scrollTop+pageHeight-pageScrollHeight+paddingBottom;if(pageHeight===pageScrollHeight){newPaddingBottom=$el.height();}$pageContentEl.css({'padding-bottom':newPaddingBottom+'px'});}$pageContentEl.scrollTop(scrollTop,300);}}function scrollToClose(){if($pageContentEl&&$pageContentEl.length>0){$pageContentEl.css({'padding-bottom':''});}}function handleClick(e){var target=e.target;var $target=(0,_dom2.default)(target);if($target.closest(sheet.el).length===0){if(sheet.params.closeByBackdropClick&&sheet.params.backdrop&&sheet.backdropEl&&sheet.backdropEl===target){sheet.close();}else if(sheet.params.closeByOutsideClick){sheet.close();}}}sheet.on('sheetOpen',function(){if(sheet.params.scrollToEl){scrollToOpen();}});sheet.on('sheetOpened',function(){if(sheet.params.closeByOutsideClick||sheet.params.closeByBackdropClick){app.on('click',handleClick);}});sheet.on('sheetClose',function(){if(sheet.params.scrollToEl){scrollToClose();}if(sheet.params.closeByOutsideClick||sheet.params.closeByBackdropClick){app.off('click',handleClick);}});Utils.extend(sheet,{app:app,$el:$el,el:$el[0],$backdropEl:$backdropEl,backdropEl:$backdropEl&&$backdropEl[0],type:'sheet'});$el[0].f7Modal=sheet;return _ret25=sheet,_possibleConstructorReturn(_this13,_ret25);}return Sheet;}(Modal);var Sheet$1={name:'sheet',params:{sheet:{closeByBackdropClick:true,closeByOutsideClick:false}},static:{Sheet:Sheet},create:function create(){var app=this;if(!app.passedParams.sheet||app.passedParams.sheet.backdrop===undefined){app.params.sheet.backdrop=app.theme==='md';}app.sheet=Utils.extend({},ModalMethods({app:app,constructor:Sheet,defaultSelector:'.sheet-modal.modal-in'}));},clicks:{'.sheet-open':function openSheet($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;if((0,_dom2.default)('.sheet-modal.modal-in').length>0&&data.sheet&&(0,_dom2.default)(data.sheet)[0]!==(0,_dom2.default)('.sheet-modal.modal-in')[0]){app.sheet.close('.sheet-modal.modal-in');}app.sheet.open(data.sheet,data.animate);},'.sheet-close':function closeSheet($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.sheet.close(data.sheet,data.animate);}}};var Toast=function(_Modal8){_inherits(Toast,_Modal8);function Toast(app,params){var _ret28;_classCallCheck(this,Toast);var extendedParams=Utils.extend({on:{}},app.params.toast,params);// Extends with open/close Modal methods;
var _this14=_possibleConstructorReturn(this,(Toast.__proto__||Object.getPrototypeOf(Toast)).call(this,app,extendedParams));var toast=_this14;toast.app=app;toast.params=extendedParams;var _toast$params=toast.params,closeButton=_toast$params.closeButton,closeTimeout=_toast$params.closeTimeout;var $el=void 0;if(!toast.params.el){// Find Element
var toastHtml=toast.render();$el=(0,_dom2.default)(toastHtml);}else{$el=(0,_dom2.default)(toast.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret26;return _ret26=$el[0].f7Modal,_possibleConstructorReturn(_this14,_ret26);}if($el.length===0){var _ret27;return _ret27=toast.destroy(),_possibleConstructorReturn(_this14,_ret27);}Utils.extend(toast,{$el:$el,el:$el[0],type:'toast'});$el[0].f7Modal=toast;if(closeButton){$el.find('.toast-button').on('click',function(){toast.emit('local::closeButtonClick toastCloseButtonClick',toast);toast.close();});toast.on('beforeDestroy',function(){$el.find('.toast-button').off('click');});}var timeoutId=void 0;toast.on('open',function(){(0,_dom2.default)('.toast.modal-in').each(function(index,openedEl){var toastInstance=app.toast.get(openedEl);if(openedEl!==toast.el&&toastInstance){toastInstance.close();}});if(closeTimeout){timeoutId=Utils.nextTick(function(){toast.close();},closeTimeout);}});toast.on('close',function(){_ssrWindow.window.clearTimeout(timeoutId);});if(toast.params.destroyOnClose){toast.once('closed',function(){setTimeout(function(){toast.destroy();},0);});}return _ret28=toast,_possibleConstructorReturn(_this14,_ret28);}_createClass(Toast,[{key:'render',value:function render(){var toast=this;var app=toast.app;if(toast.params.render)return toast.params.render.call(toast,toast);var _toast$params2=toast.params,position=_toast$params2.position,cssClass=_toast$params2.cssClass,icon=_toast$params2.icon,text=_toast$params2.text,closeButton=_toast$params2.closeButton,closeButtonColor=_toast$params2.closeButtonColor,closeButtonText=_toast$params2.closeButtonText;return('\n      <div class="toast toast-'+position+' '+(cssClass||'')+' '+(icon?'toast-with-icon':'')+'">\n        <div class="toast-content">\n          '+(icon?'<div class="toast-icon">'+icon+'</div>':'')+'\n          <div class="toast-text">'+text+'</div>\n          '+(closeButton&&!icon?('\n          <a class="toast-button '+(app.theme==='md'?'button':'link')+' '+(closeButtonColor?'color-'+closeButtonColor:'')+'">'+closeButtonText+'</a>\n          ').trim():'')+'\n        </div>\n      </div>\n    ').trim();}}]);return Toast;}(Modal);var Toast$1={name:'toast',static:{Toast:Toast},create:function create(){var app=this;app.toast=Utils.extend({},ModalMethods({app:app,constructor:Toast,defaultSelector:'.toast.modal-in'}),{// Shortcuts
show:function show(params){Utils.extend(params,{destroyOnClose:true});return new Toast(app,params).open();}});},params:{toast:{icon:null,text:null,position:'bottom',closeButton:false,closeButtonColor:null,closeButtonText:'Ok',closeTimeout:null,cssClass:null,render:null}}};var Preloader={init:function init(el){var app=this;if(app.theme!=='md')return;var $el=(0,_dom2.default)(el);if($el.length===0||$el.children('.preloader-inner').length>0)return;$el.append(Utils.mdPreloaderContent);},// Modal
visible:false,show:function show(){var color=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'white';var app=this;if(Preloader.visible)return;var preloaderInner=app.theme!=='md'?'':Utils.mdPreloaderContent;(0,_dom2.default)('html').addClass('with-modal-preloader');app.root.append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+color+'">'+preloaderInner+'</div>\n      </div>\n    ');Preloader.visible=true;},hide:function hide(){var app=this;if(!Preloader.visible)return;(0,_dom2.default)('html').removeClass('with-modal-preloader');app.root.find('.preloader-backdrop, .preloader-modal').remove();Preloader.visible=false;}};var Preloader$1={name:'preloader',create:function create(){var app=this;Utils.extend(app,{preloader:{init:Preloader.init.bind(app),show:Preloader.show.bind(app),hide:Preloader.hide.bind(app)}});},on:{photoBrowserOpen:function photoBrowserOpen(pb){var app=this;if(app.theme!=='md')return;pb.$el.find('.preloader').each(function(index,preloaderEl){app.preloader.init(preloaderEl);});},pageInit:function pageInit(page){var app=this;if(app.theme!=='md')return;page.$el.find('.preloader').each(function(index,preloaderEl){app.preloader.init(preloaderEl);});}}};var Progressbar={set:function set(){var app=this;for(var _len27=arguments.length,args=Array(_len27),_key27=0;_key27<_len27;_key27++){args[_key27]=arguments[_key27];}var _args17=_slicedToArray(args,3),el=_args17[0],progress=_args17[1],duration=_args17[2];if(typeof args[0]==='number'){var _args18=_slicedToArray(args,2);progress=_args18[0];duration=_args18[1];el=app.root;}if(typeof progress==='undefined'||progress===null)return el;if(!progress)progress=0;var $el=(0,_dom2.default)(el||app.root);if($el.length===0){return el;}var progressNormalized=Math.min(Math.max(progress,0),100);var $progressbarEl=void 0;if($el.hasClass('progressbar'))$progressbarEl=$el.eq(0);else{$progressbarEl=$el.children('.progressbar');}if($progressbarEl.length===0||$progressbarEl.hasClass('progressbar-infinite')){return $progressbarEl;}var $progressbarLine=$progressbarEl.children('span');if($progressbarLine.length===0){$progressbarLine=(0,_dom2.default)('<span></span>');$progressbarEl.append($progressbarLine);}$progressbarLine.transition(typeof duration!=='undefined'?duration:'').transform('translate3d('+(-100+progressNormalized)+'%,0,0)');return $progressbarEl[0];},show:function show(){var app=this;// '.page', 50, 'multi'
for(var _len28=arguments.length,args=Array(_len28),_key28=0;_key28<_len28;_key28++){args[_key28]=arguments[_key28];}var _args19=_slicedToArray(args,3),el=_args19[0],progress=_args19[1],color=_args19[2];var type='determined';if(args.length===2){if((typeof args[0]==='string'||_typeof(args[0])==='object')&&typeof args[1]==='string'){var _args20=_slicedToArray(args,3);// '.page', 'multi'
el=_args20[0];color=_args20[1];progress=_args20[2];type='infinite';}else if(typeof args[0]==='number'&&typeof args[1]==='string'){var _args21=_slicedToArray(args,2);// 50, 'multi'
progress=_args21[0];color=_args21[1];el=app.root;}}else if(args.length===1){if(typeof args[0]==='number'){el=app.root;progress=args[0];}else if(typeof args[0]==='string'){type='infinite';el=app.root;color=args[0];}}else if(args.length===0){type='infinite';el=app.root;}var $el=(0,_dom2.default)(el);if($el.length===0)return undefined;var $progressbarEl=void 0;if($el.hasClass('progressbar')||$el.hasClass('progressbar-infinite')){$progressbarEl=$el;}else{$progressbarEl=$el.children('.progressbar:not(.progressbar-out), .progressbar-infinite:not(.progressbar-out)');if($progressbarEl.length===0){$progressbarEl=(0,_dom2.default)('\n          <span class="progressbar'+(type==='infinite'?'-infinite':'')+(color?' color-'+color:'')+' progressbar-in">\n            '+(type==='infinite'?'':'<span></span>')+'\n          </span>');$el.append($progressbarEl);}}if(typeof progress!=='undefined'){app.progressbar.set($progressbarEl,progress);}return $progressbarEl[0];},hide:function hide(el){var removeAfterHide=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var app=this;var $el=(0,_dom2.default)(el||app.root);if($el.length===0)return undefined;var $progressbarEl=void 0;if($el.hasClass('progressbar')||$el.hasClass('progressbar-infinite')){$progressbarEl=$el;}else{$progressbarEl=$el.children('.progressbar, .progressbar-infinite');}if($progressbarEl.length===0||!$progressbarEl.hasClass('progressbar-in')||$progressbarEl.hasClass('progressbar-out')){return $progressbarEl;}$progressbarEl.removeClass('progressbar-in').addClass('progressbar-out').animationEnd(function(){if(removeAfterHide){$progressbarEl.remove();}});return $progressbarEl;}};var Progressbar$1={name:'progressbar',create:function create(){var app=this;Utils.extend(app,{progressbar:{set:Progressbar.set.bind(app),show:Progressbar.show.bind(app),hide:Progressbar.hide.bind(app)}});},on:{pageInit:function pageInit(page){var app=this;page.$el.find('.progressbar').each(function(index,progressbarEl){var $progressbarEl=(0,_dom2.default)(progressbarEl);app.progressbar.set($progressbarEl,$progressbarEl.attr('data-progress'));});}}};var Sortable={init:function init(){var app=this;var isTouched=void 0;var isMoved=void 0;var touchStartY=void 0;var touchesDiff=void 0;var $sortingEl=void 0;var $sortingItems=void 0;var $sortableContainer=void 0;var sortingElHeight=void 0;var minTop=void 0;var maxTop=void 0;var $insertAfterEl=void 0;var $insertBeforeEl=void 0;var indexFrom=void 0;var $pageEl=void 0;var $pageContentEl=void 0;var pageHeight=void 0;var pageOffset=void 0;var sortingElOffsetLocal=void 0;var sortingElOffsetTop=void 0;var initialScrollTop=void 0;function handleTouchStart(e){isMoved=false;isTouched=true;touchStartY=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;$sortingEl=(0,_dom2.default)(this).parent('li');indexFrom=$sortingEl.index();$sortableContainer=$sortingEl.parents('.sortable');var $listGroup=$sortingEl.parents('.list-group');if($listGroup.length&&$listGroup.parents($sortableContainer).length){$sortableContainer=$listGroup;}$sortingItems=$sortableContainer.children('ul').children('li');if(app.panel)app.panel.allowOpen=false;if(app.swipeout)app.swipeout.allow=false;}function handleTouchMove(e){if(!isTouched||!$sortingEl)return;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(!isMoved){$pageEl=$sortingEl.parents('.page');$pageContentEl=$sortingEl.parents('.page-content');var paddingTop=parseInt($pageContentEl.css('padding-top'),10);var paddingBottom=parseInt($pageContentEl.css('padding-bottom'),10);initialScrollTop=$pageContentEl[0].scrollTop;pageOffset=$pageEl.offset().top+paddingTop;pageHeight=$pageEl.height()-paddingTop-paddingBottom;$sortingEl.addClass('sorting');$sortableContainer.addClass('sortable-sorting');sortingElOffsetLocal=$sortingEl[0].offsetTop;minTop=$sortingEl[0].offsetTop;maxTop=$sortingEl.parent().height()-sortingElOffsetLocal-$sortingEl.height();sortingElHeight=$sortingEl[0].offsetHeight;sortingElOffsetTop=$sortingEl.offset().top;}isMoved=true;e.preventDefault();e.f7PreventSwipePanel=true;touchesDiff=pageY-touchStartY;var translateScrollOffset=$pageContentEl[0].scrollTop-initialScrollTop;var translate=Math.min(Math.max(touchesDiff+translateScrollOffset,-minTop),maxTop);$sortingEl.transform('translate3d(0,'+translate+'px,0)');var scrollAddition=44;var allowScroll=true;if(touchesDiff+translateScrollOffset+scrollAddition<-minTop){allowScroll=false;}if(touchesDiff+translateScrollOffset-scrollAddition>maxTop){allowScroll=false;}$insertBeforeEl=undefined;$insertAfterEl=undefined;var scrollDiff=void 0;if(allowScroll){if(sortingElOffsetTop+touchesDiff+sortingElHeight+scrollAddition>pageOffset+pageHeight){// To Bottom
scrollDiff=sortingElOffsetTop+touchesDiff+sortingElHeight+scrollAddition-(pageOffset+pageHeight);}if(sortingElOffsetTop+touchesDiff<pageOffset+scrollAddition){// To Top
scrollDiff=sortingElOffsetTop+touchesDiff-pageOffset-scrollAddition;}if(scrollDiff){$pageContentEl[0].scrollTop+=scrollDiff;}}$sortingItems.each(function(index,el){var $currentEl=(0,_dom2.default)(el);if($currentEl[0]===$sortingEl[0])return;var currentElOffset=$currentEl[0].offsetTop;var currentElHeight=$currentEl.height();var sortingElOffset=sortingElOffsetLocal+translate;if(sortingElOffset>=currentElOffset-currentElHeight/2&&$sortingEl.index()<$currentEl.index()){$currentEl.transform('translate3d(0, '+-sortingElHeight+'px,0)');$insertAfterEl=$currentEl;$insertBeforeEl=undefined;}else if(sortingElOffset<=currentElOffset+currentElHeight/2&&$sortingEl.index()>$currentEl.index()){$currentEl.transform('translate3d(0, '+sortingElHeight+'px,0)');$insertAfterEl=undefined;if(!$insertBeforeEl)$insertBeforeEl=$currentEl;}else{$currentEl.transform('translate3d(0, 0%,0)');}});}function handleTouchEnd(){if(!isTouched||!isMoved){isTouched=false;isMoved=false;if(isTouched&&!isMoved){if(app.panel)app.panel.allowOpen=true;if(app.swipeout)app.swipeout.allow=true;}return;}if(app.panel)app.panel.allowOpen=true;if(app.swipeout)app.swipeout.allow=true;$sortingItems.transform('');$sortingEl.removeClass('sorting');$sortableContainer.removeClass('sortable-sorting');var virtualList=void 0;var oldIndex=void 0;var newIndex=void 0;if(app.params.sortable.moveElements){if($insertAfterEl){$sortingEl.insertAfter($insertAfterEl);}if($insertBeforeEl){$sortingEl.insertBefore($insertBeforeEl);}}if(($insertAfterEl||$insertBeforeEl)&&$sortableContainer.hasClass('virtual-list')){virtualList=$sortableContainer[0].f7VirtualList;oldIndex=$sortingEl[0].f7VirtualListIndex;newIndex=$insertBeforeEl?$insertBeforeEl[0].f7VirtualListIndex:$insertAfterEl[0].f7VirtualListIndex;if(virtualList)virtualList.moveItem(oldIndex,newIndex);}$sortingEl.trigger('sortable:sort',{from:indexFrom,to:$sortingEl.index()});app.emit('sortableSort',$sortingEl[0],{from:indexFrom,to:$sortingEl.index()});$insertBeforeEl=undefined;$insertAfterEl=undefined;isTouched=false;isMoved=false;}var activeListener=app.support.passiveListener?{passive:false,capture:false}:false;(0,_dom2.default)(_ssrWindow.document).on(app.touchEvents.start,'.list.sortable .sortable-handler',handleTouchStart,activeListener);app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);},enable:function enable(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.list.sortable';var app=this;var $el=(0,_dom2.default)(el);if($el.length===0)return;$el.addClass('sortable-enabled');$el.trigger('sortable:enable');app.emit('sortableEnable',$el[0]);},disable:function disable(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.list.sortable';var app=this;var $el=(0,_dom2.default)(el);if($el.length===0)return;$el.removeClass('sortable-enabled');$el.trigger('sortable:disable');app.emit('sortableDisable',$el[0]);},toggle:function toggle(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.list.sortable';var app=this;var $el=(0,_dom2.default)(el);if($el.length===0)return;if($el.hasClass('sortable-enabled')){app.sortable.disable($el);}else{app.sortable.enable($el);}}};var Sortable$1={name:'sortable',params:{sortable:{moveElements:true}},create:function create(){var app=this;Utils.extend(app,{sortable:{init:Sortable.init.bind(app),enable:Sortable.enable.bind(app),disable:Sortable.disable.bind(app),toggle:Sortable.toggle.bind(app)}});},on:{init:function init(){var app=this;if(!app.params.sortable)return;app.sortable.init();}},clicks:{'.sortable-enable':function enable($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.sortable.enable(data.sortable);},'.sortable-disable':function disable($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.sortable.disable(data.sortable);},'.sortable-toggle':function toggle($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.sortable.toggle(data.sortable);}}};var Swipeout={init:function init(){var app=this;var touchesStart={};var isTouched=void 0;var isMoved=void 0;var isScrolling=void 0;var touchStartTime=void 0;var touchesDiff=void 0;var $swipeoutEl=void 0;var $swipeoutContent=void 0;var $actionsRight=void 0;var $actionsLeft=void 0;var actionsLeftWidth=void 0;var actionsRightWidth=void 0;var translate=void 0;var opened=void 0;var openedActionsSide=void 0;var $leftButtons=void 0;var $rightButtons=void 0;var direction=void 0;var $overswipeLeftButton=void 0;var $overswipeRightButton=void 0;var overswipeLeft=void 0;var overswipeRight=void 0;function handleTouchStart(e){if(!Swipeout.allow)return;isMoved=false;isTouched=true;isScrolling=undefined;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;touchStartTime=new Date().getTime();$swipeoutEl=(0,_dom2.default)(this);}function handleTouchMove(e){if(!isTouched)return;var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x));}if(isScrolling){isTouched=false;return;}if(!isMoved){if((0,_dom2.default)('.list.sortable-opened').length>0)return;$swipeoutContent=$swipeoutEl.find('.swipeout-content');$actionsRight=$swipeoutEl.find('.swipeout-actions-right');$actionsLeft=$swipeoutEl.find('.swipeout-actions-left');actionsLeftWidth=null;actionsRightWidth=null;$leftButtons=null;$rightButtons=null;$overswipeRightButton=null;$overswipeLeftButton=null;if($actionsLeft.length>0){actionsLeftWidth=$actionsLeft.outerWidth();$leftButtons=$actionsLeft.children('a');$overswipeLeftButton=$actionsLeft.find('.swipeout-overswipe');}if($actionsRight.length>0){actionsRightWidth=$actionsRight.outerWidth();$rightButtons=$actionsRight.children('a');$overswipeRightButton=$actionsRight.find('.swipeout-overswipe');}opened=$swipeoutEl.hasClass('swipeout-opened');if(opened){openedActionsSide=$swipeoutEl.find('.swipeout-actions-left.swipeout-actions-opened').length>0?'left':'right';}$swipeoutEl.removeClass('swipeout-transitioning');if(!app.params.swipeout.noFollow){$swipeoutEl.find('.swipeout-actions-opened').removeClass('swipeout-actions-opened');$swipeoutEl.removeClass('swipeout-opened');}}isMoved=true;e.preventDefault();touchesDiff=pageX-touchesStart.x;translate=touchesDiff;if(opened){if(openedActionsSide==='right')translate-=actionsRightWidth;else translate+=actionsLeftWidth;}if(translate>0&&$actionsLeft.length===0||translate<0&&$actionsRight.length===0){if(!opened){isTouched=false;isMoved=false;$swipeoutContent.transform('');if($rightButtons&&$rightButtons.length>0){$rightButtons.transform('');}if($leftButtons&&$leftButtons.length>0){$leftButtons.transform('');}return;}translate=0;}if(translate<0)direction='to-left';else if(translate>0)direction='to-right';else if(!direction)direction='to-left';var buttonOffset=void 0;var progress=void 0;e.f7PreventSwipePanel=true;if(app.params.swipeout.noFollow){if(opened){if(openedActionsSide==='right'&&touchesDiff>0){app.swipeout.close($swipeoutEl);}if(openedActionsSide==='left'&&touchesDiff<0){app.swipeout.close($swipeoutEl);}}else{if(touchesDiff<0&&$actionsRight.length>0){app.swipeout.open($swipeoutEl,'right');}if(touchesDiff>0&&$actionsLeft.length>0){app.swipeout.open($swipeoutEl,'left');}}isTouched=false;isMoved=false;return;}overswipeLeft=false;overswipeRight=false;if($actionsRight.length>0){// Show right actions
var buttonTranslate=translate;progress=buttonTranslate/actionsRightWidth;if(buttonTranslate<-actionsRightWidth){buttonTranslate=-actionsRightWidth-Math.pow(-buttonTranslate-actionsRightWidth,0.8);translate=buttonTranslate;if($overswipeRightButton.length>0){overswipeRight=true;}}if(direction!=='to-left'){progress=0;buttonTranslate=0;}$rightButtons.each(function(index,buttonEl){var $buttonEl=(0,_dom2.default)(buttonEl);if(typeof buttonEl.f7SwipeoutButtonOffset==='undefined'){$buttonEl[0].f7SwipeoutButtonOffset=buttonEl.offsetLeft;}buttonOffset=buttonEl.f7SwipeoutButtonOffset;if($overswipeRightButton.length>0&&$buttonEl.hasClass('swipeout-overswipe')&&direction==='to-left'){$buttonEl.css({left:(overswipeRight?-buttonOffset:0)+'px'});if(overswipeRight){$buttonEl.addClass('swipeout-overswipe-active');}else{$buttonEl.removeClass('swipeout-overswipe-active');}}$buttonEl.transform('translate3d('+(buttonTranslate-buttonOffset*(1+Math.max(progress,-1)))+'px,0,0)');});}if($actionsLeft.length>0){// Show left actions
var _buttonTranslate=translate;progress=_buttonTranslate/actionsLeftWidth;if(_buttonTranslate>actionsLeftWidth){_buttonTranslate=actionsLeftWidth+Math.pow(_buttonTranslate-actionsLeftWidth,0.8);translate=_buttonTranslate;if($overswipeLeftButton.length>0){overswipeLeft=true;}}if(direction!=='to-right'){_buttonTranslate=0;progress=0;}$leftButtons.each(function(index,buttonEl){var $buttonEl=(0,_dom2.default)(buttonEl);if(typeof buttonEl.f7SwipeoutButtonOffset==='undefined'){$buttonEl[0].f7SwipeoutButtonOffset=actionsLeftWidth-buttonEl.offsetLeft-buttonEl.offsetWidth;}buttonOffset=buttonEl.f7SwipeoutButtonOffset;if($overswipeLeftButton.length>0&&$buttonEl.hasClass('swipeout-overswipe')&&direction==='to-right'){$buttonEl.css({left:(overswipeLeft?buttonOffset:0)+'px'});if(overswipeLeft){$buttonEl.addClass('swipeout-overswipe-active');}else{$buttonEl.removeClass('swipeout-overswipe-active');}}if($leftButtons.length>1){$buttonEl.css('z-index',$leftButtons.length-index);}$buttonEl.transform('translate3d('+(_buttonTranslate+buttonOffset*(1-Math.min(progress,1)))+'px,0,0)');});}$swipeoutEl.trigger('swipeout',progress);app.emit('swipeout',$swipeoutEl[0],progress);$swipeoutContent.transform('translate3d('+translate+'px,0,0)');}function handleTouchEnd(){if(!isTouched||!isMoved){isTouched=false;isMoved=false;return;}isTouched=false;isMoved=false;var timeDiff=new Date().getTime()-touchStartTime;var $actions=direction==='to-left'?$actionsRight:$actionsLeft;var actionsWidth=direction==='to-left'?actionsRightWidth:actionsLeftWidth;var action=void 0;var $buttons=void 0;var i=void 0;if(timeDiff<300&&(touchesDiff<-10&&direction==='to-left'||touchesDiff>10&&direction==='to-right')||timeDiff>=300&&Math.abs(translate)>actionsWidth/2){action='open';}else{action='close';}if(timeDiff<300){if(Math.abs(translate)===0)action='close';if(Math.abs(translate)===actionsWidth)action='open';}if(action==='open'){Swipeout.el=$swipeoutEl[0];$swipeoutEl.trigger('swipeout:open');app.emit('swipeoutOpen',$swipeoutEl[0]);$swipeoutEl.addClass('swipeout-opened swipeout-transitioning');var newTranslate=direction==='to-left'?-actionsWidth:actionsWidth;$swipeoutContent.transform('translate3d('+newTranslate+'px,0,0)');$actions.addClass('swipeout-actions-opened');$buttons=direction==='to-left'?$rightButtons:$leftButtons;if($buttons){for(i=0;i<$buttons.length;i+=1){(0,_dom2.default)($buttons[i]).transform('translate3d('+newTranslate+'px,0,0)');}}if(overswipeRight){$actionsRight.find('.swipeout-overswipe')[0].click();}if(overswipeLeft){$actionsLeft.find('.swipeout-overswipe')[0].click();}}else{$swipeoutEl.trigger('swipeout:close');app.emit('swipeoutClose',$swipeoutEl[0]);Swipeout.el=undefined;$swipeoutEl.addClass('swipeout-transitioning').removeClass('swipeout-opened');$swipeoutContent.transform('');$actions.removeClass('swipeout-actions-opened');}var buttonOffset=void 0;if($leftButtons&&$leftButtons.length>0&&$leftButtons!==$buttons){$leftButtons.each(function(index,buttonEl){var $buttonEl=(0,_dom2.default)(buttonEl);buttonOffset=buttonEl.f7SwipeoutButtonOffset;if(typeof buttonOffset==='undefined'){$buttonEl[0].f7SwipeoutButtonOffset=actionsLeftWidth-buttonEl.offsetLeft-buttonEl.offsetWidth;}$buttonEl.transform('translate3d('+buttonOffset+'px,0,0)');});}if($rightButtons&&$rightButtons.length>0&&$rightButtons!==$buttons){$rightButtons.each(function(index,buttonEl){var $buttonEl=(0,_dom2.default)(buttonEl);buttonOffset=buttonEl.f7SwipeoutButtonOffset;if(typeof buttonOffset==='undefined'){$buttonEl[0].f7SwipeoutButtonOffset=buttonEl.offsetLeft;}$buttonEl.transform('translate3d('+-buttonOffset+'px,0,0)');});}$swipeoutContent.transitionEnd(function(){if(opened&&action==='open'||!opened&&action==='close')return;$swipeoutEl.trigger(action==='open'?'swipeout:opened':'swipeout:closed');app.emit(action==='open'?'swipeoutOpened':'swipeoutClosed',$swipeoutEl[0]);$swipeoutEl.removeClass('swipeout-transitioning');if(opened&&action==='close'){if($actionsRight.length>0){$rightButtons.transform('');}if($actionsLeft.length>0){$leftButtons.transform('');}}});}var passiveListener=app.support.passiveListener?{passive:true}:false;app.on('touchstart',function(e){if(Swipeout.el){var $targetEl=(0,_dom2.default)(e.target);if(!((0,_dom2.default)(Swipeout.el).is($targetEl[0])||$targetEl.parents('.swipeout').is(Swipeout.el)||$targetEl.hasClass('modal-in')||($targetEl.attr('class')||'').indexOf('-backdrop')>0||$targetEl.hasClass('actions-modal')||$targetEl.parents('.actions-modal.modal-in, .dialog.modal-in').length>0)){app.swipeout.close(Swipeout.el);}}});(0,_dom2.default)(_ssrWindow.document).on(app.touchEvents.start,'li.swipeout',handleTouchStart,passiveListener);app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);},allow:true,el:undefined,open:function open(){var app=this;for(var _len29=arguments.length,args=Array(_len29),_key29=0;_key29<_len29;_key29++){args[_key29]=arguments[_key29];}var _args22=_slicedToArray(args,3),el=_args22[0],side=_args22[1],callback=_args22[2];if(typeof args[1]==='function'){var _args23=_slicedToArray(args,3);el=_args23[0];callback=_args23[1];side=_args23[2];}var $el=(0,_dom2.default)(el).eq(0);if($el.length===0)return;if(!$el.hasClass('swipeout')||$el.hasClass('swipeout-opened'))return;if(!side){if($el.find('.swipeout-actions-right').length>0)side='right';else side='left';}var $swipeoutActions=$el.find('.swipeout-actions-'+side);var $swipeoutContent=$el.find('.swipeout-content');if($swipeoutActions.length===0)return;$el.trigger('swipeout:open').addClass('swipeout-opened').removeClass('swipeout-transitioning');app.emit('swipeoutOpen',$el[0]);$swipeoutActions.addClass('swipeout-actions-opened');var $buttons=$swipeoutActions.children('a');var swipeoutActionsWidth=$swipeoutActions.outerWidth();var translate=side==='right'?-swipeoutActionsWidth:swipeoutActionsWidth;if($buttons.length>1){$buttons.each(function(buttonIndex,buttonEl){var $buttonEl=(0,_dom2.default)(buttonEl);if(side==='right'){$buttonEl.transform('translate3d('+-buttonEl.offsetLeft+'px,0,0)');}else{$buttonEl.css('z-index',$buttons.length-buttonIndex).transform('translate3d('+(swipeoutActionsWidth-buttonEl.offsetWidth-buttonEl.offsetLeft)+'px,0,0)');}});}$el.addClass('swipeout-transitioning');$swipeoutContent.transitionEnd(function(){$el.trigger('swipeout:opened');app.emit('swipeoutOpened',$el[0]);if(callback)callback.call($el[0]);});Utils.nextFrame(function(){$buttons.transform('translate3d('+translate+'px,0,0)');$swipeoutContent.transform('translate3d('+translate+'px,0,0)');});Swipeout.el=$el[0];},close:function close(el,callback){var app=this;var $el=(0,_dom2.default)(el).eq(0);if($el.length===0)return;if(!$el.hasClass('swipeout-opened'))return;var side=$el.find('.swipeout-actions-opened').hasClass('swipeout-actions-right')?'right':'left';var $swipeoutActions=$el.find('.swipeout-actions-opened').removeClass('swipeout-actions-opened');var $buttons=$swipeoutActions.children('a');var swipeoutActionsWidth=$swipeoutActions.outerWidth();Swipeout.allow=false;$el.trigger('swipeout:close');app.emit('swipeoutClose',$el[0]);$el.removeClass('swipeout-opened').addClass('swipeout-transitioning');var closeTimeout=void 0;function onSwipeoutClose(){Swipeout.allow=true;if($el.hasClass('swipeout-opened'))return;$el.removeClass('swipeout-transitioning');$buttons.transform('');$el.trigger('swipeout:closed');app.emit('swipeoutClosed',$el[0]);if(callback)callback.call($el[0]);if(closeTimeout)clearTimeout(closeTimeout);}$el.find('.swipeout-content').transform('').transitionEnd(onSwipeoutClose);closeTimeout=setTimeout(onSwipeoutClose,500);$buttons.each(function(index,buttonEl){var $buttonEl=(0,_dom2.default)(buttonEl);if(side==='right'){$buttonEl.transform('translate3d('+-buttonEl.offsetLeft+'px,0,0)');}else{$buttonEl.transform('translate3d('+(swipeoutActionsWidth-buttonEl.offsetWidth-buttonEl.offsetLeft)+'px,0,0)');}$buttonEl.css({left:'0px'}).removeClass('swipeout-overswipe-active');});if(Swipeout.el&&Swipeout.el===$el[0])Swipeout.el=undefined;},delete:function _delete(el,callback){var app=this;var $el=(0,_dom2.default)(el).eq(0);if($el.length===0)return;Swipeout.el=undefined;$el.trigger('swipeout:delete');app.emit('swipeoutDelete',$el[0]);$el.css({height:$el.outerHeight()+'px'});$el.transitionEnd(function(){$el.trigger('swipeout:deleted');app.emit('swipeoutDeleted',$el[0]);if(callback)callback.call($el[0]);if($el.parents('.virtual-list').length>0){var virtualList=$el.parents('.virtual-list')[0].f7VirtualList;var virtualIndex=$el[0].f7VirtualListIndex;if(virtualList&&typeof virtualIndex!=='undefined')virtualList.deleteItem(virtualIndex);}else if(app.params.swipeout.removeElements){if(app.params.swipeout.removeElementsWithTimeout){setTimeout(function(){$el.remove();},app.params.swipeout.removeElementsTimeout);}else{$el.remove();}}else{$el.removeClass('swipeout-deleting swipeout-transitioning');}});// eslint-disable-next-line
$el[0]._clientLeft=$el[0].clientLeft;$el.addClass('swipeout-deleting swipeout-transitioning').css({height:'0px'}).find('.swipeout-content').transform('translate3d(-100%,0,0)');}};var Swipeout$1={name:'swipeout',params:{swipeout:{actionsNoFold:false,noFollow:false,removeElements:true,removeElementsWithTimeout:false,removeElementsTimeout:0}},create:function create(){var app=this;Utils.extend(app,{swipeout:{init:Swipeout.init.bind(app),open:Swipeout.open.bind(app),close:Swipeout.close.bind(app),delete:Swipeout.delete.bind(app)}});Object.defineProperty(app.swipeout,'el',{enumerable:true,configurable:true,get:function get(){return Swipeout.el;},set:function set(el){Swipeout.el=el;}});Object.defineProperty(app.swipeout,'allow',{enumerable:true,configurable:true,get:function get(){return Swipeout.allow;},set:function set(allow){Swipeout.allow=allow;}});},clicks:{'.swipeout-open':function openSwipeout($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.swipeout.open(data.swipeout,data.side);},'.swipeout-close':function closeSwipeout($clickedEl){var app=this;var $swipeoutEl=$clickedEl.closest('.swipeout');if($swipeoutEl.length===0)return;app.swipeout.close($swipeoutEl);},'.swipeout-delete':function deleteSwipeout($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;var $swipeoutEl=$clickedEl.closest('.swipeout');if($swipeoutEl.length===0)return;var confirm=data.confirm,confirmTitle=data.confirmTitle;if(data.confirm){app.dialog.confirm(confirm,confirmTitle,function(){app.swipeout.delete($swipeoutEl);});}else{app.swipeout.delete($swipeoutEl);}}},on:{init:function init(){var app=this;if(!app.params.swipeout)return;app.swipeout.init();}}};/* eslint no-underscore-dangle: ["error", { "allow": ["_clientLeft"] }] */var Accordion={toggleClicked:function toggleClicked($clickedEl){var app=this;var $accordionItemEl=$clickedEl.closest('.accordion-item').eq(0);if(!$accordionItemEl.length)$accordionItemEl=$clickedEl.parents('li').eq(0);if($clickedEl.parents('li').length>1&&$clickedEl.parents('li')[0]!==$accordionItemEl[0])return;app.accordion.toggle($accordionItemEl);},open:function open(el){var app=this;var $el=(0,_dom2.default)(el);var $list=$el.parents('.accordion-list').eq(0);var $contentEl=$el.children('.accordion-item-content');if($contentEl.length===0)$contentEl=$el.find('.accordion-item-content');if($contentEl.length===0)return;var $openedItem=$list.length>0&&$el.parent().children('.accordion-item-opened');if($openedItem.length>0){app.accordion.close($openedItem);}$contentEl.transitionEnd(function(){if($el.hasClass('accordion-item-opened')){$contentEl.transition(0);$contentEl.css('height','auto');$contentEl._clientLeft=$contentEl[0].clientLeft;$contentEl.transition('');$el.trigger('accordion:opened');app.emit('accordionOpened',$el[0]);}else{$contentEl.css('height','');$el.trigger('accordion:closed');app.emit('accordionClosed',$el[0]);}});$contentEl.css('height',$contentEl[0].scrollHeight+'px');$el.trigger('accordion:open');$el.addClass('accordion-item-opened');app.emit('accordionOpen',$el[0]);},close:function close(el){var app=this;var $el=(0,_dom2.default)(el);var $contentEl=$el.children('.accordion-item-content');if($contentEl.length===0)$contentEl=$el.find('.accordion-item-content');$el.removeClass('accordion-item-opened');$contentEl.transition(0);$contentEl.css('height',$contentEl[0].scrollHeight+'px');$contentEl._clientLeft=$contentEl[0].clientLeft;$contentEl.transition('');// Close
$contentEl.transitionEnd(function(){if($el.hasClass('accordion-item-opened')){$contentEl.transition(0);$contentEl.css('height','auto');$contentEl._clientLeft=$contentEl[0].clientLeft;$contentEl.transition('');$el.trigger('accordion:opened');app.emit('accordionOpened',$el[0]);}else{$contentEl.css('height','');$el.trigger('accordion:closed');app.emit('accordionClosed',$el[0]);}});Utils.nextFrame(function(){$contentEl.transition('');$contentEl.css('height','');$el.trigger('accordion:close');app.emit('accordionClose');});},toggle:function toggle(el){var app=this;var $el=(0,_dom2.default)(el);if($el.length===0)return;if($el.hasClass('accordion-item-opened'))app.accordion.close(el);else app.accordion.open(el);}};var Accordion$1={name:'accordion',create:function create(){var app=this;Utils.extend(app,{accordion:{open:Accordion.open.bind(app),close:Accordion.close.bind(app),toggle:Accordion.toggle.bind(app)}});},clicks:{'.accordion-item .item-link, .accordion-item-toggle, .links-list.accordion-list > ul > li > a':function open($clickedEl){var app=this;Accordion.toggleClicked.call(app,$clickedEl);}}};var VirtualList=function(_Framework7Class5){_inherits(VirtualList,_Framework7Class5);function VirtualList(app){var _ret29,_ret30;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,VirtualList);var _this15=_possibleConstructorReturn(this,(VirtualList.__proto__||Object.getPrototypeOf(VirtualList)).call(this,params,[app]));var vl=_this15;var defaults={cols:1,height:app.theme==='md'?48:44,cache:true,dynamicHeightBufferSize:1,showFilteredItemsOnly:false,renderExternal:undefined,setListHeight:true,searchByItem:undefined,searchAll:undefined,itemTemplate:undefined,ul:null,createUl:true,renderItem:function renderItem(item){return('\n          <li>\n            <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">'+item+'</div>\n              </div>\n            </div>\n          </li>\n        ').trim();},on:{}};// Extend defaults with modules params
vl.useModulesParams(defaults);vl.params=Utils.extend(defaults,params);if(vl.params.height===undefined||!vl.params.height){vl.params.height=app.theme==='md'?48:44;}vl.$el=(0,_dom2.default)(params.el);vl.el=vl.$el[0];if(vl.$el.length===0)return _ret29=undefined,_possibleConstructorReturn(_this15,_ret29);vl.$el[0].f7VirtualList=vl;vl.items=vl.params.items;if(vl.params.showFilteredItemsOnly){vl.filteredItems=[];}if(vl.params.itemTemplate){if(typeof vl.params.itemTemplate==='string')vl.renderItem=_template2.default.compile(vl.params.itemTemplate);else if(typeof vl.params.itemTemplate==='function')vl.renderItem=vl.params.itemTemplate;}else if(vl.params.renderItem){vl.renderItem=vl.params.renderItem;}vl.$pageContentEl=vl.$el.parents('.page-content');vl.pageContentEl=vl.$pageContentEl[0];// Bad scroll
if(typeof vl.params.updatableScroll!=='undefined'){vl.updatableScroll=vl.params.updatableScroll;}else{vl.updatableScroll=true;if(Device.ios&&Device.osVersion.split('.')[0]<8){vl.updatableScroll=false;}}// Append <ul>
var ul=vl.params.ul;vl.$ul=ul?(0,_dom2.default)(vl.params.ul):vl.$el.children('ul');if(vl.$ul.length===0&&vl.params.createUl){vl.$el.append('<ul></ul>');vl.$ul=vl.$el.children('ul');}vl.ul=vl.$ul[0];var $itemsWrapEl=void 0;if(!vl.ul&&!vl.params.createUl)$itemsWrapEl=vl.$el;else $itemsWrapEl=vl.$ul;Utils.extend(vl,{$itemsWrapEl:$itemsWrapEl,itemsWrapEl:$itemsWrapEl[0],// DOM cached items
domCache:{},displayDomCache:{},// Temporary DOM Element
tempDomElement:_ssrWindow.document.createElement('ul'),// Last repain position
lastRepaintY:null,// Fragment
fragment:_ssrWindow.document.createDocumentFragment(),// Props
pageHeight:undefined,rowsPerScreen:undefined,rowsBefore:undefined,rowsAfter:undefined,rowsToRender:undefined,maxBufferHeight:0,listHeight:undefined,dynamicHeight:typeof vl.params.height==='function'});// Install Modules
vl.useModules();// Attach events
var handleScrollBound=vl.handleScroll.bind(vl);var handleResizeBound=vl.handleResize.bind(vl);var $pageEl=void 0;var $tabEl=void 0;var $panelEl=void 0;var $popupEl=void 0;vl.attachEvents=function attachEvents(){$pageEl=vl.$el.parents('.page').eq(0);$tabEl=vl.$el.parents('.tab').eq(0);$panelEl=vl.$el.parents('.panel').eq(0);$popupEl=vl.$el.parents('.popup').eq(0);vl.$pageContentEl.on('scroll',handleScrollBound);if($pageEl)$pageEl.on('page:reinit',handleResizeBound);if($tabEl)$tabEl.on('tab:show',handleResizeBound);if($panelEl)$panelEl.on('panel:open',handleResizeBound);if($popupEl)$popupEl.on('popup:open',handleResizeBound);app.on('resize',handleResizeBound);};vl.detachEvents=function attachEvents(){vl.$pageContentEl.off('scroll',handleScrollBound);if($pageEl)$pageEl.off('page:reinit',handleResizeBound);if($tabEl)$tabEl.off('tab:show',handleResizeBound);if($panelEl)$panelEl.off('panel:open',handleResizeBound);if($popupEl)$popupEl.off('popup:open',handleResizeBound);app.off('resize',handleResizeBound);};// Init
vl.init();return _ret30=vl,_possibleConstructorReturn(_this15,_ret30);}_createClass(VirtualList,[{key:'setListSize',value:function setListSize(){var vl=this;var items=vl.filteredItems||vl.items;vl.pageHeight=vl.$pageContentEl[0].offsetHeight;if(vl.dynamicHeight){vl.listHeight=0;vl.heights=[];for(var _i12=0;_i12<items.length;_i12+=1){var itemHeight=vl.params.height(items[_i12]);vl.listHeight+=itemHeight;vl.heights.push(itemHeight);}}else{vl.listHeight=Math.ceil(items.length/vl.params.cols)*vl.params.height;vl.rowsPerScreen=Math.ceil(vl.pageHeight/vl.params.height);vl.rowsBefore=vl.params.rowsBefore||vl.rowsPerScreen*2;vl.rowsAfter=vl.params.rowsAfter||vl.rowsPerScreen;vl.rowsToRender=vl.rowsPerScreen+vl.rowsBefore+vl.rowsAfter;vl.maxBufferHeight=vl.rowsBefore/2*vl.params.height;}if(vl.updatableScroll||vl.params.setListHeight){vl.$itemsWrapEl.css({height:vl.listHeight+'px'});}}},{key:'render',value:function render(force,forceScrollTop){var vl=this;if(force)vl.lastRepaintY=null;var scrollTop=-(vl.$el[0].getBoundingClientRect().top-vl.$pageContentEl[0].getBoundingClientRect().top);if(typeof forceScrollTop!=='undefined')scrollTop=forceScrollTop;if(vl.lastRepaintY===null||Math.abs(scrollTop-vl.lastRepaintY)>vl.maxBufferHeight||!vl.updatableScroll&&vl.$pageContentEl[0].scrollTop+vl.pageHeight>=vl.$pageContentEl[0].scrollHeight){vl.lastRepaintY=scrollTop;}else{return;}var items=vl.filteredItems||vl.items;var fromIndex=void 0;var toIndex=void 0;var heightBeforeFirstItem=0;var heightBeforeLastItem=0;if(vl.dynamicHeight){var itemTop=0;var itemHeight=void 0;vl.maxBufferHeight=vl.pageHeight;for(var _j2=0;_j2<vl.heights.length;_j2+=1){itemHeight=vl.heights[_j2];if(typeof fromIndex==='undefined'){if(itemTop+itemHeight>=scrollTop-vl.pageHeight*2*vl.params.dynamicHeightBufferSize)fromIndex=_j2;else heightBeforeFirstItem+=itemHeight;}if(typeof toIndex==='undefined'){if(itemTop+itemHeight>=scrollTop+vl.pageHeight*2*vl.params.dynamicHeightBufferSize||_j2===vl.heights.length-1)toIndex=_j2+1;heightBeforeLastItem+=itemHeight;}itemTop+=itemHeight;}toIndex=Math.min(toIndex,items.length);}else{fromIndex=(parseInt(scrollTop/vl.params.height,10)-vl.rowsBefore)*vl.params.cols;if(fromIndex<0){fromIndex=0;}toIndex=Math.min(fromIndex+vl.rowsToRender*vl.params.cols,items.length);}var topPosition=void 0;var renderExternalItems=[];vl.reachEnd=false;var i=void 0;for(i=fromIndex;i<toIndex;i+=1){var itemEl=void 0;// Define real item index
var index=vl.items.indexOf(items[i]);if(i===fromIndex)vl.currentFromIndex=index;if(i===toIndex-1)vl.currentToIndex=index;if(vl.filteredItems){if(vl.items[index]===vl.filteredItems[vl.filteredItems.length-1])vl.reachEnd=true;}else if(index===vl.items.length-1)vl.reachEnd=true;// Find items
if(vl.params.renderExternal){renderExternalItems.push(items[i]);}else if(vl.domCache[index]){itemEl=vl.domCache[index];itemEl.f7VirtualListIndex=index;}else{if(vl.renderItem){vl.tempDomElement.innerHTML=vl.renderItem(items[i],index).trim();}else{vl.tempDomElement.innerHTML=items[i].toString().trim();}itemEl=vl.tempDomElement.childNodes[0];if(vl.params.cache)vl.domCache[index]=itemEl;itemEl.f7VirtualListIndex=index;}// Set item top position
if(i===fromIndex){if(vl.dynamicHeight){topPosition=heightBeforeFirstItem;}else{topPosition=i*vl.params.height/vl.params.cols;}}if(!vl.params.renderExternal){itemEl.style.top=topPosition+'px';// Before item insert
vl.emit('local::itemBeforeInsert vlItemBeforeInsert',vl,itemEl,items[i]);// Append item to fragment
vl.fragment.appendChild(itemEl);}}// Update list height with not updatable scroll
if(!vl.updatableScroll){if(vl.dynamicHeight){vl.itemsWrapEl.style.height=heightBeforeLastItem+'px';}else{vl.itemsWrapEl.style.height=i*vl.params.height/vl.params.cols+'px';}}// Update list html
if(vl.params.renderExternal){if(items&&items.length===0){vl.reachEnd=true;}}else{vl.emit('local::beforeClear vlBeforeClear',vl,vl.fragment);vl.itemsWrapEl.innerHTML='';vl.emit('local::itemsBeforeInsert vlItemsBeforeInsert',vl,vl.fragment);if(items&&items.length===0){vl.reachEnd=true;if(vl.params.emptyTemplate)vl.itemsWrapEl.innerHTML=vl.params.emptyTemplate;}else{vl.itemsWrapEl.appendChild(vl.fragment);}vl.emit('local::itemsAfterInsert vlItemsAfterInsert',vl,vl.fragment);}if(typeof forceScrollTop!=='undefined'&&force){vl.$pageContentEl.scrollTop(forceScrollTop,0);}if(vl.params.renderExternal){vl.params.renderExternal(vl,{fromIndex:fromIndex,toIndex:toIndex,listHeight:vl.listHeight,topPosition:topPosition,items:renderExternalItems});}}// Filter
},{key:'filterItems',value:function filterItems(indexes){var resetScrollTop=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var vl=this;vl.filteredItems=[];for(var _i13=0;_i13<indexes.length;_i13+=1){vl.filteredItems.push(vl.items[indexes[_i13]]);}if(resetScrollTop){vl.$pageContentEl[0].scrollTop=0;}vl.update();}},{key:'resetFilter',value:function resetFilter(){var vl=this;if(vl.params.showFilteredItemsOnly){vl.filteredItems=[];}else{vl.filteredItems=null;delete vl.filteredItems;}vl.update();}},{key:'scrollToItem',value:function scrollToItem(index){var vl=this;if(index>vl.items.length)return false;var itemTop=0;if(vl.dynamicHeight){for(var _i14=0;_i14<index;_i14+=1){itemTop+=vl.heights[_i14];}}else{itemTop=index*vl.params.height;}var listTop=vl.$el[0].offsetTop;vl.render(true,listTop+itemTop-parseInt(vl.$pageContentEl.css('padding-top'),10));return true;}},{key:'handleScroll',value:function handleScroll(){var vl=this;vl.render();}// Handle resize event
},{key:'isVisible',value:function isVisible(){var vl=this;return!!(vl.el.offsetWidth||vl.el.offsetHeight||vl.el.getClientRects().length);}},{key:'handleResize',value:function handleResize(){var vl=this;if(vl.isVisible()){vl.setListSize();vl.render(true);}}// Append
},{key:'appendItems',value:function appendItems(items){var vl=this;for(var _i15=0;_i15<items.length;_i15+=1){vl.items.push(items[_i15]);}vl.update();}},{key:'appendItem',value:function appendItem(item){var vl=this;vl.appendItems([item]);}// Replace
},{key:'replaceAllItems',value:function replaceAllItems(items){var vl=this;vl.items=items;delete vl.filteredItems;vl.domCache={};vl.update();}},{key:'replaceItem',value:function replaceItem(index,item){var vl=this;vl.items[index]=item;if(vl.params.cache)delete vl.domCache[index];vl.update();}// Prepend
},{key:'prependItems',value:function prependItems(items){var vl=this;for(var _i16=items.length-1;_i16>=0;_i16-=1){vl.items.unshift(items[_i16]);}if(vl.params.cache){var newCache={};Object.keys(vl.domCache).forEach(function(cached){newCache[parseInt(cached,10)+items.length]=vl.domCache[cached];});vl.domCache=newCache;}vl.update();}},{key:'prependItem',value:function prependItem(item){var vl=this;vl.prependItems([item]);}// Move
},{key:'moveItem',value:function moveItem(from,to){var vl=this;var fromIndex=from;var toIndex=to;if(fromIndex===toIndex)return;// remove item from array
var item=vl.items.splice(fromIndex,1)[0];if(toIndex>=vl.items.length){// Add item to the end
vl.items.push(item);toIndex=vl.items.length-1;}else{// Add item to new index
vl.items.splice(toIndex,0,item);}// Update cache
if(vl.params.cache){var newCache={};Object.keys(vl.domCache).forEach(function(cached){var cachedIndex=parseInt(cached,10);var leftIndex=fromIndex<toIndex?fromIndex:toIndex;var rightIndex=fromIndex<toIndex?toIndex:fromIndex;var indexShift=fromIndex<toIndex?-1:1;if(cachedIndex<leftIndex||cachedIndex>rightIndex)newCache[cachedIndex]=vl.domCache[cachedIndex];if(cachedIndex===leftIndex)newCache[rightIndex]=vl.domCache[cachedIndex];if(cachedIndex>leftIndex&&cachedIndex<=rightIndex)newCache[cachedIndex+indexShift]=vl.domCache[cachedIndex];});vl.domCache=newCache;}vl.update();}// Insert before
},{key:'insertItemBefore',value:function insertItemBefore(index,item){var vl=this;if(index===0){vl.prependItem(item);return;}if(index>=vl.items.length){vl.appendItem(item);return;}vl.items.splice(index,0,item);// Update cache
if(vl.params.cache){var newCache={};Object.keys(vl.domCache).forEach(function(cached){var cachedIndex=parseInt(cached,10);if(cachedIndex>=index){newCache[cachedIndex+1]=vl.domCache[cachedIndex];}});vl.domCache=newCache;}vl.update();}// Delete
},{key:'deleteItems',value:function deleteItems(indexes){var vl=this;var prevIndex=void 0;var indexShift=0;var _loop=function _loop(_i17){var index=indexes[_i17];if(typeof prevIndex!=='undefined'){if(index>prevIndex){indexShift=-_i17;}}index+=indexShift;prevIndex=indexes[_i17];// Delete item
var deletedItem=vl.items.splice(index,1)[0];// Delete from filtered
if(vl.filteredItems&&vl.filteredItems.indexOf(deletedItem)>=0){vl.filteredItems.splice(vl.filteredItems.indexOf(deletedItem),1);}// Update cache
if(vl.params.cache){var newCache={};Object.keys(vl.domCache).forEach(function(cached){var cachedIndex=parseInt(cached,10);if(cachedIndex===index){delete vl.domCache[index];}else if(parseInt(cached,10)>index){newCache[cachedIndex-1]=vl.domCache[cached];}else{newCache[cachedIndex]=vl.domCache[cached];}});vl.domCache=newCache;}};for(var _i17=0;_i17<indexes.length;_i17+=1){_loop(_i17);}vl.update();}},{key:'deleteAllItems',value:function deleteAllItems(){var vl=this;vl.items=[];delete vl.filteredItems;if(vl.params.cache)vl.domCache={};vl.update();}},{key:'deleteItem',value:function deleteItem(index){var vl=this;vl.deleteItems([index]);}// Clear cache
},{key:'clearCache',value:function clearCache(){var vl=this;vl.domCache={};}// Update Virtual List
},{key:'update',value:function update(deleteCache){var vl=this;if(deleteCache&&vl.params.cache){vl.domCache={};}vl.setListSize();vl.render(true);}},{key:'init',value:function init(){var vl=this;vl.attachEvents();vl.setListSize();vl.render();}},{key:'destroy',value:function destroy(){var vl=this;vl.detachEvents();vl.$el[0].f7VirtualList=null;delete vl.$el[0].f7VirtualList;Utils.deleteProps(vl);vl=null;}}]);return VirtualList;}(Framework7Class);var VirtualList$1={name:'virtualList',static:{VirtualList:VirtualList},create:function create(){var app=this;app.virtualList=ConstructorMethods({defaultSelector:'.virtual-list',constructor:VirtualList,app:app,domProp:'f7VirtualList'});}};var ListIndex=function(_Framework7Class6){_inherits(ListIndex,_Framework7Class6);function ListIndex(app){var _ret34;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ListIndex);var _this16=_possibleConstructorReturn(this,(ListIndex.__proto__||Object.getPrototypeOf(ListIndex)).call(this,params,[app]));var index=_this16;var defaults={el:null,// where to render indexes
listEl:null,// list el to generate indexes
indexes:'auto',// or array of indexes
iosItemHeight:14,mdItemHeight:14,scrollList:true,label:false,// eslint-disable-next-line
renderItem:function renderItem(itemContent,itemIndex){return('\n          <li>'+itemContent+'</li>\n        ').trim();},renderSkipPlaceholder:function renderSkipPlaceholder(){return'<li class="list-index-skip-placeholder"></li>';},on:{}};// Extend defaults with modules params
index.useModulesParams(defaults);index.params=Utils.extend(defaults,params);var $el=void 0;var $listEl=void 0;var $pageContentEl=void 0;var $ul=void 0;if(index.params.el){$el=(0,_dom2.default)(index.params.el);}else{var _ret32;return _ret32=index,_possibleConstructorReturn(_this16,_ret32);}$ul=$el.find('ul');if($ul.length===0){$ul=(0,_dom2.default)('<ul></ul>');$el.append($ul);}if(index.params.listEl){$listEl=(0,_dom2.default)(index.params.listEl);}if(index.params.indexes==='auto'&&!$listEl){var _ret33;return _ret33=index,_possibleConstructorReturn(_this16,_ret33);}if($listEl){$pageContentEl=$listEl.parents('.page-content').eq(0);}else{$pageContentEl=$el.siblings('.page-content').eq(0);if($pageContentEl.length===0){$pageContentEl=$el.parents('.page').eq(0).find('.page-content').eq(0);}}$el[0].f7ListIndex=index;Utils.extend(index,{app:app,$el:$el,el:$el&&$el[0],$ul:$ul,ul:$ul&&$ul[0],$listEl:$listEl,listEl:$listEl&&$listEl[0],$pageContentEl:$pageContentEl,pageContentEl:$pageContentEl&&$pageContentEl[0],indexes:params.indexes,height:0,skipRate:0});// Install Modules
index.useModules();// Attach events
function handleResize(){var height={index:index};index.calcSize();if(height!==index.height){index.render();}}function handleClick(e){var $clickedLi=(0,_dom2.default)(e.target).closest('li');if(!$clickedLi.length)return;var itemIndex=$clickedLi.index();if(index.skipRate>0){var percentage=itemIndex/($clickedLi.siblings('li').length-1);itemIndex=Math.round((index.indexes.length-1)*percentage);}var itemContent=index.indexes[itemIndex];index.$el.trigger('listindex:click',itemContent,itemIndex);index.emit('local::click listIndexClick',index,itemContent,itemIndex);index.$el.trigger('listindex:select',itemContent,itemIndex);index.emit('local::select listIndexSelect',index,itemContent,itemIndex);if(index.$listEl&&index.params.scrollList){index.scrollListToIndex(itemContent,itemIndex);}}var touchesStart={};var isTouched=void 0;var isMoved=void 0;var topPoint=void 0;var bottomPoint=void 0;var $labelEl=void 0;var previousIndex=null;function handleTouchStart(e){var $children=$ul.children();if(!$children.length)return;topPoint=$children[0].getBoundingClientRect().top;bottomPoint=$children[$children.length-1].getBoundingClientRect().top+$children[0].offsetHeight;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;isTouched=true;isMoved=false;previousIndex=null;}function handleTouchMove(e){if(!isTouched)return;if(!isMoved&&index.params.label){$labelEl=(0,_dom2.default)('<span class="list-index-label"></span>');$el.append($labelEl);}isMoved=true;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;e.preventDefault();var percentage=(pageY-topPoint)/(bottomPoint-topPoint);percentage=Math.min(Math.max(percentage,0),1);var itemIndex=Math.round((index.indexes.length-1)*percentage);var itemContent=index.indexes[itemIndex];var ulHeight=bottomPoint-topPoint;var bubbleBottom=(index.height-ulHeight)/2+(1-percentage)*ulHeight;if(itemIndex!==previousIndex){if(index.params.label){$labelEl.html(itemContent).transform('translateY(-'+bubbleBottom+'px)');}if(index.$listEl&&index.params.scrollList){index.scrollListToIndex(itemContent,itemIndex);}}previousIndex=itemIndex;index.$el.trigger('listindex:select',index);index.emit('local::select listIndexSelect',index,itemContent,itemIndex);}function handleTouchEnd(){if(!isTouched)return;isTouched=false;isMoved=false;if(index.params.label){if($labelEl)$labelEl.remove();$labelEl=undefined;}}var passiveListener=app.support.passiveListener?{passive:true}:false;index.attachEvents=function attachEvents(){$el.parents('.tab').on('tab:show',handleResize);$el.parents('.page').on('page:reinit',handleResize);$el.parents('.panel').on('panel:open',handleResize);$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast').on('modal:open',handleResize);app.on('resize',handleResize);$el.on('click',handleClick);$el.on(app.touchEvents.start,handleTouchStart,passiveListener);app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);};index.detachEvents=function attachEvents(){$el.parents('.tab').off('tab:show',handleResize);$el.parents('.page').off('page:reinit',handleResize);$el.parents('.panel').off('panel:open',handleResize);$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast').off('modal:open',handleResize);app.off('resize',handleResize);$el.off('click',handleClick);$el.off(app.touchEvents.start,handleTouchStart,passiveListener);app.off('touchmove:active',handleTouchMove);app.off('touchend:passive',handleTouchEnd);};// Init
index.init();return _ret34=index,_possibleConstructorReturn(_this16,_ret34);}// eslint-disable-next-line
_createClass(ListIndex,[{key:'scrollListToIndex',value:function scrollListToIndex(itemContent,itemIndex){var index=this;var $listEl=index.$listEl,$pageContentEl=index.$pageContentEl;if(!$listEl||!$pageContentEl||$pageContentEl.length===0)return index;var $scrollToEl=void 0;$listEl.find('.list-group-title, .item-divider').each(function(elIndex,el){if($scrollToEl)return;var $el=(0,_dom2.default)(el);if($el.text()===itemContent){$scrollToEl=$el;}});if(!$scrollToEl||$scrollToEl.length===0)return index;var parentTop=$scrollToEl.parent().offset().top;var paddingTop=parseInt($pageContentEl.css('padding-top'),10);var scrollTop=$pageContentEl[0].scrollTop;var scrollToElTop=$scrollToEl.offset().top;if(parentTop<=paddingTop){$pageContentEl.scrollTop(parentTop+scrollTop-paddingTop);}else{$pageContentEl.scrollTop(scrollToElTop+scrollTop-paddingTop);}return index;}},{key:'renderSkipPlaceholder',value:function renderSkipPlaceholder(){var index=this;return index.params.renderSkipPlaceholder.call(index);}},{key:'renderItem',value:function renderItem(itemContent,itemIndex){var index=this;return index.params.renderItem.call(index,itemContent,itemIndex);}},{key:'render',value:function render(){var index=this;var $ul=index.$ul,indexes=index.indexes,skipRate=index.skipRate;var wasSkipped=void 0;var html=indexes.map(function(itemContent,itemIndex){if(itemIndex%skipRate!==0&&skipRate>0){wasSkipped=true;return'';}var itemHtml=index.renderItem(itemContent,itemIndex);if(wasSkipped){itemHtml=index.renderSkipPlaceholder()+itemHtml;}wasSkipped=false;return itemHtml;}).join('');$ul.html(html);return index;}},{key:'calcSize',value:function calcSize(){var index=this;var app=index.app,params=index.params,el=index.el,indexes=index.indexes;var height=el.offsetHeight;var itemHeight=app.theme==='ios'?params.iosItemHeight:params.mdItemHeight;var maxItems=Math.floor(height/itemHeight);var items=indexes.length;var skipRate=0;if(items>maxItems){skipRate=Math.ceil((items*2-1)/maxItems);}index.height=height;index.skipRate=skipRate;return index;}},{key:'calcIndexes',value:function calcIndexes(){var index=this;if(index.params.indexes==='auto'){index.indexes=[];index.$listEl.find('.list-group-title, .item-divider').each(function(elIndex,el){var elContent=(0,_dom2.default)(el).text();if(index.indexes.indexOf(elContent)<0){index.indexes.push(elContent);}});}else{index.indexes=index.params.indexes;}return index;}},{key:'update',value:function update(){var index=this;index.calcIndexes();index.calcSize();index.render();return index;}},{key:'init',value:function init(){var index=this;index.calcIndexes();index.calcSize();index.render();index.attachEvents();}},{key:'destroy',value:function destroy(){var index=this;index.$el.trigger('listindex:beforedestroy',index);index.emit('local::beforeDestroy listIndexBeforeDestroy',index);index.detachEvents();index.$el[0].f7ListIndex=null;delete index.$el[0].f7ListIndex;Utils.deleteProps(index);index=null;}}]);return ListIndex;}(Framework7Class);var ListIndex$1={name:'listIndex',static:{ListIndex:ListIndex},create:function create(){var app=this;app.listIndex=ConstructorMethods({defaultSelector:'.list-index',constructor:ListIndex,app:app,domProp:'f7ListIndex'});},on:{tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.list-index-init').each(function(index,listIndexEl){var params=Utils.extend((0,_dom2.default)(listIndexEl).dataset(),{el:listIndexEl});app.listIndex.create(params);});},tabBeforeRemove:function tabBeforeRemove(tabEl){(0,_dom2.default)(tabEl).find('.list-index-init').each(function(index,listIndexEl){if(listIndexEl.f7ListIndex)listIndexEl.f7ListIndex.destroy();});},pageInit:function pageInit(page){var app=this;page.$el.find('.list-index-init').each(function(index,listIndexEl){var params=Utils.extend((0,_dom2.default)(listIndexEl).dataset(),{el:listIndexEl});app.listIndex.create(params);});},pageBeforeRemove:function pageBeforeRemove(page){page.$el.find('.list-index-init').each(function(index,listIndexEl){if(listIndexEl.f7ListIndex)listIndexEl.f7ListIndex.destroy();});}}};var Timeline={name:'timeline'};var Tab={show:function show(){var app=this;var tabEl=void 0;var tabLinkEl=void 0;var animate=void 0;var tabRoute=void 0;for(var _len30=arguments.length,args=Array(_len30),_key30=0;_key30<_len30;_key30++){args[_key30]=arguments[_key30];}if(args.length===1&&args[0].constructor===Object){tabEl=args[0].tabEl;tabLinkEl=args[0].tabLinkEl;animate=args[0].animate;tabRoute=args[0].tabRoute;}else{var _args24=_slicedToArray(args,4);tabEl=_args24[0];tabLinkEl=_args24[1];animate=_args24[2];tabRoute=_args24[3];if(typeof args[1]==='boolean'){var _args25=_slicedToArray(args,4);tabEl=_args25[0];animate=_args25[1];tabLinkEl=_args25[2];tabRoute=_args25[3];if(args.length>2&&tabLinkEl.constructor===Object){var _args26=_slicedToArray(args,4);tabEl=_args26[0];animate=_args26[1];tabRoute=_args26[2];tabLinkEl=_args26[3];}}}if(typeof animate==='undefined')animate=true;var $newTabEl=(0,_dom2.default)(tabEl);if(tabRoute&&$newTabEl[0]){$newTabEl[0].f7TabRoute=tabRoute;}if($newTabEl.length===0||$newTabEl.hasClass('tab-active')){return{$newTabEl:$newTabEl,newTabEl:$newTabEl[0]};}var $tabLinkEl=void 0;if(tabLinkEl)$tabLinkEl=(0,_dom2.default)(tabLinkEl);var $tabsEl=$newTabEl.parent('.tabs');if($tabsEl.length===0){return{$newTabEl:$newTabEl,newTabEl:$newTabEl[0]};}// Release swipeouts in hidden tabs
if(app.swipeout)app.swipeout.allowOpen=true;// Animated tabs
var tabsChangedCallbacks=[];function onTabsChanged(callback){tabsChangedCallbacks.push(callback);}function tabsChanged(){tabsChangedCallbacks.forEach(function(callback){callback();});}var animated=false;if($tabsEl.parent().hasClass('tabs-animated-wrap')){$tabsEl.parent()[animate?'removeClass':'addClass']('not-animated');var transitionDuration=parseFloat($tabsEl.css('transition-duration').replace(',','.'));if(animate&&transitionDuration){$tabsEl.transitionEnd(tabsChanged);animated=true;}var tabsTranslate=(app.rtl?$newTabEl.index():-$newTabEl.index())*100;$tabsEl.transform('translate3d('+tabsTranslate+'%,0,0)');}// Swipeable tabs
if($tabsEl.parent().hasClass('tabs-swipeable-wrap')&&app.swiper){var swiper=$tabsEl.parent()[0].swiper;if(swiper&&swiper.activeIndex!==$newTabEl.index()){animated=true;swiper.once('slideChangeTransitionEnd',function(){tabsChanged();}).slideTo($newTabEl.index(),animate?undefined:0);}}// Remove active class from old tabs
var $oldTabEl=$tabsEl.children('.tab-active');$oldTabEl.removeClass('tab-active').trigger('tab:hide');app.emit('tabHide',$oldTabEl[0]);// Trigger 'show' event on new tab
$newTabEl.addClass('tab-active').trigger('tab:show');app.emit('tabShow',$newTabEl[0]);// Find related link for new tab
if(!$tabLinkEl){// Search by id
if(typeof tabEl==='string')$tabLinkEl=(0,_dom2.default)('.tab-link[href="'+tabEl+'"]');else $tabLinkEl=(0,_dom2.default)('.tab-link[href="#'+$newTabEl.attr('id')+'"]');// Search by data-tab
if(!$tabLinkEl||$tabLinkEl&&$tabLinkEl.length===0){(0,_dom2.default)('[data-tab]').each(function(index,el){if($newTabEl.is((0,_dom2.default)(el).attr('data-tab')))$tabLinkEl=(0,_dom2.default)(el);});}if(tabRoute&&(!$tabLinkEl||$tabLinkEl&&$tabLinkEl.length===0)){$tabLinkEl=(0,_dom2.default)('[data-route-tab-id="'+tabRoute.route.tab.id+'"]');if($tabLinkEl.length===0){$tabLinkEl=(0,_dom2.default)('.tab-link[href="'+tabRoute.url+'"]');}}if($tabLinkEl.length>1&&$newTabEl.parents('.page').length){// eslint-disable-next-line
$tabLinkEl=$tabLinkEl.filter(function(index,tabLinkElement){return(0,_dom2.default)(tabLinkElement).parents('.page')[0]===$newTabEl.parents('.page')[0];});if(app.theme==='ios'&&$tabLinkEl.length===0&&tabRoute){var $pageEl=$newTabEl.parents('.page');var $navbarEl=(0,_dom2.default)(app.navbar.getElByPage($pageEl));$tabLinkEl=$navbarEl.find('[data-route-tab-id="'+tabRoute.route.tab.id+'"]');if($tabLinkEl.length===0){$tabLinkEl=$navbarEl.find('.tab-link[href="'+tabRoute.url+'"]');}}}}if($tabLinkEl.length>0){// Find related link for old tab
var $oldTabLinkEl=void 0;if($oldTabEl&&$oldTabEl.length>0){// Search by id
var oldTabId=$oldTabEl.attr('id');if(oldTabId){$oldTabLinkEl=(0,_dom2.default)('.tab-link[href="#'+oldTabId+'"]');// Search by data-route-tab-id
if(!$oldTabLinkEl||$oldTabLinkEl&&$oldTabLinkEl.length===0){$oldTabLinkEl=(0,_dom2.default)('.tab-link[data-route-tab-id="'+oldTabId+'"]');}}// Search by data-tab
if(!$oldTabLinkEl||$oldTabLinkEl&&$oldTabLinkEl.length===0){(0,_dom2.default)('[data-tab]').each(function(index,tabLinkElement){if($oldTabEl.is((0,_dom2.default)(tabLinkElement).attr('data-tab')))$oldTabLinkEl=(0,_dom2.default)(tabLinkElement);});}if(!$oldTabLinkEl||$oldTabLinkEl&&$oldTabLinkEl.length===0){$oldTabLinkEl=$tabLinkEl.siblings('.tab-link-active');}}else if(tabRoute){$oldTabLinkEl=$tabLinkEl.siblings('.tab-link-active');}if($oldTabLinkEl&&$oldTabLinkEl.length>1&&$oldTabEl&&$oldTabEl.parents('.page').length){// eslint-disable-next-line
$oldTabLinkEl=$oldTabLinkEl.filter(function(index,tabLinkElement){return(0,_dom2.default)(tabLinkElement).parents('.page')[0]===$oldTabEl.parents('.page')[0];});}if($oldTabLinkEl&&$oldTabLinkEl.length>0)$oldTabLinkEl.removeClass('tab-link-active');// Update links' classes
if($tabLinkEl&&$tabLinkEl.length>0){$tabLinkEl.addClass('tab-link-active');// Material Highlight
if(app.theme==='md'&&app.toolbar){var $tabbarEl=$tabLinkEl.parents('.tabbar, .tabbar-labels');if($tabbarEl.length>0){app.toolbar.setHighlight($tabbarEl);}}}}return{$newTabEl:$newTabEl,newTabEl:$newTabEl[0],$oldTabEl:$oldTabEl,oldTabEl:$oldTabEl[0],onTabsChanged:onTabsChanged,animated:animated};}};var Tabs={name:'tabs',create:function create(){var app=this;Utils.extend(app,{tab:{show:Tab.show.bind(app)}});},clicks:{'.tab-link':function tabLinkClick($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;if($clickedEl.attr('href')&&$clickedEl.attr('href').indexOf('#')===0||$clickedEl.attr('data-tab')){app.tab.show({tabEl:data.tab||$clickedEl.attr('href'),tabLinkEl:$clickedEl,animate:data.animate});}}}};function swipePanel(panel){var app=panel.app;Utils.extend(panel,{swipeable:true,swipeInitialized:true});var params=app.params.panel;var $el=panel.$el,$backdropEl=panel.$backdropEl,side=panel.side,effect=panel.effect;var otherPanel=void 0;var isTouched=void 0;var isMoved=void 0;var isScrolling=void 0;var touchesStart={};var touchStartTime=void 0;var touchesDiff=void 0;var translate=void 0;var backdropOpacity=void 0;var panelWidth=void 0;var direction=void 0;var $viewEl=void 0;var touchMoves=0;function handleTouchStart(e){if(!panel.swipeable)return;if(!app.panel.allowOpen||!params.swipe&&!params.swipeOnlyClose||isTouched)return;if((0,_dom2.default)('.modal-in, .photo-browser-in').length>0)return;otherPanel=app.panel[side==='left'?'right':'left']||{};if(!panel.opened&&otherPanel.opened)return;if(!(params.swipeCloseOpposite||params.swipeOnlyClose)){if(otherPanel.opened)return;}if(e.target&&e.target.nodeName.toLowerCase()==='input'&&e.target.type==='range')return;if((0,_dom2.default)(e.target).closest('.range-slider, .tabs-swipeable-wrap, .calendar-months, .no-swipe-panel').length>0)return;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;if(params.swipeOnlyClose&&!panel.opened){return;}if(params.swipe!=='both'&&params.swipeCloseOpposite&&params.swipe!==side&&!panel.opened){return;}if(params.swipeActiveArea&&!panel.opened){if(side==='left'){if(touchesStart.x>params.swipeActiveArea)return;}if(side==='right'){if(touchesStart.x<app.width-params.swipeActiveArea)return;}}if(params.swipeCloseActiveAreaSide&&panel.opened){if(side==='left'){if(touchesStart.x<$el[0].offsetWidth-params.swipeCloseActiveAreaSide)return;}if(side==='right'){if(touchesStart.x>app.width-$el[0].offsetWidth+params.swipeCloseActiveAreaSide)return;}}touchMoves=0;$viewEl=(0,_dom2.default)(panel.getViewEl());isMoved=false;isTouched=true;isScrolling=undefined;touchStartTime=Utils.now();direction=undefined;}function handleTouchMove(e){if(!isTouched)return;touchMoves+=1;if(touchMoves<2)return;if(e.f7PreventSwipePanel||app.preventSwipePanelBySwipeBack||app.preventSwipePanel){isTouched=false;return;}var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x));}if(isScrolling){isTouched=false;return;}if(!direction){if(pageX>touchesStart.x){direction='to-right';}else{direction='to-left';}if(params.swipe==='both'){if(params.swipeActiveArea>0&&!panel.opened){if(side==='left'&&touchesStart.x>params.swipeActiveArea){isTouched=false;return;}if(side==='right'&&touchesStart.x<app.width-params.swipeActiveArea){isTouched=false;return;}}}if($el.hasClass('panel-visible-by-breakpoint')){isTouched=false;return;}if(side==='left'&&direction==='to-left'&&!$el.hasClass('panel-active')||side==='right'&&direction==='to-right'&&!$el.hasClass('panel-active')){isTouched=false;return;}}if(params.swipeNoFollow){var timeDiff=new Date().getTime()-touchStartTime;if(timeDiff<300){if(direction==='to-left'){if(side==='right')app.panel.open(side);if(side==='left'&&$el.hasClass('panel-active'))app.panel.close();}if(direction==='to-right'){if(side==='left')app.panel.open(side);if(side==='right'&&$el.hasClass('panel-active'))app.panel.close();}}isTouched=false;isMoved=false;return;}if(!isMoved){if(!panel.opened){$el.show();$backdropEl.show();$el.trigger('panel:swipeopen',panel);panel.emit('local::swipeOpen panelSwipeOpen',panel);}panelWidth=$el[0].offsetWidth;$el.transition(0);}isMoved=true;e.preventDefault();var threshold=panel.opened?0:-params.swipeThreshold;if(side==='right')threshold=-threshold;touchesDiff=pageX-touchesStart.x+threshold;if(side==='right'){if(effect==='cover'){translate=touchesDiff+(panel.opened?0:panelWidth);if(translate<0)translate=0;if(translate>panelWidth){translate=panelWidth;}}else{translate=touchesDiff-(panel.opened?panelWidth:0);if(translate>0)translate=0;if(translate<-panelWidth){translate=-panelWidth;}}}else{translate=touchesDiff+(panel.opened?panelWidth:0);if(translate<0)translate=0;if(translate>panelWidth){translate=panelWidth;}}if(effect==='reveal'){$viewEl.transform('translate3d('+translate+'px,0,0)').transition(0);$backdropEl.transform('translate3d('+translate+'px,0,0)').transition(0);$el.trigger('panel:swipe',panel,Math.abs(translate/panelWidth));panel.emit('local::swipe panelSwipe',panel,Math.abs(translate/panelWidth));}else{if(side==='left')translate-=panelWidth;$el.transform('translate3d('+translate+'px,0,0)').transition(0);$backdropEl.transition(0);backdropOpacity=1-Math.abs(translate/panelWidth);$backdropEl.css({opacity:backdropOpacity});$el.trigger('panel:swipe',panel,Math.abs(translate/panelWidth));panel.emit('local::swipe panelSwipe',panel,Math.abs(translate/panelWidth));}}function handleTouchEnd(){if(!isTouched||!isMoved){isTouched=false;isMoved=false;return;}isTouched=false;isMoved=false;var timeDiff=new Date().getTime()-touchStartTime;var action=void 0;var edge=translate===0||Math.abs(translate)===panelWidth;var threshold=params.swipeThreshold||0;if(!panel.opened){if(Math.abs(touchesDiff)<threshold){action='reset';}else if(effect==='cover'){if(translate===0){action='swap';// open
}else if(timeDiff<300&&Math.abs(translate)>0){action='swap';// open
}else if(timeDiff>=300&&Math.abs(translate)<panelWidth/2){action='swap';// open
}else{action='reset';// close
}}else if(translate===0){action='reset';}else if(timeDiff<300&&Math.abs(translate)>0||timeDiff>=300&&Math.abs(translate)>=panelWidth/2){action='swap';}else{action='reset';}}else if(effect==='cover'){if(translate===0){action='reset';// open
}else if(timeDiff<300&&Math.abs(translate)>0){action='swap';// open
}else if(timeDiff>=300&&Math.abs(translate)<panelWidth/2){action='reset';// open
}else{action='swap';// close
}}else if(translate===-panelWidth){action='reset';}else if(timeDiff<300&&Math.abs(translate)>=0||timeDiff>=300&&Math.abs(translate)<=panelWidth/2){if(side==='left'&&translate===panelWidth)action='reset';else action='swap';}else{action='reset';}if(action==='swap'){if(panel.opened){panel.close(!edge);}else{panel.open(!edge);}}if(action==='reset'){if(!panel.opened){if(edge){$el.css({display:''});}else{var target=effect==='reveal'?$viewEl:$el;(0,_dom2.default)('html').addClass('with-panel-transitioning');target.transitionEnd(function(){if($el.hasClass('panel-active'))return;$el.css({display:''});(0,_dom2.default)('html').removeClass('with-panel-transitioning');});}}}if(effect==='reveal'){Utils.nextFrame(function(){$viewEl.transition('');$viewEl.transform('');});}$el.transition('').transform('');$backdropEl.css({display:''}).transform('').transition('').css('opacity','');}// Add Events
app.on('touchstart:passive',handleTouchStart);app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);panel.on('panelDestroy',function(){app.off('touchstart:passive',handleTouchStart);app.off('touchmove:active',handleTouchMove);app.off('touchend:passive',handleTouchEnd);});}var Panel=function(_Framework7Class7){_inherits(Panel,_Framework7Class7);function Panel(app){var _ret35,_ret36,_ret37;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Panel);var _this17=_possibleConstructorReturn(this,(Panel.__proto__||Object.getPrototypeOf(Panel)).call(this,params,[app]));var panel=_this17;var el=params.el;var $el=(0,_dom2.default)(el);if($el.length===0)return _ret35=panel,_possibleConstructorReturn(_this17,_ret35);if($el[0].f7Panel)return _ret36=$el[0].f7Panel,_possibleConstructorReturn(_this17,_ret36);$el[0].f7Panel=panel;var opened=params.opened,side=params.side,effect=params.effect;if(typeof opened==='undefined')opened=$el.hasClass('panel-active');if(typeof side==='undefined')side=$el.hasClass('panel-left')?'left':'right';if(typeof effect==='undefined')effect=$el.hasClass('panel-cover')?'cover':'reveal';if(!app.panel[side]){Utils.extend(app.panel,_defineProperty({},side,panel));}var $backdropEl=(0,_dom2.default)('.panel-backdrop');if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="panel-backdrop"></div>');$backdropEl.insertBefore($el);}Utils.extend(panel,{app:app,side:side,effect:effect,$el:$el,el:$el[0],opened:opened,$backdropEl:$backdropEl,backdropEl:$backdropEl[0]});// Install Modules
panel.useModules();// Init
panel.init();return _ret37=panel,_possibleConstructorReturn(_this17,_ret37);}_createClass(Panel,[{key:'init',value:function init(){var panel=this;var app=panel.app;if(app.params.panel[panel.side+'Breakpoint']){panel.initBreakpoints();}{if(app.params.panel.swipe===panel.side||app.params.panel.swipe==='both'||app.params.panel.swipe&&app.params.panel.swipe!==panel.side&&app.params.panel.swipeCloseOpposite){panel.initSwipePanel();}}}},{key:'getViewEl',value:function getViewEl(){var panel=this;var app=panel.app;var viewEl=void 0;if(app.root.children('.views').length>0){viewEl=app.root.children('.views')[0];}else{viewEl=app.root.children('.view')[0];}return viewEl;}},{key:'setBreakpoint',value:function setBreakpoint(){var panel=this;var app=panel.app;var side=panel.side,$el=panel.$el;var $viewEl=(0,_dom2.default)(panel.getViewEl());var breakpoint=app.params.panel[side+'Breakpoint'];var wasVisible=$el.hasClass('panel-visible-by-breakpoint');if(app.width>=breakpoint){if(!wasVisible){(0,_dom2.default)('html').removeClass('with-panel-'+side+'-reveal with-panel-'+side+'-cover with-panel');$el.css('display','').addClass('panel-visible-by-breakpoint').removeClass('panel-active');panel.onOpen();panel.onOpened();$viewEl.css(_defineProperty({},'margin-'+side,$el.width()+'px'));app.allowPanelOpen=true;app.emit('local::breakpoint panelBreakpoint');panel.$el.trigger('panel:breakpoint',panel);}}else if(wasVisible){$el.css('display','').removeClass('panel-visible-by-breakpoint panel-active');panel.onClose();panel.onClosed();$viewEl.css(_defineProperty({},'margin-'+side,''));app.emit('local::breakpoint panelBreakpoint');panel.$el.trigger('panel:breakpoint',panel);}}},{key:'initBreakpoints',value:function initBreakpoints(){var panel=this;var app=panel.app;panel.resizeHandler=function resizeHandler(){panel.setBreakpoint();};if(app.params.panel[panel.side+'Breakpoint']){app.on('resize',panel.resizeHandler);}panel.setBreakpoint();return panel;}},{key:'initSwipePanel',value:function initSwipePanel(){{swipePanel(this);}}},{key:'destroy',value:function destroy(){var panel=this;var app=panel.app;panel.emit('local::beforeDestroy panelBeforeDestroy',panel);panel.$el.trigger('panel:beforedestroy',panel);if(panel.resizeHandler){app.off('resize',panel.resizeHandler);}panel.$el.trigger('panel:destroy',panel);panel.emit('local::destroy panelDestroy');delete app.panel[panel.side];delete panel.el.f7Panel;Utils.deleteProps(panel);panel=null;}},{key:'open',value:function open(){var animate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var panel=this;var app=panel.app;if(!app.panel.allowOpen)return false;var side=panel.side,effect=panel.effect,$el=panel.$el,$backdropEl=panel.$backdropEl,opened=panel.opened;// Ignore if opened
if(opened||$el.hasClass('panel-visible-by-breakpoint')||$el.hasClass('panel-active'))return false;// Close if some panel is opened
app.panel.close(side==='left'?'right':'left',animate);app.panel.allowOpen=false;$el[animate?'removeClass':'addClass']('not-animated');$el.css({display:'block'}).addClass('panel-active');$backdropEl[animate?'removeClass':'addClass']('not-animated');$backdropEl.show();/* eslint no-underscore-dangle: ["error", { "allow": ["_clientLeft"] }] */panel._clientLeft=$el[0].clientLeft;(0,_dom2.default)('html').addClass('with-panel with-panel-'+side+'-'+effect);panel.onOpen();// Transition End;
var transitionEndTarget=effect==='reveal'?$el.nextAll('.view, .views').eq(0):$el;function panelTransitionEnd(){transitionEndTarget.transitionEnd(function(e){if((0,_dom2.default)(e.target).is(transitionEndTarget)){if($el.hasClass('panel-active')){panel.onOpened();$backdropEl.css({display:''});}else{panel.onClosed();$backdropEl.css({display:''});}}else panelTransitionEnd();});}if(animate){panelTransitionEnd();}else{panel.onOpened();$backdropEl.css({display:''});}return true;}},{key:'close',value:function close(){var animate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var panel=this;var app=panel.app;var side=panel.side,effect=panel.effect,$el=panel.$el,$backdropEl=panel.$backdropEl,opened=panel.opened;if(!opened||$el.hasClass('panel-visible-by-breakpoint')||!$el.hasClass('panel-active'))return false;$el[animate?'removeClass':'addClass']('not-animated');$el.removeClass('panel-active');$backdropEl[animate?'removeClass':'addClass']('not-animated');var transitionEndTarget=effect==='reveal'?$el.nextAll('.view, .views').eq(0):$el;panel.onClose();app.panel.allowOpen=false;if(animate){transitionEndTarget.transitionEnd(function(){if($el.hasClass('panel-active'))return;$el.css({display:''});(0,_dom2.default)('html').removeClass('with-panel-transitioning');panel.onClosed();});(0,_dom2.default)('html').removeClass('with-panel with-panel-'+side+'-'+effect).addClass('with-panel-transitioning');}else{$el.css({display:''});$el.removeClass('not-animated');(0,_dom2.default)('html').removeClass('with-panel with-panel-transitioning with-panel-'+side+'-'+effect);panel.onClosed();}return true;}},{key:'onOpen',value:function onOpen(){var panel=this;panel.opened=true;panel.$el.trigger('panel:open',panel);panel.emit('local::open panelOpen',panel);}},{key:'onOpened',value:function onOpened(){var panel=this;var app=panel.app;app.panel.allowOpen=true;panel.$el.trigger('panel:opened',panel);panel.emit('local::opened panelOpened',panel);}},{key:'onClose',value:function onClose(){var panel=this;panel.opened=false;panel.$el.addClass('panel-closing');panel.$el.trigger('panel:close',panel);panel.emit('local::close panelClose',panel);}},{key:'onClosed',value:function onClosed(){var panel=this;var app=panel.app;app.panel.allowOpen=true;panel.$el.removeClass('panel-closing');panel.$el.trigger('panel:closed',panel);panel.emit('local::closed panelClosed',panel);}}]);return Panel;}(Framework7Class);var Panel$1={name:'panel',params:{panel:{leftBreakpoint:0,rightBreakpoint:0,swipe:undefined,// or 'left' or 'right' or 'both'
swipeActiveArea:0,swipeCloseActiveAreaSide:0,swipeCloseOpposite:true,swipeOnlyClose:false,swipeNoFollow:false,swipeThreshold:0,closeByBackdropClick:true}},static:{Panel:Panel},instance:{panel:{allowOpen:true}},create:function create(){var app=this;Utils.extend(app.panel,{disableSwipe:function disableSwipe(){var panel=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'both';var side=void 0;var panels=[];if(typeof panel==='string'){if(panel==='both'){side='both';panels=[app.panel.left,app.panel.right];}else{side=panel;panels.push(app.panel[side]);}}else{panels=[panel];}panels.forEach(function(panelInstance){if(panelInstance)Utils.extend(panelInstance,{swipeable:false});});},enableSwipe:function enableSwipe(){var panel=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'both';var panels=[];var side=void 0;if(typeof panel==='string'){side=panel;if(app.params.panel.swipe==='left'&&side==='right'||app.params.panel.swipe==='right'&&side==='left'||side==='both'){side='both';app.params.panel.swipe=side;panels=[app.panel.left,app.panel.right];}else{app.params.panel.swipe=side;panels.push(app.panel[side]);}}else if(panel){panels.push(panel);}if(panels.length){panels.forEach(function(panelInstance){if(!panelInstance)return;if(!panelInstance.swipeInitialized){panelInstance.initSwipePanel();}else{Utils.extend(panelInstance,{swipeable:true});}});}},create:function create(params){return new Panel(app,params);},open:function open(side,animate){var panelSide=side;if(!panelSide){if((0,_dom2.default)('.panel').length>1){return false;}panelSide=(0,_dom2.default)('.panel').hasClass('panel-left')?'left':'right';}if(!panelSide)return false;if(app.panel[panelSide]){return app.panel[panelSide].open(animate);}var $panelEl=(0,_dom2.default)('.panel-'+panelSide);if($panelEl.length>0){return app.panel.create({el:$panelEl}).open(animate);}return false;},close:function close(side,animate){var $panelEl=void 0;var panelSide=void 0;if(panelSide){panelSide=side;$panelEl=(0,_dom2.default)('.panel-'+panelSide);}else{$panelEl=(0,_dom2.default)('.panel.panel-active');panelSide=$panelEl.hasClass('panel-left')?'left':'right';}if(!panelSide)return false;if(app.panel[panelSide]){return app.panel[panelSide].close(animate);}if($panelEl.length>0){return app.panel.create({el:$panelEl}).close(animate);}return false;},get:function get(side){var panelSide=side;if(!panelSide){if((0,_dom2.default)('.panel').length>1){return undefined;}panelSide=(0,_dom2.default)('.panel').hasClass('panel-left')?'left':'right';}if(!panelSide)return undefined;if(app.panel[panelSide]){return app.panel[panelSide];}var $panelEl=(0,_dom2.default)('.panel-'+panelSide);if($panelEl.length>0){return app.panel.create({el:$panelEl});}return undefined;}});},on:{init:function init(){var app=this;// Create Panels
(0,_dom2.default)('.panel').each(function(index,panelEl){var side=(0,_dom2.default)(panelEl).hasClass('panel-left')?'left':'right';app.panel[side]=app.panel.create({el:panelEl,side:side});});}},clicks:{'.panel-open':function open(clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;var side='left';if(data.panel==='right'||(0,_dom2.default)('.panel').length===1&&(0,_dom2.default)('.panel').hasClass('panel-right')){side='right';}app.panel.open(side,data.animate);},'.panel-close':function close(clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;var side=data.panel;app.panel.close(side,data.animate);},'.panel-backdrop':function close(){var app=this;var $panelEl=(0,_dom2.default)('.panel-active');var instance=$panelEl[0]&&$panelEl[0].f7Panel;$panelEl.trigger('panel:backdrop-click');if(instance){instance.emit('backdropClick',instance);}app.emit('panelBackdropClick',instance||$panelEl[0]);if(app.params.panel.closeByBackdropClick)app.panel.close();}}};var Card={name:'card'};var Chip={name:'chip'};// Form Data
var FormData$1={store:function store(form,data){var app=this;var formId=form;var $formEl=(0,_dom2.default)(form);if($formEl.length&&$formEl.is('form')&&$formEl.attr('id')){formId=$formEl.attr('id');}// Store form data in app.formsData
app.form.data['form-'+formId]=data;// Store form data in local storage also
try{_ssrWindow.window.localStorage['f7form-'+formId]=JSON.stringify(data);}catch(e){throw e;}},get:function get(form){var app=this;var formId=form;var $formEl=(0,_dom2.default)(form);if($formEl.length&&$formEl.is('form')&&$formEl.attr('id')){formId=$formEl.attr('id');}try{if(_ssrWindow.window.localStorage['f7form-'+formId]){return JSON.parse(_ssrWindow.window.localStorage['f7form-'+formId]);}}catch(e){throw e;}if(app.form.data['form-'+formId]){return app.form.data['form-'+formId];}return undefined;},remove:function remove(form){var app=this;var formId=form;var $formEl=(0,_dom2.default)(form);if($formEl.length&&$formEl.is('form')&&$formEl.attr('id')){formId=$formEl.attr('id');}// Delete form data from app.formsData
if(app.form.data['form-'+formId]){app.form.data['form-'+formId]='';delete app.form.data['form-'+formId];}// Delete form data from local storage also
try{if(_ssrWindow.window.localStorage['f7form-'+formId]){_ssrWindow.window.localStorage['f7form-'+formId]='';_ssrWindow.window.localStorage.removeItem('f7form-'+formId);}}catch(e){throw e;}}};// Form Storage
var FormStorage={init:function init(formEl){var app=this;var $formEl=(0,_dom2.default)(formEl);var formId=$formEl.attr('id');if(!formId)return;var initialData=app.form.getFormData(formId);if(initialData){app.form.fillFromData($formEl,initialData);}function store(){var data=app.form.convertToData($formEl);if(!data)return;app.form.storeFormData(formId,data);$formEl.trigger('form:storedata',data);app.emit('formStoreData',$formEl[0],data);}$formEl.on('change submit',store);},destroy:function destroy(formEl){var $formEl=(0,_dom2.default)(formEl);$formEl.off('change submit');}};// Form To/From Data
function formToData(formEl){var app=this;var $formEl=(0,_dom2.default)(formEl).eq(0);if($formEl.length===0)return undefined;// Form data
var data={};// Skip input types
var skipTypes=['submit','image','button','file'];var skipNames=[];$formEl.find('input, select, textarea').each(function(inputIndex,inputEl){var $inputEl=(0,_dom2.default)(inputEl);if($inputEl.hasClass('ignore-store-data')||$inputEl.hasClass('no-store-data')){return;}var name=$inputEl.attr('name');var type=$inputEl.attr('type');var tag=inputEl.nodeName.toLowerCase();if(skipTypes.indexOf(type)>=0)return;if(skipNames.indexOf(name)>=0||!name)return;if(tag==='select'&&$inputEl.prop('multiple')){skipNames.push(name);data[name]=[];$formEl.find('select[name="'+name+'"] option').each(function(index,el){if(el.selected)data[name].push(el.value);});}else{switch(type){case'checkbox':skipNames.push(name);data[name]=[];$formEl.find('input[name="'+name+'"]').each(function(index,el){if(el.checked)data[name].push(el.value);});break;case'radio':skipNames.push(name);$formEl.find('input[name="'+name+'"]').each(function(index,el){if(el.checked)data[name]=el.value;});break;default:data[name]=$inputEl.val();break;}}});$formEl.trigger('form:todata',data);app.emit('formToData',$formEl[0],data);return data;}function formFromData(formEl,formData){var app=this;var $formEl=(0,_dom2.default)(formEl).eq(0);if(!$formEl.length)return;var data=formData;var formId=$formEl.attr('id');if(!data&&formId){data=app.form.getFormData(formId);}if(!data)return;// Skip input types
var skipTypes=['submit','image','button','file'];var skipNames=[];$formEl.find('input, select, textarea').each(function(inputIndex,inputEl){var $inputEl=(0,_dom2.default)(inputEl);if($inputEl.hasClass('ignore-store-data')||$inputEl.hasClass('no-store-data')){return;}var name=$inputEl.attr('name');var type=$inputEl.attr('type');var tag=inputEl.nodeName.toLowerCase();if(typeof data[name]==='undefined'||data[name]===null)return;if(skipTypes.indexOf(type)>=0)return;if(skipNames.indexOf(name)>=0||!name)return;if(tag==='select'&&$inputEl.prop('multiple')){skipNames.push(name);$formEl.find('select[name="'+name+'"] option').each(function(index,el){var selectEl=el;if(data[name].indexOf(el.value)>=0)selectEl.selected=true;else selectEl.selected=false;});}else{switch(type){case'checkbox':skipNames.push(name);$formEl.find('input[name="'+name+'"]').each(function(index,el){var checkboxEl=el;if(data[name].indexOf(el.value)>=0)checkboxEl.checked=true;else checkboxEl.checked=false;});break;case'radio':skipNames.push(name);$formEl.find('input[name="'+name+'"]').each(function(index,el){var radioEl=el;if(data[name]===el.value)radioEl.checked=true;else radioEl.checked=false;});break;default:$inputEl.val(data[name]);break;}}if(tag==='select'||tag==='input'||tag==='textarea'){$inputEl.trigger('change','fromdata');}});$formEl.trigger('form:fromdata',data);app.emit('formFromData',$formEl[0],data);}function initAjaxForm(){var app=this;function onSubmitChange(e,fromData){var $formEl=(0,_dom2.default)(this);if(e.type==='change'&&!$formEl.hasClass('form-ajax-submit-onchange'))return;if(e.type==='submit')e.preventDefault();if(e.type==='change'&&fromData==='fromdata')return;var method=($formEl.attr('method')||'GET').toUpperCase();var contentType=$formEl.prop('enctype')||$formEl.attr('enctype');var url=$formEl.attr('action');if(!url)return;var data=void 0;if(method==='POST'){if(contentType==='application/x-www-form-urlencoded'){data=app.form.convertToData($formEl[0]);}else{data=new _ssrWindow.window.FormData($formEl[0]);}}else{data=Utils.serializeObject(app.form.convertToData($formEl[0]));}var xhr=app.request({method:method,url:url,contentType:contentType,data:data,beforeSend:function beforeSend(){$formEl.trigger('formajax:beforesend',data,xhr);app.emit('formAjaxBeforeSend',$formEl[0],data,xhr);},error:function error(){$formEl.trigger('formajax:error',data,xhr);app.emit('formAjaxError',$formEl[0],data,xhr);},complete:function complete(){$formEl.trigger('formajax:complete',data,xhr);app.emit('formAjaxComplete',$formEl[0],data,xhr);},success:function success(){$formEl.trigger('formajax:success',data,xhr);app.emit('formAjaxSuccess',$formEl[0],data,xhr);}});}(0,_dom2.default)(_ssrWindow.document).on('submit change','form.form-ajax-submit, form.form-ajax-submit-onchange',onSubmitChange);}var Form={name:'form',create:function create(){var app=this;Utils.extend(app,{form:{data:{},storeFormData:FormData$1.store.bind(app),getFormData:FormData$1.get.bind(app),removeFormData:FormData$1.remove.bind(app),convertToData:formToData.bind(app),fillFromData:formFromData.bind(app),storage:{init:FormStorage.init.bind(app),destroy:FormStorage.destroy.bind(app)}}});},on:{init:function init(){var app=this;initAjaxForm.call(app);},tabBeforeRemove:function tabBeforeRemove(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.form-store-data').each(function(index,formEl){app.form.storage.destroy(formEl);});},tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.form-store-data').each(function(index,formEl){app.form.storage.init(formEl);});},pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.form-store-data').each(function(index,formEl){app.form.storage.destroy(formEl);});},pageInit:function pageInit(page){var app=this;page.$el.find('.form-store-data').each(function(index,formEl){app.form.storage.init(formEl);});}}};var Input={ignoreTypes:['checkbox','button','submit','range','radio','image'],createTextareaResizableShadow:function createTextareaResizableShadow(){var $shadowEl=(0,_dom2.default)(_ssrWindow.document.createElement('textarea'));$shadowEl.addClass('textarea-resizable-shadow');$shadowEl.prop({disabled:true,readonly:true});Input.textareaResizableShadow=$shadowEl;},textareaResizableShadow:undefined,resizeTextarea:function resizeTextarea(textareaEl){var app=this;var $textareaEl=(0,_dom2.default)(textareaEl);if(!Input.textareaResizableShadow){Input.createTextareaResizableShadow();}var $shadowEl=Input.textareaResizableShadow;if(!$textareaEl.length)return;if(!$textareaEl.hasClass('resizable'))return;if(Input.textareaResizableShadow.parents().length===0){app.root.append($shadowEl);}var styles=_ssrWindow.window.getComputedStyle($textareaEl[0]);'padding margin width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display'.split(' ').forEach(function(style){var styleValue=styles[style];if('font-size line-height letter-spacing width'.split(' ').indexOf(style)>=0){styleValue=styleValue.replace(',','.');}$shadowEl.css(style,styleValue);});var currentHeight=$textareaEl[0].clientHeight;$shadowEl.val('');var initialHeight=$shadowEl[0].scrollHeight;$shadowEl.val($textareaEl.val());$shadowEl.css('height',0);var scrollHeight=$shadowEl[0].scrollHeight;if(currentHeight!==scrollHeight){if(scrollHeight>initialHeight){$textareaEl.css('height',scrollHeight+'px');$textareaEl.trigger('textarea:resize',{initialHeight:initialHeight,currentHeight:currentHeight,scrollHeight:scrollHeight});}else if(scrollHeight<currentHeight){$textareaEl.css('height','');$textareaEl.trigger('textarea:resize',{initialHeight:initialHeight,currentHeight:currentHeight,scrollHeight:scrollHeight});}}},validate:function validate(inputEl){var $inputEl=(0,_dom2.default)(inputEl);if(!$inputEl.length)return;var $itemInputEl=$inputEl.parents('.item-input');var $inputWrapEl=$inputEl.parents('.input');var validity=$inputEl[0].validity;var validationMessage=$inputEl.dataset().errorMessage||$inputEl[0].validationMessage||'';if(!validity)return;if(!validity.valid){var $errorEl=$inputEl.nextAll('.item-input-error-message, .input-error-message');if(validationMessage){if($errorEl.length===0){$errorEl=(0,_dom2.default)('<div class="'+($inputWrapEl.length?'input-error-message':'item-input-error-message')+'"></div>');$errorEl.insertAfter($inputEl);}$errorEl.text(validationMessage);}if($errorEl.length>0){$itemInputEl.addClass('item-input-with-error-message');$inputWrapEl.addClass('input-with-eror-message');}$itemInputEl.addClass('item-input-invalid');$inputWrapEl.addClass('input-invalid');$inputEl.addClass('input-invalid');}else{$itemInputEl.removeClass('item-input-invalid item-input-with-error-message');$inputWrapEl.removeClass('input-invalid input-with-error-message');$inputEl.removeClass('input-invalid');}},validateInputs:function validateInputs(el){var app=this;(0,_dom2.default)(el).find('input, textarea, select').each(function(index,inputEl){app.input.validate(inputEl);});},focus:function focus(inputEl){var $inputEl=(0,_dom2.default)(inputEl);var type=$inputEl.attr('type');if(Input.ignoreTypes.indexOf(type)>=0)return;$inputEl.parents('.item-input').addClass('item-input-focused');$inputEl.parents('.input').addClass('input-focused');$inputEl.addClass('input-focused');},blur:function blur(inputEl){var $inputEl=(0,_dom2.default)(inputEl);$inputEl.parents('.item-input').removeClass('item-input-focused');$inputEl.parents('.input').removeClass('input-focused');$inputEl.removeClass('input-focused');},checkEmptyState:function checkEmptyState(inputEl){var $inputEl=(0,_dom2.default)(inputEl);var value=$inputEl.val();var $itemInputEl=$inputEl.parents('.item-input');var $inputWrapEl=$inputEl.parents('.input');if(value&&typeof value==='string'&&value.trim()!==''||Array.isArray(value)&&value.length>0){$itemInputEl.addClass('item-input-with-value');$inputWrapEl.addClass('input-with-value');$inputEl.addClass('input-with-value');$inputEl.trigger('input:notempty');}else{$itemInputEl.removeClass('item-input-with-value');$inputWrapEl.removeClass('input-with-value');$inputEl.removeClass('input-with-value');$inputEl.trigger('input:empty');}},scrollIntoView:function scrollIntoView(inputEl){var duration=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var centered=arguments[2];var force=arguments[3];var $inputEl=(0,_dom2.default)(inputEl);var $scrollableEl=$inputEl.parents('.page-content, .panel').eq(0);if(!$scrollableEl.length){return false;}var contentHeight=$scrollableEl[0].offsetHeight;var contentScrollTop=$scrollableEl[0].scrollTop;var contentPaddingTop=parseInt($scrollableEl.css('padding-top'),10);var contentPaddingBottom=parseInt($scrollableEl.css('padding-bottom'),10);var contentOffsetTop=$scrollableEl.offset().top-contentScrollTop;var inputOffsetTop=$inputEl.offset().top-contentOffsetTop;var inputHeight=$inputEl[0].offsetHeight;var min=inputOffsetTop+contentScrollTop-contentPaddingTop;var max=inputOffsetTop+contentScrollTop-contentHeight+contentPaddingBottom+inputHeight;var centeredPosition=min+(max-min)/2;if(contentScrollTop>min){$scrollableEl.scrollTop(centered?centeredPosition:min,duration);return true;}else if(contentScrollTop<max){$scrollableEl.scrollTop(centered?centeredPosition:max,duration);return true;}else if(force){$scrollableEl.scrollTop(centered?centeredPosition:max,duration);}return false;},init:function init(){var app=this;Input.createTextareaResizableShadow();function onFocus(){var inputEl=this;if(app.params.input.scrollIntoViewOnFocus){if(Device.android){(0,_dom2.default)(_ssrWindow.window).once('resize',function(){if(_ssrWindow.document&&_ssrWindow.document.activeElement===inputEl){app.input.scrollIntoView(inputEl,app.params.input.scrollIntoViewDuration,app.params.input.scrollIntoViewCentered,app.params.input.scrollIntoViewAlways);}});}else{app.input.scrollIntoView(inputEl,app.params.input.scrollIntoViewDuration,app.params.input.scrollIntoViewCentered,app.params.input.scrollIntoViewAlways);}}app.input.focus(inputEl);}function onBlur(){var $inputEl=(0,_dom2.default)(this);var tag=$inputEl[0].nodeName.toLowerCase();app.input.blur($inputEl);if($inputEl.dataset().validate||$inputEl.attr('validate')!==null){app.input.validate($inputEl);}// Resize textarea
if(tag==='textarea'&&$inputEl.hasClass('resizable')){if(Input.textareaResizableShadow)Input.textareaResizableShadow.remove();}}function onChange(){var $inputEl=(0,_dom2.default)(this);var type=$inputEl.attr('type');var tag=$inputEl[0].nodeName.toLowerCase();if(Input.ignoreTypes.indexOf(type)>=0)return;// Check Empty State
app.input.checkEmptyState($inputEl);// Check validation
if($inputEl.dataset().validate||$inputEl.attr('validate')!==null){app.input.validate($inputEl);}// Resize textarea
if(tag==='textarea'&&$inputEl.hasClass('resizable')){app.input.resizeTextarea($inputEl);}}function onInvalid(e){var $inputEl=(0,_dom2.default)(this);if($inputEl.dataset().validate||$inputEl.attr('validate')!==null){e.preventDefault();app.input.validate($inputEl);}}function clearInput(){var $clicked=(0,_dom2.default)(this);var $inputEl=$clicked.siblings('input, textarea').eq(0);var previousValue=$inputEl.val();$inputEl.val('').trigger('change input').focus().trigger('input:clear',previousValue);}(0,_dom2.default)(_ssrWindow.document).on('click','.input-clear-button',clearInput);(0,_dom2.default)(_ssrWindow.document).on('change input','input, textarea, select',onChange,true);(0,_dom2.default)(_ssrWindow.document).on('focus','input, textarea, select',onFocus,true);(0,_dom2.default)(_ssrWindow.document).on('blur','input, textarea, select',onBlur,true);(0,_dom2.default)(_ssrWindow.document).on('invalid','input, textarea, select',onInvalid,true);}};var Input$1={name:'input',params:{input:{scrollIntoViewOnFocus:Device.android,scrollIntoViewCentered:false,scrollIntoViewDuration:0,scrollIntoViewAlways:false}},create:function create(){var app=this;Utils.extend(app,{input:{scrollIntoView:Input.scrollIntoView.bind(app),focus:Input.focus.bind(app),blur:Input.blur.bind(app),validate:Input.validate.bind(app),validateInputs:Input.validateInputs.bind(app),checkEmptyState:Input.checkEmptyState.bind(app),resizeTextarea:Input.resizeTextarea.bind(app),init:Input.init.bind(app)}});},on:{init:function init(){var app=this;app.input.init();},tabMounted:function tabMounted(tabEl){var app=this;var $tabEl=(0,_dom2.default)(tabEl);$tabEl.find('.item-input, .input').each(function(itemInputIndex,itemInputEl){var $itemInputEl=(0,_dom2.default)(itemInputEl);$itemInputEl.find('input, select, textarea').each(function(inputIndex,inputEl){var $inputEl=(0,_dom2.default)(inputEl);if(Input.ignoreTypes.indexOf($inputEl.attr('type'))>=0)return;app.input.checkEmptyState($inputEl);});});$tabEl.find('textarea.resizable').each(function(textareaIndex,textareaEl){app.input.resizeTextarea(textareaEl);});},pageInit:function pageInit(page){var app=this;var $pageEl=page.$el;$pageEl.find('.item-input, .input').each(function(itemInputIndex,itemInputEl){var $itemInputEl=(0,_dom2.default)(itemInputEl);$itemInputEl.find('input, select, textarea').each(function(inputIndex,inputEl){var $inputEl=(0,_dom2.default)(inputEl);if(Input.ignoreTypes.indexOf($inputEl.attr('type'))>=0)return;app.input.checkEmptyState($inputEl);});});$pageEl.find('textarea.resizable').each(function(textareaIndex,textareaEl){app.input.resizeTextarea(textareaEl);});}}};var Checkbox={name:'checkbox'};var Radio={name:'radio'};var Toggle=function(_Framework7Class8){_inherits(Toggle,_Framework7Class8);function Toggle(app){var _ret38,_ret39;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Toggle);var _this18=_possibleConstructorReturn(this,(Toggle.__proto__||Object.getPrototypeOf(Toggle)).call(this,params,[app]));var toggle=_this18;var defaults={};// Extend defaults with modules params
toggle.useModulesParams(defaults);toggle.params=Utils.extend(defaults,params);var el=toggle.params.el;if(!el)return _ret38=toggle,_possibleConstructorReturn(_this18,_ret38);var $el=(0,_dom2.default)(el);if($el.length===0)return _ret39=toggle,_possibleConstructorReturn(_this18,_ret39);var $inputEl=$el.children('input[type="checkbox"]');Utils.extend(toggle,{app:app,$el:$el,el:$el[0],$inputEl:$inputEl,inputEl:$inputEl[0],disabled:$el.hasClass('disabled')||$inputEl.hasClass('disabled')||$inputEl.attr('disabled')||$inputEl[0].disabled});Object.defineProperty(toggle,'checked',{enumerable:true,configurable:true,set:function set(checked){if(!toggle||typeof toggle.$inputEl==='undefined')return;if(toggle.checked===checked)return;$inputEl[0].checked=checked;toggle.$inputEl.trigger('change');},get:function get(){return $inputEl[0].checked;}});$el[0].f7Toggle=toggle;var isTouched=void 0;var touchesStart={};var isScrolling=void 0;var touchesDiff=void 0;var toggleWidth=void 0;var touchStartTime=void 0;var touchStartChecked=void 0;function handleTouchStart(e){if(isTouched||toggle.disabled)return;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;touchesDiff=0;isTouched=true;isScrolling=undefined;touchStartTime=Utils.now();touchStartChecked=toggle.checked;toggleWidth=$el[0].offsetWidth;Utils.nextTick(function(){if(isTouched){$el.addClass('toggle-active-state');}});}function handleTouchMove(e){if(!isTouched||toggle.disabled)return;var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;var inverter=app.rtl?-1:1;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x));}if(isScrolling){isTouched=false;return;}e.preventDefault();touchesDiff=pageX-touchesStart.x;var changed=void 0;if(touchesDiff*inverter<0&&Math.abs(touchesDiff)>toggleWidth/3&&touchStartChecked){changed=true;}if(touchesDiff*inverter>0&&Math.abs(touchesDiff)>toggleWidth/3&&!touchStartChecked){changed=true;}if(changed){touchesStart.x=pageX;toggle.checked=!touchStartChecked;touchStartChecked=!touchStartChecked;}}function handleTouchEnd(){if(!isTouched||toggle.disabled){if(isScrolling)$el.removeClass('toggle-active-state');isTouched=false;return;}var inverter=app.rtl?-1:1;isTouched=false;$el.removeClass('toggle-active-state');var changed=void 0;if(Utils.now()-touchStartTime<300){if(touchesDiff*inverter<0&&touchStartChecked){changed=true;}if(touchesDiff*inverter>0&&!touchStartChecked){changed=true;}if(changed){toggle.checked=!touchStartChecked;}}}function handleInputChange(){toggle.$el.trigger('toggle:change',toggle);toggle.emit('local::change toggleChange',toggle);}toggle.attachEvents=function attachEvents(){{if(!Support.touch)return;var passive=Support.passiveListener?{passive:true}:false;$el.on(app.touchEvents.start,handleTouchStart,passive);app.on('touchmove',handleTouchMove);app.on('touchend:passive',handleTouchEnd);}toggle.$inputEl.on('change',handleInputChange);};toggle.detachEvents=function detachEvents(){{if(!Support.touch)return;var passive=Support.passiveListener?{passive:true}:false;$el.off(app.touchEvents.start,handleTouchStart,passive);app.off('touchmove',handleTouchMove);app.off('touchend:passive',handleTouchEnd);}toggle.$inputEl.off('change',handleInputChange);};// Install Modules
toggle.useModules();// Init
toggle.init();return _this18;}_createClass(Toggle,[{key:'toggle',value:function toggle(){var toggle=this;toggle.checked=!toggle.checked;}},{key:'init',value:function init(){var toggle=this;toggle.attachEvents();}},{key:'destroy',value:function destroy(){var toggle=this;toggle.$el.trigger('toggle:beforedestroy',toggle);toggle.emit('local::beforeDestroy toggleBeforeDestroy',toggle);delete toggle.$el[0].f7Toggle;toggle.detachEvents();Utils.deleteProps(toggle);toggle=null;}}]);return Toggle;}(Framework7Class);var Toggle$1={name:'toggle',create:function create(){var app=this;app.toggle=ConstructorMethods({defaultSelector:'.toggle',constructor:Toggle,app:app,domProp:'f7Toggle'});},static:{Toggle:Toggle},on:{tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.toggle-init').each(function(index,toggleEl){return app.toggle.create({el:toggleEl});});},tabBeforeRemove:function tabBeforeRemove(tabEl){(0,_dom2.default)(tabEl).find('.toggle-init').each(function(index,toggleEl){if(toggleEl.f7Toggle)toggleEl.f7Toggle.destroy();});},pageInit:function pageInit(page){var app=this;page.$el.find('.toggle-init').each(function(index,toggleEl){return app.toggle.create({el:toggleEl});});},pageBeforeRemove:function pageBeforeRemove(page){page.$el.find('.toggle-init').each(function(index,toggleEl){if(toggleEl.f7Toggle)toggleEl.f7Toggle.destroy();});}}};var Range=function(_Framework7Class9){_inherits(Range,_Framework7Class9);function Range(app,params){var _ret40,_ret41,_ret42;_classCallCheck(this,Range);var _this19=_possibleConstructorReturn(this,(Range.__proto__||Object.getPrototypeOf(Range)).call(this,params,[app]));var range=_this19;var defaults={el:null,inputEl:null,dual:false,step:1,label:false,min:0,max:100,value:0,draggableBar:true};// Extend defaults with modules params
range.useModulesParams(defaults);range.params=Utils.extend(defaults,params);var el=range.params.el;if(!el)return _ret40=range,_possibleConstructorReturn(_this19,_ret40);var $el=(0,_dom2.default)(el);if($el.length===0)return _ret41=range,_possibleConstructorReturn(_this19,_ret41);var dataset=$el.dataset();'step min max value'.split(' ').forEach(function(paramName){if(typeof params[paramName]==='undefined'&&typeof dataset[paramName]!=='undefined'){range.params[paramName]=parseFloat(dataset[paramName]);}});'dual label'.split(' ').forEach(function(paramName){if(typeof params[paramName]==='undefined'&&typeof dataset[paramName]!=='undefined'){range.params[paramName]=dataset[paramName];}});if(!range.params.value){if(typeof dataset.value!=='undefined')range.params.value=dataset.value;if(typeof dataset.valueLeft!=='undefined'&&typeof dataset.valueRight!=='undefined'){range.params.value=[parseFloat(dataset.valueLeft),parseFloat(dataset.valueRight)];}}var $inputEl=void 0;if(!range.params.dual){if(range.params.inputEl){$inputEl=(0,_dom2.default)(range.params.inputEl);}else if($el.find('input[type="range"]').length){$inputEl=$el.find('input[type="range"]').eq(0);}}var _range$params=range.params,dual=_range$params.dual,step=_range$params.step,label=_range$params.label,min=_range$params.min,max=_range$params.max,value=_range$params.value;Utils.extend(range,{$el:$el,el:$el[0],$inputEl:$inputEl,inputEl:$inputEl?$inputEl[0]:undefined,dual:dual,step:step,label:label,min:min,max:max,value:value,previousValue:value});if($inputEl){'step min max'.split(' ').forEach(function(paramName){if(!params[paramName]&&$inputEl.attr(paramName)){range.params[paramName]=parseFloat($inputEl.attr(paramName));range[paramName]=parseFloat($inputEl.attr(paramName));}});if(typeof $inputEl.val()!=='undefined'){range.params.value=parseFloat($inputEl.val());range.value=parseFloat($inputEl.val());}}// Dual
if(range.dual){$el.addClass('range-slider-dual');}if(range.label){$el.addClass('range-slider-label');}// Check for layout
var $barEl=(0,_dom2.default)('<div class="range-bar"></div>');var $barActiveEl=(0,_dom2.default)('<div class="range-bar-active"></div>');$barEl.append($barActiveEl);// Create Knobs
var knobHTML='\n      <div class="range-knob-wrap">\n        <div class="range-knob"></div>\n        '+(range.label?'<div class="range-knob-label"></div>':'')+'\n      </div>\n    ';var knobs=[(0,_dom2.default)(knobHTML)];var labels=[];if(range.dual){knobs.push((0,_dom2.default)(knobHTML));}$el.append($barEl);knobs.forEach(function($knobEl){$el.append($knobEl);});// Labels
if(range.label){labels.push(knobs[0].find('.range-knob-label'));if(range.dual){labels.push(knobs[1].find('.range-knob-label'));}}Utils.extend(range,{app:app,knobs:knobs,labels:labels,$barEl:$barEl,$barActiveEl:$barActiveEl});$el[0].f7Range=range;// Touch Events
var isTouched=void 0;var touchesStart={};var isScrolling=void 0;var rangeOffsetLeft=void 0;var $touchedKnobEl=void 0;var dualValueIndex=void 0;var valueChangedByTouch=void 0;function onTouchChange(){valueChangedByTouch=true;}function handleTouchStart(e){if(isTouched)return;if(!range.params.draggableBar){if((0,_dom2.default)(e.target).closest('.range-knob').length===0){return;}}valueChangedByTouch=false;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;isTouched=true;isScrolling=undefined;rangeOffsetLeft=$el.offset().left;var progress=void 0;if(range.app.rtl){progress=(rangeOffsetLeft+range.rangeWidth-touchesStart.x)/range.rangeWidth;}else{progress=(touchesStart.x-rangeOffsetLeft)/range.rangeWidth;}var newValue=progress*(range.max-range.min)+range.min;if(range.dual){if(Math.abs(range.value[0]-newValue)<Math.abs(range.value[1]-newValue)){dualValueIndex=0;$touchedKnobEl=range.knobs[0];newValue=[newValue,range.value[1]];}else{dualValueIndex=1;$touchedKnobEl=range.knobs[1];newValue=[range.value[0],newValue];}}else{$touchedKnobEl=range.knobs[0];newValue=progress*(range.max-range.min)+range.min;}Utils.nextTick(function(){if(isTouched)$touchedKnobEl.addClass('range-knob-active-state');},70);range.on('change',onTouchChange);range.setValue(newValue,true);}function handleTouchMove(e){if(!isTouched)return;var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x));}if(isScrolling){isTouched=false;return;}e.preventDefault();var progress=void 0;if(range.app.rtl){progress=(rangeOffsetLeft+range.rangeWidth-pageX)/range.rangeWidth;}else{progress=(pageX-rangeOffsetLeft)/range.rangeWidth;}var newValue=progress*(range.max-range.min)+range.min;if(range.dual){var leftValue=void 0;var rightValue=void 0;if(dualValueIndex===0){leftValue=newValue;rightValue=range.value[1];if(leftValue>rightValue){rightValue=leftValue;}}else{leftValue=range.value[0];rightValue=newValue;if(rightValue<leftValue){leftValue=rightValue;}}newValue=[leftValue,rightValue];}range.setValue(newValue,true);}function handleTouchEnd(){if(!isTouched){if(isScrolling)$touchedKnobEl.removeClass('range-knob-active-state');isTouched=false;return;}range.off('change',onTouchChange);isTouched=false;$touchedKnobEl.removeClass('range-knob-active-state');if(valueChangedByTouch&&range.$inputEl&&!range.dual){range.$inputEl.trigger('change');}valueChangedByTouch=false;if(typeof range.previousValue!=='undefined'){if(range.dual&&(range.previousValue[0]!==range.value[0]||range.previousValue[1]!==range.value[1])||!range.dual&&range.previousValue!==range.value){range.$el.trigger('range:changed',range,range.value);range.emit('local::changed rangeChanged',range,range.value);}}}function handleResize(){range.calcSize();range.layout();}range.attachEvents=function attachEvents(){var passive=Support.passiveListener?{passive:true}:false;range.$el.on(app.touchEvents.start,handleTouchStart,passive);app.on('touchmove',handleTouchMove);app.on('touchend:passive',handleTouchEnd);app.on('tabShow',handleResize);app.on('resize',handleResize);range.$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast').on('modal:open',handleResize);range.$el.parents('.panel').on('panel:open',handleResize);};range.detachEvents=function detachEvents(){var passive=Support.passiveListener?{passive:true}:false;range.$el.off(app.touchEvents.start,handleTouchStart,passive);app.off('touchmove',handleTouchMove);app.off('touchend:passive',handleTouchEnd);app.off('tabShow',handleResize);app.off('resize',handleResize);range.$el.parents('.sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast').off('modal:open',handleResize);range.$el.parents('.panel').off('panel:open',handleResize);};// Install Modules
range.useModules();// Init
range.init();return _ret42=range,_possibleConstructorReturn(_this19,_ret42);}_createClass(Range,[{key:'calcSize',value:function calcSize(){var range=this;var width=range.$el.outerWidth();if(width===0)return;range.rangeWidth=width;range.knobWidth=range.knobs[0].outerWidth();}},{key:'layout',value:function layout(){var range=this;var app=range.app,knobWidth=range.knobWidth,rangeWidth=range.rangeWidth,min=range.min,max=range.max,knobs=range.knobs,$barActiveEl=range.$barActiveEl,value=range.value,label=range.label,labels=range.labels;var positionProperty=app.rtl?'right':'left';if(range.dual){var _$barActiveEl$css;var progress=[(value[0]-min)/(max-min),(value[1]-min)/(max-min)];$barActiveEl.css((_$barActiveEl$css={},_defineProperty(_$barActiveEl$css,positionProperty,progress[0]*100+'%'),_defineProperty(_$barActiveEl$css,'width',(progress[1]-progress[0])*100+'%'),_$barActiveEl$css));knobs.forEach(function($knobEl,knobIndex){var leftPos=rangeWidth*progress[knobIndex];var realLeft=rangeWidth*progress[knobIndex]-knobWidth/2;if(realLeft<0)leftPos=knobWidth/2;if(realLeft+knobWidth>rangeWidth)leftPos=rangeWidth-knobWidth/2;$knobEl.css(positionProperty,leftPos+'px');if(label)labels[knobIndex].text(value[knobIndex]);});}else{var _progress=(value-min)/(max-min);$barActiveEl.css('width',_progress*100+'%');var leftPos=rangeWidth*_progress;var realLeft=rangeWidth*_progress-knobWidth/2;if(realLeft<0)leftPos=knobWidth/2;if(realLeft+knobWidth>rangeWidth)leftPos=rangeWidth-knobWidth/2;knobs[0].css(positionProperty,leftPos+'px');if(label)labels[0].text(value);}if(range.dual&&value.indexOf(min)>=0||!range.dual&&value===min){range.$el.addClass('range-slider-min');}else{range.$el.removeClass('range-slider-min');}if(range.dual&&value.indexOf(max)>=0||!range.dual&&value===max){range.$el.addClass('range-slider-max');}else{range.$el.removeClass('range-slider-max');}}},{key:'setValue',value:function setValue(newValue,byTouchMove){var range=this;var step=range.step,min=range.min,max=range.max;var valueChanged=void 0;var oldValue=void 0;if(range.dual){oldValue=[range.value[0],range.value[1]];var newValues=newValue;if(!Array.isArray(newValues))newValues=[newValue,newValue];if(newValue[0]>newValue[1]){newValues=[newValues[0],newValues[0]];}newValues=newValues.map(function(value){return Math.max(Math.min(Math.round(value/step)*step,max),min);});if(newValues[0]===range.value[0]&&newValues[1]===range.value[1]){return range;}newValues.forEach(function(value,valueIndex){range.value[valueIndex]=value;});valueChanged=oldValue[0]!==newValues[0]||oldValue[1]!==newValues[1];range.layout();}else{oldValue=range.value;var value=Math.max(Math.min(Math.round(newValue/step)*step,max),min);range.value=value;range.layout();valueChanged=oldValue!==value;}if(valueChanged){range.previousValue=oldValue;}// Events
if(!valueChanged)return range;range.$el.trigger('range:change',range,range.value);if(range.$inputEl&&!range.dual){range.$inputEl.val(range.value);if(!byTouchMove){range.$inputEl.trigger('input change');}else{range.$inputEl.trigger('input');}}if(!byTouchMove){range.$el.trigger('range:changed',range,range.value);range.emit('local::changed rangeChanged',range,range.value);}range.emit('local::change rangeChange',range,range.value);return range;}},{key:'getValue',value:function getValue(){return this.value;}},{key:'init',value:function init(){var range=this;range.calcSize();range.layout();range.attachEvents();return range;}},{key:'destroy',value:function destroy(){var range=this;range.$el.trigger('range:beforedestroy',range);range.emit('local::beforeDestroy rangeBeforeDestroy',range);delete range.$el[0].f7Range;range.detachEvents();Utils.deleteProps(range);range=null;}}]);return Range;}(Framework7Class);var Range$1={name:'range',create:function create(){var app=this;app.range=Utils.extend(ConstructorMethods({defaultSelector:'.range-slider',constructor:Range,app:app,domProp:'f7Range'}),{getValue:function getValue(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.range-slider';var range=app.range.get(el);if(range)return range.getValue();return undefined;},setValue:function setValue(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.range-slider';var value=arguments[1];var range=app.range.get(el);if(range)return range.setValue(value);return undefined;}});},static:{Range:Range},on:{tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.range-slider-init').each(function(index,rangeEl){return new Range(app,{el:rangeEl});});},tabBeforeRemove:function tabBeforeRemove(tabEl){(0,_dom2.default)(tabEl).find('.range-slider-init').each(function(index,rangeEl){if(rangeEl.f7Range)rangeEl.f7Range.destroy();});},pageInit:function pageInit(page){var app=this;page.$el.find('.range-slider-init').each(function(index,rangeEl){return new Range(app,{el:rangeEl});});},pageBeforeRemove:function pageBeforeRemove(page){page.$el.find('.range-slider-init').each(function(index,rangeEl){if(rangeEl.f7Range)rangeEl.f7Range.destroy();});}}};var Stepper=function(_Framework7Class10){_inherits(Stepper,_Framework7Class10);function Stepper(app,params){var _ret43,_ret44,_ret45;_classCallCheck(this,Stepper);var _this20=_possibleConstructorReturn(this,(Stepper.__proto__||Object.getPrototypeOf(Stepper)).call(this,params,[app]));var stepper=_this20;var defaults={el:null,inputEl:null,valueEl:null,value:0,formatValue:null,step:1,min:0,max:100,watchInput:true,autorepeat:false,autorepeatDynamic:false,wraps:false};// Extend defaults with modules params
stepper.useModulesParams(defaults);stepper.params=Utils.extend(defaults,params);if(stepper.params.value<stepper.params.min){stepper.params.value=stepper.params.min;}if(stepper.params.value>stepper.params.max){stepper.params.value=stepper.params.max;}var el=stepper.params.el;if(!el)return _ret43=stepper,_possibleConstructorReturn(_this20,_ret43);var $el=(0,_dom2.default)(el);if($el.length===0)return _ret44=stepper,_possibleConstructorReturn(_this20,_ret44);var $inputEl=void 0;if(stepper.params.inputEl){$inputEl=(0,_dom2.default)(stepper.params.inputEl);}else if($el.find('.stepper-input-wrap').find('input, textarea').length){$inputEl=$el.find('.stepper-input-wrap').find('input, textarea').eq(0);}if($inputEl&&$inputEl.length){'step min max'.split(' ').forEach(function(paramName){if(!params[paramName]&&$inputEl.attr(paramName)){stepper.params[paramName]=parseFloat($inputEl.attr(paramName));}});var inputValue=parseFloat($inputEl.val());if(typeof params.value==='undefined'&&!Number.isNaN(inputValue)&&(inputValue||inputValue===0)){stepper.params.value=inputValue;}}var $valueEl=void 0;if(stepper.params.valueEl){$valueEl=(0,_dom2.default)(stepper.params.valueEl);}else if($el.find('.stepper-value').length){$valueEl=$el.find('.stepper-value').eq(0);}var $buttonPlusEl=$el.find('.stepper-button-plus');var $buttonMinusEl=$el.find('.stepper-button-minus');var _stepper$params=stepper.params,step=_stepper$params.step,min=_stepper$params.min,max=_stepper$params.max,value=_stepper$params.value;Utils.extend(stepper,{app:app,$el:$el,el:$el[0],$buttonPlusEl:$buttonPlusEl,buttonPlusEl:$buttonPlusEl[0],$buttonMinusEl:$buttonMinusEl,buttonMinusEl:$buttonMinusEl[0],$inputEl:$inputEl,inputEl:$inputEl?$inputEl[0]:undefined,$valueEl:$valueEl,valueEl:$valueEl?$valueEl[0]:undefined,step:step,min:min,max:max,value:value});$el[0].f7Stepper=stepper;// Handle Events
var touchesStart={};var isTouched=void 0;var isScrolling=void 0;var preventButtonClick=void 0;var intervalId=void 0;var timeoutId=void 0;var autorepeatAction=null;var autorepeatInAction=false;function dynamicRepeat(current,progressions,startsIn,progressionStep,repeatEvery,action){clearTimeout(timeoutId);timeoutId=setTimeout(function(){if(current===1){preventButtonClick=true;autorepeatInAction=true;}clearInterval(intervalId);action();intervalId=setInterval(function(){action();},repeatEvery);if(current<progressions){dynamicRepeat(current+1,progressions,startsIn,progressionStep,repeatEvery/2,action);}},current===1?startsIn:progressionStep);}function onTouchStart(e){if(isTouched)return;if((0,_dom2.default)(e.target).closest($buttonPlusEl).length){autorepeatAction='increment';}else if((0,_dom2.default)(e.target).closest($buttonMinusEl).length){autorepeatAction='decrement';}if(!autorepeatAction)return;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;isTouched=true;isScrolling=undefined;var progressions=stepper.params.autorepeatDynamic?4:1;dynamicRepeat(1,progressions,500,1000,300,function(){stepper[autorepeatAction]();});}function onTouchMove(e){if(!isTouched)return;var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'&&!autorepeatInAction){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x));}var distance=Math.pow(Math.pow(pageX-touchesStart.x,2)+Math.pow(pageY-touchesStart.y,2),0.5);if(isScrolling||distance>20){isTouched=false;clearTimeout(timeoutId);clearInterval(intervalId);}}function onTouchEnd(){clearTimeout(timeoutId);clearInterval(intervalId);autorepeatAction=null;autorepeatInAction=false;isTouched=false;}function onMinusClick(){if(preventButtonClick){preventButtonClick=false;return;}stepper.decrement();}function onPlusClick(){if(preventButtonClick){preventButtonClick=false;return;}stepper.increment();}function onInput(e){if(e.detail&&e.detail.sentByF7Stepper)return;stepper.setValue(e.target.value,true);}stepper.attachEvents=function attachEvents(){$buttonMinusEl.on('click',onMinusClick);$buttonPlusEl.on('click',onPlusClick);if(stepper.params.watchInput&&$inputEl&&$inputEl.length){$inputEl.on('input',onInput);}if(stepper.params.autorepeat){app.on('touchstart:passive',onTouchStart);app.on('touchmove:active',onTouchMove);app.on('touchend:passive',onTouchEnd);}};stepper.detachEvents=function detachEvents(){$buttonMinusEl.off('click',onMinusClick);$buttonPlusEl.off('click',onPlusClick);if(stepper.params.watchInput&&$inputEl&&$inputEl.length){$inputEl.off('input',onInput);}};// Install Modules
stepper.useModules();// Init
stepper.init();return _ret45=stepper,_possibleConstructorReturn(_this20,_ret45);}_createClass(Stepper,[{key:'minus',value:function minus(){return this.decrement();}},{key:'plus',value:function plus(){return this.increment();}},{key:'decrement',value:function decrement(){var stepper=this;return stepper.setValue(stepper.value-stepper.step);}},{key:'increment',value:function increment(){var stepper=this;return stepper.setValue(stepper.value+stepper.step);}},{key:'setValue',value:function setValue(newValue,forceUpdate){var stepper=this;var step=stepper.step,min=stepper.min,max=stepper.max;var oldValue=stepper.value;var value=Math.round(newValue/step)*step;if(!stepper.params.wraps){value=Math.max(Math.min(value,max),min);}else{if(value>max)value=min;if(value<min)value=max;}if(Number.isNaN(value)){value=oldValue;}stepper.value=value;var valueChanged=oldValue!==value;// Events
if(!valueChanged&&!forceUpdate)return stepper;stepper.$el.trigger('stepper:change',stepper,stepper.value);var formattedValue=stepper.formatValue(stepper.value);if(stepper.$inputEl&&stepper.$inputEl.length){stepper.$inputEl.val(formattedValue);stepper.$inputEl.trigger('input change',{sentByF7Stepper:true});}if(stepper.$valueEl&&stepper.$valueEl.length){stepper.$valueEl.html(formattedValue);}stepper.emit('local::change stepperChange',stepper,stepper.value);return stepper;}},{key:'getValue',value:function getValue(){return this.value;}},{key:'formatValue',value:function formatValue(value){var stepper=this;if(!stepper.params.formatValue)return value;return stepper.params.formatValue.call(stepper,value);}},{key:'init',value:function init(){var stepper=this;stepper.attachEvents();if(stepper.$valueEl&&stepper.$valueEl.length){var formattedValue=stepper.formatValue(stepper.value);stepper.$valueEl.html(formattedValue);}return stepper;}},{key:'destroy',value:function destroy(){var stepper=this;stepper.$el.trigger('stepper:beforedestroy',stepper);stepper.emit('local::beforeDestroy stepperBeforeDestroy',stepper);delete stepper.$el[0].f7Stepper;stepper.detachEvents();Utils.deleteProps(stepper);stepper=null;}}]);return Stepper;}(Framework7Class);var Stepper$1={name:'stepper',create:function create(){var app=this;app.stepper=Utils.extend(ConstructorMethods({defaultSelector:'.stepper',constructor:Stepper,app:app,domProp:'f7Stepper'}),{getValue:function getValue(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.stepper';var stepper=app.stepper.get(el);if(stepper)return stepper.getValue();return undefined;},setValue:function setValue(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.stepper';var value=arguments[1];var stepper=app.stepper.get(el);if(stepper)return stepper.setValue(value);return undefined;}});},static:{Stepper:Stepper},on:{tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.stepper-init').each(function(index,stepperEl){var dataset=(0,_dom2.default)(stepperEl).dataset();// eslint-disable-next-line
new Stepper(app,Utils.extend({el:stepperEl},dataset||{}));});},tabBeforeRemove:function tabBeforeRemove(tabEl){(0,_dom2.default)(tabEl).find('.stepper-init').each(function(index,stepperEl){if(stepperEl.f7Stepper)stepperEl.f7Stepper.destroy();});},pageInit:function pageInit(page){var app=this;page.$el.find('.stepper-init').each(function(index,stepperEl){var dataset=(0,_dom2.default)(stepperEl).dataset();// eslint-disable-next-line
new Stepper(app,Utils.extend({el:stepperEl},dataset||{}));});},pageBeforeRemove:function pageBeforeRemove(page){page.$el.find('.stepper-init').each(function(index,stepperEl){if(stepperEl.f7Stepper)stepperEl.f7Stepper.destroy();});}}};var SmartSelect=function(_Framework7Class11){_inherits(SmartSelect,_Framework7Class11);function SmartSelect(app){var _ret46,_ret47,_ret48;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,SmartSelect);var _this21=_possibleConstructorReturn(this,(SmartSelect.__proto__||Object.getPrototypeOf(SmartSelect)).call(this,params,[app]));var ss=_this21;ss.app=app;var defaults=Utils.extend({on:{}},app.params.smartSelect);var $el=(0,_dom2.default)(params.el).eq(0);if($el.length===0)return _ret46=ss,_possibleConstructorReturn(_this21,_ret46);var $selectEl=$el.find('select').eq(0);if($selectEl.length===0)return _ret47=ss,_possibleConstructorReturn(_this21,_ret47);var $valueEl=(0,_dom2.default)(params.valueEl);if($valueEl.length===0){$valueEl=$el.find('.item-after');}if($valueEl.length===0){$valueEl=(0,_dom2.default)('<div class="item-after"></div>');$valueEl.insertAfter($el.find('.item-title'));}// Extend defaults with modules params
ss.useModulesParams(defaults);// View
var view=params.view;if(!view){view=$el.parents('.view').length&&$el.parents('.view')[0].f7View;}if(!view){throw Error('Smart Select requires initialized View');}// Url
var url=params.url;if(!url){if($el.attr('href')&&$el.attr('href')!=='#')url=$el.attr('href');else url=$selectEl.attr('name').toLowerCase()+'-select/';}if(!url)url=ss.params.url;var multiple=$selectEl[0].multiple;var inputType=multiple?'checkbox':'radio';var id=Utils.now();Utils.extend(ss,{params:Utils.extend(defaults,params),$el:$el,el:$el[0],$selectEl:$selectEl,selectEl:$selectEl[0],$valueEl:$valueEl,valueEl:$valueEl[0],url:url,multiple:multiple,inputType:inputType,id:id,view:view,inputName:inputType+'-'+id,selectName:$selectEl.attr('name'),maxLength:$selectEl.attr('maxlength')||params.maxLength});$el[0].f7SmartSelect=ss;// Events
function onClick(){ss.open();}function onChange(){ss.setValue();}ss.attachEvents=function attachEvents(){$el.on('click',onClick);$el.on('change','select',onChange);};ss.detachEvents=function detachEvents(){$el.off('click',onClick);$el.off('change','select',onChange);};function handleInputChange(){var optionEl=void 0;var text=void 0;var inputEl=this;var value=inputEl.value;var optionText=[];var displayAs=void 0;if(inputEl.type==='checkbox'){for(var _i18=0;_i18<ss.selectEl.options.length;_i18+=1){optionEl=ss.selectEl.options[_i18];if(optionEl.value===value){optionEl.selected=inputEl.checked;}if(optionEl.selected){displayAs=optionEl.dataset?optionEl.dataset.displayAs:(0,_dom2.default)(optionEl).data('display-value-as');text=displayAs&&typeof displayAs!=='undefined'?displayAs:optionEl.textContent;optionText.push(text.trim());}}if(ss.maxLength){ss.checkMaxLength();}}else{optionEl=ss.$selectEl.find('option[value="'+value+'"]')[0];displayAs=optionEl.dataset?optionEl.dataset.displayAs:(0,_dom2.default)(optionEl).data('display-as');text=displayAs&&typeof displayAs!=='undefined'?displayAs:optionEl.textContent;optionText=[text];ss.selectEl.value=value;}ss.$selectEl.trigger('change');ss.$valueEl.text(optionText.join(', '));if(ss.params.closeOnSelect&&ss.inputType==='radio'){ss.close();}}ss.attachInputsEvents=function attachInputsEvents(){ss.$containerEl.on('change','input[type="checkbox"], input[type="radio"]',handleInputChange);};ss.detachInputsEvents=function detachInputsEvents(){ss.$containerEl.off('change','input[type="checkbox"], input[type="radio"]',handleInputChange);};// Install Modules
ss.useModules();// Init
ss.init();return _ret48=ss,_possibleConstructorReturn(_this21,_ret48);}_createClass(SmartSelect,[{key:'checkMaxLength',value:function checkMaxLength(){var ss=this;var $containerEl=ss.$containerEl;if(ss.selectEl.selectedOptions.length>=ss.maxLength){$containerEl.find('input[type="checkbox"]').each(function(index,inputEl){if(!inputEl.checked){(0,_dom2.default)(inputEl).parents('li').addClass('disabled');}else{(0,_dom2.default)(inputEl).parents('li').removeClass('disabled');}});}else{$containerEl.find('.disabled').removeClass('disabled');}}},{key:'setValue',value:function setValue(value){var ss=this;var valueArray=[];if(typeof value!=='undefined'){if(Array.isArray(value)){valueArray=value;}else{valueArray=[value];}}else{ss.$selectEl.find('option').each(function(optionIndex,optionEl){var $optionEl=(0,_dom2.default)(optionEl);if(optionEl.selected){var displayAs=optionEl.dataset?optionEl.dataset.displayAs:$optionEl.data('display-value-as');if(displayAs&&typeof displayAs!=='undefined'){valueArray.push(displayAs);}else{valueArray.push(optionEl.textContent.trim());}}});}ss.$valueEl.text(valueArray.join(', '));}},{key:'getItemsData',value:function getItemsData(){var ss=this;var items=[];var previousGroupEl=void 0;ss.$selectEl.find('option').each(function(index,optionEl){var $optionEl=(0,_dom2.default)(optionEl);var optionData=$optionEl.dataset();var optionImage=optionData.optionImage||ss.params.optionImage;var optionIcon=optionData.optionIcon||ss.params.optionIcon;var optionHasMedia=optionImage||optionIcon;// if (material) optionHasMedia = optionImage || optionIcon;
var optionColor=optionData.optionColor;var optionClassName=optionData.optionClass||'';if($optionEl[0].disabled)optionClassName+=' disabled';var optionGroupEl=$optionEl.parent('optgroup')[0];var optionGroupLabel=optionGroupEl&&optionGroupEl.label;var optionIsLabel=false;if(optionGroupEl&&optionGroupEl!==previousGroupEl){optionIsLabel=true;previousGroupEl=optionGroupEl;items.push({groupLabel:optionGroupLabel,isLabel:optionIsLabel});}items.push({value:$optionEl[0].value,text:$optionEl[0].textContent.trim(),selected:$optionEl[0].selected,groupEl:optionGroupEl,groupLabel:optionGroupLabel,image:optionImage,icon:optionIcon,color:optionColor,className:optionClassName,disabled:$optionEl[0].disabled,id:ss.id,hasMedia:optionHasMedia,checkbox:ss.inputType==='checkbox',radio:ss.inputType==='radio',inputName:ss.inputName,inputType:ss.inputType});});ss.items=items;return items;}},{key:'renderSearchbar',value:function renderSearchbar(){var ss=this;if(ss.params.renderSearchbar)return ss.params.renderSearchbar.call(ss);var searchbarHTML='\n      <form class="searchbar">\n        <div class="searchbar-inner">\n          <div class="searchbar-input-wrap">\n            <input type="search" placeholder="'+ss.params.searchbarPlaceholder+'"/>\n            <i class="searchbar-icon"></i>\n            <span class="input-clear-button"></span>\n          </div>\n          <span class="searchbar-disable-button">'+ss.params.searchbarDisableText+'</span>\n        </div>\n      </form>\n    ';return searchbarHTML;}},{key:'renderItem',value:function renderItem(item,index){var ss=this;if(ss.params.renderItem)return ss.params.renderItem.call(ss,item,index);var itemHtml=void 0;if(item.isLabel){itemHtml='<li class="item-divider">'+item.groupLabel+'</li>';}else{itemHtml='\n        <li class="'+(item.className||'')+'">\n          <label class="item-'+item.inputType+' item-content">\n            <input type="'+item.inputType+'" name="'+item.inputName+'" value="'+item.value+'" '+(item.selected?'checked':'')+'/>\n            <i class="icon icon-'+item.inputType+'"></i>\n            '+(item.hasMedia?'\n              <div class="item-media">\n                '+(item.icon?'<i class="icon '+item.icon+'"></i>':'')+'\n                '+(item.image?'<img src="'+item.image+'">':'')+'\n              </div>\n            ':'')+'\n            <div class="item-inner">\n              <div class="item-title'+(item.color?' color-'+item.color:'')+'">'+item.text+'</div>\n            </div>\n          </label>\n        </li>\n      ';}return itemHtml;}},{key:'renderItems',value:function renderItems(){var ss=this;if(ss.params.renderItems)return ss.params.renderItems.call(ss,ss.items);var itemsHtml='\n      '+ss.items.map(function(item,index){return''+ss.renderItem(item,index);}).join('')+'\n    ';return itemsHtml;}},{key:'renderPage',value:function renderPage(){var ss=this;if(ss.params.renderPage)return ss.params.renderPage.call(ss,ss.items);var pageTitle=ss.params.pageTitle;if(typeof pageTitle==='undefined'){pageTitle=ss.$el.find('.item-title').text().trim();}var pageHtml='\n      <div class="page smart-select-page" data-name="smart-select-page" data-select-name="'+ss.selectName+'">\n        <div class="navbar '+(ss.params.navbarColorTheme?'color-theme-'+ss.params.navbarColorTheme:'')+'">\n          <div class="navbar-inner sliding '+(ss.params.navbarColorTheme?'color-theme-'+ss.params.navbarColorTheme:'')+'">\n            <div class="left">\n              <a href="#" class="link back">\n                <i class="icon icon-back"></i>\n                <span class="ios-only">'+ss.params.pageBackLinkText+'</span>\n              </a>\n            </div>\n            '+(pageTitle?'<div class="title">'+pageTitle+'</div>':'')+'\n            '+(ss.params.searchbar?'<div class="subnavbar">'+ss.renderSearchbar()+'</div>':'')+'\n          </div>\n        </div>\n        '+(ss.params.searchbar?'<div class="searchbar-backdrop"></div>':'')+'\n        <div class="page-content">\n          <div class="list smart-select-list-'+ss.id+' '+(ss.params.virtualList?' virtual-list':'')+' '+(ss.params.formColorTheme?'color-theme-'+ss.params.formColorTheme:'')+'">\n            <ul>'+(!ss.params.virtualList&&ss.renderItems(ss.items))+'</ul>\n          </div>\n        </div>\n      </div>\n    ';return pageHtml;}},{key:'renderPopup',value:function renderPopup(){var ss=this;if(ss.params.renderPopup)return ss.params.renderPopup.call(ss,ss.items);var pageTitle=ss.params.pageTitle;if(typeof pageTitle==='undefined'){pageTitle=ss.$el.find('.item-title').text().trim();}var popupHtml='\n      <div class="popup smart-select-popup" data-select-name="'+ss.selectName+'">\n        <div class="view">\n          <div class="page smart-select-page '+(ss.params.searchbar?'page-with-subnavbar':'')+'" data-name="smart-select-page">\n            <div class="navbar'+(ss.params.navbarColorTheme?'theme-'+ss.params.navbarColorTheme:'')+'">\n              <div class="navbar-inner sliding">\n                <div class="left">\n                  <a href="#" class="link popup-close">\n                    <i class="icon icon-back"></i>\n                    <span class="ios-only">'+ss.params.popupCloseLinkText+'</span>\n                  </a>\n                </div>\n                '+(pageTitle?'<div class="title">'+pageTitle+'</div>':'')+'\n                '+(ss.params.searchbar?'<div class="subnavbar">'+ss.renderSearchbar()+'</div>':'')+'\n              </div>\n            </div>\n            '+(ss.params.searchbar?'<div class="searchbar-backdrop"></div>':'')+'\n            <div class="page-content">\n              <div class="list smart-select-list-'+ss.id+' '+(ss.params.virtualList?' virtual-list':'')+(ss.params.formColorTheme?'theme-'+ss.params.formColorTheme:'')+'">\n                <ul>'+(!ss.params.virtualList&&ss.renderItems(ss.items))+'</ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ';return popupHtml;}},{key:'renderSheet',value:function renderSheet(){var ss=this;if(ss.params.renderSheet)return ss.params.renderSheet.call(ss,ss.items);var sheetHtml='\n      <div class="sheet-modal smart-select-sheet" data-select-name="'+ss.selectName+'">\n        <div class="toolbar '+(ss.params.toolbarColorTheme?'theme-'+ss.params.toolbarColorTheme:'')+'">\n          <div class="toolbar-inner">\n            <div class="left"></div>\n            <div class="right">\n              <a class="link sheet-close">'+ss.params.sheetCloseLinkText+'</a>\n            </div>\n          </div>\n        </div>\n        <div class="sheet-modal-inner">\n          <div class="page-content">\n            <div class="list smart-select-list-'+ss.id+' '+(ss.params.virtualList?' virtual-list':'')+(ss.params.formColorTheme?'theme-'+ss.params.formColorTheme:'')+'">\n              <ul>'+(!ss.params.virtualList&&ss.renderItems(ss.items))+'</ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    ';return sheetHtml;}},{key:'renderPopover',value:function renderPopover(){var ss=this;if(ss.params.renderPopover)return ss.params.renderPopover.call(ss,ss.items);var popoverHtml='\n      <div class="popover smart-select-popover" data-select-name="'+ss.selectName+'">\n        <div class="popover-inner">\n          <div class="list smart-select-list-'+ss.id+' '+(ss.params.virtualList?' virtual-list':'')+(ss.params.formColorTheme?'theme-'+ss.params.formColorTheme:'')+'">\n            <ul>'+(!ss.params.virtualList&&ss.renderItems(ss.items))+'</ul>\n          </div>\n        </div>\n      </div>\n    ';return popoverHtml;}},{key:'onOpen',value:function onOpen(type,containerEl){var ss=this;var app=ss.app;var $containerEl=(0,_dom2.default)(containerEl);ss.$containerEl=$containerEl;ss.openedIn=type;ss.opened=true;// Init VL
if(ss.params.virtualList){ss.vl=app.virtualList.create({el:$containerEl.find('.virtual-list'),items:ss.items,renderItem:ss.renderItem.bind(ss),height:ss.params.virtualListHeight,searchByItem:function searchByItem(query,item){if(item.text&&item.text.toLowerCase().indexOf(query.trim().toLowerCase())>=0)return true;return false;}});}// Init SB
if(ss.params.searchbar){var $searchbarEl=$containerEl.find('.searchbar');if(type==='page'&&app.theme==='ios'){$searchbarEl=(0,_dom2.default)(app.navbar.getElByPage($containerEl)).find('.searchbar');}ss.searchbar=app.searchbar.create({el:$searchbarEl,backdropEl:$containerEl.find('.searchbar-backdrop'),searchContainer:'.smart-select-list-'+ss.id,searchIn:'.item-title'});}// Check for max length
if(ss.maxLength){ss.checkMaxLength();}// Close on select
if(ss.params.closeOnSelect){ss.$containerEl.find('input[type="radio"][name="'+ss.inputName+'"]:checked').parents('label').once('click',function(){ss.close();});}// Attach input events
ss.attachInputsEvents();ss.$el.trigger('smartselect:open',ss);ss.emit('local::open smartSelectOpen',ss);}},{key:'onOpened',value:function onOpened(){var ss=this;ss.$el.trigger('smartselect:opened',ss);ss.emit('local::opened smartSelectOpened',ss);}},{key:'onClose',value:function onClose(){var ss=this;if(ss.destroyed)return;// Destroy VL
if(ss.vl&&ss.vl.destroy){ss.vl.destroy();ss.vl=null;delete ss.vl;}// Destroy SB
if(ss.searchbar&&ss.searchbar.destroy){ss.searchbar.destroy();ss.searchbar=null;delete ss.searchbar;}// Detach events
ss.detachInputsEvents();ss.$el.trigger('smartselect:close',ss);ss.emit('local::close smartSelectClose',ss);}},{key:'onClosed',value:function onClosed(){var ss=this;if(ss.destroyed)return;ss.opened=false;ss.$containerEl=null;delete ss.$containerEl;ss.$el.trigger('smartselect:closed',ss);ss.emit('local::closed smartSelectClosed',ss);}},{key:'openPage',value:function openPage(){var ss=this;if(ss.opened)return ss;ss.getItemsData();var pageHtml=ss.renderPage(ss.items);ss.view.router.navigate({url:ss.url,route:{content:pageHtml,path:ss.url,on:{pageBeforeIn:function pageBeforeIn(e,page){ss.onOpen('page',page.el);},pageAfterIn:function pageAfterIn(e,page){ss.onOpened('page',page.el);},pageBeforeOut:function pageBeforeOut(e,page){ss.onClose('page',page.el);},pageAfterOut:function pageAfterOut(e,page){ss.onClosed('page',page.el);}}}});return ss;}},{key:'openPopup',value:function openPopup(){var ss=this;if(ss.opened)return ss;ss.getItemsData();var popupHtml=ss.renderPopup(ss.items);var popupParams={content:popupHtml,on:{popupOpen:function popupOpen(popup){ss.onOpen('popup',popup.el);},popupOpened:function popupOpened(popup){ss.onOpened('popup',popup.el);},popupClose:function popupClose(popup){ss.onClose('popup',popup.el);},popupClosed:function popupClosed(popup){ss.onClosed('popup',popup.el);}}};if(ss.params.routableModals){ss.view.router.navigate({url:ss.url,route:{path:ss.url,popup:popupParams}});}else{ss.modal=ss.app.popup.create(popupParams).open();}return ss;}},{key:'openSheet',value:function openSheet(){var ss=this;if(ss.opened)return ss;ss.getItemsData();var sheetHtml=ss.renderSheet(ss.items);var sheetParams={content:sheetHtml,backdrop:false,scrollToEl:ss.$el,closeByOutsideClick:true,on:{sheetOpen:function sheetOpen(sheet){ss.onOpen('sheet',sheet.el);},sheetOpened:function sheetOpened(sheet){ss.onOpened('sheet',sheet.el);},sheetClose:function sheetClose(sheet){ss.onClose('sheet',sheet.el);},sheetClosed:function sheetClosed(sheet){ss.onClosed('sheet',sheet.el);}}};if(ss.params.routableModals){ss.view.router.navigate({url:ss.url,route:{path:ss.url,sheet:sheetParams}});}else{ss.modal=ss.app.sheet.create(sheetParams).open();}return ss;}},{key:'openPopover',value:function openPopover(){var ss=this;if(ss.opened)return ss;ss.getItemsData();var popoverHtml=ss.renderPopover(ss.items);var popoverParams={content:popoverHtml,targetEl:ss.$el,on:{popoverOpen:function popoverOpen(popover){ss.onOpen('popover',popover.el);},popoverOpened:function popoverOpened(popover){ss.onOpened('popover',popover.el);},popoverClose:function popoverClose(popover){ss.onClose('popover',popover.el);},popoverClosed:function popoverClosed(popover){ss.onClosed('popover',popover.el);}}};if(ss.params.routableModals){ss.view.router.navigate({url:ss.url,route:{path:ss.url,popover:popoverParams}});}else{ss.modal=ss.app.popover.create(popoverParams).open();}return ss;}},{key:'open',value:function open(type){var ss=this;if(ss.opened)return ss;var openIn=type||ss.params.openIn;ss['open'+openIn.split('').map(function(el,index){if(index===0)return el.toUpperCase();return el;}).join('')]();return ss;}},{key:'close',value:function close(){var ss=this;if(!ss.opened)return ss;if(ss.params.routableModals||ss.openedIn==='page'){ss.view.router.back();}else{ss.modal.once('modalClosed',function(){Utils.nextTick(function(){ss.modal.destroy();delete ss.modal;});});ss.modal.close();}return ss;}},{key:'init',value:function init(){var ss=this;ss.attachEvents();ss.setValue();}},{key:'destroy',value:function destroy(){var ss=this;ss.emit('local::beforeDestroy smartSelectBeforeDestroy',ss);ss.$el.trigger('smartselect:beforedestroy',ss);ss.detachEvents();delete ss.$el[0].f7SmartSelect;Utils.deleteProps(ss);ss.destroyed=true;}}]);return SmartSelect;}(Framework7Class);var SmartSelect$1={name:'smartSelect',params:{smartSelect:{el:undefined,valueEl:undefined,openIn:'page',// or 'popup' or 'sheet' or 'popover'
pageTitle:undefined,pageBackLinkText:'Back',popupCloseLinkText:'Close',sheetCloseLinkText:'Done',searchbar:false,searchbarPlaceholder:'Search',searchbarDisableText:'Cancel',closeOnSelect:false,virtualList:false,virtualListHeight:undefined,formColorTheme:undefined,navbarColorTheme:undefined,routableModals:true,url:'select/',/*
        Custom render functions
      */renderPage:undefined,renderPopup:undefined,renderSheet:undefined,renderPopover:undefined,renderItems:undefined,renderItem:undefined,renderSearchbar:undefined}},static:{SmartSelect:SmartSelect},create:function create(){var app=this;app.smartSelect=Utils.extend(ConstructorMethods({defaultSelector:'.smart-select',constructor:SmartSelect,app:app,domProp:'f7SmartSelect'}),{open:function open(smartSelectEl){var ss=app.smartSelect.get(smartSelectEl);if(ss&&ss.open)return ss.open();return undefined;},close:function close(smartSelectEl){var ss=app.smartSelect.get(smartSelectEl);if(ss&&ss.close)return ss.close();return undefined;}});},on:{tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.smart-select-init').each(function(index,smartSelectEl){app.smartSelect.create(Utils.extend({el:smartSelectEl},(0,_dom2.default)(smartSelectEl).dataset()));});},tabBeforeRemove:function tabBeforeRemove(tabEl){(0,_dom2.default)(tabEl).find('.smart-select-init').each(function(index,smartSelectEl){if(smartSelectEl.f7SmartSelect&&smartSelectEl.f7SmartSelect.destroy){smartSelectEl.f7SmartSelect.destroy();}});},pageInit:function pageInit(page){var app=this;page.$el.find('.smart-select-init').each(function(index,smartSelectEl){app.smartSelect.create(Utils.extend({el:smartSelectEl},(0,_dom2.default)(smartSelectEl).dataset()));});},pageBeforeRemove:function pageBeforeRemove(page){page.$el.find('.smart-select-init').each(function(index,smartSelectEl){if(smartSelectEl.f7SmartSelect&&smartSelectEl.f7SmartSelect.destroy){smartSelectEl.f7SmartSelect.destroy();}});}},clicks:{'.smart-select':function open($clickedEl,data){var app=this;if(!$clickedEl[0].f7SmartSelect){var _ss=app.smartSelect.create(Utils.extend({el:$clickedEl},data));_ss.open();}}}};var Grid={name:'grid'};var Calendar=function(_Framework7Class12){_inherits(Calendar,_Framework7Class12);function Calendar(app){var _ret50;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Calendar);var _this22=_possibleConstructorReturn(this,(Calendar.__proto__||Object.getPrototypeOf(Calendar)).call(this,params,[app]));var calendar=_this22;calendar.params=Utils.extend({},app.params.calendar,params);var $containerEl=void 0;if(calendar.params.containerEl){var _ret49;$containerEl=(0,_dom2.default)(calendar.params.containerEl);if($containerEl.length===0)return _ret49=calendar,_possibleConstructorReturn(_this22,_ret49);}var $inputEl=void 0;if(calendar.params.inputEl){$inputEl=(0,_dom2.default)(calendar.params.inputEl);}var view=void 0;if($inputEl){view=$inputEl.parents('.view').length&&$inputEl.parents('.view')[0].f7View;}if(!view)view=app.views.main;var isHorizontal=calendar.params.direction==='horizontal';var inverter=1;if(isHorizontal){inverter=app.rtl?-1:1;}Utils.extend(calendar,{app:app,$containerEl:$containerEl,containerEl:$containerEl&&$containerEl[0],inline:$containerEl&&$containerEl.length>0,$inputEl:$inputEl,inputEl:$inputEl&&$inputEl[0],initialized:false,opened:false,url:calendar.params.url,isHorizontal:isHorizontal,inverter:inverter,view:view,animating:false});function onInputClick(){calendar.open();}function onInputFocus(e){e.preventDefault();}function onHtmlClick(e){var $targetEl=(0,_dom2.default)(e.target);if(calendar.isPopover())return;if(!calendar.opened)return;if($targetEl.closest('[class*="backdrop"]').length)return;if($inputEl&&$inputEl.length>0){if($targetEl[0]!==$inputEl[0]&&$targetEl.closest('.sheet-modal, .calendar-modal').length===0){calendar.close();}}else if((0,_dom2.default)(e.target).closest('.sheet-modal, .calendar-modal').length===0){calendar.close();}}// Events
Utils.extend(calendar,{attachInputEvents:function attachInputEvents(){calendar.$inputEl.on('click',onInputClick);if(calendar.params.inputReadOnly){calendar.$inputEl.on('focus mousedown',onInputFocus);}},detachInputEvents:function detachInputEvents(){calendar.$inputEl.off('click',onInputClick);if(calendar.params.inputReadOnly){calendar.$inputEl.off('focus mousedown',onInputFocus);}},attachHtmlEvents:function attachHtmlEvents(){app.on('click',onHtmlClick);},detachHtmlEvents:function detachHtmlEvents(){app.off('click',onHtmlClick);}});calendar.attachCalendarEvents=function attachCalendarEvents(){var allowItemClick=true;var isTouched=void 0;var isMoved=void 0;var touchStartX=void 0;var touchStartY=void 0;var touchCurrentX=void 0;var touchCurrentY=void 0;var touchStartTime=void 0;var touchEndTime=void 0;var currentTranslate=void 0;var wrapperWidth=void 0;var wrapperHeight=void 0;var percentage=void 0;var touchesDiff=void 0;var isScrolling=void 0;var $el=calendar.$el,$wrapperEl=calendar.$wrapperEl;function handleTouchStart(e){if(isMoved||isTouched)return;isTouched=true;touchStartX=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchCurrentX=touchStartX;touchStartY=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;touchCurrentY=touchStartY;touchStartTime=new Date().getTime();percentage=0;allowItemClick=true;isScrolling=undefined;currentTranslate=calendar.monthsTranslate;}function handleTouchMove(e){if(!isTouched)return;var isH=calendar.isHorizontal;touchCurrentX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;touchCurrentY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(touchCurrentY-touchStartY)>Math.abs(touchCurrentX-touchStartX));}if(isH&&isScrolling){isTouched=false;return;}e.preventDefault();if(calendar.animating){isTouched=false;return;}allowItemClick=false;if(!isMoved){// First move
isMoved=true;wrapperWidth=$wrapperEl[0].offsetWidth;wrapperHeight=$wrapperEl[0].offsetHeight;$wrapperEl.transition(0);}touchesDiff=isH?touchCurrentX-touchStartX:touchCurrentY-touchStartY;percentage=touchesDiff/(isH?wrapperWidth:wrapperHeight);currentTranslate=(calendar.monthsTranslate*calendar.inverter+percentage)*100;// Transform wrapper
$wrapperEl.transform('translate3d('+(isH?currentTranslate:0)+'%, '+(isH?0:currentTranslate)+'%, 0)');}function handleTouchEnd(){if(!isTouched||!isMoved){isTouched=false;isMoved=false;return;}isTouched=false;isMoved=false;touchEndTime=new Date().getTime();if(touchEndTime-touchStartTime<300){if(Math.abs(touchesDiff)<10){calendar.resetMonth();}else if(touchesDiff>=10){if(app.rtl)calendar.nextMonth();else calendar.prevMonth();}else if(app.rtl)calendar.prevMonth();else calendar.nextMonth();}else if(percentage<=-0.5){if(app.rtl)calendar.prevMonth();else calendar.nextMonth();}else if(percentage>=0.5){if(app.rtl)calendar.nextMonth();else calendar.prevMonth();}else{calendar.resetMonth();}// Allow click
setTimeout(function(){allowItemClick=true;},100);}function handleDayClick(e){if(!allowItemClick)return;var $dayEl=(0,_dom2.default)(e.target).parents('.calendar-day');if($dayEl.length===0&&(0,_dom2.default)(e.target).hasClass('calendar-day')){$dayEl=(0,_dom2.default)(e.target);}if($dayEl.length===0)return;if($dayEl.hasClass('calendar-day-disabled'))return;if(!calendar.params.rangePicker){if($dayEl.hasClass('calendar-day-next'))calendar.nextMonth();if($dayEl.hasClass('calendar-day-prev'))calendar.prevMonth();}var dateYear=$dayEl.attr('data-year');var dateMonth=$dayEl.attr('data-month');var dateDay=$dayEl.attr('data-day');calendar.emit('local::dayClick calendarDayClick',calendar,$dayEl[0],dateYear,dateMonth,dateDay);if(!$dayEl.hasClass('calendar-day-selected')||calendar.params.multiple||calendar.params.rangePicker){calendar.addValue(new Date(dateYear,dateMonth,dateDay,0,0,0));}if(calendar.params.closeOnSelect){if(calendar.params.rangePicker&&calendar.value.length===2||!calendar.params.rangePicker){calendar.close();}}}function onNextMonthClick(){calendar.nextMonth();}function onPrevMonthClick(){calendar.prevMonth();}function onNextYearClick(){calendar.nextYear();}function onPrevYearClick(){calendar.prevYear();}var passiveListener=app.touchEvents.start==='touchstart'&&app.support.passiveListener?{passive:true,capture:false}:false;// Selectors clicks
$el.find('.calendar-prev-month-button').on('click',onPrevMonthClick);$el.find('.calendar-next-month-button').on('click',onNextMonthClick);$el.find('.calendar-prev-year-button').on('click',onPrevYearClick);$el.find('.calendar-next-year-button').on('click',onNextYearClick);// Day clicks
$wrapperEl.on('click',handleDayClick);// Touch events
{if(calendar.params.touchMove){$wrapperEl.on(app.touchEvents.start,handleTouchStart,passiveListener);app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);}}calendar.detachCalendarEvents=function detachCalendarEvents(){$el.find('.calendar-prev-month-button').off('click',onPrevMonthClick);$el.find('.calendar-next-month-button').off('click',onNextMonthClick);$el.find('.calendar-prev-year-button').off('click',onPrevYearClick);$el.find('.calendar-next-year-button').off('click',onNextYearClick);$wrapperEl.off('click',handleDayClick);{if(calendar.params.touchMove){$wrapperEl.off(app.touchEvents.start,handleTouchStart,passiveListener);app.off('touchmove:active',handleTouchMove);app.off('touchend:passive',handleTouchEnd);}}};};calendar.init();return _ret50=calendar,_possibleConstructorReturn(_this22,_ret50);}// eslint-disable-next-line
_createClass(Calendar,[{key:'normalizeDate',value:function normalizeDate(date){var d=new Date(date);return new Date(d.getFullYear(),d.getMonth(),d.getDate());}},{key:'normalizeValues',value:function normalizeValues(values){var calendar=this;var newValues=[];if(values&&Array.isArray(values)){newValues=values.map(function(val){return calendar.normalizeDate(val);});}return newValues;}},{key:'initInput',value:function initInput(){var calendar=this;if(!calendar.$inputEl)return;if(calendar.params.inputReadOnly)calendar.$inputEl.prop('readOnly',true);}},{key:'isPopover',value:function isPopover(){var calendar=this;var app=calendar.app,modal=calendar.modal,params=calendar.params;if(params.openIn==='sheet')return false;if(modal&&modal.type!=='popover')return false;if(!calendar.inline&&calendar.inputEl){if(params.openIn==='popover')return true;else if(app.device.ios){return!!app.device.ipad;}else if(app.width>=768){return true;}}return false;}},{key:'formatDate',value:function formatDate(d){var calendar=this;var date=new Date(d);var year=date.getFullYear();var month=date.getMonth();var month1=month+1;var day=date.getDate();var weekDay=date.getDay();var _calendar$params=calendar.params,dateFormat=_calendar$params.dateFormat,monthNames=_calendar$params.monthNames,monthNamesShort=_calendar$params.monthNamesShort,dayNames=_calendar$params.dayNames,dayNamesShort=_calendar$params.dayNamesShort;return dateFormat.replace(/yyyy/g,year).replace(/yy/g,String(year).substring(2)).replace(/mm/g,month1<10?'0'+month1:month1).replace(/m(\W+)/g,month1+'$1').replace(/MM/g,monthNames[month]).replace(/M(\W+)/g,monthNamesShort[month]+'$1').replace(/dd/g,day<10?'0'+day:day).replace(/d(\W+)/g,day+'$1').replace(/DD/g,dayNames[weekDay]).replace(/D(\W+)/g,dayNamesShort[weekDay]+'$1');}},{key:'formatValue',value:function formatValue(){var calendar=this;var value=calendar.value;if(calendar.params.formatValue){return calendar.params.formatValue.call(calendar,value);}return value.map(function(v){return calendar.formatDate(v);}).join(calendar.params.rangePicker?' - ':', ');}},{key:'addValue',value:function addValue(newValue){var calendar=this;var _calendar$params2=calendar.params,multiple=_calendar$params2.multiple,rangePicker=_calendar$params2.rangePicker;if(multiple){if(!calendar.value)calendar.value=[];var inValuesIndex=void 0;for(var _i19=0;_i19<calendar.value.length;_i19+=1){if(new Date(newValue).getTime()===new Date(calendar.value[_i19]).getTime()){inValuesIndex=_i19;}}if(typeof inValuesIndex==='undefined'){calendar.value.push(newValue);}else{calendar.value.splice(inValuesIndex,1);}calendar.updateValue();}else if(rangePicker){if(!calendar.value)calendar.value=[];if(calendar.value.length===2||calendar.value.length===0){calendar.value=[];}if(calendar.value[0]!==newValue)calendar.value.push(newValue);else calendar.value=[];calendar.value.sort(function(a,b){return a-b;});calendar.updateValue();}else{calendar.value=[newValue];calendar.updateValue();}}},{key:'setValue',value:function setValue(values){var calendar=this;calendar.value=values;calendar.updateValue();}},{key:'getValue',value:function getValue(){var calendar=this;return calendar.value;}},{key:'updateValue',value:function updateValue(onlyHeader){var calendar=this;var $el=calendar.$el,$wrapperEl=calendar.$wrapperEl,$inputEl=calendar.$inputEl,value=calendar.value,params=calendar.params;var i=void 0;if($el&&$el.length>0){$wrapperEl.find('.calendar-day-selected').removeClass('calendar-day-selected');var valueDate=void 0;if(params.rangePicker&&value.length===2){for(i=new Date(value[0]).getTime();i<=new Date(value[1]).getTime();i+=24*60*60*1000){valueDate=new Date(i);$wrapperEl.find('.calendar-day[data-date="'+valueDate.getFullYear()+'-'+valueDate.getMonth()+'-'+valueDate.getDate()+'"]').addClass('calendar-day-selected');}}else{for(i=0;i<calendar.value.length;i+=1){valueDate=new Date(value[i]);$wrapperEl.find('.calendar-day[data-date="'+valueDate.getFullYear()+'-'+valueDate.getMonth()+'-'+valueDate.getDate()+'"]').addClass('calendar-day-selected');}}}if(!onlyHeader){calendar.emit('local::change calendarChange',calendar,value);}if($inputEl&&$inputEl.length||params.header){var inputValue=calendar.formatValue(value);if(params.header&&$el&&$el.length){$el.find('.calendar-selected-date').text(inputValue);}if($inputEl&&$inputEl.length&&!onlyHeader){$inputEl.val(inputValue);$inputEl.trigger('change');}}}},{key:'updateCurrentMonthYear',value:function updateCurrentMonthYear(dir){var calendar=this;var $months=calendar.$months,$el=calendar.$el,params=calendar.params;if(typeof dir==='undefined'){calendar.currentMonth=parseInt($months.eq(1).attr('data-month'),10);calendar.currentYear=parseInt($months.eq(1).attr('data-year'),10);}else{calendar.currentMonth=parseInt($months.eq(dir==='next'?$months.length-1:0).attr('data-month'),10);calendar.currentYear=parseInt($months.eq(dir==='next'?$months.length-1:0).attr('data-year'),10);}$el.find('.current-month-value').text(params.monthNames[calendar.currentMonth]);$el.find('.current-year-value').text(calendar.currentYear);}},{key:'update',value:function update(){var calendar=this;var currentYear=calendar.currentYear,currentMonth=calendar.currentMonth,$wrapperEl=calendar.$wrapperEl;var currentDate=new Date(currentYear,currentMonth);var prevMonthHtml=calendar.renderMonth(currentDate,'prev');var currentMonthHtml=calendar.renderMonth(currentDate);var nextMonthHtml=calendar.renderMonth(currentDate,'next');$wrapperEl.transition(0).html(''+prevMonthHtml+currentMonthHtml+nextMonthHtml).transform('translate3d(0,0,0)');calendar.$months=$wrapperEl.find('.calendar-month');calendar.monthsTranslate=0;calendar.setMonthsTranslate();calendar.$months.each(function(index,monthEl){calendar.emit('local::monthAdd calendarMonthAdd',monthEl);});}},{key:'onMonthChangeStart',value:function onMonthChangeStart(dir){var calendar=this;var $months=calendar.$months,currentYear=calendar.currentYear,currentMonth=calendar.currentMonth;calendar.updateCurrentMonthYear(dir);$months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');var currentIndex=dir==='next'?$months.length-1:0;$months.eq(currentIndex).addClass('calendar-month-current');$months.eq(dir==='next'?currentIndex-1:currentIndex+1).addClass(dir==='next'?'calendar-month-prev':'calendar-month-next');calendar.emit('local::monthYearChangeStart calendarMonthYearChangeStart',calendar,currentYear,currentMonth);}},{key:'onMonthChangeEnd',value:function onMonthChangeEnd(dir,rebuildBoth){var calendar=this;var currentYear=calendar.currentYear,currentMonth=calendar.currentMonth,$wrapperEl=calendar.$wrapperEl,monthsTranslate=calendar.monthsTranslate;calendar.animating=false;var nextMonthHtml=void 0;var prevMonthHtml=void 0;var currentMonthHtml=void 0;$wrapperEl.find('.calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)').remove();if(typeof dir==='undefined'){dir='next';// eslint-disable-line
rebuildBoth=true;// eslint-disable-line
}if(!rebuildBoth){currentMonthHtml=calendar.renderMonth(new Date(currentYear,currentMonth),dir);}else{$wrapperEl.find('.calendar-month-next, .calendar-month-prev').remove();prevMonthHtml=calendar.renderMonth(new Date(currentYear,currentMonth),'prev');nextMonthHtml=calendar.renderMonth(new Date(currentYear,currentMonth),'next');}if(dir==='next'||rebuildBoth){$wrapperEl.append(currentMonthHtml||nextMonthHtml);}if(dir==='prev'||rebuildBoth){$wrapperEl.prepend(currentMonthHtml||prevMonthHtml);}var $months=$wrapperEl.find('.calendar-month');calendar.$months=$months;calendar.setMonthsTranslate(monthsTranslate);calendar.emit('local::monthAdd calendarMonthAdd',calendar,dir==='next'?$months.eq($months.length-1)[0]:$months.eq(0)[0]);calendar.emit('local::monthYearChangeEnd calendarMonthYearChangeEnd',calendar,currentYear,currentMonth);}},{key:'setMonthsTranslate',value:function setMonthsTranslate(translate){var calendar=this;var $months=calendar.$months,isH=calendar.isHorizontal,inverter=calendar.inverter;// eslint-disable-next-line
translate=translate||calendar.monthsTranslate||0;if(typeof calendar.monthsTranslate==='undefined'){calendar.monthsTranslate=translate;}$months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');var prevMonthTranslate=-(translate+1)*100*inverter;var currentMonthTranslate=-translate*100*inverter;var nextMonthTranslate=-(translate-1)*100*inverter;$months.eq(0).transform('translate3d('+(isH?prevMonthTranslate:0)+'%, '+(isH?0:prevMonthTranslate)+'%, 0)').addClass('calendar-month-prev');$months.eq(1).transform('translate3d('+(isH?currentMonthTranslate:0)+'%, '+(isH?0:currentMonthTranslate)+'%, 0)').addClass('calendar-month-current');$months.eq(2).transform('translate3d('+(isH?nextMonthTranslate:0)+'%, '+(isH?0:nextMonthTranslate)+'%, 0)').addClass('calendar-month-next');}},{key:'nextMonth',value:function nextMonth(transition){var calendar=this;var params=calendar.params,$wrapperEl=calendar.$wrapperEl,inverter=calendar.inverter,isH=calendar.isHorizontal;if(typeof transition==='undefined'||(typeof transition==='undefined'?'undefined':_typeof(transition))==='object'){transition='';// eslint-disable-line
if(!params.animate)transition=0;// eslint-disable-line
}var nextMonth=parseInt(calendar.$months.eq(calendar.$months.length-1).attr('data-month'),10);var nextYear=parseInt(calendar.$months.eq(calendar.$months.length-1).attr('data-year'),10);var nextDate=new Date(nextYear,nextMonth);var nextDateTime=nextDate.getTime();var transitionEndCallback=!calendar.animating;if(params.maxDate){if(nextDateTime>new Date(params.maxDate).getTime()){calendar.resetMonth();return;}}calendar.monthsTranslate-=1;if(nextMonth===calendar.currentMonth){var nextMonthTranslate=-calendar.monthsTranslate*100*inverter;var nextMonthHtml=(0,_dom2.default)(calendar.renderMonth(nextDateTime,'next')).transform('translate3d('+(isH?nextMonthTranslate:0)+'%, '+(isH?0:nextMonthTranslate)+'%, 0)').addClass('calendar-month-next');$wrapperEl.append(nextMonthHtml[0]);calendar.$months=$wrapperEl.find('.calendar-month');calendar.emit('local::monthAdd calendarMonthAdd',calendar.$months.eq(calendar.$months.length-1)[0]);}calendar.animating=true;calendar.onMonthChangeStart('next');var translate=calendar.monthsTranslate*100*inverter;$wrapperEl.transition(transition).transform('translate3d('+(isH?translate:0)+'%, '+(isH?0:translate)+'%, 0)');if(transitionEndCallback){$wrapperEl.transitionEnd(function(){calendar.onMonthChangeEnd('next');});}if(!params.animate){calendar.onMonthChangeEnd('next');}}},{key:'prevMonth',value:function prevMonth(transition){var calendar=this;var params=calendar.params,$wrapperEl=calendar.$wrapperEl,inverter=calendar.inverter,isH=calendar.isHorizontal;if(typeof transition==='undefined'||(typeof transition==='undefined'?'undefined':_typeof(transition))==='object'){transition='';// eslint-disable-line
if(!params.animate)transition=0;// eslint-disable-line
}var prevMonth=parseInt(calendar.$months.eq(0).attr('data-month'),10);var prevYear=parseInt(calendar.$months.eq(0).attr('data-year'),10);var prevDate=new Date(prevYear,prevMonth+1,-1);var prevDateTime=prevDate.getTime();var transitionEndCallback=!calendar.animating;if(params.minDate){if(prevDateTime<new Date(params.minDate).getTime()){calendar.resetMonth();return;}}calendar.monthsTranslate+=1;if(prevMonth===calendar.currentMonth){var prevMonthTranslate=-calendar.monthsTranslate*100*inverter;var prevMonthHtml=(0,_dom2.default)(calendar.renderMonth(prevDateTime,'prev')).transform('translate3d('+(isH?prevMonthTranslate:0)+'%, '+(isH?0:prevMonthTranslate)+'%, 0)').addClass('calendar-month-prev');$wrapperEl.prepend(prevMonthHtml[0]);calendar.$months=$wrapperEl.find('.calendar-month');calendar.emit('local::monthAdd calendarMonthAdd',calendar.$months.eq(0)[0]);}calendar.animating=true;calendar.onMonthChangeStart('prev');var translate=calendar.monthsTranslate*100*inverter;$wrapperEl.transition(transition).transform('translate3d('+(isH?translate:0)+'%, '+(isH?0:translate)+'%, 0)');if(transitionEndCallback){$wrapperEl.transitionEnd(function(){calendar.onMonthChangeEnd('prev');});}if(!params.animate){calendar.onMonthChangeEnd('prev');}}},{key:'resetMonth',value:function resetMonth(){var transition=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var calendar=this;var $wrapperEl=calendar.$wrapperEl,inverter=calendar.inverter,isH=calendar.isHorizontal,monthsTranslate=calendar.monthsTranslate;var translate=monthsTranslate*100*inverter;$wrapperEl.transition(transition).transform('translate3d('+(isH?translate:0)+'%, '+(isH?0:translate)+'%, 0)');}// eslint-disable-next-line
},{key:'setYearMonth',value:function setYearMonth(year,month,transition){var calendar=this;var params=calendar.params,isH=calendar.isHorizontal,$wrapperEl=calendar.$wrapperEl,inverter=calendar.inverter;// eslint-disable-next-line
if(typeof year==='undefined')year=calendar.currentYear;// eslint-disable-next-line
if(typeof month==='undefined')month=calendar.currentMonth;if(typeof transition==='undefined'||(typeof transition==='undefined'?'undefined':_typeof(transition))==='object'){// eslint-disable-next-line
transition='';// eslint-disable-next-line
if(!params.animate)transition=0;}var targetDate=void 0;if(year<calendar.currentYear){targetDate=new Date(year,month+1,-1).getTime();}else{targetDate=new Date(year,month).getTime();}if(params.maxDate&&targetDate>new Date(params.maxDate).getTime()){return false;}if(params.minDate&&targetDate<new Date(params.minDate).getTime()){return false;}var currentDate=new Date(calendar.currentYear,calendar.currentMonth).getTime();var dir=targetDate>currentDate?'next':'prev';var newMonthHTML=calendar.renderMonth(new Date(year,month));calendar.monthsTranslate=calendar.monthsTranslate||0;var prevTranslate=calendar.monthsTranslate;var monthTranslate=void 0;var transitionEndCallback=!calendar.animating;if(targetDate>currentDate){// To next
calendar.monthsTranslate-=1;if(!calendar.animating)calendar.$months.eq(calendar.$months.length-1).remove();$wrapperEl.append(newMonthHTML);calendar.$months=$wrapperEl.find('.calendar-month');monthTranslate=-(prevTranslate-1)*100*inverter;calendar.$months.eq(calendar.$months.length-1).transform('translate3d('+(isH?monthTranslate:0)+'%, '+(isH?0:monthTranslate)+'%, 0)').addClass('calendar-month-next');}else{// To prev
calendar.monthsTranslate+=1;if(!calendar.animating)calendar.$months.eq(0).remove();$wrapperEl.prepend(newMonthHTML);calendar.$months=$wrapperEl.find('.calendar-month');monthTranslate=-(prevTranslate+1)*100*inverter;calendar.$months.eq(0).transform('translate3d('+(isH?monthTranslate:0)+'%, '+(isH?0:monthTranslate)+'%, 0)').addClass('calendar-month-prev');}calendar.emit('local::monthAdd calendarMonthAdd',dir==='next'?calendar.$months.eq(calendar.$months.length-1)[0]:calendar.$months.eq(0)[0]);calendar.animating=true;calendar.onMonthChangeStart(dir);var wrapperTranslate=calendar.monthsTranslate*100*inverter;$wrapperEl.transition(transition).transform('translate3d('+(isH?wrapperTranslate:0)+'%, '+(isH?0:wrapperTranslate)+'%, 0)');if(transitionEndCallback){$wrapperEl.transitionEnd(function(){calendar.onMonthChangeEnd(dir,true);});}if(!params.animate){calendar.onMonthChangeEnd(dir);}}},{key:'nextYear',value:function nextYear(){var calendar=this;calendar.setYearMonth(calendar.currentYear+1);}},{key:'prevYear',value:function prevYear(){var calendar=this;calendar.setYearMonth(calendar.currentYear-1);}// eslint-disable-next-line
},{key:'dateInRange',value:function dateInRange(dayDate,range){var match=false;var i=void 0;if(!range)return false;if(Array.isArray(range)){for(i=0;i<range.length;i+=1){if(range[i].from||range[i].to){if(range[i].from&&range[i].to){if(dayDate<=new Date(range[i].to).getTime()&&dayDate>=new Date(range[i].from).getTime()){match=true;}}else if(range[i].from){if(dayDate>=new Date(range[i].from).getTime()){match=true;}}else if(range[i].to){if(dayDate<=new Date(range[i].to).getTime()){match=true;}}}else if(dayDate===new Date(range[i]).getTime()){match=true;}}}else if(range.from||range.to){if(range.from&&range.to){if(dayDate<=new Date(range.to).getTime()&&dayDate>=new Date(range.from).getTime()){match=true;}}else if(range.from){if(dayDate>=new Date(range.from).getTime()){match=true;}}else if(range.to){if(dayDate<=new Date(range.to).getTime()){match=true;}}}else if(typeof range==='function'){match=range(new Date(dayDate));}return match;}// eslint-disable-next-line
},{key:'daysInMonth',value:function daysInMonth(date){var d=new Date(date);return new Date(d.getFullYear(),d.getMonth()+1,0).getDate();}},{key:'renderMonths',value:function renderMonths(date){var calendar=this;if(calendar.params.renderMonths){return calendar.params.renderMonths.call(calendar,date);}return('\n      <div class="calendar-months-wrapper">\n        '+calendar.renderMonth(date,'prev')+'\n        '+calendar.renderMonth(date)+'\n        '+calendar.renderMonth(date,'next')+'\n      </div>\n    ').trim();}},{key:'renderMonth',value:function renderMonth(d,offset){var calendar=this;var params=calendar.params,value=calendar.value;if(params.renderMonth){return params.renderMonth.call(calendar,d,offset);}var date=new Date(d);var year=date.getFullYear();var month=date.getMonth();if(offset==='next'){if(month===11)date=new Date(year+1,0);else date=new Date(year,month+1,1);}if(offset==='prev'){if(month===0)date=new Date(year-1,11);else date=new Date(year,month-1,1);}if(offset==='next'||offset==='prev'){month=date.getMonth();year=date.getFullYear();}var currentValues=[];var today=new Date().setHours(0,0,0,0);var minDate=params.minDate?new Date(params.minDate).getTime():null;var maxDate=params.maxDate?new Date(params.maxDate).getTime():null;var rows=6;var cols=7;var daysInPrevMonth=calendar.daysInMonth(new Date(date.getFullYear(),date.getMonth()).getTime()-10*24*60*60*1000);var daysInMonth=calendar.daysInMonth(date);var minDayNumber=params.firstDay===6?0:1;var monthHtml='';var dayIndex=0+(params.firstDay-1);var disabled=void 0;var hasEvent=void 0;var firstDayOfMonthIndex=new Date(date.getFullYear(),date.getMonth()).getDay();if(firstDayOfMonthIndex===0)firstDayOfMonthIndex=7;if(value&&value.length){for(var _i20=0;_i20<value.length;_i20+=1){currentValues.push(new Date(value[_i20]).setHours(0,0,0,0));}}for(var row=1;row<=rows;row+=1){var rowHtml='';for(var col=1;col<=cols;col+=1){dayIndex+=1;var dayDate=void 0;var dayNumber=dayIndex-firstDayOfMonthIndex;var addClass='';if(row===1&&col===1&&dayNumber>minDayNumber&&params.firstDay!==1){dayIndex-=7;dayNumber=dayIndex-firstDayOfMonthIndex;}var weekDayIndex=col-1+params.firstDay>6?col-1-7+params.firstDay:col-1+params.firstDay;if(dayNumber<0){dayNumber=daysInPrevMonth+dayNumber+1;addClass+=' calendar-day-prev';dayDate=new Date(month-1<0?year-1:year,month-1<0?11:month-1,dayNumber).getTime();}else{dayNumber+=1;if(dayNumber>daysInMonth){dayNumber-=daysInMonth;addClass+=' calendar-day-next';dayDate=new Date(month+1>11?year+1:year,month+1>11?0:month+1,dayNumber).getTime();}else{dayDate=new Date(year,month,dayNumber).getTime();}}// Today
if(dayDate===today)addClass+=' calendar-day-today';// Selected
if(params.rangePicker&&currentValues.length===2){if(dayDate>=currentValues[0]&&dayDate<=currentValues[1])addClass+=' calendar-day-selected';}else if(currentValues.indexOf(dayDate)>=0)addClass+=' calendar-day-selected';// Weekend
if(params.weekendDays.indexOf(weekDayIndex)>=0){addClass+=' calendar-day-weekend';}// Has Events
hasEvent=false;if(params.events){if(calendar.dateInRange(dayDate,params.events)){hasEvent=true;}}if(hasEvent){addClass+=' calendar-day-has-events';}// Custom Ranges
if(params.rangesClasses){for(var k=0;k<params.rangesClasses.length;k+=1){if(calendar.dateInRange(dayDate,params.rangesClasses[k].range)){addClass+=' '+params.rangesClasses[k].cssClass;}}}// Disabled
disabled=false;if(minDate&&dayDate<minDate||maxDate&&dayDate>maxDate){disabled=true;}if(params.disabled){if(calendar.dateInRange(dayDate,params.disabled)){disabled=true;}}if(disabled){addClass+=' calendar-day-disabled';}dayDate=new Date(dayDate);var dayYear=dayDate.getFullYear();var dayMonth=dayDate.getMonth();rowHtml+=('\n          <div data-year="'+dayYear+'" data-month="'+dayMonth+'" data-day="'+dayNumber+'" class="calendar-day'+addClass+'" data-date="'+dayYear+'-'+dayMonth+'-'+dayNumber+'">\n            <span>'+dayNumber+'</span>\n          </div>').trim();}monthHtml+='<div class="calendar-row">'+rowHtml+'</div>';}monthHtml='<div class="calendar-month" data-year="'+year+'" data-month="'+month+'">'+monthHtml+'</div>';return monthHtml;}},{key:'renderWeekHeader',value:function renderWeekHeader(){var calendar=this;if(calendar.params.renderWeekHeader){return calendar.params.renderWeekHeader.call(calendar);}var params=calendar.params;var weekDaysHtml='';for(var _i21=0;_i21<7;_i21+=1){var dayIndex=_i21+params.firstDay>6?_i21-7+params.firstDay:_i21+params.firstDay;var dayName=params.dayNamesShort[dayIndex];weekDaysHtml+='<div class="calendar-week-day">'+dayName+'</div>';}return('\n      <div class="calendar-week-header">\n        '+weekDaysHtml+'\n      </div>\n    ').trim();}},{key:'renderMonthSelector',value:function renderMonthSelector(){var calendar=this;var app=calendar.app;if(calendar.params.renderMonthSelector){return calendar.params.renderMonthSelector.call(calendar);}var needsBlackIcon=void 0;if(calendar.inline&&calendar.$containerEl.closest('.theme-dark').length===0){needsBlackIcon=true;}else if(app.root.closest('.theme-dark').length===0){needsBlackIcon=true;}var iconColor=app.theme==='md'&&needsBlackIcon?'color-black':'';return('\n      <div class="calendar-month-selector">\n        <a href="#" class="link icon-only calendar-prev-month-button">\n          <i class="icon icon-prev '+iconColor+'"></i>\n        </a>\n        <span class="current-month-value"></span>\n        <a href="#" class="link icon-only calendar-next-month-button">\n          <i class="icon icon-next '+iconColor+'"></i>\n        </a>\n      </div>\n    ').trim();}},{key:'renderYearSelector',value:function renderYearSelector(){var calendar=this;var app=calendar.app;if(calendar.params.renderYearSelector){return calendar.params.renderYearSelector.call(calendar);}var needsBlackIcon=void 0;if(calendar.inline&&calendar.$containerEl.closest('.theme-dark').length===0){needsBlackIcon=true;}else if(app.root.closest('.theme-dark').length===0){needsBlackIcon=true;}var iconColor=app.theme==='md'&&needsBlackIcon?'color-black':'';return('\n      <div class="calendar-year-selector">\n        <a href="#" class="link icon-only calendar-prev-year-button">\n          <i class="icon icon-prev '+iconColor+'"></i>\n        </a>\n        <span class="current-year-value"></span>\n        <a href="#" class="link icon-only calendar-next-year-button">\n          <i class="icon icon-next '+iconColor+'"></i>\n        </a>\n      </div>\n    ').trim();}},{key:'renderHeader',value:function renderHeader(){var calendar=this;if(calendar.params.renderHeader){return calendar.params.renderHeader.call(calendar);}return('\n      <div class="calendar-header">\n        <div class="calendar-selected-date">'+calendar.params.headerPlaceholder+'</div>\n      </div>\n    ').trim();}},{key:'renderFooter',value:function renderFooter(){var calendar=this;var app=calendar.app;if(calendar.params.renderFooter){return calendar.params.renderFooter.call(calendar);}return('\n      <div class="calendar-footer">\n        <a href="#" class="'+(app.theme==='md'?'button':'link')+' calendar-close sheet-close popover-close">'+calendar.params.toolbarCloseText+'</a>\n      </div>\n    ').trim();}},{key:'renderToolbar',value:function renderToolbar(){var calendar=this;if(calendar.params.renderToolbar){return calendar.params.renderToolbar.call(calendar,calendar);}return('\n      <div class="toolbar no-shadow">\n        <div class="toolbar-inner">\n          '+calendar.renderMonthSelector()+'\n          '+calendar.renderYearSelector()+'\n        </div>\n      </div>\n    ').trim();}// eslint-disable-next-line
},{key:'renderInline',value:function renderInline(){var calendar=this;var _calendar$params3=calendar.params,cssClass=_calendar$params3.cssClass,toolbar=_calendar$params3.toolbar,header=_calendar$params3.header,footer=_calendar$params3.footer,rangePicker=_calendar$params3.rangePicker,weekHeader=_calendar$params3.weekHeader;var value=calendar.value;var date=value&&value.length?value[0]:new Date().setHours(0,0,0);var inlineHtml=('\n      <div class="calendar calendar-inline '+(rangePicker?'calendar-range':'')+' '+(cssClass||'')+'">\n        '+(header?calendar.renderHeader():'')+'\n        '+(toolbar?calendar.renderToolbar():'')+'\n        '+(weekHeader?calendar.renderWeekHeader():'')+'\n        <div class="calendar-months">\n          '+calendar.renderMonths(date)+'\n        </div>\n        '+(footer?calendar.renderFooter():'')+'\n      </div>\n    ').trim();return inlineHtml;}},{key:'renderCustomModal',value:function renderCustomModal(){var calendar=this;var _calendar$params4=calendar.params,cssClass=_calendar$params4.cssClass,toolbar=_calendar$params4.toolbar,header=_calendar$params4.header,footer=_calendar$params4.footer,rangePicker=_calendar$params4.rangePicker,weekHeader=_calendar$params4.weekHeader;var value=calendar.value;var date=value&&value.length?value[0]:new Date().setHours(0,0,0);var sheetHtml=('\n      <div class="calendar calendar-modal '+(rangePicker?'calendar-range':'')+' '+(cssClass||'')+'">\n        '+(header?calendar.renderHeader():'')+'\n        '+(toolbar?calendar.renderToolbar():'')+'\n        '+(weekHeader?calendar.renderWeekHeader():'')+'\n        <div class="calendar-months">\n          '+calendar.renderMonths(date)+'\n        </div>\n        '+(footer?calendar.renderFooter():'')+'\n      </div>\n    ').trim();return sheetHtml;}},{key:'renderSheet',value:function renderSheet(){var calendar=this;var _calendar$params5=calendar.params,cssClass=_calendar$params5.cssClass,toolbar=_calendar$params5.toolbar,header=_calendar$params5.header,footer=_calendar$params5.footer,rangePicker=_calendar$params5.rangePicker,weekHeader=_calendar$params5.weekHeader;var value=calendar.value;var date=value&&value.length?value[0]:new Date().setHours(0,0,0);var sheetHtml=('\n      <div class="sheet-modal calendar calendar-sheet '+(rangePicker?'calendar-range':'')+' '+(cssClass||'')+'">\n        '+(header?calendar.renderHeader():'')+'\n        '+(toolbar?calendar.renderToolbar():'')+'\n        '+(weekHeader?calendar.renderWeekHeader():'')+'\n        <div class="sheet-modal-inner calendar-months">\n          '+calendar.renderMonths(date)+'\n        </div>\n        '+(footer?calendar.renderFooter():'')+'\n      </div>\n    ').trim();return sheetHtml;}},{key:'renderPopover',value:function renderPopover(){var calendar=this;var _calendar$params6=calendar.params,cssClass=_calendar$params6.cssClass,toolbar=_calendar$params6.toolbar,header=_calendar$params6.header,footer=_calendar$params6.footer,rangePicker=_calendar$params6.rangePicker,weekHeader=_calendar$params6.weekHeader;var value=calendar.value;var date=value&&value.length?value[0]:new Date().setHours(0,0,0);var popoverHtml=('\n      <div class="popover calendar-popover">\n        <div class="popover-inner">\n          <div class="calendar '+(rangePicker?'calendar-range':'')+' '+(cssClass||'')+'">\n            '+(header?calendar.renderHeader():'')+'\n            '+(toolbar?calendar.renderToolbar():'')+'\n            '+(weekHeader?calendar.renderWeekHeader():'')+'\n            <div class="calendar-months">\n              '+calendar.renderMonths(date)+'\n            </div>\n            '+(footer?calendar.renderFooter():'')+'\n          </div>\n        </div>\n      </div>\n    ').trim();return popoverHtml;}},{key:'render',value:function render(){var calendar=this;var params=calendar.params;if(params.render)return params.render.call(calendar);if(!calendar.inline){var modalType=params.openIn;if(modalType==='auto')modalType=calendar.isPopover()?'popover':'sheet';if(modalType==='popover')return calendar.renderPopover();else if(modalType==='sheet')return calendar.renderSheet();return calendar.renderCustomModal();}return calendar.renderInline();}},{key:'onOpen',value:function onOpen(){var calendar=this;var initialized=calendar.initialized,$el=calendar.$el,app=calendar.app,$inputEl=calendar.$inputEl,inline=calendar.inline,value=calendar.value,params=calendar.params;calendar.opened=true;// Init main events
calendar.attachCalendarEvents();var updateValue=!value&&params.value;// Set value
if(!initialized){if(value)calendar.setValue(value,0);else if(params.value){calendar.setValue(calendar.normalizeValues(params.value),0);}}else if(value){calendar.setValue(value,0);}// Update current month and year
calendar.updateCurrentMonthYear();// Set initial translate
calendar.monthsTranslate=0;calendar.setMonthsTranslate();// Update input value
if(updateValue)calendar.updateValue();else if(params.header&&value){calendar.updateValue(true);}// Extra focus
if(!inline&&$inputEl.length&&app.theme==='md'){$inputEl.trigger('focus');}calendar.initialized=true;calendar.$months.each(function(index,monthEl){calendar.emit('local::monthAdd calendarMonthAdd',monthEl);});// Trigger events
if($el){$el.trigger('calendar:open',calendar);}if($inputEl){$inputEl.trigger('calendar:open',calendar);}calendar.emit('local::open calendarOpen',calendar);}},{key:'onOpened',value:function onOpened(){var calendar=this;if(calendar.$el){calendar.$el.trigger('calendar:opened',calendar);}if(calendar.$inputEl){calendar.$inputEl.trigger('calendar:opened',calendar);}calendar.emit('local::opened calendarOpened',calendar);}},{key:'onClose',value:function onClose(){var calendar=this;var app=calendar.app;if(calendar.$inputEl&&app.theme==='md'){calendar.$inputEl.trigger('blur');}if(calendar.detachCalendarEvents){calendar.detachCalendarEvents();}if(calendar.$el){calendar.$el.trigger('calendar:close',calendar);}if(calendar.$inputEl){calendar.$inputEl.trigger('calendar:close',calendar);}calendar.emit('local::close calendarClose',calendar);}},{key:'onClosed',value:function onClosed(){var calendar=this;calendar.opened=false;if(!calendar.inline){Utils.nextTick(function(){if(calendar.modal&&calendar.modal.el&&calendar.modal.destroy){if(!calendar.params.routableModals){calendar.modal.destroy();}}delete calendar.modal;});}if(calendar.$el){calendar.$el.trigger('calendar:closed',calendar);}if(calendar.$inputEl){calendar.$inputEl.trigger('calendar:closed',calendar);}calendar.emit('local::closed calendarClosed',calendar);}},{key:'open',value:function open(){var calendar=this;var app=calendar.app,opened=calendar.opened,inline=calendar.inline,$inputEl=calendar.$inputEl,params=calendar.params;if(opened)return;if(inline){calendar.$el=(0,_dom2.default)(calendar.render());calendar.$el[0].f7Calendar=calendar;calendar.$wrapperEl=calendar.$el.find('.calendar-months-wrapper');calendar.$months=calendar.$wrapperEl.find('.calendar-month');calendar.$containerEl.append(calendar.$el);calendar.onOpen();calendar.onOpened();return;}var modalType=params.openIn;if(modalType==='auto'){modalType=calendar.isPopover()?'popover':'sheet';}var modalContent=calendar.render();var modalParams={targetEl:$inputEl,scrollToEl:calendar.params.scrollToInput?$inputEl:undefined,content:modalContent,backdrop:modalType==='popover'&&app.params.popover.backdrop!==false,on:{open:function open(){var modal=this;calendar.modal=modal;calendar.$el=modalType==='popover'?modal.$el.find('.calendar'):modal.$el;calendar.$wrapperEl=calendar.$el.find('.calendar-months-wrapper');calendar.$months=calendar.$wrapperEl.find('.calendar-month');calendar.$el[0].f7Calendar=calendar;if(modalType==='customModal'){(0,_dom2.default)(calendar.$el).find('.calendar-close').once('click',function(){calendar.close();});}calendar.onOpen();},opened:function opened(){calendar.onOpened();},close:function close(){calendar.onClose();},closed:function closed(){calendar.onClosed();}}};if(calendar.params.routableModals){calendar.view.router.navigate({url:calendar.url,route:_defineProperty({path:calendar.url},modalType,modalParams)});}else{calendar.modal=app[modalType].create(modalParams);calendar.modal.open();}}},{key:'close',value:function close(){var calendar=this;var opened=calendar.opened,inline=calendar.inline;if(!opened)return;if(inline){calendar.onClose();calendar.onClosed();return;}if(calendar.params.routableModals){calendar.view.router.back();}else{calendar.modal.close();}}},{key:'init',value:function init(){var calendar=this;calendar.initInput();if(calendar.inline){calendar.open();calendar.emit('local::init calendarInit',calendar);return;}if(!calendar.initialized&&calendar.params.value){calendar.setValue(calendar.normalizeValues(calendar.params.value));}// Attach input Events
if(calendar.$inputEl){calendar.attachInputEvents();}if(calendar.params.closeByOutsideClick){calendar.attachHtmlEvents();}calendar.emit('local::init calendarInit',calendar);}},{key:'destroy',value:function destroy(){var calendar=this;if(calendar.destroyed)return;var $el=calendar.$el;calendar.emit('local::beforeDestroy calendarBeforeDestroy',calendar);if($el)$el.trigger('calendar:beforedestroy',calendar);calendar.close();// Detach Events
if(calendar.$inputEl){calendar.detachInputEvents();}if(calendar.params.closeByOutsideClick){calendar.detachHtmlEvents();}if($el&&$el.length)delete calendar.$el[0].f7Calendar;Utils.deleteProps(calendar);calendar.destroyed=true;}}]);return Calendar;}(Framework7Class);var Calendar$1={name:'calendar',static:{Calendar:Calendar},create:function create(){var app=this;app.calendar=ConstructorMethods({defaultSelector:'.calendar',constructor:Calendar,app:app,domProp:'f7Calendar'});app.calendar.close=function close(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.calendar';var $el=(0,_dom2.default)(el);if($el.length===0)return;var calendar=$el[0].f7Calendar;if(!calendar||calendar&&!calendar.opened)return;calendar.close();};},params:{calendar:{// Calendar settings
monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNamesShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],dayNamesShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],firstDay:1,// First day of the week, Monday
weekendDays:[0,6],// Sunday and Saturday
multiple:false,rangePicker:false,dateFormat:'yyyy-mm-dd',direction:'horizontal',// or 'vertical'
minDate:null,maxDate:null,disabled:null,// dates range of disabled days
events:null,// dates range of days with events
rangesClasses:null,// array with custom classes date ranges
touchMove:true,animate:true,closeOnSelect:false,monthSelector:true,yearSelector:true,weekHeader:true,value:null,// Common opener settings
containerEl:null,openIn:'auto',// or 'popover' or 'sheet' or 'customModal'
formatValue:null,inputEl:null,inputReadOnly:true,closeByOutsideClick:true,scrollToInput:true,header:false,headerPlaceholder:'Select date',footer:false,toolbar:true,toolbarCloseText:'Done',cssClass:null,routableModals:true,view:null,url:'date/',// Render functions
renderWeekHeader:null,renderMonths:null,renderMonth:null,renderMonthSelector:null,renderYearSelector:null,renderHeader:null,renderFooter:null,renderToolbar:null,renderInline:null,renderPopover:null,renderSheet:null,render:null}}};function pickerColumn(colEl,updateItems){var picker=this;var app=picker.app;var $colEl=(0,_dom2.default)(colEl);var colIndex=$colEl.index();var col=picker.cols[colIndex];if(col.divider)return;col.$el=$colEl;col.el=$colEl[0];col.$itemsEl=col.$el.find('.picker-items');col.items=col.$itemsEl.find('.picker-item');var itemHeight=void 0;var itemsHeight=void 0;var minTranslate=void 0;var maxTranslate=void 0;var animationFrameId=void 0;function updateDuringScroll(){animationFrameId=Utils.requestAnimationFrame(function(){col.updateItems(undefined,undefined,0);updateDuringScroll();});}col.replaceValues=function replaceColValues(values,displayValues){col.detachEvents();col.values=values;col.displayValues=displayValues;col.$itemsEl.html(picker.renderColumn(col,true));col.items=col.$itemsEl.find('.picker-item');col.calcSize();col.setValue(col.values[0],0,true);col.attachEvents();};col.calcSize=function calcColSize(){if(picker.params.rotateEffect){col.$el.removeClass('picker-column-absolute');if(!col.width)col.$el.css({width:''});}var colWidth=0;var colHeight=col.$el[0].offsetHeight;itemHeight=col.items[0].offsetHeight;itemsHeight=itemHeight*col.items.length;minTranslate=colHeight/2-itemsHeight+itemHeight/2;maxTranslate=colHeight/2-itemHeight/2;if(col.width){colWidth=col.width;if(parseInt(colWidth,10)===colWidth)colWidth+='px';col.$el.css({width:colWidth});}if(picker.params.rotateEffect){if(!col.width){col.items.each(function(index,itemEl){var item=(0,_dom2.default)(itemEl).children('span');colWidth=Math.max(colWidth,item[0].offsetWidth);});col.$el.css({width:colWidth+2+'px'});}col.$el.addClass('picker-column-absolute');}};col.setValue=function setColValue(newValue){var transition=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var valueCallbacks=arguments[2];var newActiveIndex=col.$itemsEl.find('.picker-item[data-picker-value="'+newValue+'"]').index();if(typeof newActiveIndex==='undefined'||newActiveIndex===-1){return;}var newTranslate=-newActiveIndex*itemHeight+maxTranslate;// Update wrapper
col.$itemsEl.transition(transition);col.$itemsEl.transform('translate3d(0,'+newTranslate+'px,0)');// Watch items
if(picker.params.updateValuesOnMomentum&&col.activeIndex&&col.activeIndex!==newActiveIndex){Utils.cancelAnimationFrame(animationFrameId);col.$itemsEl.transitionEnd(function(){Utils.cancelAnimationFrame(animationFrameId);});updateDuringScroll();}// Update items
col.updateItems(newActiveIndex,newTranslate,transition,valueCallbacks);};col.updateItems=function updateColItems(activeIndex,translate,transition,valueCallbacks){if(typeof translate==='undefined'){// eslint-disable-next-line
translate=Utils.getTranslate(col.$itemsEl[0],'y');}// eslint-disable-next-line
if(typeof activeIndex==='undefined')activeIndex=-Math.round((translate-maxTranslate)/itemHeight);// eslint-disable-next-line
if(activeIndex<0)activeIndex=0;// eslint-disable-next-line
if(activeIndex>=col.items.length)activeIndex=col.items.length-1;var previousActiveIndex=col.activeIndex;col.activeIndex=activeIndex;col.$itemsEl.find('.picker-item-selected').removeClass('picker-item-selected');col.items.transition(transition);var selectedItem=col.items.eq(activeIndex).addClass('picker-item-selected').transform('');// Set 3D rotate effect
if(picker.params.rotateEffect){col.items.each(function(index,itemEl){var $itemEl=(0,_dom2.default)(itemEl);var itemOffsetTop=$itemEl.index()*itemHeight;var translateOffset=maxTranslate-translate;var itemOffset=itemOffsetTop-translateOffset;var percentage=itemOffset/itemHeight;var itemsFit=Math.ceil(col.height/itemHeight/2)+1;var angle=-18*percentage;if(angle>180)angle=180;if(angle<-180)angle=-180;if(Math.abs(percentage)>itemsFit){$itemEl.addClass('picker-item-far');}else{$itemEl.removeClass('picker-item-far');}$itemEl.transform('translate3d(0, '+(-translate+maxTranslate)+'px, '+(picker.needsOriginFix?-110:0)+'px) rotateX('+angle+'deg)');});}if(valueCallbacks||typeof valueCallbacks==='undefined'){// Update values
col.value=selectedItem.attr('data-picker-value');col.displayValue=col.displayValues?col.displayValues[activeIndex]:col.value;// On change callback
if(previousActiveIndex!==activeIndex){if(col.onChange){col.onChange(picker,col.value,col.displayValue);}picker.updateValue();}}};var allowItemClick=true;var isTouched=void 0;var isMoved=void 0;var touchStartY=void 0;var touchCurrentY=void 0;var touchStartTime=void 0;var touchEndTime=void 0;var startTranslate=void 0;var returnTo=void 0;var currentTranslate=void 0;var prevTranslate=void 0;var velocityTranslate=void 0;function handleTouchStart(e){if(isMoved||isTouched)return;e.preventDefault();isTouched=true;touchStartY=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;touchCurrentY=touchStartY;touchStartTime=new Date().getTime();allowItemClick=true;startTranslate=Utils.getTranslate(col.$itemsEl[0],'y');currentTranslate=startTranslate;}function handleTouchMove(e){if(!isTouched)return;e.preventDefault();allowItemClick=false;touchCurrentY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(!isMoved){// First move
Utils.cancelAnimationFrame(animationFrameId);isMoved=true;startTranslate=Utils.getTranslate(col.$itemsEl[0],'y');currentTranslate=startTranslate;col.$itemsEl.transition(0);}var diff=touchCurrentY-touchStartY;currentTranslate=startTranslate+diff;returnTo=undefined;// Normalize translate
if(currentTranslate<minTranslate){currentTranslate=minTranslate-Math.pow(minTranslate-currentTranslate,0.8);returnTo='min';}if(currentTranslate>maxTranslate){currentTranslate=maxTranslate+Math.pow(currentTranslate-maxTranslate,0.8);returnTo='max';}// Transform wrapper
col.$itemsEl.transform('translate3d(0,'+currentTranslate+'px,0)');// Update items
col.updateItems(undefined,currentTranslate,0,picker.params.updateValuesOnTouchmove);// Calc velocity
velocityTranslate=currentTranslate-prevTranslate||currentTranslate;prevTranslate=currentTranslate;}function handleTouchEnd(){if(!isTouched||!isMoved){isTouched=false;isMoved=false;return;}isTouched=false;isMoved=false;col.$itemsEl.transition('');if(returnTo){if(returnTo==='min'){col.$itemsEl.transform('translate3d(0,'+minTranslate+'px,0)');}else col.$itemsEl.transform('translate3d(0,'+maxTranslate+'px,0)');}touchEndTime=new Date().getTime();var newTranslate=void 0;if(touchEndTime-touchStartTime>300){newTranslate=currentTranslate;}else{newTranslate=currentTranslate+velocityTranslate*picker.params.momentumRatio;}newTranslate=Math.max(Math.min(newTranslate,maxTranslate),minTranslate);// Active Index
var activeIndex=-Math.floor((newTranslate-maxTranslate)/itemHeight);// Normalize translate
if(!picker.params.freeMode)newTranslate=-activeIndex*itemHeight+maxTranslate;// Transform wrapper
col.$itemsEl.transform('translate3d(0,'+parseInt(newTranslate,10)+'px,0)');// Update items
col.updateItems(activeIndex,newTranslate,'',true);// Watch items
if(picker.params.updateValuesOnMomentum){updateDuringScroll();col.$itemsEl.transitionEnd(function(){Utils.cancelAnimationFrame(animationFrameId);});}// Allow click
setTimeout(function(){allowItemClick=true;},100);}function handleClick(){if(!allowItemClick)return;Utils.cancelAnimationFrame(animationFrameId);var value=(0,_dom2.default)(this).attr('data-picker-value');col.setValue(value);}var activeListener=app.support.passiveListener?{passive:false,capture:false}:false;col.attachEvents=function attachColEvents(){col.$el.on(app.touchEvents.start,handleTouchStart,activeListener);app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);col.items.on('click',handleClick);};col.detachEvents=function detachColEvents(){col.$el.off(app.touchEvents.start,handleTouchStart,activeListener);app.off('touchmove:active',handleTouchMove);app.off('touchend:passive',handleTouchEnd);col.items.off('click',handleClick);};col.init=function initCol(){col.calcSize();col.$itemsEl.transform('translate3d(0,'+maxTranslate+'px,0)').transition(0);if(colIndex===0)col.$el.addClass('picker-column-first');if(colIndex===picker.cols.length-1)col.$el.addClass('picker-column-last');// Update items on init
if(updateItems)col.updateItems(0,maxTranslate,0);col.attachEvents();};col.destroy=function destroyCol(){col.detachEvents();};col.init();}var Picker=function(_Framework7Class13){_inherits(Picker,_Framework7Class13);function Picker(app){var _ret52;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Picker);var _this23=_possibleConstructorReturn(this,(Picker.__proto__||Object.getPrototypeOf(Picker)).call(this,params,[app]));var picker=_this23;picker.params=Utils.extend({},app.params.picker,params);var $containerEl=void 0;if(picker.params.containerEl){var _ret51;$containerEl=(0,_dom2.default)(picker.params.containerEl);if($containerEl.length===0)return _ret51=picker,_possibleConstructorReturn(_this23,_ret51);}var $inputEl=void 0;if(picker.params.inputEl){$inputEl=(0,_dom2.default)(picker.params.inputEl);}var view=void 0;if($inputEl){view=$inputEl.parents('.view').length&&$inputEl.parents('.view')[0].f7View;}if(!view)view=app.views.main;Utils.extend(picker,{app:app,$containerEl:$containerEl,containerEl:$containerEl&&$containerEl[0],inline:$containerEl&&$containerEl.length>0,needsOriginFix:app.device.ios||_ssrWindow.window.navigator.userAgent.toLowerCase().indexOf('safari')>=0&&_ssrWindow.window.navigator.userAgent.toLowerCase().indexOf('chrome')<0&&!app.device.android,cols:[],$inputEl:$inputEl,inputEl:$inputEl&&$inputEl[0],initialized:false,opened:false,url:picker.params.url,view:view});function onResize(){picker.resizeCols();}function onInputClick(){picker.open();}function onInputFocus(e){e.preventDefault();}function onHtmlClick(e){var $targetEl=(0,_dom2.default)(e.target);if(picker.isPopover())return;if(!picker.opened)return;if($targetEl.closest('[class*="backdrop"]').length)return;if($inputEl&&$inputEl.length>0){if($targetEl[0]!==$inputEl[0]&&$targetEl.closest('.sheet-modal').length===0){picker.close();}}else if((0,_dom2.default)(e.target).closest('.sheet-modal').length===0){picker.close();}}// Events
Utils.extend(picker,{attachResizeEvent:function attachResizeEvent(){app.on('resize',onResize);},detachResizeEvent:function detachResizeEvent(){app.off('resize',onResize);},attachInputEvents:function attachInputEvents(){picker.$inputEl.on('click',onInputClick);if(picker.params.inputReadOnly){picker.$inputEl.on('focus mousedown',onInputFocus);}},detachInputEvents:function detachInputEvents(){picker.$inputEl.off('click',onInputClick);if(picker.params.inputReadOnly){picker.$inputEl.off('focus mousedown',onInputFocus);}},attachHtmlEvents:function attachHtmlEvents(){app.on('click',onHtmlClick);},detachHtmlEvents:function detachHtmlEvents(){app.off('click',onHtmlClick);}});picker.init();return _ret52=picker,_possibleConstructorReturn(_this23,_ret52);}_createClass(Picker,[{key:'initInput',value:function initInput(){var picker=this;if(!picker.$inputEl)return;if(picker.params.inputReadOnly)picker.$inputEl.prop('readOnly',true);}},{key:'resizeCols',value:function resizeCols(){var picker=this;if(!picker.opened)return;for(var _i22=0;_i22<picker.cols.length;_i22+=1){if(!picker.cols[_i22].divider){picker.cols[_i22].calcSize();picker.cols[_i22].setValue(picker.cols[_i22].value,0,false);}}}},{key:'isPopover',value:function isPopover(){var picker=this;var app=picker.app,modal=picker.modal,params=picker.params;if(params.openIn==='sheet')return false;if(modal&&modal.type!=='popover')return false;if(!picker.inline&&picker.inputEl){if(params.openIn==='popover')return true;else if(app.device.ios){return!!app.device.ipad;}else if(app.width>=768){return true;}}return false;}},{key:'formatValue',value:function formatValue(){var picker=this;var value=picker.value,displayValue=picker.displayValue;if(picker.params.formatValue){return picker.params.formatValue.call(picker,value,displayValue);}return value.join(' ');}},{key:'setValue',value:function setValue(values,transition){var picker=this;var valueIndex=0;if(picker.cols.length===0){picker.value=values;picker.updateValue(values);return;}for(var _i23=0;_i23<picker.cols.length;_i23+=1){if(picker.cols[_i23]&&!picker.cols[_i23].divider){picker.cols[_i23].setValue(values[valueIndex],transition);valueIndex+=1;}}}},{key:'getValue',value:function getValue(){var picker=this;return picker.value;}},{key:'updateValue',value:function updateValue(forceValues){var picker=this;var newValue=forceValues||[];var newDisplayValue=[];var column=void 0;if(picker.cols.length===0){var noDividerColumns=picker.params.cols.filter(function(c){return!c.divider;});for(var _i24=0;_i24<noDividerColumns.length;_i24+=1){column=noDividerColumns[_i24];if(column.displayValues!==undefined&&column.values!==undefined&&column.values.indexOf(newValue[_i24])!==-1){newDisplayValue.push(column.displayValues[column.values.indexOf(newValue[_i24])]);}else{newDisplayValue.push(newValue[_i24]);}}}else{for(var _i25=0;_i25<picker.cols.length;_i25+=1){if(!picker.cols[_i25].divider){newValue.push(picker.cols[_i25].value);newDisplayValue.push(picker.cols[_i25].displayValue);}}}if(newValue.indexOf(undefined)>=0){return;}picker.value=newValue;picker.displayValue=newDisplayValue;picker.emit('local::change pickerChange',picker,picker.value,picker.displayValue);if(picker.inputEl){picker.$inputEl.val(picker.formatValue());picker.$inputEl.trigger('change');}}},{key:'initColumn',value:function initColumn(colEl,updateItems){var picker=this;pickerColumn.call(picker,colEl,updateItems);}// eslint-disable-next-line
},{key:'destroyColumn',value:function destroyColumn(colEl){var picker=this;var $colEl=(0,_dom2.default)(colEl);var index=$colEl.index();if(picker.cols[index]&&picker.cols[index].destroy){picker.cols[index].destroy();}}},{key:'renderToolbar',value:function renderToolbar(){var picker=this;if(picker.params.renderToolbar)return picker.params.renderToolbar.call(picker,picker);return('\n      <div class="toolbar no-shadow">\n        <div class="toolbar-inner">\n          <div class="left"></div>\n          <div class="right">\n            <a href="#" class="link sheet-close popover-close">'+picker.params.toolbarCloseText+'</a>\n          </div>\n        </div>\n      </div>\n    ').trim();}// eslint-disable-next-line
},{key:'renderColumn',value:function renderColumn(col,onlyItems){var colClasses='picker-column '+(col.textAlign?'picker-column-'+col.textAlign:'')+' '+(col.cssClass||'');var columnHtml=void 0;var columnItemsHtml=void 0;if(col.divider){columnHtml='\n        <div class="'+colClasses+' picker-column-divider">'+col.content+'</div>\n      ';}else{columnItemsHtml=col.values.map(function(value,index){return'\n        <div class="picker-item" data-picker-value="'+value+'">\n          <span>'+(col.displayValues?col.displayValues[index]:value)+'</span>\n        </div>\n      ';}).join('');columnHtml='\n        <div class="'+colClasses+'">\n          <div class="picker-items">'+columnItemsHtml+'</div>\n        </div>\n      ';}return onlyItems?columnItemsHtml.trim():columnHtml.trim();}},{key:'renderInline',value:function renderInline(){var picker=this;var _picker$params=picker.params,rotateEffect=_picker$params.rotateEffect,cssClass=_picker$params.cssClass,toolbar=_picker$params.toolbar;var inlineHtml=('\n      <div class="picker picker-inline '+(rotateEffect?'picker-3d':'')+' '+(cssClass||'')+'">\n        '+(toolbar?picker.renderToolbar():'')+'\n        <div class="picker-columns">\n          '+picker.cols.map(function(col){return picker.renderColumn(col);}).join('')+'\n          <div class="picker-center-highlight"></div>\n        </div>\n      </div>\n    ').trim();return inlineHtml;}},{key:'renderSheet',value:function renderSheet(){var picker=this;var _picker$params2=picker.params,rotateEffect=_picker$params2.rotateEffect,cssClass=_picker$params2.cssClass,toolbar=_picker$params2.toolbar;var sheetHtml=('\n      <div class="sheet-modal picker picker-sheet '+(rotateEffect?'picker-3d':'')+' '+(cssClass||'')+'">\n        '+(toolbar?picker.renderToolbar():'')+'\n        <div class="sheet-modal-inner picker-columns">\n          '+picker.cols.map(function(col){return picker.renderColumn(col);}).join('')+'\n          <div class="picker-center-highlight"></div>\n        </div>\n      </div>\n    ').trim();return sheetHtml;}},{key:'renderPopover',value:function renderPopover(){var picker=this;var _picker$params3=picker.params,rotateEffect=_picker$params3.rotateEffect,cssClass=_picker$params3.cssClass,toolbar=_picker$params3.toolbar;var popoverHtml=('\n      <div class="popover picker-popover">\n        <div class="popover-inner">\n          <div class="picker '+(rotateEffect?'picker-3d':'')+' '+(cssClass||'')+'">\n            '+(toolbar?picker.renderToolbar():'')+'\n            <div class="picker-columns">\n              '+picker.cols.map(function(col){return picker.renderColumn(col);}).join('')+'\n              <div class="picker-center-highlight"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ').trim();return popoverHtml;}},{key:'render',value:function render(){var picker=this;if(picker.params.render)return picker.params.render.call(picker);if(!picker.inline){if(picker.isPopover())return picker.renderPopover();return picker.renderSheet();}return picker.renderInline();}},{key:'onOpen',value:function onOpen(){var picker=this;var initialized=picker.initialized,$el=picker.$el,app=picker.app,$inputEl=picker.$inputEl,inline=picker.inline,value=picker.value,params=picker.params;picker.opened=true;// Init main events
picker.attachResizeEvent();// Init cols
$el.find('.picker-column').each(function(index,colEl){var updateItems=true;if(!initialized&&params.value||initialized&&value){updateItems=false;}picker.initColumn(colEl,updateItems);});// Set value
if(!initialized){if(value)picker.setValue(value,0);else if(params.value){picker.setValue(params.value,0);}}else if(value){picker.setValue(value,0);}// Extra focus
if(!inline&&$inputEl.length&&app.theme==='md'){$inputEl.trigger('focus');}picker.initialized=true;// Trigger events
if($el){$el.trigger('picker:open',picker);}if($inputEl){$inputEl.trigger('picker:open',picker);}picker.emit('local::open pickerOpen',picker);}},{key:'onOpened',value:function onOpened(){var picker=this;if(picker.$el){picker.$el.trigger('picker:opened',picker);}if(picker.$inputEl){picker.$inputEl.trigger('picker:opened',picker);}picker.emit('local::opened pickerOpened',picker);}},{key:'onClose',value:function onClose(){var picker=this;var app=picker.app;// Detach events
picker.detachResizeEvent();picker.cols.forEach(function(col){if(col.destroy)col.destroy();});if(picker.$inputEl&&app.theme==='md'){picker.$inputEl.trigger('blur');}if(picker.$el){picker.$el.trigger('picker:close',picker);}if(picker.$inputEl){picker.$inputEl.trigger('picker:close',picker);}picker.emit('local::close pickerClose',picker);}},{key:'onClosed',value:function onClosed(){var picker=this;picker.opened=false;if(!picker.inline){Utils.nextTick(function(){if(picker.modal&&picker.modal.el&&picker.modal.destroy){if(!picker.params.routableModals){picker.modal.destroy();}}delete picker.modal;});}if(picker.$el){picker.$el.trigger('picker:closed',picker);}if(picker.$inputEl){picker.$inputEl.trigger('picker:closed',picker);}picker.emit('local::closed pickerClosed',picker);}},{key:'open',value:function open(){var picker=this;var app=picker.app,opened=picker.opened,inline=picker.inline,$inputEl=picker.$inputEl;if(opened)return;if(picker.cols.length===0&&picker.params.cols.length){picker.params.cols.forEach(function(col){picker.cols.push(col);});}if(inline){picker.$el=(0,_dom2.default)(picker.render());picker.$el[0].f7Picker=picker;picker.$containerEl.append(picker.$el);picker.onOpen();picker.onOpened();return;}var isPopover=picker.isPopover();var modalType=isPopover?'popover':'sheet';var modalParams={targetEl:$inputEl,scrollToEl:picker.params.scrollToInput?$inputEl:undefined,content:picker.render(),backdrop:isPopover,on:{open:function open(){var modal=this;picker.modal=modal;picker.$el=isPopover?modal.$el.find('.picker'):modal.$el;picker.$el[0].f7Picker=picker;picker.onOpen();},opened:function opened(){picker.onOpened();},close:function close(){picker.onClose();},closed:function closed(){picker.onClosed();}}};if(picker.params.routableModals){picker.view.router.navigate({url:picker.url,route:_defineProperty({path:picker.url},modalType,modalParams)});}else{picker.modal=app[modalType].create(modalParams);picker.modal.open();}}},{key:'close',value:function close(){var picker=this;var opened=picker.opened,inline=picker.inline;if(!opened)return;if(inline){picker.onClose();picker.onClosed();return;}if(picker.params.routableModals){picker.view.router.back();}else{picker.modal.close();}}},{key:'init',value:function init(){var picker=this;picker.initInput();if(picker.inline){picker.open();picker.emit('local::init pickerInit',picker);return;}if(!picker.initialized&&picker.params.value){picker.setValue(picker.params.value);}// Attach input Events
if(picker.$inputEl){picker.attachInputEvents();}if(picker.params.closeByOutsideClick){picker.attachHtmlEvents();}picker.emit('local::init pickerInit',picker);}},{key:'destroy',value:function destroy(){var picker=this;if(picker.destroyed)return;var $el=picker.$el;picker.emit('local::beforeDestroy pickerBeforeDestroy',picker);if($el)$el.trigger('picker:beforedestroy',picker);picker.close();// Detach Events
if(picker.$inputEl){picker.detachInputEvents();}if(picker.params.closeByOutsideClick){picker.detachHtmlEvents();}if($el&&$el.length)delete picker.$el[0].f7Picker;Utils.deleteProps(picker);picker.destroyed=true;}}]);return Picker;}(Framework7Class);var Picker$1={name:'picker',static:{Picker:Picker},create:function create(){var app=this;app.picker=ConstructorMethods({defaultSelector:'.picker',constructor:Picker,app:app,domProp:'f7Picker'});app.picker.close=function close(){var el=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.picker';var $el=(0,_dom2.default)(el);if($el.length===0)return;var picker=$el[0].f7Picker;if(!picker||picker&&!picker.opened)return;picker.close();};},params:{picker:{// Picker settings
updateValuesOnMomentum:false,updateValuesOnTouchmove:true,rotateEffect:false,momentumRatio:7,freeMode:false,cols:[],// Common opener settings
containerEl:null,openIn:'auto',// or 'popover' or 'sheet'
formatValue:null,inputEl:null,inputReadOnly:true,closeByOutsideClick:true,scrollToInput:true,toolbar:true,toolbarCloseText:'Done',cssClass:null,routableModals:true,view:null,url:'select/',// Render functions
renderToolbar:null,render:null}}};var InfiniteScroll={handleScroll:function handleScroll(el,e){var app=this;var $el=(0,_dom2.default)(el);var scrollTop=$el[0].scrollTop;var scrollHeight=$el[0].scrollHeight;var height=$el[0].offsetHeight;var distance=$el[0].getAttribute('data-infinite-distance');var virtualListContainer=$el.find('.virtual-list');var virtualList=void 0;var onTop=$el.hasClass('infinite-scroll-top');if(!distance)distance=50;if(typeof distance==='string'&&distance.indexOf('%')>=0){distance=parseInt(distance,10)/100*height;}if(distance>height)distance=height;if(onTop){if(scrollTop<distance){$el.trigger('infinite',e);app.emit('infinite',$el[0],e);}}else if(scrollTop+height>=scrollHeight-distance){if(virtualListContainer.length>0){virtualList=virtualListContainer.eq(-1)[0].f7VirtualList;if(virtualList&&!virtualList.reachEnd&&!virtualList.params.updatableScroll){return;}}$el.trigger('infinite',e);app.emit('infinite',$el[0],e);}},create:function create(el){var $el=(0,_dom2.default)(el);var app=this;$el.on('scroll',function handle(e){app.infiniteScroll.handle(this,e);});},destroy:function destroy(el){var $el=(0,_dom2.default)(el);$el.off('scroll');}};var InfiniteScroll$1={name:'infiniteScroll',create:function create(){var app=this;Utils.extend(app,{infiniteScroll:{handle:InfiniteScroll.handleScroll.bind(app),create:InfiniteScroll.create.bind(app),destroy:InfiniteScroll.destroy.bind(app)}});},on:{tabMounted:function tabMounted(tabEl){var app=this;var $tabEl=(0,_dom2.default)(tabEl);$tabEl.find('.infinite-scroll-content').each(function(index,el){app.infiniteScroll.create(el);});},tabBeforeRemove:function tabBeforeRemove(tabEl){var $tabEl=(0,_dom2.default)(tabEl);var app=this;$tabEl.find('.infinite-scroll-content').each(function(index,el){app.infiniteScroll.destroy(el);});},pageInit:function pageInit(page){var app=this;page.$el.find('.infinite-scroll-content').each(function(index,el){app.infiniteScroll.create(el);});},pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.infinite-scroll-content').each(function(index,el){app.infiniteScroll.destroy(el);});}}};var PullToRefresh=function(_Framework7Class14){_inherits(PullToRefresh,_Framework7Class14);function PullToRefresh(app,el){var _ret53,_ret54;_classCallCheck(this,PullToRefresh);var _this24=_possibleConstructorReturn(this,(PullToRefresh.__proto__||Object.getPrototypeOf(PullToRefresh)).call(this,{},[app]));var ptr=_this24;var $el=(0,_dom2.default)(el);var $preloaderEl=$el.find('.ptr-preloader');ptr.$el=$el;ptr.el=$el[0];ptr.app=app;// Extend defaults with modules params
ptr.useModulesParams({});var isMaterial=app.theme==='md';// Done
ptr.done=function done(){var $transitionTarget=isMaterial?$preloaderEl:$el;$transitionTarget.transitionEnd(function(){$el.removeClass('ptr-transitioning ptr-pull-up ptr-pull-down');$el.trigger('ptr:done');ptr.emit('local::done ptrDone',$el[0]);});$el.removeClass('ptr-refreshing').addClass('ptr-transitioning');return ptr;};ptr.refresh=function refresh(){if($el.hasClass('ptr-refreshing'))return ptr;$el.addClass('ptr-transitioning ptr-refreshing');$el.trigger('ptr:refresh',ptr.done);ptr.emit('local::refresh ptrRefresh',$el[0],ptr.done);return ptr;};// Events handling
var touchId=void 0;var isTouched=void 0;var isMoved=void 0;var touchesStart={};var isScrolling=void 0;var touchesDiff=void 0;var refresh=false;var useTranslate=false;var startTranslate=0;var translate=void 0;var scrollTop=void 0;var wasScrolled=void 0;var triggerDistance=void 0;var dynamicTriggerDistance=void 0;var pullStarted=void 0;var hasNavbar=false;var $pageEl=$el.parents('.page');if($pageEl.find('.navbar').length>0||$pageEl.parents('.view').children('.navbar').length>0)hasNavbar=true;if($pageEl.hasClass('no-navbar'))hasNavbar=false;if(!hasNavbar)$el.addClass('ptr-no-navbar');// Define trigger distance
if($el.attr('data-ptr-distance')){dynamicTriggerDistance=true;}else{triggerDistance=isMaterial?66:44;}function handleTouchStart(e){if(isTouched){if(Device.os==='android'){if('targetTouches'in e&&e.targetTouches.length>1)return;}else return;}if($el.hasClass('ptr-refreshing')){return;}if((0,_dom2.default)(e.target).closest('.sortable-handler').length)return;isMoved=false;pullStarted=false;isTouched=true;isScrolling=undefined;wasScrolled=undefined;if(e.type==='touchstart')touchId=e.targetTouches[0].identifier;touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;}function handleTouchMove(e){if(!isTouched)return;var pageX=void 0;var pageY=void 0;var touch=void 0;if(e.type==='touchmove'){if(touchId&&e.touches){for(var _i26=0;_i26<e.touches.length;_i26+=1){if(e.touches[_i26].identifier===touchId){touch=e.touches[_i26];}}}if(!touch)touch=e.targetTouches[0];pageX=touch.pageX;pageY=touch.pageY;}else{pageX=e.pageX;pageY=e.pageY;}if(!pageX||!pageY)return;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x));}if(!isScrolling){isTouched=false;return;}scrollTop=$el[0].scrollTop;if(typeof wasScrolled==='undefined'&&scrollTop!==0)wasScrolled=true;if(!isMoved){$el.removeClass('ptr-transitioning');if(scrollTop>$el[0].offsetHeight){isTouched=false;return;}if(dynamicTriggerDistance){triggerDistance=$el.attr('data-ptr-distance');if(triggerDistance.indexOf('%')>=0)triggerDistance=$el[0].offsetHeight*parseInt(triggerDistance,10)/100;}startTranslate=$el.hasClass('ptr-refreshing')?triggerDistance:0;if($el[0].scrollHeight===$el[0].offsetHeight||Device.os!=='ios'||isMaterial){useTranslate=true;}else{useTranslate=false;}}isMoved=true;touchesDiff=pageY-touchesStart.y;if(touchesDiff>0&&scrollTop<=0||scrollTop<0){// iOS 8 fix
if(Device.os==='ios'&&parseInt(Device.osVersion.split('.')[0],10)>7&&scrollTop===0&&!wasScrolled)useTranslate=true;if(useTranslate){e.preventDefault();translate=Math.pow(touchesDiff,0.85)+startTranslate;if(isMaterial){$preloaderEl.transform('translate3d(0,'+translate+'px,0)').find('.ptr-arrow').transform('rotate('+(180*(touchesDiff/66)+100)+'deg)');}else{$el.transform('translate3d(0,'+translate+'px,0)');}}if(useTranslate&&Math.pow(touchesDiff,0.85)>triggerDistance||!useTranslate&&touchesDiff>=triggerDistance*2){refresh=true;$el.addClass('ptr-pull-up').removeClass('ptr-pull-down');}else{refresh=false;$el.removeClass('ptr-pull-up').addClass('ptr-pull-down');}if(!pullStarted){$el.trigger('ptr:pullstart');ptr.emit('local::pullStart ptrPullStart',$el[0]);pullStarted=true;}$el.trigger('ptr:pullmove',{event:e,scrollTop:scrollTop,translate:translate,touchesDiff:touchesDiff});ptr.emit('local::pullMove ptrPullMove',$el[0],{event:e,scrollTop:scrollTop,translate:translate,touchesDiff:touchesDiff});}else{pullStarted=false;$el.removeClass('ptr-pull-up ptr-pull-down');refresh=false;}}function handleTouchEnd(e){if(e.type==='touchend'&&e.changedTouches&&e.changedTouches.length>0&&touchId){if(e.changedTouches[0].identifier!==touchId){isTouched=false;isScrolling=false;isMoved=false;touchId=null;return;}}if(!isTouched||!isMoved){isTouched=false;isMoved=false;return;}if(translate){$el.addClass('ptr-transitioning');translate=0;}if(isMaterial){$preloaderEl.transform('').find('.ptr-arrow').transform('');}else{$el.transform('');}if(refresh){$el.addClass('ptr-refreshing');$el.trigger('ptr:refresh',ptr.done);ptr.emit('local::refresh ptrRefresh',$el[0],ptr.done);}else{$el.removeClass('ptr-pull-down');}isTouched=false;isMoved=false;if(pullStarted){$el.trigger('ptr:pullend');ptr.emit('local::pullEnd ptrPullEnd',$el[0]);}}if(!$pageEl.length||!$el.length)return _ret53=ptr,_possibleConstructorReturn(_this24,_ret53);$el[0].f7PullToRefresh=ptr;// Events
ptr.attachEvents=function attachEvents(){var passive=Support.passiveListener?{passive:true}:false;$el.on(app.touchEvents.start,handleTouchStart,passive);app.on('touchmove',handleTouchMove);app.on('touchend:passive',handleTouchEnd);};ptr.detachEvents=function detachEvents(){var passive=Support.passiveListener?{passive:true}:false;$el.off(app.touchEvents.start,handleTouchStart,passive);app.off('touchmove',handleTouchMove);app.off('touchend:passive',handleTouchEnd);};// Install Modules
ptr.useModules();// Init
ptr.init();return _ret54=ptr,_possibleConstructorReturn(_this24,_ret54);}_createClass(PullToRefresh,[{key:'init',value:function init(){var ptr=this;ptr.attachEvents();}},{key:'destroy',value:function destroy(){var ptr=this;ptr.emit('local::beforeDestroy ptrBeforeDestroy',ptr);ptr.$el.trigger('ptr:beforedestroy',ptr);delete ptr.el.f7PullToRefresh;ptr.detachEvents();Utils.deleteProps(ptr);ptr=null;}}]);return PullToRefresh;}(Framework7Class);var PullToRefresh$1={name:'pullToRefresh',create:function create(){var app=this;app.ptr=Utils.extend(ConstructorMethods({defaultSelector:'.ptr-content',constructor:PullToRefresh,app:app,domProp:'f7PullToRefresh'}),{done:function done(el){var ptr=app.ptr.get(el);if(ptr)return ptr.done();return undefined;},refresh:function refresh(el){var ptr=app.ptr.get(el);if(ptr)return ptr.refresh();return undefined;}});},static:{PullToRefresh:PullToRefresh},on:{tabMounted:function tabMounted(tabEl){var app=this;var $tabEl=(0,_dom2.default)(tabEl);$tabEl.find('.ptr-content').each(function(index,el){app.ptr.create(el);});},tabBeforeRemove:function tabBeforeRemove(tabEl){var $tabEl=(0,_dom2.default)(tabEl);var app=this;$tabEl.find('.ptr-content').each(function(index,el){app.ptr.destroy(el);});},pageInit:function pageInit(page){var app=this;page.$el.find('.ptr-content').each(function(index,el){app.ptr.create(el);});},pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.ptr-content').each(function(index,el){app.ptr.destroy(el);});}}};var Lazy={destroy:function destroy(pageEl){var $pageEl=(0,_dom2.default)(pageEl).closest('.page');if(!$pageEl.length)return;if($pageEl[0].f7LazyDestroy){$pageEl[0].f7LazyDestroy();}},create:function create(pageEl){var app=this;var $pageEl=(0,_dom2.default)(pageEl).closest('.page').eq(0);// Lazy images
var lazyLoadImages=$pageEl.find('.lazy');if(lazyLoadImages.length===0&&!$pageEl.hasClass('lazy'))return;// Placeholder
var placeholderSrc=app.params.lazy.placeholder;if(placeholderSrc!==false){lazyLoadImages.each(function(index,lazyEl){if((0,_dom2.default)(lazyEl).attr('data-src')&&!(0,_dom2.default)(lazyEl).attr('src'))(0,_dom2.default)(lazyEl).attr('src',placeholderSrc);});}// load image
var imagesSequence=[];var imageIsLoading=false;function onImageComplete(lazyEl){if(imagesSequence.indexOf(lazyEl)>=0){imagesSequence.splice(imagesSequence.indexOf(lazyEl),1);}imageIsLoading=false;if(app.params.lazy.sequential&&imagesSequence.length>0){imageIsLoading=true;app.lazy.loadImage(imagesSequence[0],onImageComplete);}}function lazyHandler(){app.lazy.load($pageEl,function(lazyEl){if(app.params.lazy.sequential&&imageIsLoading){if(imagesSequence.indexOf(lazyEl)<0)imagesSequence.push(lazyEl);return;}imageIsLoading=true;app.lazy.loadImage(lazyEl,onImageComplete);});}function attachEvents(){$pageEl[0].f7LazyAttached=true;$pageEl.on('lazy',lazyHandler);$pageEl.on('scroll',lazyHandler,true);$pageEl.find('.tab').on('tab:mounted tab:show',lazyHandler);app.on('resize',lazyHandler);}function detachEvents(){$pageEl[0].f7LazyAttached=false;delete $pageEl[0].f7LazyAttached;$pageEl.off('lazy',lazyHandler);$pageEl.off('scroll',lazyHandler,true);$pageEl.find('.tab').off('tab:mounted tab:show',lazyHandler);app.off('resize',lazyHandler);}// Store detach function
if(!$pageEl[0].f7LazyDestroy){$pageEl[0].f7LazyDestroy=detachEvents;}// Attach events
if(!$pageEl[0].f7LazyAttached){attachEvents();}// Run loader on page load/init
lazyHandler();},isInViewport:function isInViewport(lazyEl){var app=this;var rect=lazyEl.getBoundingClientRect();var threshold=app.params.lazy.threshold||0;return rect.top>=0-threshold&&rect.left>=0-threshold&&rect.top<=app.height+threshold&&rect.left<=app.width+threshold;},loadImage:function loadImage(imageEl,callback){var app=this;var $imageEl=(0,_dom2.default)(imageEl);var bg=$imageEl.attr('data-background');var src=bg||$imageEl.attr('data-src');if(!src)return;function onLoad(){$imageEl.removeClass('lazy').addClass('lazy-loaded');if(bg){$imageEl.css('background-image','url('+src+')');}else{$imageEl.attr('src',src);}if(callback)callback(imageEl);$imageEl.trigger('lazy:loaded');app.emit('lazyLoaded',$imageEl[0]);}function onError(){$imageEl.removeClass('lazy').addClass('lazy-loaded');if(bg){$imageEl.css('background-image','url('+(app.params.lazy.placeholder||'')+')');}else{$imageEl.attr('src',app.params.lazy.placeholder||'');}if(callback)callback(imageEl);$imageEl.trigger('lazy:error');app.emit('lazyError',$imageEl[0]);}var image=new _ssrWindow.window.Image();image.onload=onLoad;image.onerror=onError;image.src=src;$imageEl.removeAttr('data-src').removeAttr('data-background');// Add loaded callback and events
$imageEl.trigger('lazy:load');app.emit('lazyLoad',$imageEl[0]);},load:function load(pageEl,callback){var app=this;var $pageEl=(0,_dom2.default)(pageEl);if(!$pageEl.hasClass('page'))$pageEl=$pageEl.parents('.page').eq(0);if($pageEl.length===0){return;}$pageEl.find('.lazy').each(function(index,lazyEl){var $lazyEl=(0,_dom2.default)(lazyEl);if($lazyEl.parents('.tab:not(.tab-active)').length>0){return;}if(app.lazy.isInViewport(lazyEl)){if(callback)callback(lazyEl);else app.lazy.loadImage(lazyEl);}});}};var Lazy$1={name:'lazy',params:{lazy:{placeholder:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==',threshold:0,sequential:true}},create:function create(){var app=this;Utils.extend(app,{lazy:{create:Lazy.create.bind(app),destroy:Lazy.destroy.bind(app),loadImage:Lazy.loadImage.bind(app),load:Lazy.load.bind(app),isInViewport:Lazy.isInViewport.bind(app)}});},on:{pageInit:function pageInit(page){var app=this;if(page.$el.find('.lazy').length>0||page.$el.hasClass('lazy')){app.lazy.create(page.$el);}},pageAfterIn:function pageAfterIn(page){var app=this;if(page.$el.find('.lazy').length>0||page.$el.hasClass('lazy')){app.lazy.create(page.$el);}},pageBeforeRemove:function pageBeforeRemove(page){var app=this;if(page.$el.find('.lazy').length>0||page.$el.hasClass('lazy')){app.lazy.destroy(page.$el);}},tabMounted:function tabMounted(tabEl){var app=this;var $tabEl=(0,_dom2.default)(tabEl);if($tabEl.find('.lazy').length>0||$tabEl.hasClass('lazy')){app.lazy.create($tabEl);}},tabBeforeRemove:function tabBeforeRemove(tabEl){var app=this;var $tabEl=(0,_dom2.default)(tabEl);if($tabEl.find('.lazy').length>0||$tabEl.hasClass('lazy')){app.lazy.destroy($tabEl);}}}};var DataTable=function(_Framework7Class15){_inherits(DataTable,_Framework7Class15);function DataTable(app){var _ret55,_ret57;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,DataTable);var _this25=_possibleConstructorReturn(this,(DataTable.__proto__||Object.getPrototypeOf(DataTable)).call(this,params,[app]));var table=_this25;var defaults={};// Extend defaults with modules params
table.useModulesParams(defaults);table.params=Utils.extend(defaults,params);// El
var $el=(0,_dom2.default)(table.params.el);if($el.length===0)return _ret55=undefined,_possibleConstructorReturn(_this25,_ret55);table.$el=$el;table.el=$el[0];if(table.$el[0].f7DataTable){var _ret56;var instance=table.$el[0].f7DataTable;table.destroy();return _ret56=instance,_possibleConstructorReturn(_this25,_ret56);}table.$el[0].f7DataTable=table;Utils.extend(table,{collapsible:$el.hasClass('data-table-collapsible'),// Headers
$headerEl:$el.find('.data-table-header'),$headerSelectedEl:$el.find('.data-table-header-selected')});// Events
function handleChange(e){if(e.detail&&e.detail.sentByF7DataTable){// Scripted event, don't do anything
return;}var $inputEl=(0,_dom2.default)(this);var checked=$inputEl[0].checked;var columnIndex=$inputEl.parents('td,th').index();if($inputEl.parents('thead').length>0){if(columnIndex===0){$el.find('tbody tr')[checked?'addClass':'removeClass']('data-table-row-selected');}$el.find('tbody tr td:nth-child('+(columnIndex+1)+') input').prop('checked',checked).trigger('change',{sentByF7DataTable:true});}else{if(columnIndex===0){$inputEl.parents('tr')[checked?'addClass':'removeClass']('data-table-row-selected');}if(!checked){$el.find('thead .checkbox-cell:nth-child('+(columnIndex+1)+') input[type="checkbox"]').prop('checked',false);}else if($el.find('tbody .checkbox-cell:nth-child('+(columnIndex+1)+') input[type="checkbox"]:checked').length===$el.find('tbody tr').length){$el.find('thead .checkbox-cell:nth-child('+(columnIndex+1)+') input[type="checkbox"]').prop('checked',true).trigger('change',{sentByF7DataTable:true});}}table.checkSelectedHeader();}function handleSortableClick(){var $cellEl=(0,_dom2.default)(this);var isActive=$cellEl.hasClass('sortable-cell-active');var currentSort=$cellEl.hasClass('sortable-desc')?'desc':'asc';var newSort=void 0;if(isActive){newSort=currentSort==='desc'?'asc':'desc';$cellEl.removeClass('sortable-desc sortable-asc').addClass('sortable-'+newSort);}else{$el.find('thead .sortable-cell-active').removeClass('sortable-cell-active');$cellEl.addClass('sortable-cell-active');newSort=currentSort;}$cellEl.trigger('datatable:sort',newSort);table.emit('local::sort dataTableSort',table,newSort);}table.attachEvents=function attachEvents(){table.$el.on('change','.checkbox-cell input[type="checkbox"]',handleChange);table.$el.find('thead .sortable-cell').on('click',handleSortableClick);};table.detachEvents=function detachEvents(){table.$el.off('change','.checkbox-cell input[type="checkbox"]',handleChange);table.$el.find('thead .sortable-cell').off('click',handleSortableClick);};// Install Modules
table.useModules();// Init
table.init();return _ret57=table,_possibleConstructorReturn(_this25,_ret57);}_createClass(DataTable,[{key:'setCollapsibleLabels',value:function setCollapsibleLabels(){var table=this;if(!table.collapsible)return;table.$el.find('tbody td:not(.checkbox-cell)').each(function(index,el){var $el=(0,_dom2.default)(el);var elIndex=$el.index();var collpsibleTitle=$el.attr('data-collapsible-title');if(!collpsibleTitle&&collpsibleTitle!==''){$el.attr('data-collapsible-title',table.$el.find('thead th').eq(elIndex).text());}});}},{key:'checkSelectedHeader',value:function checkSelectedHeader(){var table=this;if(table.$headerEl.length>0&&table.$headerSelectedEl.length>0){var checkedItems=table.$el.find('tbody .checkbox-cell input:checked').length;table.$el[checkedItems>0?'addClass':'removeClass']('data-table-has-checked');table.$headerSelectedEl.find('.data-table-selected-count').text(checkedItems);}}},{key:'init',value:function init(){var table=this;table.attachEvents();table.setCollapsibleLabels();table.checkSelectedHeader();}},{key:'destroy',value:function destroy(){var table=this;table.$el.trigger('datatable:beforedestroy',table);table.emit('local::beforeDestroy datatableBeforeDestroy',table);table.attachEvents();table.$el[0].f7DataTable=null;delete table.$el[0].f7DataTable;Utils.deleteProps(table);table=null;}}]);return DataTable;}(Framework7Class);var DataTable$1={name:'dataTable',static:{DataTable:DataTable},create:function create(){var app=this;app.dataTable=ConstructorMethods({defaultSelector:'.data-table',constructor:DataTable,app:app,domProp:'f7DataTable'});},on:{tabBeforeRemove:function tabBeforeRemove(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.data-table-init').each(function(index,tableEl){app.dataTable.destroy(tableEl);});},tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.data-table-init').each(function(index,tableEl){app.dataTable.create({el:tableEl});});},pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.data-table-init').each(function(index,tableEl){app.dataTable.destroy(tableEl);});},pageInit:function pageInit(page){var app=this;page.$el.find('.data-table-init').each(function(index,tableEl){app.dataTable.create({el:tableEl});});}},clicks:{}};var Fab={morphOpen:function morphOpen(fabEl,targetEl){var app=this;var $fabEl=(0,_dom2.default)(fabEl);var $targetEl=(0,_dom2.default)(targetEl);if($targetEl.length===0)return;$targetEl.transition(0).addClass('fab-morph-target-visible');var target={width:$targetEl[0].offsetWidth,height:$targetEl[0].offsetHeight,offset:$targetEl.offset(),borderRadius:$targetEl.css('border-radius'),zIndex:$targetEl.css('z-index')};var fab={width:$fabEl[0].offsetWidth,height:$fabEl[0].offsetHeight,offset:$fabEl.offset(),translateX:Utils.getTranslate($fabEl[0],'x'),translateY:Utils.getTranslate($fabEl[0],'y')};$fabEl[0].f7FabMorphData={$targetEl:$targetEl,target:target,fab:fab};var diffX=fab.offset.left+fab.width/2-(target.offset.left+target.width/2)-fab.translateX;var diffY=fab.offset.top+fab.height/2-(target.offset.top+target.height/2)-fab.translateY;var scaleX=target.width/fab.width;var scaleY=target.height/fab.height;var borderRadius=Math.ceil(parseInt(target.borderRadius,10)/Math.max(scaleX,scaleY));if(borderRadius>0)borderRadius+=2;$fabEl[0].f7FabMorphResizeHandler=function resizeHandler(){$fabEl.transition(0).transform('');$targetEl.transition(0);target.width=$targetEl[0].offsetWidth;target.height=$targetEl[0].offsetHeight;target.offset=$targetEl.offset();fab.offset=$fabEl.offset();var diffXNew=fab.offset.left+fab.width/2-(target.offset.left+target.width/2)-fab.translateX;var diffYNew=fab.offset.top+fab.height/2-(target.offset.top+target.height/2)-fab.translateY;var scaleXNew=target.width/fab.width;var scaleYNew=target.height/fab.height;$fabEl.transform('translate3d('+-diffXNew+'px, '+-diffYNew+'px, 0) scale('+scaleXNew+', '+scaleYNew+')');};$targetEl.css('opacity',0).transform('scale('+1/scaleX+', '+1/scaleY+')');$fabEl.addClass('fab-opened').css('z-index',target.zIndex-1).transform('translate3d('+-diffX+'px, '+-diffY+'px, 0)');$fabEl.transitionEnd(function(){$targetEl.transition('');Utils.nextTick(function(){$targetEl.css('opacity',1).transform('scale(1,1)');});$fabEl.transform('translate3d('+-diffX+'px, '+-diffY+'px, 0) scale('+scaleX+', '+scaleY+')').css('border-radius',borderRadius+'px').css('box-shadow','none');app.on('resize',$fabEl[0].f7FabMorphResizeHandler);if($targetEl.parents('.page-content').length>0){$targetEl.parents('.page-content').on('scroll',$fabEl[0].f7FabMorphResizeHandler);}});},morphClose:function morphClose(fabEl){var app=this;var $fabEl=(0,_dom2.default)(fabEl);var morphData=$fabEl[0].f7FabMorphData;if(!morphData)return;var $targetEl=morphData.$targetEl,target=morphData.target,fab=morphData.fab;if($targetEl.length===0)return;var diffX=fab.offset.left+fab.width/2-(target.offset.left+target.width/2)-fab.translateX;var diffY=fab.offset.top+fab.height/2-(target.offset.top+target.height/2)-fab.translateY;var scaleX=target.width/fab.width;var scaleY=target.height/fab.height;app.off('resize',$fabEl[0].f7FabMorphResizeHandler);if($targetEl.parents('.page-content').length>0){$targetEl.parents('.page-content').off('scroll',$fabEl[0].f7FabMorphResizeHandler);}$targetEl.css('opacity',0).transform('scale('+1/scaleX+', '+1/scaleY+')');$fabEl.transition('').css('box-shadow','').css('border-radius','').transform('translate3d('+-diffX+'px, '+-diffY+'px, 0)');$fabEl.transitionEnd(function(){$fabEl.css('z-index','').removeClass('fab-opened').transform('');Utils.nextTick(function(){$fabEl.transitionEnd(function(){$targetEl.removeClass('fab-morph-target-visible').css('opacity','').transform('').transition('');});});});},open:function open(fabEl,targetEl){var app=this;var $fabEl=(0,_dom2.default)(fabEl).eq(0);var $buttonsEl=$fabEl.find('.fab-buttons');if(!$fabEl.length)return;if($fabEl.hasClass('fab-opened'))return;if(!$buttonsEl.length&&!$fabEl.hasClass('fab-morph'))return;if(app.fab.openedEl){if(app.fab.openedEl===$fabEl[0])return;app.fab.close(app.fab.openedEl);}app.fab.openedEl=$fabEl[0];if($fabEl.hasClass('fab-morph')){app.fab.morphOpen($fabEl,targetEl||$fabEl.attr('data-morph-to'));}else{$fabEl.addClass('fab-opened');}$fabEl.trigger('fab:open');},close:function close(){var fabEl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'.fab-opened';var app=this;var $fabEl=(0,_dom2.default)(fabEl).eq(0);var $buttonsEl=$fabEl.find('.fab-buttons');if(!$fabEl.length)return;if(!$fabEl.hasClass('fab-opened'))return;if(!$buttonsEl.length&&!$fabEl.hasClass('fab-morph'))return;app.fab.openedEl=null;if($fabEl.hasClass('fab-morph')){app.fab.morphClose($fabEl);}else{$fabEl.removeClass('fab-opened');}$fabEl.trigger('fab:close');},toggle:function toggle(fabEl){var app=this;var $fabEl=(0,_dom2.default)(fabEl);if(!$fabEl.hasClass('fab-opened'))app.fab.open(fabEl);else app.fab.close(fabEl);}};var Fab$1={name:'fab',create:function create(){var app=this;Utils.extend(app,{fab:{openedEl:null,morphOpen:Fab.morphOpen.bind(app),morphClose:Fab.morphClose.bind(app),open:Fab.open.bind(app),close:Fab.close.bind(app),toggle:Fab.toggle.bind(app)}});},clicks:{'.fab > a':function open($clickedEl){var app=this;app.fab.toggle($clickedEl.parents('.fab'));},'.fab-open':function open($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.fab.open(data.fab);},'.fab-close':function close($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;app.fab.close(data.fab);}}};var Searchbar=function(_Framework7Class16){_inherits(Searchbar,_Framework7Class16);function Searchbar(app){var _ret58,_ret59;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Searchbar);var _this26=_possibleConstructorReturn(this,(Searchbar.__proto__||Object.getPrototypeOf(Searchbar)).call(this,params,[app]));var sb=_this26;var defaults={el:undefined,inputEl:undefined,disableButton:true,disableButtonEl:undefined,backdropEl:undefined,searchContainer:undefined,// container to search, HTMLElement or CSS selector
searchItem:'li',// single item selector, CSS selector
searchIn:undefined,// where to search in item, CSS selector
ignore:'.searchbar-ignore',foundEl:'.searchbar-found',notFoundEl:'.searchbar-not-found',hideOnEnableEl:'.searchbar-hide-on-enable',hideOnSearchEl:'.searchbar-hide-on-search',backdrop:true,removeDiacritics:true,customSearch:false,hideDividers:true,hideGroups:true,disableOnBackdropClick:true,expandable:false};// Extend defaults with modules params
sb.useModulesParams(defaults);sb.params=Utils.extend(defaults,params);var $el=(0,_dom2.default)(sb.params.el);if($el.length===0)return _ret58=sb,_possibleConstructorReturn(_this26,_ret58);$el[0].f7Searchbar=sb;var $pageEl=void 0;var $navbarEl=void 0;if($el.parents('.page').length>0){$pageEl=$el.parents('.page');}else{$navbarEl=$el.parents('.navbar-inner');if($navbarEl.length>0){if($navbarEl[0].f7Page){$pageEl=$navbarEl[0].f7Page.$el;}else{var $currentPageEl=$el.parents('.view').find('.page-current');if($currentPageEl[0]&&$currentPageEl[0].f7Page&&$currentPageEl[0].f7Page.navbarEl===$navbarEl[0]){$pageEl=$currentPageEl;}}}}var $foundEl=void 0;if(params.foundEl){$foundEl=(0,_dom2.default)(params.foundEl);}else if(typeof sb.params.foundEl==='string'&&$pageEl){$foundEl=$pageEl.find(sb.params.foundEl);}var $notFoundEl=void 0;if(params.notFoundEl){$notFoundEl=(0,_dom2.default)(params.notFoundEl);}else if(typeof sb.params.notFoundEl==='string'&&$pageEl){$notFoundEl=$pageEl.find(sb.params.notFoundEl);}var $hideOnEnableEl=void 0;if(params.hideOnEnableEl){$hideOnEnableEl=(0,_dom2.default)(params.hideOnEnableEl);}else if(typeof sb.params.hideOnEnableEl==='string'&&$pageEl){$hideOnEnableEl=$pageEl.find(sb.params.hideOnEnableEl);}var $hideOnSearchEl=void 0;if(params.hideOnSearchEl){$hideOnSearchEl=(0,_dom2.default)(params.hideOnSearchEl);}else if(typeof sb.params.hideOnSearchEl==='string'&&$pageEl){$hideOnSearchEl=$pageEl.find(sb.params.hideOnSearchEl);}var $backdropEl=void 0;if(sb.params.backdrop){if(sb.params.backdropEl){$backdropEl=(0,_dom2.default)(sb.params.backdropEl);}else if($pageEl&&$pageEl.length>0){$backdropEl=$pageEl.find('.searchbar-backdrop');}else{$backdropEl=$el.siblings('.searchbar-backdrop');}if($backdropEl.length===0){$backdropEl=(0,_dom2.default)('<div class="searchbar-backdrop"></div>');if($pageEl&&$pageEl.length){if($el.parents($pageEl).length>0&&$navbarEl&&$el.parents($navbarEl).length===0){$backdropEl.insertBefore($el);}else{$backdropEl.insertBefore($pageEl.find('.page-content').eq(0));}}else{$backdropEl.insertBefore($el);}}}var $searchContainer=void 0;if(sb.params.searchContainer){$searchContainer=(0,_dom2.default)(sb.params.searchContainer);}var $inputEl=void 0;if(sb.params.inputEl){$inputEl=(0,_dom2.default)(sb.params.inputEl);}else{$inputEl=$el.find('input[type="search"]').eq(0);}var $disableButtonEl=void 0;if(sb.params.disableButton){if(sb.params.disableButtonEl){$disableButtonEl=(0,_dom2.default)(sb.params.disableButtonEl);}else{$disableButtonEl=$el.find('.searchbar-disable-button');}}Utils.extend(sb,{app:app,view:app.views.get($el.parents('.view')),$el:$el,el:$el[0],$backdropEl:$backdropEl,backdropEl:$backdropEl&&$backdropEl[0],$searchContainer:$searchContainer,searchContainer:$searchContainer&&$searchContainer[0],$inputEl:$inputEl,inputEl:$inputEl[0],$disableButtonEl:$disableButtonEl,disableButtonEl:$disableButtonEl&&$disableButtonEl[0],disableButtonHasMargin:false,$pageEl:$pageEl,pageEl:$pageEl&&$pageEl[0],$navbarEl:$navbarEl,navbarEl:$navbarEl&&$navbarEl[0],$foundEl:$foundEl,foundEl:$foundEl&&$foundEl[0],$notFoundEl:$notFoundEl,notFoundEl:$notFoundEl&&$notFoundEl[0],$hideOnEnableEl:$hideOnEnableEl,hideOnEnableEl:$hideOnEnableEl&&$hideOnEnableEl[0],$hideOnSearchEl:$hideOnSearchEl,hideOnSearchEl:$hideOnSearchEl&&$hideOnSearchEl[0],previousQuery:'',query:'',isVirtualList:$searchContainer&&$searchContainer.hasClass('virtual-list'),virtualList:undefined,enabled:false,expandable:sb.params.expandable||$el.hasClass('searchbar-expandable')});// Events
function preventSubmit(e){e.preventDefault();}function onInputFocus(e){sb.enable(e);sb.$el.addClass('searchbar-focused');}function onInputBlur(){sb.$el.removeClass('searchbar-focused');}function onInputChange(){var value=sb.$inputEl.val().trim();if(sb.$searchContainer&&sb.$searchContainer.length>0&&(sb.params.searchIn||sb.isVirtualList||sb.params.searchIn===sb.params.searchItem)||sb.params.customSearch){sb.search(value,true);}}function onInputClear(e,previousValue){sb.$el.trigger('searchbar:clear',previousValue);sb.emit('local::clear searchbarClear',sb,previousValue);}function disableOnClick(e){sb.disable(e);}function onPageBeforeOut(){if(!sb||sb&&!sb.$el)return;if(sb.enabled){sb.$el.removeClass('searchbar-enabled');}}function onPageBeforeIn(){if(!sb||sb&&!sb.$el)return;if(sb.enabled){sb.$el.addClass('searchbar-enabled');}}sb.attachEvents=function attachEvents(){$el.on('submit',preventSubmit);if(sb.params.disableButton){sb.$disableButtonEl.on('click',disableOnClick);}if(sb.params.disableOnBackdropClick&&sb.$backdropEl){sb.$backdropEl.on('click',disableOnClick);}if(sb.expandable&&app.theme==='ios'&&sb.view&&$navbarEl&&sb.$pageEl){sb.$pageEl.on('page:beforeout',onPageBeforeOut);sb.$pageEl.on('page:beforein',onPageBeforeIn);}sb.$inputEl.on('focus',onInputFocus);sb.$inputEl.on('blur',onInputBlur);sb.$inputEl.on('change input compositionend',onInputChange);sb.$inputEl.on('input:clear',onInputClear);};sb.detachEvents=function detachEvents(){$el.off('submit',preventSubmit);if(sb.params.disableButton){sb.$disableButtonEl.off('click',disableOnClick);}if(sb.params.disableOnBackdropClick&&sb.$backdropEl){sb.$backdropEl.off('click',disableOnClick);}if(sb.expandable&&app.theme==='ios'&&sb.view&&$navbarEl&&sb.$pageEl){sb.$pageEl.on('page:beforeout',onPageBeforeOut);sb.$pageEl.on('page:beforein',onPageBeforeIn);}sb.$inputEl.off('focus',onInputFocus);sb.$inputEl.off('blur',onInputBlur);sb.$inputEl.off('change input compositionend',onInputChange);sb.$inputEl.off('input:clear',onInputClear);};// Install Modules
sb.useModules();// Init
sb.init();return _ret59=sb,_possibleConstructorReturn(_this26,_ret59);}_createClass(Searchbar,[{key:'clear',value:function clear(e){var sb=this;if(!sb.query&&e&&(0,_dom2.default)(e.target).hasClass('searchbar-clear')){sb.disable();return sb;}var previousQuery=sb.value;sb.$inputEl.val('').trigger('change').focus();sb.$el.trigger('searchbar:clear',previousQuery);sb.emit('local::clear searchbarClear',sb,previousQuery);return sb;}},{key:'setDisableButtonMargin',value:function setDisableButtonMargin(){var sb=this;if(sb.expandable)return;var app=sb.app;sb.$disableButtonEl.transition(0).show();sb.$disableButtonEl.css('margin-'+(app.rtl?'left':'right'),-sb.disableButtonEl.offsetWidth+'px');/* eslint no-underscore-dangle: ["error", { "allow": ["_clientLeft"] }] */sb._clientLeft=sb.$disableButtonEl[0].clientLeft;sb.$disableButtonEl.transition('');sb.disableButtonHasMargin=true;}},{key:'enable',value:function enable(setFocus){var sb=this;if(sb.enabled)return sb;var app=sb.app;sb.enabled=true;function enable(){if(sb.$backdropEl&&(sb.$searchContainer&&sb.$searchContainer.length||sb.params.customSearch)&&!sb.$el.hasClass('searchbar-enabled')&&!sb.query){sb.backdropShow();}sb.$el.addClass('searchbar-enabled');if(!sb.expandable&&sb.$disableButtonEl&&sb.$disableButtonEl.length>0&&app.theme==='ios'){if(!sb.disableButtonHasMargin){sb.setDisableButtonMargin();}sb.$disableButtonEl.css('margin-'+(app.rtl?'left':'right'),'0px');}if(sb.$hideOnEnableEl)sb.$hideOnEnableEl.addClass('hidden-by-searchbar');sb.$el.trigger('searchbar:enable');sb.emit('local::enable searchbarEnable',sb);}var needsFocus=false;if(setFocus===true){if(_ssrWindow.document.activeElement!==sb.inputEl){needsFocus=true;}}var isIos=app.device.ios&&app.theme==='ios';if(isIos){if(sb.expandable){if(needsFocus)sb.$inputEl.focus();enable();}else{if(needsFocus)sb.$inputEl.focus();if(setFocus&&(setFocus.type==='focus'||setFocus===true)){Utils.nextTick(function(){enable();},400);}else{enable();}}}else{if(needsFocus)sb.$inputEl.focus();if(app.theme==='md'&&sb.expandable){sb.$el.parents('.page, .view, .navbar-inner').scrollLeft(0);}enable();}return sb;}},{key:'disable',value:function disable(){var sb=this;if(!sb.enabled)return sb;var app=sb.app;sb.$inputEl.val('').trigger('change');sb.$el.removeClass('searchbar-enabled');sb.$el.removeClass('searchbar-focused');if(!sb.expandable&&sb.$disableButtonEl&&sb.$disableButtonEl.length>0&&app.theme==='ios'){sb.$disableButtonEl.css('margin-'+(app.rtl?'left':'right'),-sb.disableButtonEl.offsetWidth+'px');}if(sb.$backdropEl&&(sb.$searchContainer&&sb.$searchContainer.length||sb.params.customSearch)){sb.backdropHide();}sb.enabled=false;sb.$inputEl.blur();if(sb.$hideOnEnableEl)sb.$hideOnEnableEl.removeClass('hidden-by-searchbar');sb.$el.trigger('searchbar:disable');sb.emit('local::disable searchbarDisable',sb);return sb;}},{key:'toggle',value:function toggle(){var sb=this;if(sb.enabled)sb.disable();else sb.enable(true);return sb;}},{key:'backdropShow',value:function backdropShow(){var sb=this;if(sb.$backdropEl){sb.$backdropEl.addClass('searchbar-backdrop-in');}return sb;}},{key:'backdropHide',value:function backdropHide(){var sb=this;if(sb.$backdropEl){sb.$backdropEl.removeClass('searchbar-backdrop-in');}return sb;}},{key:'search',value:function search(query,internal){var sb=this;if(sb.previousQuery&&query.trim()===sb.previousQuery)return sb;if(typeof sb.previousQuery!=='undefined'&&sb.previousQuery.trim()===''&&query.trim()==='')return sb;sb.previousQuery=query.trim();if(!internal){if(!sb.enabled){sb.enable();}sb.$inputEl.val(query);}sb.query=query;sb.value=query;var $searchContainer=sb.$searchContainer,$el=sb.$el,$foundEl=sb.$foundEl,$notFoundEl=sb.$notFoundEl,$hideOnSearchEl=sb.$hideOnSearchEl,isVirtualList=sb.isVirtualList;// Hide on search element
if(query.length>0&&$hideOnSearchEl){$hideOnSearchEl.addClass('hidden-by-searchbar');}else if($hideOnSearchEl){$hideOnSearchEl.removeClass('hidden-by-searchbar');}// Add active/inactive classes on overlay
if($searchContainer&&$searchContainer.length&&$el.hasClass('searchbar-enabled')||sb.params.customSearch&&$el.hasClass('searchbar-enabled')){if(query.length===0){sb.backdropShow();}else{sb.backdropHide();}}if(sb.params.customSearch){$el.trigger('searchbar:search',query,sb.previousQuery);sb.emit('local::search searchbarSearch',sb,query,sb.previousQuery);return sb;}var foundItems=[];var vlQuery=void 0;if(isVirtualList){sb.virtualList=$searchContainer[0].f7VirtualList;if(query.trim()===''){sb.virtualList.resetFilter();if($notFoundEl)$notFoundEl.hide();if($foundEl)$foundEl.show();return sb;}vlQuery=sb.params.removeDiacritics?Utils.removeDiacritics(query):query;if(sb.virtualList.params.searchAll){foundItems=sb.virtualList.params.searchAll(vlQuery,sb.virtualList.items)||[];}else if(sb.virtualList.params.searchByItem){for(var _i27=0;_i27<sb.virtualList.items.length;_i27+=1){if(sb.virtualList.params.searchByItem(vlQuery,sb.virtualList.params.items[_i27],_i27)){foundItems.push(_i27);}}}}else{var values=void 0;if(sb.params.removeDiacritics)values=Utils.removeDiacritics(query.trim().toLowerCase()).split(' ');else{values=query.trim().toLowerCase().split(' ');}$searchContainer.find(sb.params.searchItem).removeClass('hidden-by-searchbar').each(function(itemIndex,itemEl){var $itemEl=(0,_dom2.default)(itemEl);var compareWithText=[];var $searchIn=sb.params.searchIn?$itemEl.find(sb.params.searchIn):$itemEl;if(sb.params.searchIn===sb.params.searchItem){$searchIn=$itemEl;}$searchIn.each(function(searchInIndex,searchInEl){var itemText=(0,_dom2.default)(searchInEl).text().trim().toLowerCase();if(sb.params.removeDiacritics)itemText=Utils.removeDiacritics(itemText);compareWithText.push(itemText);});compareWithText=compareWithText.join(' ');var wordsMatch=0;for(var _i28=0;_i28<values.length;_i28+=1){if(compareWithText.indexOf(values[_i28])>=0)wordsMatch+=1;}if(wordsMatch!==values.length&&!(sb.params.ignore&&$itemEl.is(sb.params.ignore))){$itemEl.addClass('hidden-by-searchbar');}else{foundItems.push($itemEl[0]);}});if(sb.params.hideDividers){$searchContainer.find('.item-divider, .list-group-title').each(function(titleIndex,titleEl){var $titleEl=(0,_dom2.default)(titleEl);var $nextElements=$titleEl.nextAll('li');var hide=true;for(var _i29=0;_i29<$nextElements.length;_i29+=1){var $nextEl=$nextElements.eq(_i29);if($nextEl.hasClass('list-group-title')||$nextEl.hasClass('item-divider'))break;if(!$nextEl.hasClass('hidden-by-searchbar')){hide=false;}}var ignore=sb.params.ignore&&$titleEl.is(sb.params.ignore);if(hide&&!ignore)$titleEl.addClass('hidden-by-searchbar');else $titleEl.removeClass('hidden-by-searchbar');});}if(sb.params.hideGroups){$searchContainer.find('.list-group').each(function(groupIndex,groupEl){var $groupEl=(0,_dom2.default)(groupEl);var ignore=sb.params.ignore&&$groupEl.is(sb.params.ignore);var notHidden=$groupEl.find('li:not(.hidden-by-searchbar)');if(notHidden.length===0&&!ignore){$groupEl.addClass('hidden-by-searchbar');}else{$groupEl.removeClass('hidden-by-searchbar');}});}}if(foundItems.length===0){if($notFoundEl)$notFoundEl.show();if($foundEl)$foundEl.hide();}else{if($notFoundEl)$notFoundEl.hide();if($foundEl)$foundEl.show();}if(isVirtualList&&sb.virtualList){sb.virtualList.filterItems(foundItems);}$el.trigger('searchbar:search',query,sb.previousQuery,foundItems);sb.emit('local::search searchbarSearch',sb,query,sb.previousQuery,foundItems);return sb;}},{key:'init',value:function init(){var sb=this;sb.attachEvents();}},{key:'destroy',value:function destroy(){var sb=this;sb.emit('local::beforeDestroy searchbarBeforeDestroy',sb);sb.$el.trigger('searchbar:beforedestroy',sb);sb.detachEvents();delete sb.$el.f7Searchbar;Utils.deleteProps(sb);}}]);return Searchbar;}(Framework7Class);var Searchbar$1={name:'searchbar',static:{Searchbar:Searchbar},create:function create(){var app=this;app.searchbar=ConstructorMethods({defaultSelector:'.searchbar',constructor:Searchbar,app:app,domProp:'f7Searchbar',addMethods:'clear enable disable toggle search'.split(' ')});},on:{tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.searchbar-init').each(function(index,searchbarEl){var $searchbarEl=(0,_dom2.default)(searchbarEl);app.searchbar.create(Utils.extend($searchbarEl.dataset(),{el:searchbarEl}));});},tabBeforeRemove:function tabBeforeRemove(tabEl){(0,_dom2.default)(tabEl).find('.searchbar-init').each(function(index,searchbarEl){if(searchbarEl.f7Searchbar&&searchbarEl.f7Searchbar.destroy){searchbarEl.f7Searchbar.destroy();}});},pageInit:function pageInit(page){var app=this;page.$el.find('.searchbar-init').each(function(index,searchbarEl){var $searchbarEl=(0,_dom2.default)(searchbarEl);app.searchbar.create(Utils.extend($searchbarEl.dataset(),{el:searchbarEl}));});if(app.theme==='ios'&&page.view&&page.view.router.separateNavbar&&page.$navbarEl&&page.$navbarEl.length>0){page.$navbarEl.find('.searchbar-init').each(function(index,searchbarEl){var $searchbarEl=(0,_dom2.default)(searchbarEl);app.searchbar.create(Utils.extend($searchbarEl.dataset(),{el:searchbarEl}));});}},pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.searchbar-init').each(function(index,searchbarEl){if(searchbarEl.f7Searchbar&&searchbarEl.f7Searchbar.destroy){searchbarEl.f7Searchbar.destroy();}});if(app.theme==='ios'&&page.view&&page.view.router.separateNavbar&&page.$navbarEl&&page.$navbarEl.length>0){page.$navbarEl.find('.searchbar-init').each(function(index,searchbarEl){if(searchbarEl.f7Searchbar&&searchbarEl.f7Searchbar.destroy){searchbarEl.f7Searchbar.destroy();}});}}},clicks:{'.searchbar-clear':function clear($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;var sb=app.searchbar.get(data.searchbar);if(sb)sb.clear();},'.searchbar-enable':function enable($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;var sb=app.searchbar.get(data.searchbar);if(sb)sb.enable(true);},'.searchbar-disable':function disable($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;var sb=app.searchbar.get(data.searchbar);if(sb)sb.disable();},'.searchbar-toggle':function toggle($clickedEl){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var app=this;var sb=app.searchbar.get(data.searchbar);if(sb)sb.toggle();}}};var Messages=function(_Framework7Class17){_inherits(Messages,_Framework7Class17);function Messages(app){var _ret60,_ret61;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Messages);var _this27=_possibleConstructorReturn(this,(Messages.__proto__||Object.getPrototypeOf(Messages)).call(this,params,[app]));var m=_this27;var defaults={autoLayout:true,messages:[],newMessagesFirst:false,scrollMessages:true,scrollMessagesOnEdge:true,firstMessageRule:undefined,lastMessageRule:undefined,tailMessageRule:undefined,sameNameMessageRule:undefined,sameHeaderMessageRule:undefined,sameFooterMessageRule:undefined,sameAvatarMessageRule:undefined,customClassMessageRule:undefined,renderMessage:undefined};// Extend defaults with modules params
m.useModulesParams(defaults);m.params=Utils.extend(defaults,params);var $el=(0,_dom2.default)(params.el).eq(0);if($el.length===0)return _ret60=m,_possibleConstructorReturn(_this27,_ret60);$el[0].f7Messages=m;var $pageContentEl=$el.closest('.page-content').eq(0);Utils.extend(m,{messages:m.params.messages,$el:$el,el:$el[0],$pageContentEl:$pageContentEl,pageContentEl:$pageContentEl[0]});// Install Modules
m.useModules();// Init
m.init();return _ret61=m,_possibleConstructorReturn(_this27,_ret61);}// eslint-disable-next-line
_createClass(Messages,[{key:'getMessageData',value:function getMessageData(messageEl){var $messageEl=(0,_dom2.default)(messageEl);var data={name:$messageEl.find('.message-name').html(),header:$messageEl.find('.message-header').html(),textHeader:$messageEl.find('.message-text-header').html(),textFooter:$messageEl.find('.message-text-footer').html(),footer:$messageEl.find('.message-footer').html(),isTitle:$messageEl.hasClass('messages-title'),type:$messageEl.hasClass('message-sent')?'sent':'received',text:$messageEl.find('.message-text').html(),image:$messageEl.find('.message-image').html(),imageSrc:$messageEl.find('.message-image img').attr('src'),typing:$messageEl.hasClass('message-typing')};if(data.isTitle){data.text=$messageEl.html();}if(data.text&&data.textHeader){data.text=data.text.replace('<div class="message-text-header">'+data.textHeader+'</div>','');}if(data.text&&data.textFooter){data.text=data.text.replace('<div class="message-text-footer">'+data.textFooter+'</div>','');}var avatar=$messageEl.find('.message-avatar').css('background-image');if(avatar==='none'||avatar==='')avatar=undefined;if(avatar&&typeof avatar==='string'){avatar=avatar.replace('url(','').replace(')','').replace(/"/g,'').replace(/'/g,'');}else{avatar=undefined;}data.avatar=avatar;return data;}},{key:'getMessagesData',value:function getMessagesData(){var m=this;var data=[];m.$el.find('.message, .messages-title').each(function(index,messageEl){data.push(m.getMessageData(messageEl));});return data;}},{key:'renderMessage',value:function renderMessage(messageToRender){var m=this;var message=Utils.extend({type:'sent'},messageToRender);if(m.params.renderMessage){return m.params.renderMessage.call(m,message);}if(message.isTitle){return'<div class="messages-title">'+message.text+'</div>';}return'\n      <div class="message message-'+message.type+' '+(message.isTyping?'message-typing':'')+'">\n        '+(message.avatar?'\n        <div class="message-avatar" style="background-image:url('+message.avatar+')"></div>\n        ':'')+'\n        <div class="message-content">\n          '+(message.name?'<div class="message-name">'+message.name+'</div>':'')+'\n          '+(message.header?'<div class="message-header">'+message.header+'</div>':'')+'\n          <div class="message-bubble">\n            '+(message.textHeader?'<div class="message-text-header">'+message.textHeader+'</div>':'')+'\n            '+(message.image?'<div class="message-image">'+message.image+'</div>':'')+'\n            '+(message.imageSrc&&!message.image?'<div class="message-image"><img src="'+message.imageSrc+'"></div>':'')+'\n            '+(message.text||message.isTyping?'<div class="message-text">'+(message.text||'')+(message.isTyping?'<div class="message-typing-indicator"><div></div><div></div><div></div></div>':'')+'</div>':'')+'\n            '+(message.textFooter?'<div class="message-text-footer">'+message.textFooter+'</div>':'')+'\n          </div>\n          '+(message.footer?'<div class="message-footer">'+message.footer+'</div>':'')+'\n        </div>\n      </div>\n    ';}},{key:'renderMessages',value:function renderMessages(){var messagesToRender=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.messages;var method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.params.newMessagesFirst?'prepend':'append';var m=this;var html=messagesToRender.map(function(message){return m.renderMessage(message);}).join('');m.$el[method](html);}},{key:'isFirstMessage',value:function isFirstMessage(){var _m$params;var m=this;if(m.params.firstMessageRule)return(_m$params=m.params).firstMessageRule.apply(_m$params,arguments);return false;}},{key:'isLastMessage',value:function isLastMessage(){var _m$params2;var m=this;if(m.params.lastMessageRule)return(_m$params2=m.params).lastMessageRule.apply(_m$params2,arguments);return false;}},{key:'isTailMessage',value:function isTailMessage(){var _m$params3;var m=this;if(m.params.tailMessageRule)return(_m$params3=m.params).tailMessageRule.apply(_m$params3,arguments);return false;}},{key:'isSameNameMessage',value:function isSameNameMessage(){var _m$params4;var m=this;if(m.params.sameNameMessageRule)return(_m$params4=m.params).sameNameMessageRule.apply(_m$params4,arguments);return false;}},{key:'isSameHeaderMessage',value:function isSameHeaderMessage(){var _m$params5;var m=this;if(m.params.sameHeaderMessageRule)return(_m$params5=m.params).sameHeaderMessageRule.apply(_m$params5,arguments);return false;}},{key:'isSameFooterMessage',value:function isSameFooterMessage(){var _m$params6;var m=this;if(m.params.sameFooterMessageRule)return(_m$params6=m.params).sameFooterMessageRule.apply(_m$params6,arguments);return false;}},{key:'isSameAvatarMessage',value:function isSameAvatarMessage(){var _m$params7;var m=this;if(m.params.sameAvatarMessageRule)return(_m$params7=m.params).sameAvatarMessageRule.apply(_m$params7,arguments);return false;}},{key:'isCustomClassMessage',value:function isCustomClassMessage(){var _m$params8;var m=this;if(m.params.customClassMessageRule)return(_m$params8=m.params).customClassMessageRule.apply(_m$params8,arguments);return undefined;}},{key:'layout',value:function layout(){var m=this;m.$el.find('.message, .messages-title').each(function(index,messageEl){var $messageEl=(0,_dom2.default)(messageEl);if(!m.messages){m.messages=m.getMessagesData();}var classes=[];var message=m.messages[index];var previousMessage=m.messages[index-1];var nextMessage=m.messages[index+1];if(m.isFirstMessage(message,previousMessage,nextMessage)){classes.push('message-first');}if(m.isLastMessage(message,previousMessage,nextMessage)){classes.push('message-last');}if(m.isTailMessage(message,previousMessage,nextMessage)){classes.push('message-tail');}if(m.isSameNameMessage(message,previousMessage,nextMessage)){classes.push('message-same-name');}if(m.isSameHeaderMessage(message,previousMessage,nextMessage)){classes.push('message-same-header');}if(m.isSameFooterMessage(message,previousMessage,nextMessage)){classes.push('message-same-footer');}if(m.isSameAvatarMessage(message,previousMessage,nextMessage)){classes.push('message-same-avatar');}var customMessageClasses=m.isCustomClassMessage(message,previousMessage,nextMessage);if(customMessageClasses&&customMessageClasses.length){if(typeof customMessageClasses==='string'){customMessageClasses=customMessageClasses.split(' ');}customMessageClasses.forEach(function(customClass){classes.push(customClass);});}$messageEl.removeClass('message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar');classes.forEach(function(className){$messageEl.addClass(className);});});}},{key:'clear',value:function clear(){var m=this;m.messages=[];m.$el.html('');}},{key:'removeMessage',value:function removeMessage(messageToRemove){var layout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var m=this;// Index or El
var index=void 0;var $el=void 0;if(typeof messageToRemove==='number'){index=messageToRemove;$el=m.$el.find('.message, .messages-title').eq(index);}else if(m.messages&&m.messages.indexOf(messageToRemove)>=0){index=m.messages.indexOf(messageToRemove);$el=m.$el.children().eq(index);}else{$el=(0,_dom2.default)(messageToRemove);index=$el.index();}if($el.length===0){return m;}$el.remove();m.messages.splice(index,1);if(m.params.autoLayout&&layout)m.layout();return m;}},{key:'removeMessages',value:function removeMessages(messagesToRemove){var layout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var m=this;if(Array.isArray(messagesToRemove)){var messagesToRemoveEls=[];messagesToRemove.forEach(function(messageToRemoveIndex){messagesToRemoveEls.push(m.$el.find('.message, .messages-title').eq(messageToRemoveIndex));});messagesToRemoveEls.forEach(function(messageToRemove){m.removeMessage(messageToRemove,false);});}else{(0,_dom2.default)(messagesToRemove).each(function(index,messageToRemove){m.removeMessage(messageToRemove,false);});}if(m.params.autoLayout&&layout)m.layout();return m;}},{key:'addMessage',value:function addMessage(){var m=this;var messageToAdd=void 0;var animate=void 0;var method=void 0;for(var _len31=arguments.length,args=Array(_len31),_key31=0;_key31<_len31;_key31++){args[_key31]=arguments[_key31];}if(typeof args[1]==='boolean'){messageToAdd=args[0];animate=args[1];method=args[2];}else{messageToAdd=args[0];method=args[1];animate=args[2];}if(typeof animate==='undefined'){animate=true;}if(typeof method==='undefined'){method=m.params.newMessagesFirst?'prepend':'append';}return m.addMessages([messageToAdd],animate,method);}},{key:'addMessages',value:function addMessages(){var m=this;var messagesToAdd=void 0;var animate=void 0;var method=void 0;for(var _len32=arguments.length,args=Array(_len32),_key32=0;_key32<_len32;_key32++){args[_key32]=arguments[_key32];}if(typeof args[1]==='boolean'){messagesToAdd=args[0];animate=args[1];method=args[2];}else{messagesToAdd=args[0];method=args[1];animate=args[2];}if(typeof animate==='undefined'){animate=true;}if(typeof method==='undefined'){method=m.params.newMessagesFirst?'prepend':'append';}// Define scroll positions before new messages added
var scrollHeightBefore=m.pageContentEl.scrollHeight;var heightBefore=m.pageContentEl.offsetHeight;var scrollBefore=m.pageContentEl.scrollTop;// Add message to DOM and data
var messagesHTML='';var typingMessage=m.messages.filter(function(el){return el.isTyping;})[0];messagesToAdd.forEach(function(messageToAdd){if(typingMessage){if(method==='append'){m.messages.splice(m.messages.indexOf(typingMessage),0,messageToAdd);}else{m.messages.splice(m.messages.indexOf(typingMessage)+1,0,messageToAdd);}}else{m.messages[method==='append'?'push':'unshift'](messageToAdd);}messagesHTML+=m.renderMessage(messageToAdd);});var $messagesEls=(0,_dom2.default)(messagesHTML);if(animate){if(method==='append'&&!m.params.newMessagesFirst){$messagesEls.addClass('message-appear-from-bottom');}if(method==='prepend'&&m.params.newMessagesFirst){$messagesEls.addClass('message-appear-from-top');}}if(typingMessage){if(method==='append'){$messagesEls.insertBefore(m.$el.find('.message-typing'));}else{$messagesEls.insertAfter(m.$el.find('.message-typing'));}}else{m.$el[method]($messagesEls);}// Layout
if(m.params.autoLayout)m.layout();if(method==='prepend'&&!typingMessage){m.pageContentEl.scrollTop=scrollBefore+(m.pageContentEl.scrollHeight-scrollHeightBefore);}if(m.params.scrollMessages&&(method==='append'&&!m.params.newMessagesFirst||method==='prepend'&&m.params.newMessagesFirst&&!typingMessage)){if(m.params.scrollMessagesOnEdge){var onEdge=false;if(m.params.newMessagesFirst&&scrollBefore===0){onEdge=true;}if(!m.params.newMessagesFirst&&scrollBefore-(scrollHeightBefore-heightBefore)>=-10){onEdge=true;}if(onEdge)m.scroll(animate?undefined:0);}else{m.scroll(animate?undefined:0);}}return m;}},{key:'showTyping',value:function showTyping(){var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var m=this;var typingMessage=m.messages.filter(function(el){return el.isTyping;})[0];if(typingMessage){m.removeMessage(m.messages.indexOf(typingMessage));}m.addMessage(Utils.extend({type:'received',isTyping:true},message));return m;}},{key:'hideTyping',value:function hideTyping(){var m=this;var typingMessageIndex=void 0;var typingFound=void 0;m.messages.forEach(function(message,index){if(message.isTyping)typingMessageIndex=index;});if(typeof typingMessageIndex!=='undefined'){if(m.$el.find('.message').eq(typingMessageIndex).hasClass('message-typing')){typingFound=true;m.removeMessage(typingMessageIndex);}}if(!typingFound){var $typingMessageEl=m.$el.find('.message-typing');if($typingMessageEl.length){m.removeMessage($typingMessageEl);}}return m;}},{key:'scroll',value:function scroll(){var duration=arguments.length>0&&arguments[0]!==undefined?arguments[0]:300;var scrollTop=arguments[1];var m=this;var currentScroll=m.pageContentEl.scrollTop;var newScrollTop=void 0;if(typeof scrollTop!=='undefined')newScrollTop=scrollTop;else{newScrollTop=m.params.newMessagesFirst?0:m.pageContentEl.scrollHeight-m.pageContentEl.offsetHeight;if(newScrollTop===currentScroll)return m;}m.$pageContentEl.scrollTop(newScrollTop,duration);return m;}},{key:'init',value:function init(){var m=this;if(!m.messages||m.messages.length===0){m.messages=m.getMessagesData();}if(m.params.messages&&m.params.messages.length){m.renderMessages();}if(m.params.autoLayout)m.layout();if(m.params.scrollMessages)m.scroll(0);}},{key:'destroy',value:function destroy(){var m=this;m.emit('local::beforeDestroy messagesBeforeDestroy',m);m.$el.trigger('messages:beforedestroy',m);m.$el[0].f7Messages=null;delete m.$el[0].f7Messages;Utils.deleteProps(m);}}]);return Messages;}(Framework7Class);var Messages$1={name:'messages',static:{Messages:Messages},create:function create(){var app=this;app.messages=ConstructorMethods({defaultSelector:'.messages',constructor:Messages,app:app,domProp:'f7Messages',addMethods:'renderMessages layout scroll clear removeMessage removeMessages addMessage addMessages'.split(' ')});},on:{tabBeforeRemove:function tabBeforeRemove(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.messages-init').each(function(index,messagesEl){app.messages.destroy(messagesEl);});},tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.messages-init').each(function(index,messagesEl){app.messages.create({el:messagesEl});});},pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.messages-init').each(function(index,messagesEl){app.messages.destroy(messagesEl);});},pageInit:function pageInit(page){var app=this;page.$el.find('.messages-init').each(function(index,messagesEl){app.messages.create({el:messagesEl});});}},clicks:{}};var Messagebar=function(_Framework7Class18){_inherits(Messagebar,_Framework7Class18);function Messagebar(app){var _ret62,_ret63;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Messagebar);var _this28=_possibleConstructorReturn(this,(Messagebar.__proto__||Object.getPrototypeOf(Messagebar)).call(this,params,[app]));var messagebar=_this28;var defaults={top:false,topOffset:0,bottomOffset:0,attachments:[],renderAttachments:undefined,renderAttachment:undefined,maxHeight:null,resizePage:true};// Extend defaults with modules params
messagebar.useModulesParams(defaults);messagebar.params=Utils.extend(defaults,params);// El
var $el=(0,_dom2.default)(messagebar.params.el);if($el.length===0)return _ret62=messagebar,_possibleConstructorReturn(_this28,_ret62);$el[0].f7Messagebar=messagebar;// Page and PageContent
var $pageEl=$el.parents('.page').eq(0);var $pageContentEl=$pageEl.find('.page-content').eq(0);// Area
var $areaEl=$el.find('.messagebar-area');// Textarea
var $textareaEl=void 0;if(messagebar.params.textareaEl){$textareaEl=(0,_dom2.default)(messagebar.params.textareaEl);}else{$textareaEl=$el.find('textarea');}// Attachments & Library
var $attachmentsEl=$el.find('.messagebar-attachments');var $sheetEl=$el.find('.messagebar-sheet');if(messagebar.params.top){$el.addClass('messagebar-top');}Utils.extend(messagebar,{$el:$el,el:$el[0],$areaEl:$areaEl,areaEl:$areaEl[0],$textareaEl:$textareaEl,textareaEl:$textareaEl[0],$attachmentsEl:$attachmentsEl,attachmentsEl:$attachmentsEl[0],attachmentsVisible:$attachmentsEl.hasClass('messagebar-attachments-visible'),$sheetEl:$sheetEl,sheetEl:$sheetEl[0],sheetVisible:$sheetEl.hasClass('messagebar-sheet-visible'),$pageEl:$pageEl,pageEl:$pageEl[0],$pageContentEl:$pageContentEl,pageContentEl:$pageContentEl,top:$el.hasClass('messagebar-top')||messagebar.params.top,attachments:[]});// Events
function onAppResize(){if(messagebar.params.resizePage){messagebar.resizePage();}}function onSubmit(e){e.preventDefault();}function onAttachmentClick(e){var index=(0,_dom2.default)(this).index();if((0,_dom2.default)(e.target).closest('.messagebar-attachment-delete').length){(0,_dom2.default)(this).trigger('messagebar:attachmentdelete',index);messagebar.emit('local::attachmentDelete messagebarAttachmentDelete',messagebar,this,index);}else{(0,_dom2.default)(this).trigger('messagebar:attachmentclick',index);messagebar.emit('local::attachmentClick messagebarAttachmentClick',messagebar,this,index);}}function onTextareaChange(){messagebar.checkEmptyState();messagebar.$el.trigger('messagebar:change');messagebar.emit('local::change messagebarChange',messagebar);}function onTextareaFocus(){messagebar.sheetHide();messagebar.$el.addClass('messagebar-focused');messagebar.$el.trigger('messagebar:focus');messagebar.emit('local::focus messagebarFocus',messagebar);}function onTextareaBlur(){messagebar.$el.removeClass('messagebar-focused');messagebar.$el.trigger('messagebar:blur');messagebar.emit('local::blur messagebarBlur',messagebar);}messagebar.attachEvents=function attachEvents(){$el.on('textarea:resize',onAppResize);$el.on('submit',onSubmit);$el.on('click','.messagebar-attachment',onAttachmentClick);$textareaEl.on('change input',onTextareaChange);$textareaEl.on('focus',onTextareaFocus);$textareaEl.on('blur',onTextareaBlur);app.on('resize',onAppResize);};messagebar.detachEvents=function detachEvents(){$el.off('textarea:resize',onAppResize);$el.off('submit',onSubmit);$el.off('click','.messagebar-attachment',onAttachmentClick);$textareaEl.off('change input',onTextareaChange);$textareaEl.off('focus',onTextareaFocus);$textareaEl.off('blur',onTextareaBlur);app.off('resize',onAppResize);};// Install Modules
messagebar.useModules();// Init
messagebar.init();return _ret63=messagebar,_possibleConstructorReturn(_this28,_ret63);}_createClass(Messagebar,[{key:'focus',value:function focus(){var messagebar=this;messagebar.$textareaEl.focus();return messagebar;}},{key:'blur',value:function blur(){var messagebar=this;messagebar.$textareaEl.blur();return messagebar;}},{key:'clear',value:function clear(){var messagebar=this;messagebar.$textareaEl.val('').trigger('change');return messagebar;}},{key:'getValue',value:function getValue(){var messagebar=this;return messagebar.$textareaEl.val().trim();}},{key:'setValue',value:function setValue(value){var messagebar=this;messagebar.$textareaEl.val(value).trigger('change');return messagebar;}},{key:'setPlaceholder',value:function setPlaceholder(placeholder){var messagebar=this;messagebar.$textareaEl.attr('placeholder',placeholder);return messagebar;}},{key:'resizePage',value:function resizePage(){var messagebar=this;var params=messagebar.params,$el=messagebar.$el,top=messagebar.top,$pageEl=messagebar.$pageEl,$pageContentEl=messagebar.$pageContentEl,$areaEl=messagebar.$areaEl,$textareaEl=messagebar.$textareaEl,$sheetEl=messagebar.$sheetEl,$attachmentsEl=messagebar.$attachmentsEl;var elHeight=$el[0].offsetHeight;var maxHeight=params.maxHeight;if(top);else{var currentPaddingBottom=parseInt($pageContentEl.css('padding-bottom'),10);var requiredPaddingBottom=elHeight+params.bottomOffset;if(requiredPaddingBottom!==currentPaddingBottom&&$pageContentEl.length){var currentPaddingTop=parseInt($pageContentEl.css('padding-top'),10);var pageScrollHeight=$pageContentEl[0].scrollHeight;var pageOffsetHeight=$pageContentEl[0].offsetHeight;var pageScrollTop=$pageContentEl[0].scrollTop;var scrollOnBottom=pageScrollTop===pageScrollHeight-pageOffsetHeight;if(!maxHeight){maxHeight=$pageEl[0].offsetHeight-currentPaddingTop-$sheetEl.outerHeight()-$attachmentsEl.outerHeight()-parseInt($areaEl.css('margin-top'),10)-parseInt($areaEl.css('margin-bottom'),10);}$textareaEl.css('max-height',maxHeight+'px');$pageContentEl.css('padding-bottom',requiredPaddingBottom+'px');if(scrollOnBottom){$pageContentEl.scrollTop($pageContentEl[0].scrollHeight-pageOffsetHeight);}$el.trigger('messagebar:resizepage');messagebar.emit('local::resizePage messagebarResizePage',messagebar);}}}},{key:'checkEmptyState',value:function checkEmptyState(){var messagebar=this;var $el=messagebar.$el,$textareaEl=messagebar.$textareaEl;var value=$textareaEl.val().trim();if(value&&value.length){$el.addClass('messagebar-with-value');}else{$el.removeClass('messagebar-with-value');}}},{key:'attachmentsCreate',value:function attachmentsCreate(){var innerHTML=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var messagebar=this;var $attachmentsEl=(0,_dom2.default)('<div class="messagebar-attachments">'+innerHTML+'</div>');$attachmentsEl.insertBefore(messagebar.$textareaEl);Utils.extend(messagebar,{$attachmentsEl:$attachmentsEl,attachmentsEl:$attachmentsEl[0]});return messagebar;}},{key:'attachmentsShow',value:function attachmentsShow(){var innerHTML=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var messagebar=this;messagebar.$attachmentsEl=messagebar.$el.find('.messagebar-attachments');if(messagebar.$attachmentsEl.length===0){messagebar.attachmentsCreate(innerHTML);}messagebar.$el.addClass('messagebar-attachments-visible');messagebar.attachmentsVisible=true;if(messagebar.params.resizePage){messagebar.resizePage();}return messagebar;}},{key:'attachmentsHide',value:function attachmentsHide(){var messagebar=this;messagebar.$el.removeClass('messagebar-attachments-visible');messagebar.attachmentsVisible=false;if(messagebar.params.resizePage){messagebar.resizePage();}return messagebar;}},{key:'attachmentsToggle',value:function attachmentsToggle(){var messagebar=this;if(messagebar.attachmentsVisible){messagebar.attachmentsHide();}else{messagebar.attachmentsShow();}return messagebar;}},{key:'renderAttachment',value:function renderAttachment(attachment){var messagebar=this;if(messagebar.params.renderAttachment){return messagebar.params.renderAttachment.call(messagebar,attachment);}return'\n      <div class="messagebar-attachment">\n        <img src="'+attachment+'">\n        <span class="messagebar-attachment-delete"></span>\n      </div>\n    ';}},{key:'renderAttachments',value:function renderAttachments(){var messagebar=this;var html=void 0;if(messagebar.params.renderAttachments){html=messagebar.params.renderAttachments.call(messagebar,messagebar.attachments);}else{html=''+messagebar.attachments.map(function(attachment){return messagebar.renderAttachment(attachment);}).join('');}if(messagebar.$attachmentsEl.length===0){messagebar.attachmentsCreate(html);}else{messagebar.$attachmentsEl.html(html);}}},{key:'sheetCreate',value:function sheetCreate(){var innerHTML=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var messagebar=this;var $sheetEl=(0,_dom2.default)('<div class="messagebar-sheet">'+innerHTML+'</div>');messagebar.$el.append($sheetEl);Utils.extend(messagebar,{$sheetEl:$sheetEl,sheetEl:$sheetEl[0]});return messagebar;}},{key:'sheetShow',value:function sheetShow(){var innerHTML=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var messagebar=this;messagebar.$sheetEl=messagebar.$el.find('.messagebar-sheet');if(messagebar.$sheetEl.length===0){messagebar.sheetCreate(innerHTML);}messagebar.$el.addClass('messagebar-sheet-visible');messagebar.sheetVisible=true;if(messagebar.params.resizePage){messagebar.resizePage();}return messagebar;}},{key:'sheetHide',value:function sheetHide(){var messagebar=this;messagebar.$el.removeClass('messagebar-sheet-visible');messagebar.sheetVisible=false;if(messagebar.params.resizePage){messagebar.resizePage();}return messagebar;}},{key:'sheetToggle',value:function sheetToggle(){var messagebar=this;if(messagebar.sheetVisible){messagebar.sheetHide();}else{messagebar.sheetShow();}return messagebar;}},{key:'init',value:function init(){var messagebar=this;messagebar.attachEvents();messagebar.checkEmptyState();return messagebar;}},{key:'destroy',value:function destroy(){var messagebar=this;messagebar.emit('local::beforeDestroy messagebarBeforeDestroy',messagebar);messagebar.$el.trigger('messagebar:beforedestroy',messagebar);messagebar.detachEvents();messagebar.$el[0].f7Messagebar=null;delete messagebar.$el[0].f7Messagebar;Utils.deleteProps(messagebar);}}]);return Messagebar;}(Framework7Class);var Messagebar$1={name:'messagebar',static:{Messagebar:Messagebar},create:function create(){var app=this;app.messagebar=ConstructorMethods({defaultSelector:'.messagebar',constructor:Messagebar,app:app,domProp:'f7Messagebar',addMethods:'clear getValue setValue setPlaceholder resizePage focus blur attachmentsCreate attachmentsShow attachmentsHide attachmentsToggle renderAttachments sheetCreate sheetShow sheetHide sheetToggle'.split(' ')});},on:{tabBeforeRemove:function tabBeforeRemove(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.messagebar-init').each(function(index,messagebarEl){app.messagebar.destroy(messagebarEl);});},tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.messagebar-init').each(function(index,messagebarEl){app.messagebar.create(Utils.extend({el:messagebarEl},(0,_dom2.default)(messagebarEl).dataset()));});},pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.messagebar-init').each(function(index,messagebarEl){app.messagebar.destroy(messagebarEl);});},pageInit:function pageInit(page){var app=this;page.$el.find('.messagebar-init').each(function(index,messagebarEl){app.messagebar.create(Utils.extend({el:messagebarEl},(0,_dom2.default)(messagebarEl).dataset()));});}}};function updateSize(){var swiper=this;var width=void 0;var height=void 0;var $el=swiper.$el;if(typeof swiper.params.width!=='undefined'){width=swiper.params.width;}else{width=$el[0].clientWidth;}if(typeof swiper.params.height!=='undefined'){height=swiper.params.height;}else{height=$el[0].clientHeight;}if(width===0&&swiper.isHorizontal()||height===0&&swiper.isVertical()){return;}// Subtract paddings
width=width-parseInt($el.css('padding-left'),10)-parseInt($el.css('padding-right'),10);height=height-parseInt($el.css('padding-top'),10)-parseInt($el.css('padding-bottom'),10);Utils.extend(swiper,{width:width,height:height,size:swiper.isHorizontal()?width:height});}function updateSlides(){var swiper=this;var params=swiper.params;var $wrapperEl=swiper.$wrapperEl,swiperSize=swiper.size,rtl=swiper.rtlTranslate,wrongRTL=swiper.wrongRTL;var isVirtual=swiper.virtual&&params.virtual.enabled;var previousSlidesLength=isVirtual?swiper.virtual.slides.length:swiper.slides.length;var slides=$wrapperEl.children('.'+swiper.params.slideClass);var slidesLength=isVirtual?swiper.virtual.slides.length:slides.length;var snapGrid=[];var slidesGrid=[];var slidesSizesGrid=[];var offsetBefore=params.slidesOffsetBefore;if(typeof offsetBefore==='function'){offsetBefore=params.slidesOffsetBefore.call(swiper);}var offsetAfter=params.slidesOffsetAfter;if(typeof offsetAfter==='function'){offsetAfter=params.slidesOffsetAfter.call(swiper);}var previousSnapGridLength=swiper.snapGrid.length;var previousSlidesGridLength=swiper.snapGrid.length;var spaceBetween=params.spaceBetween;var slidePosition=-offsetBefore;var prevSlideSize=0;var index=0;if(typeof swiperSize==='undefined'){return;}if(typeof spaceBetween==='string'&&spaceBetween.indexOf('%')>=0){spaceBetween=parseFloat(spaceBetween.replace('%',''))/100*swiperSize;}swiper.virtualSize=-spaceBetween;// reset margins
if(rtl)slides.css({marginLeft:'',marginTop:''});else slides.css({marginRight:'',marginBottom:''});var slidesNumberEvenToRows=void 0;if(params.slidesPerColumn>1){if(Math.floor(slidesLength/params.slidesPerColumn)===slidesLength/swiper.params.slidesPerColumn){slidesNumberEvenToRows=slidesLength;}else{slidesNumberEvenToRows=Math.ceil(slidesLength/params.slidesPerColumn)*params.slidesPerColumn;}if(params.slidesPerView!=='auto'&&params.slidesPerColumnFill==='row'){slidesNumberEvenToRows=Math.max(slidesNumberEvenToRows,params.slidesPerView*params.slidesPerColumn);}}// Calc slides
var slideSize=void 0;var slidesPerColumn=params.slidesPerColumn;var slidesPerRow=slidesNumberEvenToRows/slidesPerColumn;var numFullColumns=slidesPerRow-(params.slidesPerColumn*slidesPerRow-slidesLength);for(var _i30=0;_i30<slidesLength;_i30+=1){slideSize=0;var _slide=slides.eq(_i30);if(params.slidesPerColumn>1){// Set slides order
var newSlideOrderIndex=void 0;var column=void 0;var row=void 0;if(params.slidesPerColumnFill==='column'){column=Math.floor(_i30/slidesPerColumn);row=_i30-column*slidesPerColumn;if(column>numFullColumns||column===numFullColumns&&row===slidesPerColumn-1){row+=1;if(row>=slidesPerColumn){row=0;column+=1;}}newSlideOrderIndex=column+row*slidesNumberEvenToRows/slidesPerColumn;_slide.css({'-webkit-box-ordinal-group':newSlideOrderIndex,'-moz-box-ordinal-group':newSlideOrderIndex,'-ms-flex-order':newSlideOrderIndex,'-webkit-order':newSlideOrderIndex,order:newSlideOrderIndex});}else{row=Math.floor(_i30/slidesPerRow);column=_i30-row*slidesPerRow;}_slide.css('margin-'+(swiper.isHorizontal()?'top':'left'),row!==0&&params.spaceBetween&&params.spaceBetween+'px').attr('data-swiper-column',column).attr('data-swiper-row',row);}if(_slide.css('display')==='none')continue;// eslint-disable-line
if(params.slidesPerView==='auto'){var slideStyles=_ssrWindow.window.getComputedStyle(_slide[0],null);var currentTransform=_slide[0].style.transform;var currentWebKitTransform=_slide[0].style.webkitTransform;if(currentTransform){_slide[0].style.transform='none';}if(currentWebKitTransform){_slide[0].style.webkitTransform='none';}if(swiper.isHorizontal()){slideSize=_slide[0].getBoundingClientRect().width+parseFloat(slideStyles.getPropertyValue('margin-left'))+parseFloat(slideStyles.getPropertyValue('margin-right'));}else{slideSize=_slide[0].getBoundingClientRect().height+parseFloat(slideStyles.getPropertyValue('margin-top'))+parseFloat(slideStyles.getPropertyValue('margin-bottom'));}if(currentTransform){_slide[0].style.transform=currentTransform;}if(currentWebKitTransform){_slide[0].style.webkitTransform=currentWebKitTransform;}if(params.roundLengths)slideSize=Math.floor(slideSize);}else{slideSize=(swiperSize-(params.slidesPerView-1)*spaceBetween)/params.slidesPerView;if(params.roundLengths)slideSize=Math.floor(slideSize);if(slides[_i30]){if(swiper.isHorizontal()){slides[_i30].style.width=slideSize+'px';}else{slides[_i30].style.height=slideSize+'px';}}}if(slides[_i30]){slides[_i30].swiperSlideSize=slideSize;}slidesSizesGrid.push(slideSize);if(params.centeredSlides){slidePosition=slidePosition+slideSize/2+prevSlideSize/2+spaceBetween;if(prevSlideSize===0&&_i30!==0)slidePosition=slidePosition-swiperSize/2-spaceBetween;if(_i30===0)slidePosition=slidePosition-swiperSize/2-spaceBetween;if(Math.abs(slidePosition)<1/1000)slidePosition=0;if(index%params.slidesPerGroup===0)snapGrid.push(slidePosition);slidesGrid.push(slidePosition);}else{if(index%params.slidesPerGroup===0)snapGrid.push(slidePosition);slidesGrid.push(slidePosition);slidePosition=slidePosition+slideSize+spaceBetween;}swiper.virtualSize+=slideSize+spaceBetween;prevSlideSize=slideSize;index+=1;}swiper.virtualSize=Math.max(swiper.virtualSize,swiperSize)+offsetAfter;var newSlidesGrid=void 0;if(rtl&&wrongRTL&&(params.effect==='slide'||params.effect==='coverflow')){$wrapperEl.css({width:swiper.virtualSize+params.spaceBetween+'px'});}if(!Support.flexbox||params.setWrapperSize){if(swiper.isHorizontal())$wrapperEl.css({width:swiper.virtualSize+params.spaceBetween+'px'});else $wrapperEl.css({height:swiper.virtualSize+params.spaceBetween+'px'});}if(params.slidesPerColumn>1){swiper.virtualSize=(slideSize+params.spaceBetween)*slidesNumberEvenToRows;swiper.virtualSize=Math.ceil(swiper.virtualSize/params.slidesPerColumn)-params.spaceBetween;if(swiper.isHorizontal())$wrapperEl.css({width:swiper.virtualSize+params.spaceBetween+'px'});else $wrapperEl.css({height:swiper.virtualSize+params.spaceBetween+'px'});if(params.centeredSlides){newSlidesGrid=[];for(var _i31=0;_i31<snapGrid.length;_i31+=1){if(snapGrid[_i31]<swiper.virtualSize+snapGrid[0])newSlidesGrid.push(snapGrid[_i31]);}snapGrid=newSlidesGrid;}}// Remove last grid elements depending on width
if(!params.centeredSlides){newSlidesGrid=[];for(var _i32=0;_i32<snapGrid.length;_i32+=1){if(snapGrid[_i32]<=swiper.virtualSize-swiperSize){newSlidesGrid.push(snapGrid[_i32]);}}snapGrid=newSlidesGrid;if(Math.floor(swiper.virtualSize-swiperSize)-Math.floor(snapGrid[snapGrid.length-1])>1){snapGrid.push(swiper.virtualSize-swiperSize);}}if(snapGrid.length===0)snapGrid=[0];if(params.spaceBetween!==0){if(swiper.isHorizontal()){if(rtl)slides.css({marginLeft:spaceBetween+'px'});else slides.css({marginRight:spaceBetween+'px'});}else slides.css({marginBottom:spaceBetween+'px'});}Utils.extend(swiper,{slides:slides,snapGrid:snapGrid,slidesGrid:slidesGrid,slidesSizesGrid:slidesSizesGrid});if(slidesLength!==previousSlidesLength){swiper.emit('slidesLengthChange');}if(snapGrid.length!==previousSnapGridLength){if(swiper.params.watchOverflow)swiper.checkOverflow();swiper.emit('snapGridLengthChange');}if(slidesGrid.length!==previousSlidesGridLength){swiper.emit('slidesGridLengthChange');}if(params.watchSlidesProgress||params.watchSlidesVisibility){swiper.updateSlidesOffset();}}function updateAutoHeight(speed){var swiper=this;var activeSlides=[];var newHeight=0;var i=void 0;if(typeof speed==='number'){swiper.setTransition(speed);}else if(speed===true){swiper.setTransition(swiper.params.speed);}// Find slides currently in view
if(swiper.params.slidesPerView!=='auto'&&swiper.params.slidesPerView>1){for(i=0;i<Math.ceil(swiper.params.slidesPerView);i+=1){var _index=swiper.activeIndex+i;if(_index>swiper.slides.length)break;activeSlides.push(swiper.slides.eq(_index)[0]);}}else{activeSlides.push(swiper.slides.eq(swiper.activeIndex)[0]);}// Find new height from highest slide in view
for(i=0;i<activeSlides.length;i+=1){if(typeof activeSlides[i]!=='undefined'){var height=activeSlides[i].offsetHeight;newHeight=height>newHeight?height:newHeight;}}// Update Height
if(newHeight)swiper.$wrapperEl.css('height',newHeight+'px');}function updateSlidesOffset(){var swiper=this;var slides=swiper.slides;for(var _i33=0;_i33<slides.length;_i33+=1){slides[_i33].swiperSlideOffset=swiper.isHorizontal()?slides[_i33].offsetLeft:slides[_i33].offsetTop;}}function updateSlidesProgress(){var translate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this&&this.translate||0;var swiper=this;var params=swiper.params;var slides=swiper.slides,rtl=swiper.rtlTranslate;if(slides.length===0)return;if(typeof slides[0].swiperSlideOffset==='undefined')swiper.updateSlidesOffset();var offsetCenter=-translate;if(rtl)offsetCenter=translate;// Visible Slides
slides.removeClass(params.slideVisibleClass);for(var _i34=0;_i34<slides.length;_i34+=1){var _slide2=slides[_i34];var slideProgress=(offsetCenter+(params.centeredSlides?swiper.minTranslate():0)-_slide2.swiperSlideOffset)/(_slide2.swiperSlideSize+params.spaceBetween);if(params.watchSlidesVisibility){var slideBefore=-(offsetCenter-_slide2.swiperSlideOffset);var slideAfter=slideBefore+swiper.slidesSizesGrid[_i34];var isVisible=slideBefore>=0&&slideBefore<swiper.size||slideAfter>0&&slideAfter<=swiper.size||slideBefore<=0&&slideAfter>=swiper.size;if(isVisible){slides.eq(_i34).addClass(params.slideVisibleClass);}}_slide2.progress=rtl?-slideProgress:slideProgress;}}function updateProgress(){var translate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this&&this.translate||0;var swiper=this;var params=swiper.params;var translatesDiff=swiper.maxTranslate()-swiper.minTranslate();var progress=swiper.progress,isBeginning=swiper.isBeginning,isEnd=swiper.isEnd;var wasBeginning=isBeginning;var wasEnd=isEnd;if(translatesDiff===0){progress=0;isBeginning=true;isEnd=true;}else{progress=(translate-swiper.minTranslate())/translatesDiff;isBeginning=progress<=0;isEnd=progress>=1;}Utils.extend(swiper,{progress:progress,isBeginning:isBeginning,isEnd:isEnd});if(params.watchSlidesProgress||params.watchSlidesVisibility)swiper.updateSlidesProgress(translate);if(isBeginning&&!wasBeginning){swiper.emit('reachBeginning toEdge');}if(isEnd&&!wasEnd){swiper.emit('reachEnd toEdge');}if(wasBeginning&&!isBeginning||wasEnd&&!isEnd){swiper.emit('fromEdge');}swiper.emit('progress',progress);}function updateSlidesClasses(){var swiper=this;var slides=swiper.slides,params=swiper.params,$wrapperEl=swiper.$wrapperEl,activeIndex=swiper.activeIndex,realIndex=swiper.realIndex;var isVirtual=swiper.virtual&&params.virtual.enabled;slides.removeClass(params.slideActiveClass+' '+params.slideNextClass+' '+params.slidePrevClass+' '+params.slideDuplicateActiveClass+' '+params.slideDuplicateNextClass+' '+params.slideDuplicatePrevClass);var activeSlide=void 0;if(isVirtual){activeSlide=swiper.$wrapperEl.find('.'+params.slideClass+'[data-swiper-slide-index="'+activeIndex+'"]');}else{activeSlide=slides.eq(activeIndex);}// Active classes
activeSlide.addClass(params.slideActiveClass);if(params.loop){// Duplicate to all looped slides
if(activeSlide.hasClass(params.slideDuplicateClass)){$wrapperEl.children('.'+params.slideClass+':not(.'+params.slideDuplicateClass+')[data-swiper-slide-index="'+realIndex+'"]').addClass(params.slideDuplicateActiveClass);}else{$wrapperEl.children('.'+params.slideClass+'.'+params.slideDuplicateClass+'[data-swiper-slide-index="'+realIndex+'"]').addClass(params.slideDuplicateActiveClass);}}// Next Slide
var nextSlide=activeSlide.nextAll('.'+params.slideClass).eq(0).addClass(params.slideNextClass);if(params.loop&&nextSlide.length===0){nextSlide=slides.eq(0);nextSlide.addClass(params.slideNextClass);}// Prev Slide
var prevSlide=activeSlide.prevAll('.'+params.slideClass).eq(0).addClass(params.slidePrevClass);if(params.loop&&prevSlide.length===0){prevSlide=slides.eq(-1);prevSlide.addClass(params.slidePrevClass);}if(params.loop){// Duplicate to all looped slides
if(nextSlide.hasClass(params.slideDuplicateClass)){$wrapperEl.children('.'+params.slideClass+':not(.'+params.slideDuplicateClass+')[data-swiper-slide-index="'+nextSlide.attr('data-swiper-slide-index')+'"]').addClass(params.slideDuplicateNextClass);}else{$wrapperEl.children('.'+params.slideClass+'.'+params.slideDuplicateClass+'[data-swiper-slide-index="'+nextSlide.attr('data-swiper-slide-index')+'"]').addClass(params.slideDuplicateNextClass);}if(prevSlide.hasClass(params.slideDuplicateClass)){$wrapperEl.children('.'+params.slideClass+':not(.'+params.slideDuplicateClass+')[data-swiper-slide-index="'+prevSlide.attr('data-swiper-slide-index')+'"]').addClass(params.slideDuplicatePrevClass);}else{$wrapperEl.children('.'+params.slideClass+'.'+params.slideDuplicateClass+'[data-swiper-slide-index="'+prevSlide.attr('data-swiper-slide-index')+'"]').addClass(params.slideDuplicatePrevClass);}}}function updateActiveIndex(newActiveIndex){var swiper=this;var translate=swiper.rtlTranslate?swiper.translate:-swiper.translate;var slidesGrid=swiper.slidesGrid,snapGrid=swiper.snapGrid,params=swiper.params,previousIndex=swiper.activeIndex,previousRealIndex=swiper.realIndex,previousSnapIndex=swiper.snapIndex;var activeIndex=newActiveIndex;var snapIndex=void 0;if(typeof activeIndex==='undefined'){for(var _i35=0;_i35<slidesGrid.length;_i35+=1){if(typeof slidesGrid[_i35+1]!=='undefined'){if(translate>=slidesGrid[_i35]&&translate<slidesGrid[_i35+1]-(slidesGrid[_i35+1]-slidesGrid[_i35])/2){activeIndex=_i35;}else if(translate>=slidesGrid[_i35]&&translate<slidesGrid[_i35+1]){activeIndex=_i35+1;}}else if(translate>=slidesGrid[_i35]){activeIndex=_i35;}}// Normalize slideIndex
if(params.normalizeSlideIndex){if(activeIndex<0||typeof activeIndex==='undefined')activeIndex=0;}}if(snapGrid.indexOf(translate)>=0){snapIndex=snapGrid.indexOf(translate);}else{snapIndex=Math.floor(activeIndex/params.slidesPerGroup);}if(snapIndex>=snapGrid.length)snapIndex=snapGrid.length-1;if(activeIndex===previousIndex){if(snapIndex!==previousSnapIndex){swiper.snapIndex=snapIndex;swiper.emit('snapIndexChange');}return;}// Get real index
var realIndex=parseInt(swiper.slides.eq(activeIndex).attr('data-swiper-slide-index')||activeIndex,10);Utils.extend(swiper,{snapIndex:snapIndex,realIndex:realIndex,previousIndex:previousIndex,activeIndex:activeIndex});swiper.emit('activeIndexChange');swiper.emit('snapIndexChange');if(previousRealIndex!==realIndex){swiper.emit('realIndexChange');}swiper.emit('slideChange');}function updateClickedSlide(e){var swiper=this;var params=swiper.params;var slide=(0,_dom2.default)(e.target).closest('.'+params.slideClass)[0];var slideFound=false;if(slide){for(var _i36=0;_i36<swiper.slides.length;_i36+=1){if(swiper.slides[_i36]===slide)slideFound=true;}}if(slide&&slideFound){swiper.clickedSlide=slide;if(swiper.virtual&&swiper.params.virtual.enabled){swiper.clickedIndex=parseInt((0,_dom2.default)(slide).attr('data-swiper-slide-index'),10);}else{swiper.clickedIndex=(0,_dom2.default)(slide).index();}}else{swiper.clickedSlide=undefined;swiper.clickedIndex=undefined;return;}if(params.slideToClickedSlide&&swiper.clickedIndex!==undefined&&swiper.clickedIndex!==swiper.activeIndex){swiper.slideToClickedSlide();}}var update={updateSize:updateSize,updateSlides:updateSlides,updateAutoHeight:updateAutoHeight,updateSlidesOffset:updateSlidesOffset,updateSlidesProgress:updateSlidesProgress,updateProgress:updateProgress,updateSlidesClasses:updateSlidesClasses,updateActiveIndex:updateActiveIndex,updateClickedSlide:updateClickedSlide};function getTranslate(){var axis=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.isHorizontal()?'x':'y';var swiper=this;var params=swiper.params,rtl=swiper.rtlTranslate,translate=swiper.translate,$wrapperEl=swiper.$wrapperEl;if(params.virtualTranslate){return rtl?-translate:translate;}var currentTranslate=Utils.getTranslate($wrapperEl[0],axis);if(rtl)currentTranslate=-currentTranslate;return currentTranslate||0;}function setTranslate(translate,byController){var swiper=this;var rtl=swiper.rtlTranslate,params=swiper.params,$wrapperEl=swiper.$wrapperEl,progress=swiper.progress;var x=0;var y=0;var z=0;if(swiper.isHorizontal()){x=rtl?-translate:translate;}else{y=translate;}if(params.roundLengths){x=Math.floor(x);y=Math.floor(y);}if(!params.virtualTranslate){if(Support.transforms3d)$wrapperEl.transform('translate3d('+x+'px, '+y+'px, '+z+'px)');else $wrapperEl.transform('translate('+x+'px, '+y+'px)');}swiper.translate=swiper.isHorizontal()?x:y;// Check if we need to update progress
var newProgress=void 0;var translatesDiff=swiper.maxTranslate()-swiper.minTranslate();if(translatesDiff===0){newProgress=0;}else{newProgress=(translate-swiper.minTranslate())/translatesDiff;}if(newProgress!==progress){swiper.updateProgress(translate);}swiper.emit('setTranslate',swiper.translate,byController);}function minTranslate(){return-this.snapGrid[0];}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1];}var translate={getTranslate:getTranslate,setTranslate:setTranslate,minTranslate:minTranslate,maxTranslate:maxTranslate};function setTransition(duration,byController){var swiper=this;swiper.$wrapperEl.transition(duration);swiper.emit('setTransition',duration,byController);}function transitionStart(){var runCallbacks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var direction=arguments[1];var swiper=this;var activeIndex=swiper.activeIndex,params=swiper.params,previousIndex=swiper.previousIndex;if(params.autoHeight){swiper.updateAutoHeight();}var dir=direction;if(!dir){if(activeIndex>previousIndex)dir='next';else if(activeIndex<previousIndex)dir='prev';else dir='reset';}swiper.emit('transitionStart');if(runCallbacks&&activeIndex!==previousIndex){if(dir==='reset'){swiper.emit('slideResetTransitionStart');return;}swiper.emit('slideChangeTransitionStart');if(dir==='next'){swiper.emit('slideNextTransitionStart');}else{swiper.emit('slidePrevTransitionStart');}}}function transitionEnd(){var runCallbacks=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var direction=arguments[1];var swiper=this;var activeIndex=swiper.activeIndex,previousIndex=swiper.previousIndex;swiper.animating=false;swiper.setTransition(0);var dir=direction;if(!dir){if(activeIndex>previousIndex)dir='next';else if(activeIndex<previousIndex)dir='prev';else dir='reset';}swiper.emit('transitionEnd');if(runCallbacks&&activeIndex!==previousIndex){if(dir==='reset'){swiper.emit('slideResetTransitionEnd');return;}swiper.emit('slideChangeTransitionEnd');if(dir==='next'){swiper.emit('slideNextTransitionEnd');}else{swiper.emit('slidePrevTransitionEnd');}}}var transition={setTransition:setTransition,transitionStart:transitionStart,transitionEnd:transitionEnd};function slideTo(){var index=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var speed=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.params.speed;var runCallbacks=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var internal=arguments[3];var swiper=this;var slideIndex=index;if(slideIndex<0)slideIndex=0;var params=swiper.params,snapGrid=swiper.snapGrid,slidesGrid=swiper.slidesGrid,previousIndex=swiper.previousIndex,activeIndex=swiper.activeIndex,rtl=swiper.rtlTranslate;if(swiper.animating&&params.preventIntercationOnTransition){return false;}var snapIndex=Math.floor(slideIndex/params.slidesPerGroup);if(snapIndex>=snapGrid.length)snapIndex=snapGrid.length-1;if((activeIndex||params.initialSlide||0)===(previousIndex||0)&&runCallbacks){swiper.emit('beforeSlideChangeStart');}var translate=-snapGrid[snapIndex];// Update progress
swiper.updateProgress(translate);// Normalize slideIndex
if(params.normalizeSlideIndex){for(var _i37=0;_i37<slidesGrid.length;_i37+=1){if(-Math.floor(translate*100)>=Math.floor(slidesGrid[_i37]*100)){slideIndex=_i37;}}}// Directions locks
if(swiper.initialized&&slideIndex!==activeIndex){if(!swiper.allowSlideNext&&translate<swiper.translate&&translate<swiper.minTranslate()){return false;}if(!swiper.allowSlidePrev&&translate>swiper.translate&&translate>swiper.maxTranslate()){if((activeIndex||0)!==slideIndex)return false;}}var direction=void 0;if(slideIndex>activeIndex)direction='next';else if(slideIndex<activeIndex)direction='prev';else direction='reset';// Update Index
if(rtl&&-translate===swiper.translate||!rtl&&translate===swiper.translate){swiper.updateActiveIndex(slideIndex);// Update Height
if(params.autoHeight){swiper.updateAutoHeight();}swiper.updateSlidesClasses();if(params.effect!=='slide'){swiper.setTranslate(translate);}if(direction!=='reset'){swiper.transitionStart(runCallbacks,direction);swiper.transitionEnd(runCallbacks,direction);}return false;}if(speed===0||!Support.transition){swiper.setTransition(0);swiper.setTranslate(translate);swiper.updateActiveIndex(slideIndex);swiper.updateSlidesClasses();swiper.emit('beforeTransitionStart',speed,internal);swiper.transitionStart(runCallbacks,direction);swiper.transitionEnd(runCallbacks,direction);}else{swiper.setTransition(speed);swiper.setTranslate(translate);swiper.updateActiveIndex(slideIndex);swiper.updateSlidesClasses();swiper.emit('beforeTransitionStart',speed,internal);swiper.transitionStart(runCallbacks,direction);if(!swiper.animating){swiper.animating=true;if(!swiper.onSlideToWrapperTransitionEnd){swiper.onSlideToWrapperTransitionEnd=function transitionEnd(e){if(!swiper||swiper.destroyed)return;if(e.target!==this)return;swiper.$wrapperEl[0].removeEventListener('transitionend',swiper.onSlideToWrapperTransitionEnd);swiper.$wrapperEl[0].removeEventListener('webkitTransitionEnd',swiper.onSlideToWrapperTransitionEnd);swiper.transitionEnd(runCallbacks,direction);};}swiper.$wrapperEl[0].addEventListener('transitionend',swiper.onSlideToWrapperTransitionEnd);swiper.$wrapperEl[0].addEventListener('webkitTransitionEnd',swiper.onSlideToWrapperTransitionEnd);}}return true;}function slideToLoop(){var index=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var speed=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.params.speed;var runCallbacks=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var internal=arguments[3];var swiper=this;var newIndex=index;if(swiper.params.loop){newIndex+=swiper.loopedSlides;}return swiper.slideTo(newIndex,speed,runCallbacks,internal);}/* eslint no-unused-vars: "off" */function slideNext(){var speed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.params.speed;var runCallbacks=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var internal=arguments[2];var swiper=this;var params=swiper.params,animating=swiper.animating;if(params.loop){if(animating)return false;swiper.loopFix();// eslint-disable-next-line
swiper._clientLeft=swiper.$wrapperEl[0].clientLeft;return swiper.slideTo(swiper.activeIndex+params.slidesPerGroup,speed,runCallbacks,internal);}return swiper.slideTo(swiper.activeIndex+params.slidesPerGroup,speed,runCallbacks,internal);}/* eslint no-unused-vars: "off" */function slidePrev(){var speed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.params.speed;var runCallbacks=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var internal=arguments[2];var swiper=this;var params=swiper.params,animating=swiper.animating,snapGrid=swiper.snapGrid,slidesGrid=swiper.slidesGrid,rtlTranslate=swiper.rtlTranslate;if(params.loop){if(animating)return false;swiper.loopFix();// eslint-disable-next-line
swiper._clientLeft=swiper.$wrapperEl[0].clientLeft;}var translate=rtlTranslate?swiper.translate:-swiper.translate;var normalizedTranslate=translate<0?-Math.floor(Math.abs(translate)):Math.floor(translate);var normalizedSnapGrid=snapGrid.map(function(val){return Math.floor(val);});var normalizedSlidesGrid=slidesGrid.map(function(val){return Math.floor(val);});var currentSnap=snapGrid[normalizedSnapGrid.indexOf(normalizedTranslate)];var prevSnap=snapGrid[normalizedSnapGrid.indexOf(normalizedTranslate)-1];var prevIndex=void 0;if(typeof prevSnap!=='undefined'){prevIndex=slidesGrid.indexOf(prevSnap);if(prevIndex<0)prevIndex=swiper.activeIndex-1;}return swiper.slideTo(prevIndex,speed,runCallbacks,internal);}/* eslint no-unused-vars: "off" */function slideReset(){var speed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.params.speed;var runCallbacks=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var internal=arguments[2];var swiper=this;return swiper.slideTo(swiper.activeIndex,speed,runCallbacks,internal);}/* eslint no-unused-vars: "off" */function slideToClosest(){var speed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.params.speed;var runCallbacks=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var internal=arguments[2];var swiper=this;var index=swiper.activeIndex;var snapIndex=Math.floor(index/swiper.params.slidesPerGroup);if(snapIndex<swiper.snapGrid.length-1){var _translate=swiper.rtlTranslate?swiper.translate:-swiper.translate;var currentSnap=swiper.snapGrid[snapIndex];var nextSnap=swiper.snapGrid[snapIndex+1];if(_translate-currentSnap>(nextSnap-currentSnap)/2){index=swiper.params.slidesPerGroup;}}return swiper.slideTo(index,speed,runCallbacks,internal);}function slideToClickedSlide(){var swiper=this;var params=swiper.params,$wrapperEl=swiper.$wrapperEl;var slidesPerView=params.slidesPerView==='auto'?swiper.slidesPerViewDynamic():params.slidesPerView;var slideToIndex=swiper.clickedIndex;var realIndex=void 0;if(params.loop){if(swiper.animating)return;realIndex=parseInt((0,_dom2.default)(swiper.clickedSlide).attr('data-swiper-slide-index'),10);if(params.centeredSlides){if(slideToIndex<swiper.loopedSlides-slidesPerView/2||slideToIndex>swiper.slides.length-swiper.loopedSlides+slidesPerView/2){swiper.loopFix();slideToIndex=$wrapperEl.children('.'+params.slideClass+'[data-swiper-slide-index="'+realIndex+'"]:not(.'+params.slideDuplicateClass+')').eq(0).index();Utils.nextTick(function(){swiper.slideTo(slideToIndex);});}else{swiper.slideTo(slideToIndex);}}else if(slideToIndex>swiper.slides.length-slidesPerView){swiper.loopFix();slideToIndex=$wrapperEl.children('.'+params.slideClass+'[data-swiper-slide-index="'+realIndex+'"]:not(.'+params.slideDuplicateClass+')').eq(0).index();Utils.nextTick(function(){swiper.slideTo(slideToIndex);});}else{swiper.slideTo(slideToIndex);}}else{swiper.slideTo(slideToIndex);}}var slide={slideTo:slideTo,slideToLoop:slideToLoop,slideNext:slideNext,slidePrev:slidePrev,slideReset:slideReset,slideToClosest:slideToClosest,slideToClickedSlide:slideToClickedSlide};function loopCreate(){var swiper=this;var params=swiper.params,$wrapperEl=swiper.$wrapperEl;// Remove duplicated slides
$wrapperEl.children('.'+params.slideClass+'.'+params.slideDuplicateClass).remove();var slides=$wrapperEl.children('.'+params.slideClass);if(params.loopFillGroupWithBlank){var blankSlidesNum=params.slidesPerGroup-slides.length%params.slidesPerGroup;if(blankSlidesNum!==params.slidesPerGroup){for(var _i38=0;_i38<blankSlidesNum;_i38+=1){var blankNode=(0,_dom2.default)(_ssrWindow.document.createElement('div')).addClass(params.slideClass+' '+params.slideBlankClass);$wrapperEl.append(blankNode);}slides=$wrapperEl.children('.'+params.slideClass);}}if(params.slidesPerView==='auto'&&!params.loopedSlides)params.loopedSlides=slides.length;swiper.loopedSlides=parseInt(params.loopedSlides||params.slidesPerView,10);swiper.loopedSlides+=params.loopAdditionalSlides;if(swiper.loopedSlides>slides.length){swiper.loopedSlides=slides.length;}var prependSlides=[];var appendSlides=[];slides.each(function(index,el){var slide=(0,_dom2.default)(el);if(index<swiper.loopedSlides)appendSlides.push(el);if(index<slides.length&&index>=slides.length-swiper.loopedSlides)prependSlides.push(el);slide.attr('data-swiper-slide-index',index);});for(var _i39=0;_i39<appendSlides.length;_i39+=1){$wrapperEl.append((0,_dom2.default)(appendSlides[_i39].cloneNode(true)).addClass(params.slideDuplicateClass));}for(var _i40=prependSlides.length-1;_i40>=0;_i40-=1){$wrapperEl.prepend((0,_dom2.default)(prependSlides[_i40].cloneNode(true)).addClass(params.slideDuplicateClass));}}function loopFix(){var swiper=this;var params=swiper.params,activeIndex=swiper.activeIndex,slides=swiper.slides,loopedSlides=swiper.loopedSlides,allowSlidePrev=swiper.allowSlidePrev,allowSlideNext=swiper.allowSlideNext,snapGrid=swiper.snapGrid,rtl=swiper.rtlTranslate;var newIndex=void 0;swiper.allowSlidePrev=true;swiper.allowSlideNext=true;var snapTranslate=-snapGrid[activeIndex];var diff=snapTranslate-swiper.getTranslate();// Fix For Negative Oversliding
if(activeIndex<loopedSlides){newIndex=slides.length-loopedSlides*3+activeIndex;newIndex+=loopedSlides;var slideChanged=swiper.slideTo(newIndex,0,false,true);if(slideChanged&&diff!==0){swiper.setTranslate((rtl?-swiper.translate:swiper.translate)-diff);}}else if(params.slidesPerView==='auto'&&activeIndex>=loopedSlides*2||activeIndex>=slides.length-loopedSlides){// Fix For Positive Oversliding
newIndex=-slides.length+activeIndex+loopedSlides;newIndex+=loopedSlides;var _slideChanged=swiper.slideTo(newIndex,0,false,true);if(_slideChanged&&diff!==0){swiper.setTranslate((rtl?-swiper.translate:swiper.translate)-diff);}}swiper.allowSlidePrev=allowSlidePrev;swiper.allowSlideNext=allowSlideNext;}function loopDestroy(){var swiper=this;var $wrapperEl=swiper.$wrapperEl,params=swiper.params,slides=swiper.slides;$wrapperEl.children('.'+params.slideClass+'.'+params.slideDuplicateClass).remove();slides.removeAttr('data-swiper-slide-index');}var loop={loopCreate:loopCreate,loopFix:loopFix,loopDestroy:loopDestroy};function setGrabCursor(moving){var swiper=this;if(Support.touch||!swiper.params.simulateTouch||swiper.params.watchOverflow&&swiper.isLocked)return;var el=swiper.el;el.style.cursor='move';el.style.cursor=moving?'-webkit-grabbing':'-webkit-grab';el.style.cursor=moving?'-moz-grabbin':'-moz-grab';el.style.cursor=moving?'grabbing':'grab';}function unsetGrabCursor(){var swiper=this;if(Support.touch||swiper.params.watchOverflow&&swiper.isLocked)return;swiper.el.style.cursor='';}var grabCursor={setGrabCursor:setGrabCursor,unsetGrabCursor:unsetGrabCursor};function appendSlide(slides){var swiper=this;var $wrapperEl=swiper.$wrapperEl,params=swiper.params;if(params.loop){swiper.loopDestroy();}if((typeof slides==='undefined'?'undefined':_typeof(slides))==='object'&&'length'in slides){for(var _i41=0;_i41<slides.length;_i41+=1){if(slides[_i41])$wrapperEl.append(slides[_i41]);}}else{$wrapperEl.append(slides);}if(params.loop){swiper.loopCreate();}if(!(params.observer&&Support.observer)){swiper.update();}}function prependSlide(slides){var swiper=this;var params=swiper.params,$wrapperEl=swiper.$wrapperEl,activeIndex=swiper.activeIndex;if(params.loop){swiper.loopDestroy();}var newActiveIndex=activeIndex+1;if((typeof slides==='undefined'?'undefined':_typeof(slides))==='object'&&'length'in slides){for(var _i42=0;_i42<slides.length;_i42+=1){if(slides[_i42])$wrapperEl.prepend(slides[_i42]);}newActiveIndex=activeIndex+slides.length;}else{$wrapperEl.prepend(slides);}if(params.loop){swiper.loopCreate();}if(!(params.observer&&Support.observer)){swiper.update();}swiper.slideTo(newActiveIndex,0,false);}function addSlide(index,slides){var swiper=this;var $wrapperEl=swiper.$wrapperEl,params=swiper.params,activeIndex=swiper.activeIndex;var activeIndexBuffer=activeIndex;if(params.loop){activeIndexBuffer-=swiper.loopedSlides;swiper.loopDestroy();swiper.slides=$wrapperEl.children('.'+params.slideClass);}var baseLength=swiper.slides.length;if(index<=0){swiper.prependSlide(slides);return;}else if(index>=baseLength){swiper.appendSlide(slides);return;}var newActiveIndex=activeIndexBuffer>index?activeIndexBuffer+1:activeIndexBuffer;var slidesBuffer=[];for(var _i43=baseLength-1;_i43>=index;_i43-=1){var currentSlide=swiper.slides.eq(_i43);currentSlide.remove();slidesBuffer.unshift(currentSlide);}if((typeof slides==='undefined'?'undefined':_typeof(slides))==='object'&&'length'in slides){for(var _i44=0;_i44<slides.length;_i44+=1){if(slides[_i44])$wrapperEl.append(slides[_i44]);}newActiveIndex=activeIndexBuffer>index?activeIndexBuffer+slides.length:activeIndexBuffer;}else{$wrapperEl.append(slides);}for(var _i45=0;_i45<slidesBuffer.length;_i45+=1){$wrapperEl.append(slidesBuffer[_i45]);}if(params.loop){swiper.loopCreate();}if(!(params.observer&&Support.observer)){swiper.update();}if(params.loop){swiper.slideTo(newActiveIndex+swiper.loopedSlides,0,false);}else{swiper.slideTo(newActiveIndex,0,false);}}function removeSlide(slidesIndexes){var swiper=this;var params=swiper.params,$wrapperEl=swiper.$wrapperEl,activeIndex=swiper.activeIndex;var activeIndexBuffer=activeIndex;if(params.loop){activeIndexBuffer-=swiper.loopedSlides;swiper.loopDestroy();swiper.slides=$wrapperEl.children('.'+params.slideClass);}var newActiveIndex=activeIndexBuffer;var indexToRemove=void 0;if((typeof slidesIndexes==='undefined'?'undefined':_typeof(slidesIndexes))==='object'&&'length'in slidesIndexes){for(var _i46=0;_i46<slidesIndexes.length;_i46+=1){indexToRemove=slidesIndexes[_i46];if(swiper.slides[indexToRemove])swiper.slides.eq(indexToRemove).remove();if(indexToRemove<newActiveIndex)newActiveIndex-=1;}newActiveIndex=Math.max(newActiveIndex,0);}else{indexToRemove=slidesIndexes;if(swiper.slides[indexToRemove])swiper.slides.eq(indexToRemove).remove();if(indexToRemove<newActiveIndex)newActiveIndex-=1;newActiveIndex=Math.max(newActiveIndex,0);}if(params.loop){swiper.loopCreate();}if(!(params.observer&&Support.observer)){swiper.update();}if(params.loop){swiper.slideTo(newActiveIndex+swiper.loopedSlides,0,false);}else{swiper.slideTo(newActiveIndex,0,false);}}function removeAllSlides(){var swiper=this;var slidesIndexes=[];for(var _i47=0;_i47<swiper.slides.length;_i47+=1){slidesIndexes.push(_i47);}swiper.removeSlide(slidesIndexes);}var manipulation={appendSlide:appendSlide,prependSlide:prependSlide,addSlide:addSlide,removeSlide:removeSlide,removeAllSlides:removeAllSlides};function onTouchStart(event){var swiper=this;var data=swiper.touchEventsData;var params=swiper.params,touches=swiper.touches;if(swiper.animating&&params.preventIntercationOnTransition){return;}var e=event;if(e.originalEvent)e=e.originalEvent;data.isTouchEvent=e.type==='touchstart';if(!data.isTouchEvent&&'which'in e&&e.which===3)return;if(data.isTouched&&data.isMoved)return;if(params.noSwiping&&(0,_dom2.default)(e.target).closest(params.noSwipingSelector?params.noSwipingSelector:'.'+params.noSwipingClass)[0]){swiper.allowClick=true;return;}if(params.swipeHandler){if(!(0,_dom2.default)(e).closest(params.swipeHandler)[0])return;}touches.currentX=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touches.currentY=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;var startX=touches.currentX;var startY=touches.currentY;// Do NOT start if iOS edge swipe is detected. Otherwise iOS app (UIWebView) cannot swipe-to-go-back anymore
if(Device.ios&&!Device.cordova&&params.iOSEdgeSwipeDetection&&(startX<=params.iOSEdgeSwipeThreshold||startX>=_ssrWindow.window.screen.width-params.iOSEdgeSwipeThreshold)){return;}Utils.extend(data,{isTouched:true,isMoved:false,allowTouchCallbacks:true,isScrolling:undefined,startMoving:undefined});touches.startX=startX;touches.startY=startY;data.touchStartTime=Utils.now();swiper.allowClick=true;swiper.updateSize();swiper.swipeDirection=undefined;if(params.threshold>0)data.allowThresholdMove=false;if(e.type!=='touchstart'){var preventDefault=true;if((0,_dom2.default)(e.target).is(data.formElements))preventDefault=false;if(_ssrWindow.document.activeElement&&(0,_dom2.default)(_ssrWindow.document.activeElement).is(data.formElements)&&_ssrWindow.document.activeElement!==e.target){_ssrWindow.document.activeElement.blur();}if(preventDefault&&swiper.allowTouchMove){e.preventDefault();}}swiper.emit('touchStart',e);}function onTouchMove(event){var swiper=this;var data=swiper.touchEventsData;var params=swiper.params,touches=swiper.touches,rtl=swiper.rtlTranslate;var e=event;if(e.originalEvent)e=e.originalEvent;if(!data.isTouched){if(data.startMoving&&data.isScrolling){swiper.emit('touchMoveOpposite',e);}return;}if(data.isTouchEvent&&e.type==='mousemove')return;var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(e.preventedByNestedSwiper){touches.startX=pageX;touches.startY=pageY;return;}if(!swiper.allowTouchMove){// isMoved = true;
swiper.allowClick=false;if(data.isTouched){Utils.extend(touches,{startX:pageX,startY:pageY,currentX:pageX,currentY:pageY});data.touchStartTime=Utils.now();}return;}if(data.isTouchEvent&&params.touchReleaseOnEdges&&!params.loop){if(swiper.isVertical()){// Vertical
if(pageY<touches.startY&&swiper.translate<=swiper.maxTranslate()||pageY>touches.startY&&swiper.translate>=swiper.minTranslate()){data.isTouched=false;data.isMoved=false;return;}}else if(pageX<touches.startX&&swiper.translate<=swiper.maxTranslate()||pageX>touches.startX&&swiper.translate>=swiper.minTranslate()){return;}}if(data.isTouchEvent&&_ssrWindow.document.activeElement){if(e.target===_ssrWindow.document.activeElement&&(0,_dom2.default)(e.target).is(data.formElements)){data.isMoved=true;swiper.allowClick=false;return;}}if(data.allowTouchCallbacks){swiper.emit('touchMove',e);}if(e.targetTouches&&e.targetTouches.length>1)return;touches.currentX=pageX;touches.currentY=pageY;var diffX=touches.currentX-touches.startX;var diffY=touches.currentY-touches.startY;if(typeof data.isScrolling==='undefined'){var touchAngle=void 0;if(swiper.isHorizontal()&&touches.currentY===touches.startY||swiper.isVertical()&&touches.currentX===touches.startX){data.isScrolling=false;}else{// eslint-disable-next-line
if(diffX*diffX+diffY*diffY>=25){touchAngle=Math.atan2(Math.abs(diffY),Math.abs(diffX))*180/Math.PI;data.isScrolling=swiper.isHorizontal()?touchAngle>params.touchAngle:90-touchAngle>params.touchAngle;}}}if(data.isScrolling){swiper.emit('touchMoveOpposite',e);}if(typeof startMoving==='undefined'){if(touches.currentX!==touches.startX||touches.currentY!==touches.startY){data.startMoving=true;}}if(data.isScrolling){data.isTouched=false;return;}if(!data.startMoving){return;}swiper.allowClick=false;e.preventDefault();if(params.touchMoveStopPropagation&&!params.nested){e.stopPropagation();}if(!data.isMoved){if(params.loop){swiper.loopFix();}data.startTranslate=swiper.getTranslate();swiper.setTransition(0);if(swiper.animating){swiper.$wrapperEl.trigger('webkitTransitionEnd transitionend');}data.allowMomentumBounce=false;// Grab Cursor
if(params.grabCursor&&(swiper.allowSlideNext===true||swiper.allowSlidePrev===true)){swiper.setGrabCursor(true);}swiper.emit('sliderFirstMove',e);}swiper.emit('sliderMove',e);data.isMoved=true;var diff=swiper.isHorizontal()?diffX:diffY;touches.diff=diff;diff*=params.touchRatio;if(rtl)diff=-diff;swiper.swipeDirection=diff>0?'prev':'next';data.currentTranslate=diff+data.startTranslate;var disableParentSwiper=true;var resistanceRatio=params.resistanceRatio;if(params.touchReleaseOnEdges){resistanceRatio=0;}if(diff>0&&data.currentTranslate>swiper.minTranslate()){disableParentSwiper=false;if(params.resistance)data.currentTranslate=swiper.minTranslate()-1+Math.pow(-swiper.minTranslate()+data.startTranslate+diff,resistanceRatio);}else if(diff<0&&data.currentTranslate<swiper.maxTranslate()){disableParentSwiper=false;if(params.resistance)data.currentTranslate=swiper.maxTranslate()+1-Math.pow(swiper.maxTranslate()-data.startTranslate-diff,resistanceRatio);}if(disableParentSwiper){e.preventedByNestedSwiper=true;}// Directions locks
if(!swiper.allowSlideNext&&swiper.swipeDirection==='next'&&data.currentTranslate<data.startTranslate){data.currentTranslate=data.startTranslate;}if(!swiper.allowSlidePrev&&swiper.swipeDirection==='prev'&&data.currentTranslate>data.startTranslate){data.currentTranslate=data.startTranslate;}// Threshold
if(params.threshold>0){if(Math.abs(diff)>params.threshold||data.allowThresholdMove){if(!data.allowThresholdMove){data.allowThresholdMove=true;touches.startX=touches.currentX;touches.startY=touches.currentY;data.currentTranslate=data.startTranslate;touches.diff=swiper.isHorizontal()?touches.currentX-touches.startX:touches.currentY-touches.startY;return;}}else{data.currentTranslate=data.startTranslate;return;}}if(!params.followFinger)return;// Update active index in free mode
if(params.freeMode||params.watchSlidesProgress||params.watchSlidesVisibility){swiper.updateActiveIndex();swiper.updateSlidesClasses();}if(params.freeMode){// Velocity
if(data.velocities.length===0){data.velocities.push({position:touches[swiper.isHorizontal()?'startX':'startY'],time:data.touchStartTime});}data.velocities.push({position:touches[swiper.isHorizontal()?'currentX':'currentY'],time:Utils.now()});}// Update progress
swiper.updateProgress(data.currentTranslate);// Update translate
swiper.setTranslate(data.currentTranslate);}function onTouchEnd(event){var swiper=this;var data=swiper.touchEventsData;var params=swiper.params,touches=swiper.touches,rtl=swiper.rtlTranslate,$wrapperEl=swiper.$wrapperEl,slidesGrid=swiper.slidesGrid,snapGrid=swiper.snapGrid;var e=event;if(e.originalEvent)e=e.originalEvent;if(data.allowTouchCallbacks){swiper.emit('touchEnd',e);}data.allowTouchCallbacks=false;if(!data.isTouched){if(data.isMoved&&params.grabCursor){swiper.setGrabCursor(false);}data.isMoved=false;data.startMoving=false;return;}// Return Grab Cursor
if(params.grabCursor&&data.isMoved&&data.isTouched&&(swiper.allowSlideNext===true||swiper.allowSlidePrev===true)){swiper.setGrabCursor(false);}// Time diff
var touchEndTime=Utils.now();var timeDiff=touchEndTime-data.touchStartTime;// Tap, doubleTap, Click
if(swiper.allowClick){swiper.updateClickedSlide(e);swiper.emit('tap',e);if(timeDiff<300&&touchEndTime-data.lastClickTime>300){if(data.clickTimeout)clearTimeout(data.clickTimeout);data.clickTimeout=Utils.nextTick(function(){if(!swiper||swiper.destroyed)return;swiper.emit('click',e);},300);}if(timeDiff<300&&touchEndTime-data.lastClickTime<300){if(data.clickTimeout)clearTimeout(data.clickTimeout);swiper.emit('doubleTap',e);}}data.lastClickTime=Utils.now();Utils.nextTick(function(){if(!swiper.destroyed)swiper.allowClick=true;});if(!data.isTouched||!data.isMoved||!swiper.swipeDirection||touches.diff===0||data.currentTranslate===data.startTranslate){data.isTouched=false;data.isMoved=false;data.startMoving=false;return;}data.isTouched=false;data.isMoved=false;data.startMoving=false;var currentPos=void 0;if(params.followFinger){currentPos=rtl?swiper.translate:-swiper.translate;}else{currentPos=-data.currentTranslate;}if(params.freeMode){if(currentPos<-swiper.minTranslate()){swiper.slideTo(swiper.activeIndex);return;}else if(currentPos>-swiper.maxTranslate()){if(swiper.slides.length<snapGrid.length){swiper.slideTo(snapGrid.length-1);}else{swiper.slideTo(swiper.slides.length-1);}return;}if(params.freeModeMomentum){if(data.velocities.length>1){var lastMoveEvent=data.velocities.pop();var velocityEvent=data.velocities.pop();var distance=lastMoveEvent.position-velocityEvent.position;var time=lastMoveEvent.time-velocityEvent.time;swiper.velocity=distance/time;swiper.velocity/=2;if(Math.abs(swiper.velocity)<params.freeModeMinimumVelocity){swiper.velocity=0;}// this implies that the user stopped moving a finger then released.
// There would be no events with distance zero, so the last event is stale.
if(time>150||Utils.now()-lastMoveEvent.time>300){swiper.velocity=0;}}else{swiper.velocity=0;}swiper.velocity*=params.freeModeMomentumVelocityRatio;data.velocities.length=0;var momentumDuration=1000*params.freeModeMomentumRatio;var momentumDistance=swiper.velocity*momentumDuration;var newPosition=swiper.translate+momentumDistance;if(rtl)newPosition=-newPosition;var doBounce=false;var afterBouncePosition=void 0;var bounceAmount=Math.abs(swiper.velocity)*20*params.freeModeMomentumBounceRatio;var needsLoopFix=void 0;if(newPosition<swiper.maxTranslate()){if(params.freeModeMomentumBounce){if(newPosition+swiper.maxTranslate()<-bounceAmount){newPosition=swiper.maxTranslate()-bounceAmount;}afterBouncePosition=swiper.maxTranslate();doBounce=true;data.allowMomentumBounce=true;}else{newPosition=swiper.maxTranslate();}if(params.loop&&params.centeredSlides)needsLoopFix=true;}else if(newPosition>swiper.minTranslate()){if(params.freeModeMomentumBounce){if(newPosition-swiper.minTranslate()>bounceAmount){newPosition=swiper.minTranslate()+bounceAmount;}afterBouncePosition=swiper.minTranslate();doBounce=true;data.allowMomentumBounce=true;}else{newPosition=swiper.minTranslate();}if(params.loop&&params.centeredSlides)needsLoopFix=true;}else if(params.freeModeSticky){var nextSlide=void 0;for(var _j3=0;_j3<snapGrid.length;_j3+=1){if(snapGrid[_j3]>-newPosition){nextSlide=_j3;break;}}if(Math.abs(snapGrid[nextSlide]-newPosition)<Math.abs(snapGrid[nextSlide-1]-newPosition)||swiper.swipeDirection==='next'){newPosition=snapGrid[nextSlide];}else{newPosition=snapGrid[nextSlide-1];}newPosition=-newPosition;}if(needsLoopFix){swiper.once('transitionEnd',function(){swiper.loopFix();});}// Fix duration
if(swiper.velocity!==0){if(rtl){momentumDuration=Math.abs((-newPosition-swiper.translate)/swiper.velocity);}else{momentumDuration=Math.abs((newPosition-swiper.translate)/swiper.velocity);}}else if(params.freeModeSticky){swiper.slideToClosest();return;}if(params.freeModeMomentumBounce&&doBounce){swiper.updateProgress(afterBouncePosition);swiper.setTransition(momentumDuration);swiper.setTranslate(newPosition);swiper.transitionStart(true,swiper.swipeDirection);swiper.animating=true;$wrapperEl.transitionEnd(function(){if(!swiper||swiper.destroyed||!data.allowMomentumBounce)return;swiper.emit('momentumBounce');swiper.setTransition(params.speed);swiper.setTranslate(afterBouncePosition);$wrapperEl.transitionEnd(function(){if(!swiper||swiper.destroyed)return;swiper.transitionEnd();});});}else if(swiper.velocity){swiper.updateProgress(newPosition);swiper.setTransition(momentumDuration);swiper.setTranslate(newPosition);swiper.transitionStart(true,swiper.swipeDirection);if(!swiper.animating){swiper.animating=true;$wrapperEl.transitionEnd(function(){if(!swiper||swiper.destroyed)return;swiper.transitionEnd();});}}else{swiper.updateProgress(newPosition);}swiper.updateActiveIndex();swiper.updateSlidesClasses();}else if(params.freeModeSticky){swiper.slideToClosest();return;}if(!params.freeModeMomentum||timeDiff>=params.longSwipesMs){swiper.updateProgress();swiper.updateActiveIndex();swiper.updateSlidesClasses();}return;}// Find current slide
var stopIndex=0;var groupSize=swiper.slidesSizesGrid[0];for(var _i48=0;_i48<slidesGrid.length;_i48+=params.slidesPerGroup){if(typeof slidesGrid[_i48+params.slidesPerGroup]!=='undefined'){if(currentPos>=slidesGrid[_i48]&&currentPos<slidesGrid[_i48+params.slidesPerGroup]){stopIndex=_i48;groupSize=slidesGrid[_i48+params.slidesPerGroup]-slidesGrid[_i48];}}else if(currentPos>=slidesGrid[_i48]){stopIndex=_i48;groupSize=slidesGrid[slidesGrid.length-1]-slidesGrid[slidesGrid.length-2];}}// Find current slide size
var ratio=(currentPos-slidesGrid[stopIndex])/groupSize;if(timeDiff>params.longSwipesMs){// Long touches
if(!params.longSwipes){swiper.slideTo(swiper.activeIndex);return;}if(swiper.swipeDirection==='next'){if(ratio>=params.longSwipesRatio)swiper.slideTo(stopIndex+params.slidesPerGroup);else swiper.slideTo(stopIndex);}if(swiper.swipeDirection==='prev'){if(ratio>1-params.longSwipesRatio)swiper.slideTo(stopIndex+params.slidesPerGroup);else swiper.slideTo(stopIndex);}}else{// Short swipes
if(!params.shortSwipes){swiper.slideTo(swiper.activeIndex);return;}if(swiper.swipeDirection==='next'){swiper.slideTo(stopIndex+params.slidesPerGroup);}if(swiper.swipeDirection==='prev'){swiper.slideTo(stopIndex);}}}function onResize(){var swiper=this;var params=swiper.params,el=swiper.el;if(el&&el.offsetWidth===0)return;// Breakpoints
if(params.breakpoints){swiper.setBreakpoint();}// Save locks
var allowSlideNext=swiper.allowSlideNext,allowSlidePrev=swiper.allowSlidePrev,snapGrid=swiper.snapGrid;// Disable locks on resize
swiper.allowSlideNext=true;swiper.allowSlidePrev=true;swiper.updateSize();swiper.updateSlides();if(params.freeMode){var newTranslate=Math.min(Math.max(swiper.translate,swiper.maxTranslate()),swiper.minTranslate());swiper.setTranslate(newTranslate);swiper.updateActiveIndex();swiper.updateSlidesClasses();if(params.autoHeight){swiper.updateAutoHeight();}}else{swiper.updateSlidesClasses();if((params.slidesPerView==='auto'||params.slidesPerView>1)&&swiper.isEnd&&!swiper.params.centeredSlides){swiper.slideTo(swiper.slides.length-1,0,false,true);}else{swiper.slideTo(swiper.activeIndex,0,false,true);}}// Return locks after resize
swiper.allowSlidePrev=allowSlidePrev;swiper.allowSlideNext=allowSlideNext;if(swiper.params.watchOverflow&&snapGrid!==swiper.snapGrid){swiper.checkOverflow();}}function onClick(e){var swiper=this;if(!swiper.allowClick){if(swiper.params.preventClicks)e.preventDefault();if(swiper.params.preventClicksPropagation&&swiper.animating){e.stopPropagation();e.stopImmediatePropagation();}}}function attachEvents(){var swiper=this;var params=swiper.params,touchEvents=swiper.touchEvents,el=swiper.el,wrapperEl=swiper.wrapperEl;{swiper.onTouchStart=onTouchStart.bind(swiper);swiper.onTouchMove=onTouchMove.bind(swiper);swiper.onTouchEnd=onTouchEnd.bind(swiper);}swiper.onClick=onClick.bind(swiper);var target=params.touchEventsTarget==='container'?el:wrapperEl;var capture=!!params.nested;// Touch Events
{if(!Support.touch&&(Support.pointerEvents||Support.prefixedPointerEvents)){target.addEventListener(touchEvents.start,swiper.onTouchStart,false);_ssrWindow.document.addEventListener(touchEvents.move,swiper.onTouchMove,capture);_ssrWindow.document.addEventListener(touchEvents.end,swiper.onTouchEnd,false);}else{if(Support.touch){var passiveListener=touchEvents.start==='touchstart'&&Support.passiveListener&&params.passiveListeners?{passive:true,capture:false}:false;target.addEventListener(touchEvents.start,swiper.onTouchStart,passiveListener);target.addEventListener(touchEvents.move,swiper.onTouchMove,Support.passiveListener?{passive:false,capture:capture}:capture);target.addEventListener(touchEvents.end,swiper.onTouchEnd,passiveListener);}if(params.simulateTouch&&!Device.ios&&!Device.android||params.simulateTouch&&!Support.touch&&Device.ios){target.addEventListener('mousedown',swiper.onTouchStart,false);_ssrWindow.document.addEventListener('mousemove',swiper.onTouchMove,capture);_ssrWindow.document.addEventListener('mouseup',swiper.onTouchEnd,false);}}// Prevent Links Clicks
if(params.preventClicks||params.preventClicksPropagation){target.addEventListener('click',swiper.onClick,true);}}// Resize handler
swiper.on(Device.ios||Device.android?'resize orientationchange observerUpdate':'resize observerUpdate',onResize,true);}function detachEvents(){var swiper=this;var params=swiper.params,touchEvents=swiper.touchEvents,el=swiper.el,wrapperEl=swiper.wrapperEl;var target=params.touchEventsTarget==='container'?el:wrapperEl;var capture=!!params.nested;// Touch Events
{if(!Support.touch&&(Support.pointerEvents||Support.prefixedPointerEvents)){target.removeEventListener(touchEvents.start,swiper.onTouchStart,false);_ssrWindow.document.removeEventListener(touchEvents.move,swiper.onTouchMove,capture);_ssrWindow.document.removeEventListener(touchEvents.end,swiper.onTouchEnd,false);}else{if(Support.touch){var passiveListener=touchEvents.start==='onTouchStart'&&Support.passiveListener&&params.passiveListeners?{passive:true,capture:false}:false;target.removeEventListener(touchEvents.start,swiper.onTouchStart,passiveListener);target.removeEventListener(touchEvents.move,swiper.onTouchMove,capture);target.removeEventListener(touchEvents.end,swiper.onTouchEnd,passiveListener);}if(params.simulateTouch&&!Device.ios&&!Device.android||params.simulateTouch&&!Support.touch&&Device.ios){target.removeEventListener('mousedown',swiper.onTouchStart,false);_ssrWindow.document.removeEventListener('mousemove',swiper.onTouchMove,capture);_ssrWindow.document.removeEventListener('mouseup',swiper.onTouchEnd,false);}}// Prevent Links Clicks
if(params.preventClicks||params.preventClicksPropagation){target.removeEventListener('click',swiper.onClick,true);}}// Resize handler
swiper.off(Device.ios||Device.android?'resize orientationchange observerUpdate':'resize observerUpdate',onResize);}var events={attachEvents:attachEvents,detachEvents:detachEvents};function setBreakpoint(){var swiper=this;var activeIndex=swiper.activeIndex,initialized=swiper.initialized,_swiper$loopedSlides=swiper.loopedSlides,loopedSlides=_swiper$loopedSlides===undefined?0:_swiper$loopedSlides,params=swiper.params;var breakpoints=params.breakpoints;if(!breakpoints||breakpoints&&Object.keys(breakpoints).length===0)return;// Set breakpoint for window width and update parameters
var breakpoint=swiper.getBreakpoint(breakpoints);if(breakpoint&&swiper.currentBreakpoint!==breakpoint){var breakPointsParams=breakpoint in breakpoints?breakpoints[breakpoint]:swiper.originalParams;var needsReLoop=params.loop&&breakPointsParams.slidesPerView!==params.slidesPerView;Utils.extend(swiper.params,breakPointsParams);Utils.extend(swiper,{allowTouchMove:swiper.params.allowTouchMove,allowSlideNext:swiper.params.allowSlideNext,allowSlidePrev:swiper.params.allowSlidePrev});swiper.currentBreakpoint=breakpoint;if(needsReLoop&&initialized){swiper.loopDestroy();swiper.loopCreate();swiper.updateSlides();swiper.slideTo(activeIndex-loopedSlides+swiper.loopedSlides,0,false);}swiper.emit('breakpoint',breakPointsParams);}}function getBreakpoint(breakpoints){// Get breakpoint for window width
if(!breakpoints)return undefined;var breakpoint=false;var points=[];Object.keys(breakpoints).forEach(function(point){points.push(point);});points.sort(function(a,b){return parseInt(a,10)-parseInt(b,10);});for(var _i49=0;_i49<points.length;_i49+=1){var point=points[_i49];if(point>=_ssrWindow.window.innerWidth&&!breakpoint){breakpoint=point;}}return breakpoint||'max';}var breakpoints={setBreakpoint:setBreakpoint,getBreakpoint:getBreakpoint};var Browser=function Browser(){function isSafari(){var ua=_ssrWindow.window.navigator.userAgent.toLowerCase();return ua.indexOf('safari')>=0&&ua.indexOf('chrome')<0&&ua.indexOf('android')<0;}return{isIE:!!_ssrWindow.window.navigator.userAgent.match(/Trident/g)||!!_ssrWindow.window.navigator.userAgent.match(/MSIE/g),isSafari:isSafari(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_ssrWindow.window.navigator.userAgent)};}();function addClasses(){var swiper=this;var classNames=swiper.classNames,params=swiper.params,rtl=swiper.rtl,$el=swiper.$el;var suffixes=[];suffixes.push(params.direction);if(params.freeMode){suffixes.push('free-mode');}if(!Support.flexbox){suffixes.push('no-flexbox');}if(params.autoHeight){suffixes.push('autoheight');}if(rtl){suffixes.push('rtl');}if(params.slidesPerColumn>1){suffixes.push('multirow');}if(Device.android){suffixes.push('android');}if(Device.ios){suffixes.push('ios');}// WP8 Touch Events Fix
if(Browser.isIE&&(Support.pointerEvents||Support.prefixedPointerEvents)){suffixes.push('wp8-'+params.direction);}suffixes.forEach(function(suffix){classNames.push(params.containerModifierClass+suffix);});$el.addClass(classNames.join(' '));}function removeClasses(){var swiper=this;var $el=swiper.$el,classNames=swiper.classNames;$el.removeClass(classNames.join(' '));}var classes={addClasses:addClasses,removeClasses:removeClasses};function loadImage(imageEl,src,srcset,sizes,checkForComplete,callback){var image=void 0;function onReady(){if(callback)callback();}if(!imageEl.complete||!checkForComplete){if(src){image=new _ssrWindow.window.Image();image.onload=onReady;image.onerror=onReady;if(sizes){image.sizes=sizes;}if(srcset){image.srcset=srcset;}if(src){image.src=src;}}else{onReady();}}else{// image already loaded...
onReady();}}function preloadImages(){var swiper=this;swiper.imagesToLoad=swiper.$el.find('img');function onReady(){if(typeof swiper==='undefined'||swiper===null||!swiper||swiper.destroyed)return;if(swiper.imagesLoaded!==undefined)swiper.imagesLoaded+=1;if(swiper.imagesLoaded===swiper.imagesToLoad.length){if(swiper.params.updateOnImagesReady)swiper.update();swiper.emit('imagesReady');}}for(var _i50=0;_i50<swiper.imagesToLoad.length;_i50+=1){var imageEl=swiper.imagesToLoad[_i50];swiper.loadImage(imageEl,imageEl.currentSrc||imageEl.getAttribute('src'),imageEl.srcset||imageEl.getAttribute('srcset'),imageEl.sizes||imageEl.getAttribute('sizes'),true,onReady);}}var images={loadImage:loadImage,preloadImages:preloadImages};function checkOverflow(){var swiper=this;var wasLocked=swiper.isLocked;swiper.isLocked=swiper.snapGrid.length===1;swiper.allowSlideNext=!swiper.isLocked;swiper.allowSlidePrev=!swiper.isLocked;// events
if(wasLocked!==swiper.isLocked)swiper.emit(swiper.isLocked?'lock':'unlock');if(wasLocked&&wasLocked!==swiper.isLocked){swiper.isEnd=false;swiper.navigation.update();}}var checkOverflow$1={checkOverflow:checkOverflow};var defaults={init:true,direction:'horizontal',touchEventsTarget:'container',initialSlide:0,speed:300,//
preventIntercationOnTransition:false,// To support iOS's swipe-to-go-back gesture (when being used in-app, with UIWebView).
iOSEdgeSwipeDetection:false,iOSEdgeSwipeThreshold:20,// Free mode
freeMode:false,freeModeMomentum:true,freeModeMomentumRatio:1,freeModeMomentumBounce:true,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:false,freeModeMinimumVelocity:0.02,// Autoheight
autoHeight:false,// Set wrapper width
setWrapperSize:false,// Virtual Translate
virtualTranslate:false,// Effects
effect:'slide',// 'slide' or 'fade' or 'cube' or 'coverflow' or 'flip'
// Breakpoints
breakpoints:undefined,// Slides grid
spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:'column',slidesPerGroup:1,centeredSlides:false,slidesOffsetBefore:0,// in px
slidesOffsetAfter:0,// in px
normalizeSlideIndex:true,// Disable swiper and hide navigation when container not overflow
watchOverflow:false,// Round length
roundLengths:false,// Touches
touchRatio:1,touchAngle:45,simulateTouch:true,shortSwipes:true,longSwipes:true,longSwipesRatio:0.5,longSwipesMs:300,followFinger:true,allowTouchMove:true,threshold:0,touchMoveStopPropagation:true,touchReleaseOnEdges:false,// Unique Navigation Elements
uniqueNavElements:true,// Resistance
resistance:true,resistanceRatio:0.85,// Progress
watchSlidesProgress:false,watchSlidesVisibility:false,// Cursor
grabCursor:false,// Clicks
preventClicks:true,preventClicksPropagation:true,slideToClickedSlide:false,// Images
preloadImages:true,updateOnImagesReady:true,// loop
loop:false,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:false,// Swiping/no swiping
allowSlidePrev:true,allowSlideNext:true,swipeHandler:null,// '.swipe-handler',
noSwiping:true,noSwipingClass:'swiper-no-swiping',noSwipingSelector:null,// Passive Listeners
passiveListeners:true,// NS
containerModifierClass:'swiper-container-',// NEW
slideClass:'swiper-slide',slideBlankClass:'swiper-slide-invisible-blank',slideActiveClass:'swiper-slide-active',slideDuplicateActiveClass:'swiper-slide-duplicate-active',slideVisibleClass:'swiper-slide-visible',slideDuplicateClass:'swiper-slide-duplicate',slideNextClass:'swiper-slide-next',slideDuplicateNextClass:'swiper-slide-duplicate-next',slidePrevClass:'swiper-slide-prev',slideDuplicatePrevClass:'swiper-slide-duplicate-prev',wrapperClass:'swiper-wrapper',// Callbacks
runCallbacksOnInit:true};var prototypes={update:update,translate:translate,transition:transition,slide:slide,loop:loop,grabCursor:grabCursor,manipulation:manipulation,events:events,breakpoints:breakpoints,checkOverflow:checkOverflow$1,classes:classes,images:images};var extendedDefaults={};var Swiper=function(_Framework7Class19){_inherits(Swiper,_Framework7Class19);function Swiper(){var _ret66;_classCallCheck(this,Swiper);var el=void 0;var params=void 0;for(var _len33=arguments.length,args=Array(_len33),_key33=0;_key33<_len33;_key33++){args[_key33]=arguments[_key33];}if(args.length===1&&args[0].constructor&&args[0].constructor===Object){params=args[0];}else{el=args[0];params=args[1];}if(!params)params={};params=Utils.extend({},params);if(el&&!params.el)params.el=el;var _this29=_possibleConstructorReturn(this,(Swiper.__proto__||Object.getPrototypeOf(Swiper)).call(this,params));Object.keys(prototypes).forEach(function(prototypeGroup){Object.keys(prototypes[prototypeGroup]).forEach(function(protoMethod){if(!Swiper.prototype[protoMethod]){Swiper.prototype[protoMethod]=prototypes[prototypeGroup][protoMethod];}});});// Swiper Instance
var swiper=_this29;if(typeof swiper.modules==='undefined'){swiper.modules={};}Object.keys(swiper.modules).forEach(function(moduleName){var module=swiper.modules[moduleName];if(module.params){var moduleParamName=Object.keys(module.params)[0];var moduleParams=module.params[moduleParamName];if((typeof moduleParams==='undefined'?'undefined':_typeof(moduleParams))!=='object')return;if(!(moduleParamName in params&&'enabled'in moduleParams))return;if(params[moduleParamName]===true){params[moduleParamName]={enabled:true};}if(_typeof(params[moduleParamName])==='object'&&!('enabled'in params[moduleParamName])){params[moduleParamName].enabled=true;}if(!params[moduleParamName])params[moduleParamName]={enabled:false};}});// Extend defaults with modules params
var swiperParams=Utils.extend({},defaults);swiper.useModulesParams(swiperParams);// Extend defaults with passed params
swiper.params=Utils.extend({},swiperParams,extendedDefaults,params);swiper.originalParams=Utils.extend({},swiper.params);swiper.passedParams=Utils.extend({},params);// Save Dom lib
swiper.$=_dom2.default;// Find el
var $el=(0,_dom2.default)(swiper.params.el);el=$el[0];if(!el){var _ret64;return _ret64=undefined,_possibleConstructorReturn(_this29,_ret64);}if($el.length>1){var _ret65;var swipers=[];$el.each(function(index,containerEl){var newParams=Utils.extend({},params,{el:containerEl});swipers.push(new Swiper(newParams));});return _ret65=swipers,_possibleConstructorReturn(_this29,_ret65);}el.swiper=swiper;$el.data('swiper',swiper);// Find Wrapper
var $wrapperEl=$el.children('.'+swiper.params.wrapperClass);// Extend Swiper
Utils.extend(swiper,{$el:$el,el:el,$wrapperEl:$wrapperEl,wrapperEl:$wrapperEl[0],// Classes
classNames:[],// Slides
slides:(0,_dom2.default)(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],// isDirection
isHorizontal:function isHorizontal(){return swiper.params.direction==='horizontal';},isVertical:function isVertical(){return swiper.params.direction==='vertical';},// RTL
rtl:el.dir.toLowerCase()==='rtl'||$el.css('direction')==='rtl',rtlTranslate:swiper.params.direction==='horizontal'&&(el.dir.toLowerCase()==='rtl'||$el.css('direction')==='rtl'),wrongRTL:$wrapperEl.css('display')==='-webkit-box',// Indexes
activeIndex:0,realIndex:0,//
isBeginning:true,isEnd:false,// Props
translate:0,progress:0,velocity:0,animating:false,// Locks
allowSlideNext:swiper.params.allowSlideNext,allowSlidePrev:swiper.params.allowSlidePrev,// Touch Events
touchEvents:function touchEvents(){var touch=['touchstart','touchmove','touchend'];var desktop=['mousedown','mousemove','mouseup'];if(Support.pointerEvents){desktop=['pointerdown','pointermove','pointerup'];}else if(Support.prefixedPointerEvents){desktop=['MSPointerDown','MSPointerMove','MSPointerUp'];}swiper.touchEventsTouch={start:touch[0],move:touch[1],end:touch[2]};swiper.touchEventsDesktop={start:desktop[0],move:desktop[1],end:desktop[2]};return Support.touch||!swiper.params.simulateTouch?swiper.touchEventsTouch:swiper.touchEventsDesktop;}(),touchEventsData:{isTouched:undefined,isMoved:undefined,allowTouchCallbacks:undefined,touchStartTime:undefined,isScrolling:undefined,currentTranslate:undefined,startTranslate:undefined,allowThresholdMove:undefined,// Form elements to match
formElements:'input, select, option, textarea, button, video',// Last click time
lastClickTime:Utils.now(),clickTimeout:undefined,// Velocities
velocities:[],allowMomentumBounce:undefined,isTouchEvent:undefined,startMoving:undefined},// Clicks
allowClick:true,// Touches
allowTouchMove:swiper.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},// Images
imagesToLoad:[],imagesLoaded:0});// Install Modules
swiper.useModules();// Init
if(swiper.params.init){swiper.init();}// Return app instance
return _ret66=swiper,_possibleConstructorReturn(_this29,_ret66);}_createClass(Swiper,[{key:'slidesPerViewDynamic',value:function slidesPerViewDynamic(){var swiper=this;var params=swiper.params,slides=swiper.slides,slidesGrid=swiper.slidesGrid,swiperSize=swiper.size,activeIndex=swiper.activeIndex;var spv=1;if(params.centeredSlides){var slideSize=slides[activeIndex].swiperSlideSize;var breakLoop=void 0;for(var _i51=activeIndex+1;_i51<slides.length;_i51+=1){if(slides[_i51]&&!breakLoop){slideSize+=slides[_i51].swiperSlideSize;spv+=1;if(slideSize>swiperSize)breakLoop=true;}}for(var _i52=activeIndex-1;_i52>=0;_i52-=1){if(slides[_i52]&&!breakLoop){slideSize+=slides[_i52].swiperSlideSize;spv+=1;if(slideSize>swiperSize)breakLoop=true;}}}else{for(var _i53=activeIndex+1;_i53<slides.length;_i53+=1){if(slidesGrid[_i53]-slidesGrid[activeIndex]<swiperSize){spv+=1;}}}return spv;}},{key:'update',value:function update(){var swiper=this;if(!swiper||swiper.destroyed)return;var snapGrid=swiper.snapGrid,params=swiper.params;// Breakpoints
if(params.breakpoints){swiper.setBreakpoint();}swiper.updateSize();swiper.updateSlides();swiper.updateProgress();swiper.updateSlidesClasses();function setTranslate(){var translateValue=swiper.rtlTranslate?swiper.translate*-1:swiper.translate;var newTranslate=Math.min(Math.max(translateValue,swiper.maxTranslate()),swiper.minTranslate());swiper.setTranslate(newTranslate);swiper.updateActiveIndex();swiper.updateSlidesClasses();}var translated=void 0;if(swiper.params.freeMode){setTranslate();if(swiper.params.autoHeight){swiper.updateAutoHeight();}}else{if((swiper.params.slidesPerView==='auto'||swiper.params.slidesPerView>1)&&swiper.isEnd&&!swiper.params.centeredSlides){translated=swiper.slideTo(swiper.slides.length-1,0,false,true);}else{translated=swiper.slideTo(swiper.activeIndex,0,false,true);}if(!translated){setTranslate();}}if(params.watchOverflow&&snapGrid!==swiper.snapGrid){swiper.checkOverflow();}swiper.emit('update');}},{key:'init',value:function init(){var swiper=this;if(swiper.initialized)return;swiper.emit('beforeInit');// Set breakpoint
if(swiper.params.breakpoints){swiper.setBreakpoint();}// Add Classes
swiper.addClasses();// Create loop
if(swiper.params.loop){swiper.loopCreate();}// Update size
swiper.updateSize();// Update slides
swiper.updateSlides();if(swiper.params.watchOverflow){swiper.checkOverflow();}// Set Grab Cursor
if(swiper.params.grabCursor){swiper.setGrabCursor();}if(swiper.params.preloadImages){swiper.preloadImages();}// Slide To Initial Slide
if(swiper.params.loop){swiper.slideTo(swiper.params.initialSlide+swiper.loopedSlides,0,swiper.params.runCallbacksOnInit);}else{swiper.slideTo(swiper.params.initialSlide,0,swiper.params.runCallbacksOnInit);}// Attach events
swiper.attachEvents();// Init Flag
swiper.initialized=true;// Emit
swiper.emit('init');}},{key:'destroy',value:function destroy(){var deleteInstance=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var cleanStyles=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var swiper=this;var params=swiper.params,$el=swiper.$el,$wrapperEl=swiper.$wrapperEl,slides=swiper.slides;if(typeof swiper.params==='undefined'||swiper.destroyed){return null;}swiper.emit('beforeDestroy');// Init Flag
swiper.initialized=false;// Detach events
swiper.detachEvents();// Destroy loop
if(params.loop){swiper.loopDestroy();}// Cleanup styles
if(cleanStyles){swiper.removeClasses();$el.removeAttr('style');$wrapperEl.removeAttr('style');if(slides&&slides.length){slides.removeClass([params.slideVisibleClass,params.slideActiveClass,params.slideNextClass,params.slidePrevClass].join(' ')).removeAttr('style').removeAttr('data-swiper-slide-index').removeAttr('data-swiper-column').removeAttr('data-swiper-row');}}swiper.emit('destroy');// Detach emitter events
Object.keys(swiper.eventsListeners).forEach(function(eventName){swiper.off(eventName);});if(deleteInstance!==false){swiper.$el[0].swiper=null;swiper.$el.data('swiper',null);Utils.deleteProps(swiper);}swiper.destroyed=true;return null;}}],[{key:'extendDefaults',value:function extendDefaults(newDefaults){Utils.extend(extendedDefaults,newDefaults);}},{key:'extendedDefaults',get:function get(){return extendedDefaults;}},{key:'defaults',get:function get(){return defaults;}},{key:'Class',get:function get(){return Framework7Class;}},{key:'$',get:function get(){return _dom2.default;}}]);return Swiper;}(Framework7Class);var Device$1={name:'device',proto:{device:Device},static:{device:Device}};var Support$1={name:'support',proto:{support:Support},static:{support:Support}};var Browser$1={name:'browser',proto:{browser:Browser},static:{browser:Browser}};var Resize={name:'resize',create:function create(){var swiper=this;Utils.extend(swiper,{resize:{resizeHandler:function resizeHandler(){if(!swiper||swiper.destroyed||!swiper.initialized)return;swiper.emit('beforeResize');swiper.emit('resize');},orientationChangeHandler:function orientationChangeHandler(){if(!swiper||swiper.destroyed||!swiper.initialized)return;swiper.emit('orientationchange');}}});},on:{init:function init(){var swiper=this;// Emit resize
_ssrWindow.window.addEventListener('resize',swiper.resize.resizeHandler);// Emit orientationchange
_ssrWindow.window.addEventListener('orientationchange',swiper.resize.orientationChangeHandler);},destroy:function destroy(){var swiper=this;_ssrWindow.window.removeEventListener('resize',swiper.resize.resizeHandler);_ssrWindow.window.removeEventListener('orientationchange',swiper.resize.orientationChangeHandler);}}};var Observer={func:_ssrWindow.window.MutationObserver||_ssrWindow.window.WebkitMutationObserver,attach:function attach(target){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var swiper=this;var ObserverFunc=Observer.func;var observer=new ObserverFunc(function(mutations){mutations.forEach(function(mutation){swiper.emit('observerUpdate',mutation);});});observer.observe(target,{attributes:typeof options.attributes==='undefined'?true:options.attributes,childList:typeof options.childList==='undefined'?true:options.childList,characterData:typeof options.characterData==='undefined'?true:options.characterData});swiper.observer.observers.push(observer);},init:function init(){var swiper=this;if(!Support.observer||!swiper.params.observer)return;if(swiper.params.observeParents){var containerParents=swiper.$el.parents();for(var _i54=0;_i54<containerParents.length;_i54+=1){swiper.observer.attach(containerParents[_i54]);}}// Observe container
swiper.observer.attach(swiper.$el[0],{childList:false});// Observe wrapper
swiper.observer.attach(swiper.$wrapperEl[0],{attributes:false});},destroy:function destroy(){var swiper=this;swiper.observer.observers.forEach(function(observer){observer.disconnect();});swiper.observer.observers=[];}};var Observer$1={name:'observer',params:{observer:false,observeParents:false},create:function create(){var swiper=this;Utils.extend(swiper,{observer:{init:Observer.init.bind(swiper),attach:Observer.attach.bind(swiper),destroy:Observer.destroy.bind(swiper),observers:[]}});},on:{init:function init(){var swiper=this;swiper.observer.init();},destroy:function destroy(){var swiper=this;swiper.observer.destroy();}}};var Virtual={update:function update(force){var swiper=this;var _swiper$params=swiper.params,slidesPerView=_swiper$params.slidesPerView,slidesPerGroup=_swiper$params.slidesPerGroup,centeredSlides=_swiper$params.centeredSlides;var _swiper$virtual=swiper.virtual,previousFrom=_swiper$virtual.from,previousTo=_swiper$virtual.to,slides=_swiper$virtual.slides,previousSlidesGrid=_swiper$virtual.slidesGrid,renderSlide=_swiper$virtual.renderSlide,previousOffset=_swiper$virtual.offset;swiper.updateActiveIndex();var activeIndex=swiper.activeIndex||0;var offsetProp=void 0;if(swiper.rtlTranslate)offsetProp='right';else offsetProp=swiper.isHorizontal()?'left':'top';var slidesAfter=void 0;var slidesBefore=void 0;if(centeredSlides){slidesAfter=Math.floor(slidesPerView/2)+slidesPerGroup;slidesBefore=Math.floor(slidesPerView/2)+slidesPerGroup;}else{slidesAfter=slidesPerView+(slidesPerGroup-1);slidesBefore=slidesPerGroup;}var from=Math.max((activeIndex||0)-slidesBefore,0);var to=Math.min((activeIndex||0)+slidesAfter,slides.length-1);var offset=(swiper.slidesGrid[from]||0)-(swiper.slidesGrid[0]||0);Utils.extend(swiper.virtual,{from:from,to:to,offset:offset,slidesGrid:swiper.slidesGrid});function onRendered(){swiper.updateSlides();swiper.updateProgress();swiper.updateSlidesClasses();if(swiper.lazy&&swiper.params.lazy.enabled){swiper.lazy.load();}}if(previousFrom===from&&previousTo===to&&!force){if(swiper.slidesGrid!==previousSlidesGrid&&offset!==previousOffset){swiper.slides.css(offsetProp,offset+'px');}swiper.updateProgress();return;}if(swiper.params.virtual.renderExternal){swiper.params.virtual.renderExternal.call(swiper,{offset:offset,from:from,to:to,slides:function getSlides(){var slidesToRender=[];for(var _i55=from;_i55<=to;_i55+=1){slidesToRender.push(slides[_i55]);}return slidesToRender;}()});onRendered();return;}var prependIndexes=[];var appendIndexes=[];if(force){swiper.$wrapperEl.find('.'+swiper.params.slideClass).remove();}else{for(var _i56=previousFrom;_i56<=previousTo;_i56+=1){if(_i56<from||_i56>to){swiper.$wrapperEl.find('.'+swiper.params.slideClass+'[data-swiper-slide-index="'+_i56+'"]').remove();}}}for(var _i57=0;_i57<slides.length;_i57+=1){if(_i57>=from&&_i57<=to){if(typeof previousTo==='undefined'||force){appendIndexes.push(_i57);}else{if(_i57>previousTo)appendIndexes.push(_i57);if(_i57<previousFrom)prependIndexes.push(_i57);}}}appendIndexes.forEach(function(index){swiper.$wrapperEl.append(renderSlide(slides[index],index));});prependIndexes.sort(function(a,b){return a<b;}).forEach(function(index){swiper.$wrapperEl.prepend(renderSlide(slides[index],index));});swiper.$wrapperEl.children('.swiper-slide').css(offsetProp,offset+'px');onRendered();},renderSlide:function renderSlide(slide,index){var swiper=this;var params=swiper.params.virtual;if(params.cache&&swiper.virtual.cache[index]){return swiper.virtual.cache[index];}var $slideEl=params.renderSlide?(0,_dom2.default)(params.renderSlide.call(swiper,slide,index)):(0,_dom2.default)('<div class="'+swiper.params.slideClass+'" data-swiper-slide-index="'+index+'">'+slide+'</div>');if(!$slideEl.attr('data-swiper-slide-index'))$slideEl.attr('data-swiper-slide-index',index);if(params.cache)swiper.virtual.cache[index]=$slideEl;return $slideEl;},appendSlide:function appendSlide(slide){var swiper=this;swiper.virtual.slides.push(slide);swiper.virtual.update(true);},prependSlide:function prependSlide(slide){var swiper=this;swiper.virtual.slides.unshift(slide);if(swiper.params.virtual.cache){var cache=swiper.virtual.cache;var newCache={};Object.keys(cache).forEach(function(cachedIndex){newCache[cachedIndex+1]=cache[cachedIndex];});swiper.virtual.cache=newCache;}swiper.virtual.update(true);swiper.slideNext(0);}};var Virtual$1={name:'virtual',params:{virtual:{enabled:false,slides:[],cache:true,renderSlide:null,renderExternal:null}},create:function create(){var swiper=this;Utils.extend(swiper,{virtual:{update:Virtual.update.bind(swiper),appendSlide:Virtual.appendSlide.bind(swiper),prependSlide:Virtual.prependSlide.bind(swiper),renderSlide:Virtual.renderSlide.bind(swiper),slides:swiper.params.virtual.slides,cache:{}}});},on:{beforeInit:function beforeInit(){var swiper=this;if(!swiper.params.virtual.enabled)return;swiper.classNames.push(swiper.params.containerModifierClass+'virtual');var overwriteParams={watchSlidesProgress:true};Utils.extend(swiper.params,overwriteParams);Utils.extend(swiper.originalParams,overwriteParams);swiper.virtual.update();},setTranslate:function setTranslate(){var swiper=this;if(!swiper.params.virtual.enabled)return;swiper.virtual.update();}}};var Navigation={update:function update(){// Update Navigation Buttons
var swiper=this;var params=swiper.params.navigation;if(swiper.params.loop)return;var _swiper$navigation=swiper.navigation,$nextEl=_swiper$navigation.$nextEl,$prevEl=_swiper$navigation.$prevEl;if($prevEl&&$prevEl.length>0){if(swiper.isBeginning){$prevEl.addClass(params.disabledClass);}else{$prevEl.removeClass(params.disabledClass);}$prevEl[swiper.params.watchOverflow&&swiper.isLocked?'addClass':'removeClass'](params.lockClass);}if($nextEl&&$nextEl.length>0){if(swiper.isEnd){$nextEl.addClass(params.disabledClass);}else{$nextEl.removeClass(params.disabledClass);}$nextEl[swiper.params.watchOverflow&&swiper.isLocked?'addClass':'removeClass'](params.lockClass);}},init:function init(){var swiper=this;var params=swiper.params.navigation;if(!(params.nextEl||params.prevEl))return;var $nextEl=void 0;var $prevEl=void 0;if(params.nextEl){$nextEl=(0,_dom2.default)(params.nextEl);if(swiper.params.uniqueNavElements&&typeof params.nextEl==='string'&&$nextEl.length>1&&swiper.$el.find(params.nextEl).length===1){$nextEl=swiper.$el.find(params.nextEl);}}if(params.prevEl){$prevEl=(0,_dom2.default)(params.prevEl);if(swiper.params.uniqueNavElements&&typeof params.prevEl==='string'&&$prevEl.length>1&&swiper.$el.find(params.prevEl).length===1){$prevEl=swiper.$el.find(params.prevEl);}}if($nextEl&&$nextEl.length>0){$nextEl.on('click',function(e){e.preventDefault();if(swiper.isEnd&&!swiper.params.loop)return;swiper.slideNext();});}if($prevEl&&$prevEl.length>0){$prevEl.on('click',function(e){e.preventDefault();if(swiper.isBeginning&&!swiper.params.loop)return;swiper.slidePrev();});}Utils.extend(swiper.navigation,{$nextEl:$nextEl,nextEl:$nextEl&&$nextEl[0],$prevEl:$prevEl,prevEl:$prevEl&&$prevEl[0]});},destroy:function destroy(){var swiper=this;var _swiper$navigation2=swiper.navigation,$nextEl=_swiper$navigation2.$nextEl,$prevEl=_swiper$navigation2.$prevEl;if($nextEl&&$nextEl.length){$nextEl.off('click');$nextEl.removeClass(swiper.params.navigation.disabledClass);}if($prevEl&&$prevEl.length){$prevEl.off('click');$prevEl.removeClass(swiper.params.navigation.disabledClass);}}};var Navigation$1={name:'navigation',params:{navigation:{nextEl:null,prevEl:null,hideOnClick:false,disabledClass:'swiper-button-disabled',hiddenClass:'swiper-button-hidden',lockClass:'swiper-button-lock'}},create:function create(){var swiper=this;Utils.extend(swiper,{navigation:{init:Navigation.init.bind(swiper),update:Navigation.update.bind(swiper),destroy:Navigation.destroy.bind(swiper)}});},on:{init:function init(){var swiper=this;swiper.navigation.init();swiper.navigation.update();},toEdge:function toEdge(){var swiper=this;swiper.navigation.update();},fromEdge:function fromEdge(){var swiper=this;swiper.navigation.update();},destroy:function destroy(){var swiper=this;swiper.navigation.destroy();},click:function click(e){var swiper=this;var _swiper$navigation3=swiper.navigation,$nextEl=_swiper$navigation3.$nextEl,$prevEl=_swiper$navigation3.$prevEl;if(swiper.params.navigation.hideOnClick&&!(0,_dom2.default)(e.target).is($prevEl)&&!(0,_dom2.default)(e.target).is($nextEl)){if($nextEl)$nextEl.toggleClass(swiper.params.navigation.hiddenClass);if($prevEl)$prevEl.toggleClass(swiper.params.navigation.hiddenClass);}}}};var Pagination={update:function update(){// Render || Update Pagination bullets/items
var swiper=this;var rtl=swiper.rtl;var params=swiper.params.pagination;if(!params.el||!swiper.pagination.el||!swiper.pagination.$el||swiper.pagination.$el.length===0)return;var slidesLength=swiper.virtual&&swiper.params.virtual.enabled?swiper.virtual.slides.length:swiper.slides.length;var $el=swiper.pagination.$el;// Current/Total
var current=void 0;var total=swiper.params.loop?Math.ceil((slidesLength-swiper.loopedSlides*2)/swiper.params.slidesPerGroup):swiper.snapGrid.length;if(swiper.params.loop){current=Math.ceil((swiper.activeIndex-swiper.loopedSlides)/swiper.params.slidesPerGroup);if(current>slidesLength-1-swiper.loopedSlides*2){current-=slidesLength-swiper.loopedSlides*2;}if(current>total-1)current-=total;if(current<0&&swiper.params.paginationType!=='bullets')current=total+current;}else if(typeof swiper.snapIndex!=='undefined'){current=swiper.snapIndex;}else{current=swiper.activeIndex||0;}// Types
if(params.type==='bullets'&&swiper.pagination.bullets&&swiper.pagination.bullets.length>0){var bullets=swiper.pagination.bullets;var firstIndex=void 0;var lastIndex=void 0;var midIndex=void 0;if(params.dynamicBullets){swiper.pagination.bulletSize=bullets.eq(0)[swiper.isHorizontal()?'outerWidth':'outerHeight'](true);$el.css(swiper.isHorizontal()?'width':'height',swiper.pagination.bulletSize*(params.dynamicMainBullets+4)+'px');if(params.dynamicMainBullets>1&&swiper.previousIndex!==undefined){swiper.pagination.dynamicBulletIndex+=current-swiper.previousIndex;if(swiper.pagination.dynamicBulletIndex>params.dynamicMainBullets-1){swiper.pagination.dynamicBulletIndex=params.dynamicMainBullets-1;}else if(swiper.pagination.dynamicBulletIndex<0){swiper.pagination.dynamicBulletIndex=0;}}firstIndex=current-swiper.pagination.dynamicBulletIndex;lastIndex=firstIndex+(Math.min(bullets.length,params.dynamicMainBullets)-1);midIndex=(lastIndex+firstIndex)/2;}bullets.removeClass(params.bulletActiveClass+' '+params.bulletActiveClass+'-next '+params.bulletActiveClass+'-next-next '+params.bulletActiveClass+'-prev '+params.bulletActiveClass+'-prev-prev '+params.bulletActiveClass+'-main');if($el.length>1){bullets.each(function(index,bullet){var $bullet=(0,_dom2.default)(bullet);var bulletIndex=$bullet.index();if(bulletIndex===current){$bullet.addClass(params.bulletActiveClass);}if(params.dynamicBullets){if(bulletIndex>=firstIndex&&bulletIndex<=lastIndex){$bullet.addClass(params.bulletActiveClass+'-main');}if(bulletIndex===firstIndex){$bullet.prev().addClass(params.bulletActiveClass+'-prev').prev().addClass(params.bulletActiveClass+'-prev-prev');}if(bulletIndex===lastIndex){$bullet.next().addClass(params.bulletActiveClass+'-next').next().addClass(params.bulletActiveClass+'-next-next');}}});}else{var $bullet=bullets.eq(current);$bullet.addClass(params.bulletActiveClass);if(params.dynamicBullets){var $firstDisplayedBullet=bullets.eq(firstIndex);var $lastDisplayedBullet=bullets.eq(lastIndex);for(var _i58=firstIndex;_i58<=lastIndex;_i58+=1){bullets.eq(_i58).addClass(params.bulletActiveClass+'-main');}$firstDisplayedBullet.prev().addClass(params.bulletActiveClass+'-prev').prev().addClass(params.bulletActiveClass+'-prev-prev');$lastDisplayedBullet.next().addClass(params.bulletActiveClass+'-next').next().addClass(params.bulletActiveClass+'-next-next');}}if(params.dynamicBullets){var dynamicBulletsLength=Math.min(bullets.length,params.dynamicMainBullets+4);var bulletsOffset=(swiper.pagination.bulletSize*dynamicBulletsLength-swiper.pagination.bulletSize)/2-midIndex*swiper.pagination.bulletSize;var offsetProp=rtl?'right':'left';bullets.css(swiper.isHorizontal()?offsetProp:'top',bulletsOffset+'px');}}if(params.type==='fraction'){$el.find('.'+params.currentClass).text(params.formatFractionCurrent(current+1));$el.find('.'+params.totalClass).text(params.formatFractionTotal(total));}if(params.type==='progressbar'){var progressbarDirection=void 0;if(params.progressbarOpposite){progressbarDirection=swiper.isHorizontal()?'vertical':'horizontal';}else{progressbarDirection=swiper.isHorizontal()?'horizontal':'vertical';}var scale=(current+1)/total;var scaleX=1;var scaleY=1;if(progressbarDirection==='horizontal'){scaleX=scale;}else{scaleY=scale;}$el.find('.'+params.progressbarFillClass).transform('translate3d(0,0,0) scaleX('+scaleX+') scaleY('+scaleY+')').transition(swiper.params.speed);}if(params.type==='custom'&&params.renderCustom){$el.html(params.renderCustom(swiper,current+1,total));swiper.emit('paginationRender',swiper,$el[0]);}else{swiper.emit('paginationUpdate',swiper,$el[0]);}$el[swiper.params.watchOverflow&&swiper.isLocked?'addClass':'removeClass'](params.lockClass);},render:function render(){// Render Container
var swiper=this;var params=swiper.params.pagination;if(!params.el||!swiper.pagination.el||!swiper.pagination.$el||swiper.pagination.$el.length===0)return;var slidesLength=swiper.virtual&&swiper.params.virtual.enabled?swiper.virtual.slides.length:swiper.slides.length;var $el=swiper.pagination.$el;var paginationHTML='';if(params.type==='bullets'){var numberOfBullets=swiper.params.loop?Math.ceil((slidesLength-swiper.loopedSlides*2)/swiper.params.slidesPerGroup):swiper.snapGrid.length;for(var _i59=0;_i59<numberOfBullets;_i59+=1){if(params.renderBullet){paginationHTML+=params.renderBullet.call(swiper,_i59,params.bulletClass);}else{paginationHTML+='<'+params.bulletElement+' class="'+params.bulletClass+'"></'+params.bulletElement+'>';}}$el.html(paginationHTML);swiper.pagination.bullets=$el.find('.'+params.bulletClass);}if(params.type==='fraction'){if(params.renderFraction){paginationHTML=params.renderFraction.call(swiper,params.currentClass,params.totalClass);}else{paginationHTML='<span class="'+params.currentClass+'"></span>'+' / '+('<span class="'+params.totalClass+'"></span>');}$el.html(paginationHTML);}if(params.type==='progressbar'){if(params.renderProgressbar){paginationHTML=params.renderProgressbar.call(swiper,params.progressbarFillClass);}else{paginationHTML='<span class="'+params.progressbarFillClass+'"></span>';}$el.html(paginationHTML);}if(params.type!=='custom'){swiper.emit('paginationRender',swiper.pagination.$el[0]);}},init:function init(){var swiper=this;var params=swiper.params.pagination;if(!params.el)return;var $el=(0,_dom2.default)(params.el);if($el.length===0)return;if(swiper.params.uniqueNavElements&&typeof params.el==='string'&&$el.length>1&&swiper.$el.find(params.el).length===1){$el=swiper.$el.find(params.el);}if(params.type==='bullets'&&params.clickable){$el.addClass(params.clickableClass);}$el.addClass(params.modifierClass+params.type);if(params.type==='bullets'&&params.dynamicBullets){$el.addClass(''+params.modifierClass+params.type+'-dynamic');swiper.pagination.dynamicBulletIndex=0;if(params.dynamicMainBullets<1){params.dynamicMainBullets=1;}}if(params.type==='progressbar'&&params.progressbarOpposite){$el.addClass(params.progressbarOppositeClass);}if(params.clickable){$el.on('click','.'+params.bulletClass,function onClick(e){e.preventDefault();var index=(0,_dom2.default)(this).index()*swiper.params.slidesPerGroup;if(swiper.params.loop)index+=swiper.loopedSlides;swiper.slideTo(index);});}Utils.extend(swiper.pagination,{$el:$el,el:$el[0]});},destroy:function destroy(){var swiper=this;var params=swiper.params.pagination;if(!params.el||!swiper.pagination.el||!swiper.pagination.$el||swiper.pagination.$el.length===0)return;var $el=swiper.pagination.$el;$el.removeClass(params.hiddenClass);$el.removeClass(params.modifierClass+params.type);if(swiper.pagination.bullets)swiper.pagination.bullets.removeClass(params.bulletActiveClass);if(params.clickable){$el.off('click','.'+params.bulletClass);}}};var Pagination$1={name:'pagination',params:{pagination:{el:null,bulletElement:'span',clickable:false,hideOnClick:false,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:false,type:'bullets',// 'bullets' or 'progressbar' or 'fraction' or 'custom'
dynamicBullets:false,dynamicMainBullets:1,formatFractionCurrent:function formatFractionCurrent(number){return number;},formatFractionTotal:function formatFractionTotal(number){return number;},bulletClass:'swiper-pagination-bullet',bulletActiveClass:'swiper-pagination-bullet-active',modifierClass:'swiper-pagination-',// NEW
currentClass:'swiper-pagination-current',totalClass:'swiper-pagination-total',hiddenClass:'swiper-pagination-hidden',progressbarFillClass:'swiper-pagination-progressbar-fill',progressbarOppositeClass:'swiper-pagination-progressbar-opposite',clickableClass:'swiper-pagination-clickable',// NEW
lockClass:'swiper-pagination-lock'}},create:function create(){var swiper=this;Utils.extend(swiper,{pagination:{init:Pagination.init.bind(swiper),render:Pagination.render.bind(swiper),update:Pagination.update.bind(swiper),destroy:Pagination.destroy.bind(swiper),dynamicBulletIndex:0}});},on:{init:function init(){var swiper=this;swiper.pagination.init();swiper.pagination.render();swiper.pagination.update();},activeIndexChange:function activeIndexChange(){var swiper=this;if(swiper.params.loop){swiper.pagination.update();}else if(typeof swiper.snapIndex==='undefined'){swiper.pagination.update();}},snapIndexChange:function snapIndexChange(){var swiper=this;if(!swiper.params.loop){swiper.pagination.update();}},slidesLengthChange:function slidesLengthChange(){var swiper=this;if(swiper.params.loop){swiper.pagination.render();swiper.pagination.update();}},snapGridLengthChange:function snapGridLengthChange(){var swiper=this;if(!swiper.params.loop){swiper.pagination.render();swiper.pagination.update();}},destroy:function destroy(){var swiper=this;swiper.pagination.destroy();},click:function click(e){var swiper=this;if(swiper.params.pagination.el&&swiper.params.pagination.hideOnClick&&swiper.pagination.$el.length>0&&!(0,_dom2.default)(e.target).hasClass(swiper.params.pagination.bulletClass)){swiper.pagination.$el.toggleClass(swiper.params.pagination.hiddenClass);}}}};var Scrollbar={setTranslate:function setTranslate(){var swiper=this;if(!swiper.params.scrollbar.el||!swiper.scrollbar.el)return;var scrollbar=swiper.scrollbar,rtl=swiper.rtlTranslate,progress=swiper.progress;var dragSize=scrollbar.dragSize,trackSize=scrollbar.trackSize,$dragEl=scrollbar.$dragEl,$el=scrollbar.$el;var params=swiper.params.scrollbar;var newSize=dragSize;var newPos=(trackSize-dragSize)*progress;if(rtl){newPos=-newPos;if(newPos>0){newSize=dragSize-newPos;newPos=0;}else if(-newPos+dragSize>trackSize){newSize=trackSize+newPos;}}else if(newPos<0){newSize=dragSize+newPos;newPos=0;}else if(newPos+dragSize>trackSize){newSize=trackSize-newPos;}if(swiper.isHorizontal()){if(Support.transforms3d){$dragEl.transform('translate3d('+newPos+'px, 0, 0)');}else{$dragEl.transform('translateX('+newPos+'px)');}$dragEl[0].style.width=newSize+'px';}else{if(Support.transforms3d){$dragEl.transform('translate3d(0px, '+newPos+'px, 0)');}else{$dragEl.transform('translateY('+newPos+'px)');}$dragEl[0].style.height=newSize+'px';}if(params.hide){clearTimeout(swiper.scrollbar.timeout);$el[0].style.opacity=1;swiper.scrollbar.timeout=setTimeout(function(){$el[0].style.opacity=0;$el.transition(400);},1000);}},setTransition:function setTransition(duration){var swiper=this;if(!swiper.params.scrollbar.el||!swiper.scrollbar.el)return;swiper.scrollbar.$dragEl.transition(duration);},updateSize:function updateSize(){var swiper=this;if(!swiper.params.scrollbar.el||!swiper.scrollbar.el)return;var scrollbar=swiper.scrollbar;var $dragEl=scrollbar.$dragEl,$el=scrollbar.$el;$dragEl[0].style.width='';$dragEl[0].style.height='';var trackSize=swiper.isHorizontal()?$el[0].offsetWidth:$el[0].offsetHeight;var divider=swiper.size/swiper.virtualSize;var moveDivider=divider*(trackSize/swiper.size);var dragSize=void 0;if(swiper.params.scrollbar.dragSize==='auto'){dragSize=trackSize*divider;}else{dragSize=parseInt(swiper.params.scrollbar.dragSize,10);}if(swiper.isHorizontal()){$dragEl[0].style.width=dragSize+'px';}else{$dragEl[0].style.height=dragSize+'px';}if(divider>=1){$el[0].style.display='none';}else{$el[0].style.display='';}if(swiper.params.scrollbarHide){$el[0].style.opacity=0;}Utils.extend(scrollbar,{trackSize:trackSize,divider:divider,moveDivider:moveDivider,dragSize:dragSize});scrollbar.$el[swiper.params.watchOverflow&&swiper.isLocked?'addClass':'removeClass'](swiper.params.scrollbar.lockClass);},setDragPosition:function setDragPosition(e){var swiper=this;var scrollbar=swiper.scrollbar,rtl=swiper.rtlTranslate;var $el=scrollbar.$el,dragSize=scrollbar.dragSize,trackSize=scrollbar.trackSize;var pointerPosition=void 0;if(swiper.isHorizontal()){pointerPosition=e.type==='touchstart'||e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX||e.clientX;}else{pointerPosition=e.type==='touchstart'||e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY||e.clientY;}var positionRatio=void 0;positionRatio=(pointerPosition-$el.offset()[swiper.isHorizontal()?'left':'top']-dragSize/2)/(trackSize-dragSize);positionRatio=Math.max(Math.min(positionRatio,1),0);if(rtl){positionRatio=1-positionRatio;}var position=swiper.minTranslate()+(swiper.maxTranslate()-swiper.minTranslate())*positionRatio;swiper.updateProgress(position);swiper.setTranslate(position);swiper.updateActiveIndex();swiper.updateSlidesClasses();},onDragStart:function onDragStart(e){var swiper=this;var params=swiper.params.scrollbar;var scrollbar=swiper.scrollbar,$wrapperEl=swiper.$wrapperEl;var $el=scrollbar.$el,$dragEl=scrollbar.$dragEl;swiper.scrollbar.isTouched=true;e.preventDefault();e.stopPropagation();$wrapperEl.transition(100);$dragEl.transition(100);scrollbar.setDragPosition(e);clearTimeout(swiper.scrollbar.dragTimeout);$el.transition(0);if(params.hide){$el.css('opacity',1);}swiper.emit('scrollbarDragStart',e);},onDragMove:function onDragMove(e){var swiper=this;var scrollbar=swiper.scrollbar,$wrapperEl=swiper.$wrapperEl;var $el=scrollbar.$el,$dragEl=scrollbar.$dragEl;if(!swiper.scrollbar.isTouched)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false;scrollbar.setDragPosition(e);$wrapperEl.transition(0);$el.transition(0);$dragEl.transition(0);swiper.emit('scrollbarDragMove',e);},onDragEnd:function onDragEnd(e){var swiper=this;var params=swiper.params.scrollbar;var scrollbar=swiper.scrollbar;var $el=scrollbar.$el;if(!swiper.scrollbar.isTouched)return;swiper.scrollbar.isTouched=false;if(params.hide){clearTimeout(swiper.scrollbar.dragTimeout);swiper.scrollbar.dragTimeout=Utils.nextTick(function(){$el.css('opacity',0);$el.transition(400);},1000);}swiper.emit('scrollbarDragEnd',e);if(params.snapOnRelease){swiper.slideToClosest();}},enableDraggable:function enableDraggable(){var swiper=this;if(!swiper.params.scrollbar.el)return;var scrollbar=swiper.scrollbar,touchEvents=swiper.touchEvents,touchEventsDesktop=swiper.touchEventsDesktop,params=swiper.params;var $el=scrollbar.$el;var target=$el[0];var activeListener=Support.passiveListener&&params.passiveListener?{passive:false,capture:false}:false;var passiveListener=Support.passiveListener&&params.passiveListener?{passive:true,capture:false}:false;if(!Support.touch&&(Support.pointerEvents||Support.prefixedPointerEvents)){target.addEventListener(touchEventsDesktop.start,swiper.scrollbar.onDragStart,activeListener);_ssrWindow.document.addEventListener(touchEventsDesktop.move,swiper.scrollbar.onDragMove,activeListener);_ssrWindow.document.addEventListener(touchEventsDesktop.end,swiper.scrollbar.onDragEnd,passiveListener);}else{if(Support.touch){target.addEventListener(touchEvents.start,swiper.scrollbar.onDragStart,activeListener);target.addEventListener(touchEvents.move,swiper.scrollbar.onDragMove,activeListener);target.addEventListener(touchEvents.end,swiper.scrollbar.onDragEnd,passiveListener);}if(params.simulateTouch&&!Device.ios&&!Device.android||params.simulateTouch&&!Support.touch&&Device.ios){target.addEventListener('mousedown',swiper.scrollbar.onDragStart,activeListener);_ssrWindow.document.addEventListener('mousemove',swiper.scrollbar.onDragMove,activeListener);_ssrWindow.document.addEventListener('mouseup',swiper.scrollbar.onDragEnd,passiveListener);}}},disableDraggable:function disableDraggable(){var swiper=this;if(!swiper.params.scrollbar.el)return;var scrollbar=swiper.scrollbar,touchEvents=swiper.touchEvents,touchEventsDesktop=swiper.touchEventsDesktop,params=swiper.params;var $el=scrollbar.$el;var target=$el[0];var activeListener=Support.passiveListener&&params.passiveListener?{passive:false,capture:false}:false;var passiveListener=Support.passiveListener&&params.passiveListener?{passive:true,capture:false}:false;if(!Support.touch&&(Support.pointerEvents||Support.prefixedPointerEvents)){target.removeEventListener(touchEventsDesktop.start,swiper.scrollbar.onDragStart,activeListener);_ssrWindow.document.removeEventListener(touchEventsDesktop.move,swiper.scrollbar.onDragMove,activeListener);_ssrWindow.document.removeEventListener(touchEventsDesktop.end,swiper.scrollbar.onDragEnd,passiveListener);}else{if(Support.touch){target.removeEventListener(touchEvents.start,swiper.scrollbar.onDragStart,activeListener);target.removeEventListener(touchEvents.move,swiper.scrollbar.onDragMove,activeListener);target.removeEventListener(touchEvents.end,swiper.scrollbar.onDragEnd,passiveListener);}if(params.simulateTouch&&!Device.ios&&!Device.android||params.simulateTouch&&!Support.touch&&Device.ios){target.removeEventListener('mousedown',swiper.scrollbar.onDragStart,activeListener);_ssrWindow.document.removeEventListener('mousemove',swiper.scrollbar.onDragMove,activeListener);_ssrWindow.document.removeEventListener('mouseup',swiper.scrollbar.onDragEnd,passiveListener);}}},init:function init(){var swiper=this;if(!swiper.params.scrollbar.el)return;var scrollbar=swiper.scrollbar,$swiperEl=swiper.$el;var params=swiper.params.scrollbar;var $el=(0,_dom2.default)(params.el);if(swiper.params.uniqueNavElements&&typeof params.el==='string'&&$el.length>1&&$swiperEl.find(params.el).length===1){$el=$swiperEl.find(params.el);}var $dragEl=$el.find('.'+swiper.params.scrollbar.dragClass);if($dragEl.length===0){$dragEl=(0,_dom2.default)('<div class="'+swiper.params.scrollbar.dragClass+'"></div>');$el.append($dragEl);}Utils.extend(scrollbar,{$el:$el,el:$el[0],$dragEl:$dragEl,dragEl:$dragEl[0]});if(params.draggable){scrollbar.enableDraggable();}},destroy:function destroy(){var swiper=this;swiper.scrollbar.disableDraggable();}};var Scrollbar$1={name:'scrollbar',params:{scrollbar:{el:null,dragSize:'auto',hide:false,draggable:false,snapOnRelease:true,lockClass:'swiper-scrollbar-lock',dragClass:'swiper-scrollbar-drag'}},create:function create(){var swiper=this;Utils.extend(swiper,{scrollbar:{init:Scrollbar.init.bind(swiper),destroy:Scrollbar.destroy.bind(swiper),updateSize:Scrollbar.updateSize.bind(swiper),setTranslate:Scrollbar.setTranslate.bind(swiper),setTransition:Scrollbar.setTransition.bind(swiper),enableDraggable:Scrollbar.enableDraggable.bind(swiper),disableDraggable:Scrollbar.disableDraggable.bind(swiper),setDragPosition:Scrollbar.setDragPosition.bind(swiper),onDragStart:Scrollbar.onDragStart.bind(swiper),onDragMove:Scrollbar.onDragMove.bind(swiper),onDragEnd:Scrollbar.onDragEnd.bind(swiper),isTouched:false,timeout:null,dragTimeout:null}});},on:{init:function init(){var swiper=this;swiper.scrollbar.init();swiper.scrollbar.updateSize();swiper.scrollbar.setTranslate();},update:function update(){var swiper=this;swiper.scrollbar.updateSize();},resize:function resize(){var swiper=this;swiper.scrollbar.updateSize();},observerUpdate:function observerUpdate(){var swiper=this;swiper.scrollbar.updateSize();},setTranslate:function setTranslate(){var swiper=this;swiper.scrollbar.setTranslate();},setTransition:function setTransition(duration){var swiper=this;swiper.scrollbar.setTransition(duration);},destroy:function destroy(){var swiper=this;swiper.scrollbar.destroy();}}};var Parallax={setTransform:function setTransform(el,progress){var swiper=this;var rtl=swiper.rtl;var $el=(0,_dom2.default)(el);var rtlFactor=rtl?-1:1;var p=$el.attr('data-swiper-parallax')||'0';var x=$el.attr('data-swiper-parallax-x');var y=$el.attr('data-swiper-parallax-y');var scale=$el.attr('data-swiper-parallax-scale');var opacity=$el.attr('data-swiper-parallax-opacity');if(x||y){x=x||'0';y=y||'0';}else if(swiper.isHorizontal()){x=p;y='0';}else{y=p;x='0';}if(x.indexOf('%')>=0){x=parseInt(x,10)*progress*rtlFactor+'%';}else{x=x*progress*rtlFactor+'px';}if(y.indexOf('%')>=0){y=parseInt(y,10)*progress+'%';}else{y=y*progress+'px';}if(typeof opacity!=='undefined'&&opacity!==null){var currentOpacity=opacity-(opacity-1)*(1-Math.abs(progress));$el[0].style.opacity=currentOpacity;}if(typeof scale==='undefined'||scale===null){$el.transform('translate3d('+x+', '+y+', 0px)');}else{var currentScale=scale-(scale-1)*(1-Math.abs(progress));$el.transform('translate3d('+x+', '+y+', 0px) scale('+currentScale+')');}},setTranslate:function setTranslate(){var swiper=this;var $el=swiper.$el,slides=swiper.slides,progress=swiper.progress,snapGrid=swiper.snapGrid;$el.children('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(index,el){swiper.parallax.setTransform(el,progress);});slides.each(function(slideIndex,slideEl){var slideProgress=slideEl.progress;if(swiper.params.slidesPerGroup>1&&swiper.params.slidesPerView!=='auto'){slideProgress+=Math.ceil(slideIndex/2)-progress*(snapGrid.length-1);}slideProgress=Math.min(Math.max(slideProgress,-1),1);(0,_dom2.default)(slideEl).find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(index,el){swiper.parallax.setTransform(el,slideProgress);});});},setTransition:function setTransition(){var duration=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.params.speed;var swiper=this;var $el=swiper.$el;$el.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(index,parallaxEl){var $parallaxEl=(0,_dom2.default)(parallaxEl);var parallaxDuration=parseInt($parallaxEl.attr('data-swiper-parallax-duration'),10)||duration;if(duration===0)parallaxDuration=0;$parallaxEl.transition(parallaxDuration);});}};var Parallax$1={name:'parallax',params:{parallax:{enabled:false}},create:function create(){var swiper=this;Utils.extend(swiper,{parallax:{setTransform:Parallax.setTransform.bind(swiper),setTranslate:Parallax.setTranslate.bind(swiper),setTransition:Parallax.setTransition.bind(swiper)}});},on:{beforeInit:function beforeInit(){var swiper=this;if(!swiper.params.parallax.enabled)return;swiper.params.watchSlidesProgress=true;},init:function init(){var swiper=this;if(!swiper.params.parallax)return;swiper.parallax.setTranslate();},setTranslate:function setTranslate(){var swiper=this;if(!swiper.params.parallax)return;swiper.parallax.setTranslate();},setTransition:function setTransition(duration){var swiper=this;if(!swiper.params.parallax)return;swiper.parallax.setTransition(duration);}}};var Zoom={// Calc Scale From Multi-touches
getDistanceBetweenTouches:function getDistanceBetweenTouches(e){if(e.targetTouches.length<2)return 1;var x1=e.targetTouches[0].pageX;var y1=e.targetTouches[0].pageY;var x2=e.targetTouches[1].pageX;var y2=e.targetTouches[1].pageY;var distance=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));return distance;},// Events
onGestureStart:function onGestureStart(e){var swiper=this;var params=swiper.params.zoom;var zoom=swiper.zoom;var gesture=zoom.gesture;zoom.fakeGestureTouched=false;zoom.fakeGestureMoved=false;if(!Support.gestures){if(e.type!=='touchstart'||e.type==='touchstart'&&e.targetTouches.length<2){return;}zoom.fakeGestureTouched=true;gesture.scaleStart=Zoom.getDistanceBetweenTouches(e);}if(!gesture.$slideEl||!gesture.$slideEl.length){gesture.$slideEl=(0,_dom2.default)(e.target).closest('.swiper-slide');if(gesture.$slideEl.length===0)gesture.$slideEl=swiper.slides.eq(swiper.activeIndex);gesture.$imageEl=gesture.$slideEl.find('img, svg, canvas');gesture.$imageWrapEl=gesture.$imageEl.parent('.'+params.containerClass);gesture.maxRatio=gesture.$imageWrapEl.attr('data-swiper-zoom')||params.maxRatio;if(gesture.$imageWrapEl.length===0){gesture.$imageEl=undefined;return;}}gesture.$imageEl.transition(0);swiper.zoom.isScaling=true;},onGestureChange:function onGestureChange(e){var swiper=this;var params=swiper.params.zoom;var zoom=swiper.zoom;var gesture=zoom.gesture;if(!Support.gestures){if(e.type!=='touchmove'||e.type==='touchmove'&&e.targetTouches.length<2){return;}zoom.fakeGestureMoved=true;gesture.scaleMove=Zoom.getDistanceBetweenTouches(e);}if(!gesture.$imageEl||gesture.$imageEl.length===0)return;if(Support.gestures){swiper.zoom.scale=e.scale*zoom.currentScale;}else{zoom.scale=gesture.scaleMove/gesture.scaleStart*zoom.currentScale;}if(zoom.scale>gesture.maxRatio){zoom.scale=gesture.maxRatio-1+Math.pow(zoom.scale-gesture.maxRatio+1,0.5);}if(zoom.scale<params.minRatio){zoom.scale=params.minRatio+1-Math.pow(params.minRatio-zoom.scale+1,0.5);}gesture.$imageEl.transform('translate3d(0,0,0) scale('+zoom.scale+')');},onGestureEnd:function onGestureEnd(e){var swiper=this;var params=swiper.params.zoom;var zoom=swiper.zoom;var gesture=zoom.gesture;if(!Support.gestures){if(!zoom.fakeGestureTouched||!zoom.fakeGestureMoved){return;}if(e.type!=='touchend'||e.type==='touchend'&&e.changedTouches.length<2&&!Device.android){return;}zoom.fakeGestureTouched=false;zoom.fakeGestureMoved=false;}if(!gesture.$imageEl||gesture.$imageEl.length===0)return;zoom.scale=Math.max(Math.min(zoom.scale,gesture.maxRatio),params.minRatio);gesture.$imageEl.transition(swiper.params.speed).transform('translate3d(0,0,0) scale('+zoom.scale+')');zoom.currentScale=zoom.scale;zoom.isScaling=false;if(zoom.scale===1)gesture.$slideEl=undefined;},onTouchStart:function onTouchStart(e){var swiper=this;var zoom=swiper.zoom;var gesture=zoom.gesture,image=zoom.image;if(!gesture.$imageEl||gesture.$imageEl.length===0)return;if(image.isTouched)return;if(Device.android)e.preventDefault();image.isTouched=true;image.touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;image.touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;},onTouchMove:function onTouchMove(e){var swiper=this;var zoom=swiper.zoom;var gesture=zoom.gesture,image=zoom.image,velocity=zoom.velocity;if(!gesture.$imageEl||gesture.$imageEl.length===0)return;swiper.allowClick=false;if(!image.isTouched||!gesture.$slideEl)return;if(!image.isMoved){image.width=gesture.$imageEl[0].offsetWidth;image.height=gesture.$imageEl[0].offsetHeight;image.startX=Utils.getTranslate(gesture.$imageWrapEl[0],'x')||0;image.startY=Utils.getTranslate(gesture.$imageWrapEl[0],'y')||0;gesture.slideWidth=gesture.$slideEl[0].offsetWidth;gesture.slideHeight=gesture.$slideEl[0].offsetHeight;gesture.$imageWrapEl.transition(0);if(swiper.rtl){image.startX=-image.startX;image.startY=-image.startY;}}// Define if we need image drag
var scaledWidth=image.width*zoom.scale;var scaledHeight=image.height*zoom.scale;if(scaledWidth<gesture.slideWidth&&scaledHeight<gesture.slideHeight)return;image.minX=Math.min(gesture.slideWidth/2-scaledWidth/2,0);image.maxX=-image.minX;image.minY=Math.min(gesture.slideHeight/2-scaledHeight/2,0);image.maxY=-image.minY;image.touchesCurrent.x=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;image.touchesCurrent.y=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(!image.isMoved&&!zoom.isScaling){if(swiper.isHorizontal()&&(Math.floor(image.minX)===Math.floor(image.startX)&&image.touchesCurrent.x<image.touchesStart.x||Math.floor(image.maxX)===Math.floor(image.startX)&&image.touchesCurrent.x>image.touchesStart.x)){image.isTouched=false;return;}else if(!swiper.isHorizontal()&&(Math.floor(image.minY)===Math.floor(image.startY)&&image.touchesCurrent.y<image.touchesStart.y||Math.floor(image.maxY)===Math.floor(image.startY)&&image.touchesCurrent.y>image.touchesStart.y)){image.isTouched=false;return;}}e.preventDefault();e.stopPropagation();image.isMoved=true;image.currentX=image.touchesCurrent.x-image.touchesStart.x+image.startX;image.currentY=image.touchesCurrent.y-image.touchesStart.y+image.startY;if(image.currentX<image.minX){image.currentX=image.minX+1-Math.pow(image.minX-image.currentX+1,0.8);}if(image.currentX>image.maxX){image.currentX=image.maxX-1+Math.pow(image.currentX-image.maxX+1,0.8);}if(image.currentY<image.minY){image.currentY=image.minY+1-Math.pow(image.minY-image.currentY+1,0.8);}if(image.currentY>image.maxY){image.currentY=image.maxY-1+Math.pow(image.currentY-image.maxY+1,0.8);}// Velocity
if(!velocity.prevPositionX)velocity.prevPositionX=image.touchesCurrent.x;if(!velocity.prevPositionY)velocity.prevPositionY=image.touchesCurrent.y;if(!velocity.prevTime)velocity.prevTime=Date.now();velocity.x=(image.touchesCurrent.x-velocity.prevPositionX)/(Date.now()-velocity.prevTime)/2;velocity.y=(image.touchesCurrent.y-velocity.prevPositionY)/(Date.now()-velocity.prevTime)/2;if(Math.abs(image.touchesCurrent.x-velocity.prevPositionX)<2)velocity.x=0;if(Math.abs(image.touchesCurrent.y-velocity.prevPositionY)<2)velocity.y=0;velocity.prevPositionX=image.touchesCurrent.x;velocity.prevPositionY=image.touchesCurrent.y;velocity.prevTime=Date.now();gesture.$imageWrapEl.transform('translate3d('+image.currentX+'px, '+image.currentY+'px,0)');},onTouchEnd:function onTouchEnd(){var swiper=this;var zoom=swiper.zoom;var gesture=zoom.gesture,image=zoom.image,velocity=zoom.velocity;if(!gesture.$imageEl||gesture.$imageEl.length===0)return;if(!image.isTouched||!image.isMoved){image.isTouched=false;image.isMoved=false;return;}image.isTouched=false;image.isMoved=false;var momentumDurationX=300;var momentumDurationY=300;var momentumDistanceX=velocity.x*momentumDurationX;var newPositionX=image.currentX+momentumDistanceX;var momentumDistanceY=velocity.y*momentumDurationY;var newPositionY=image.currentY+momentumDistanceY;// Fix duration
if(velocity.x!==0)momentumDurationX=Math.abs((newPositionX-image.currentX)/velocity.x);if(velocity.y!==0)momentumDurationY=Math.abs((newPositionY-image.currentY)/velocity.y);var momentumDuration=Math.max(momentumDurationX,momentumDurationY);image.currentX=newPositionX;image.currentY=newPositionY;// Define if we need image drag
var scaledWidth=image.width*zoom.scale;var scaledHeight=image.height*zoom.scale;image.minX=Math.min(gesture.slideWidth/2-scaledWidth/2,0);image.maxX=-image.minX;image.minY=Math.min(gesture.slideHeight/2-scaledHeight/2,0);image.maxY=-image.minY;image.currentX=Math.max(Math.min(image.currentX,image.maxX),image.minX);image.currentY=Math.max(Math.min(image.currentY,image.maxY),image.minY);gesture.$imageWrapEl.transition(momentumDuration).transform('translate3d('+image.currentX+'px, '+image.currentY+'px,0)');},onTransitionEnd:function onTransitionEnd(){var swiper=this;var zoom=swiper.zoom;var gesture=zoom.gesture;if(gesture.$slideEl&&swiper.previousIndex!==swiper.activeIndex){gesture.$imageEl.transform('translate3d(0,0,0) scale(1)');gesture.$imageWrapEl.transform('translate3d(0,0,0)');gesture.$slideEl=undefined;gesture.$imageEl=undefined;gesture.$imageWrapEl=undefined;zoom.scale=1;zoom.currentScale=1;}},// Toggle Zoom
toggle:function toggle(e){var swiper=this;var zoom=swiper.zoom;if(zoom.scale&&zoom.scale!==1){// Zoom Out
zoom.out();}else{// Zoom In
zoom.in(e);}},in:function _in(e){var swiper=this;var zoom=swiper.zoom;var params=swiper.params.zoom;var gesture=zoom.gesture,image=zoom.image;if(!gesture.$slideEl){gesture.$slideEl=swiper.clickedSlide?(0,_dom2.default)(swiper.clickedSlide):swiper.slides.eq(swiper.activeIndex);gesture.$imageEl=gesture.$slideEl.find('img, svg, canvas');gesture.$imageWrapEl=gesture.$imageEl.parent('.'+params.containerClass);}if(!gesture.$imageEl||gesture.$imageEl.length===0)return;gesture.$slideEl.addClass(''+params.zoomedSlideClass);var touchX=void 0;var touchY=void 0;var offsetX=void 0;var offsetY=void 0;var diffX=void 0;var diffY=void 0;var translateX=void 0;var translateY=void 0;var imageWidth=void 0;var imageHeight=void 0;var scaledWidth=void 0;var scaledHeight=void 0;var translateMinX=void 0;var translateMinY=void 0;var translateMaxX=void 0;var translateMaxY=void 0;var slideWidth=void 0;var slideHeight=void 0;if(typeof image.touchesStart.x==='undefined'&&e){touchX=e.type==='touchend'?e.changedTouches[0].pageX:e.pageX;touchY=e.type==='touchend'?e.changedTouches[0].pageY:e.pageY;}else{touchX=image.touchesStart.x;touchY=image.touchesStart.y;}zoom.scale=gesture.$imageWrapEl.attr('data-swiper-zoom')||params.maxRatio;zoom.currentScale=gesture.$imageWrapEl.attr('data-swiper-zoom')||params.maxRatio;if(e){slideWidth=gesture.$slideEl[0].offsetWidth;slideHeight=gesture.$slideEl[0].offsetHeight;offsetX=gesture.$slideEl.offset().left;offsetY=gesture.$slideEl.offset().top;diffX=offsetX+slideWidth/2-touchX;diffY=offsetY+slideHeight/2-touchY;imageWidth=gesture.$imageEl[0].offsetWidth;imageHeight=gesture.$imageEl[0].offsetHeight;scaledWidth=imageWidth*zoom.scale;scaledHeight=imageHeight*zoom.scale;translateMinX=Math.min(slideWidth/2-scaledWidth/2,0);translateMinY=Math.min(slideHeight/2-scaledHeight/2,0);translateMaxX=-translateMinX;translateMaxY=-translateMinY;translateX=diffX*zoom.scale;translateY=diffY*zoom.scale;if(translateX<translateMinX){translateX=translateMinX;}if(translateX>translateMaxX){translateX=translateMaxX;}if(translateY<translateMinY){translateY=translateMinY;}if(translateY>translateMaxY){translateY=translateMaxY;}}else{translateX=0;translateY=0;}gesture.$imageWrapEl.transition(300).transform('translate3d('+translateX+'px, '+translateY+'px,0)');gesture.$imageEl.transition(300).transform('translate3d(0,0,0) scale('+zoom.scale+')');},out:function out(){var swiper=this;var zoom=swiper.zoom;var params=swiper.params.zoom;var gesture=zoom.gesture;if(!gesture.$slideEl){gesture.$slideEl=swiper.clickedSlide?(0,_dom2.default)(swiper.clickedSlide):swiper.slides.eq(swiper.activeIndex);gesture.$imageEl=gesture.$slideEl.find('img, svg, canvas');gesture.$imageWrapEl=gesture.$imageEl.parent('.'+params.containerClass);}if(!gesture.$imageEl||gesture.$imageEl.length===0)return;zoom.scale=1;zoom.currentScale=1;gesture.$imageWrapEl.transition(300).transform('translate3d(0,0,0)');gesture.$imageEl.transition(300).transform('translate3d(0,0,0) scale(1)');gesture.$slideEl.removeClass(''+params.zoomedSlideClass);gesture.$slideEl=undefined;},// Attach/Detach Events
enable:function enable(){var swiper=this;var zoom=swiper.zoom;if(zoom.enabled)return;zoom.enabled=true;var passiveListener=swiper.touchEvents.start==='touchstart'&&Support.passiveListener&&swiper.params.passiveListeners?{passive:true,capture:false}:false;// Scale image
if(Support.gestures){swiper.$wrapperEl.on('gesturestart','.swiper-slide',zoom.onGestureStart,passiveListener);swiper.$wrapperEl.on('gesturechange','.swiper-slide',zoom.onGestureChange,passiveListener);swiper.$wrapperEl.on('gestureend','.swiper-slide',zoom.onGestureEnd,passiveListener);}else if(swiper.touchEvents.start==='touchstart'){swiper.$wrapperEl.on(swiper.touchEvents.start,'.swiper-slide',zoom.onGestureStart,passiveListener);swiper.$wrapperEl.on(swiper.touchEvents.move,'.swiper-slide',zoom.onGestureChange,passiveListener);swiper.$wrapperEl.on(swiper.touchEvents.end,'.swiper-slide',zoom.onGestureEnd,passiveListener);}// Move image
swiper.$wrapperEl.on(swiper.touchEvents.move,'.'+swiper.params.zoom.containerClass,zoom.onTouchMove);},disable:function disable(){var swiper=this;var zoom=swiper.zoom;if(!zoom.enabled)return;swiper.zoom.enabled=false;var passiveListener=swiper.touchEvents.start==='touchstart'&&Support.passiveListener&&swiper.params.passiveListeners?{passive:true,capture:false}:false;// Scale image
if(Support.gestures){swiper.$wrapperEl.off('gesturestart','.swiper-slide',zoom.onGestureStart,passiveListener);swiper.$wrapperEl.off('gesturechange','.swiper-slide',zoom.onGestureChange,passiveListener);swiper.$wrapperEl.off('gestureend','.swiper-slide',zoom.onGestureEnd,passiveListener);}else if(swiper.touchEvents.start==='touchstart'){swiper.$wrapperEl.off(swiper.touchEvents.start,'.swiper-slide',zoom.onGestureStart,passiveListener);swiper.$wrapperEl.off(swiper.touchEvents.move,'.swiper-slide',zoom.onGestureChange,passiveListener);swiper.$wrapperEl.off(swiper.touchEvents.end,'.swiper-slide',zoom.onGestureEnd,passiveListener);}// Move image
swiper.$wrapperEl.off(swiper.touchEvents.move,'.'+swiper.params.zoom.containerClass,zoom.onTouchMove);}};var Zoom$1={name:'zoom',params:{zoom:{enabled:false,maxRatio:3,minRatio:1,toggle:true,containerClass:'swiper-zoom-container',zoomedSlideClass:'swiper-slide-zoomed'}},create:function create(){var swiper=this;var zoom={enabled:false,scale:1,currentScale:1,isScaling:false,gesture:{$slideEl:undefined,slideWidth:undefined,slideHeight:undefined,$imageEl:undefined,$imageWrapEl:undefined,maxRatio:3},image:{isTouched:undefined,isMoved:undefined,currentX:undefined,currentY:undefined,minX:undefined,minY:undefined,maxX:undefined,maxY:undefined,width:undefined,height:undefined,startX:undefined,startY:undefined,touchesStart:{},touchesCurrent:{}},velocity:{x:undefined,y:undefined,prevPositionX:undefined,prevPositionY:undefined,prevTime:undefined}};'onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out'.split(' ').forEach(function(methodName){zoom[methodName]=Zoom[methodName].bind(swiper);});Utils.extend(swiper,{zoom:zoom});},on:{init:function init(){var swiper=this;if(swiper.params.zoom.enabled){swiper.zoom.enable();}},destroy:function destroy(){var swiper=this;swiper.zoom.disable();},touchStart:function touchStart(e){var swiper=this;if(!swiper.zoom.enabled)return;swiper.zoom.onTouchStart(e);},touchEnd:function touchEnd(e){var swiper=this;if(!swiper.zoom.enabled)return;swiper.zoom.onTouchEnd(e);},doubleTap:function doubleTap(e){var swiper=this;if(swiper.params.zoom.enabled&&swiper.zoom.enabled&&swiper.params.zoom.toggle){swiper.zoom.toggle(e);}},transitionEnd:function transitionEnd(){var swiper=this;if(swiper.zoom.enabled&&swiper.params.zoom.enabled){swiper.zoom.onTransitionEnd();}}}};var Lazy$2={loadInSlide:function loadInSlide(index){var loadInDuplicate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var swiper=this;var params=swiper.params.lazy;if(typeof index==='undefined')return;if(swiper.slides.length===0)return;var isVirtual=swiper.virtual&&swiper.params.virtual.enabled;var $slideEl=isVirtual?swiper.$wrapperEl.children('.'+swiper.params.slideClass+'[data-swiper-slide-index="'+index+'"]'):swiper.slides.eq(index);var $images=$slideEl.find('.'+params.elementClass+':not(.'+params.loadedClass+'):not(.'+params.loadingClass+')');if($slideEl.hasClass(params.elementClass)&&!$slideEl.hasClass(params.loadedClass)&&!$slideEl.hasClass(params.loadingClass)){$images=$images.add($slideEl[0]);}if($images.length===0)return;$images.each(function(imageIndex,imageEl){var $imageEl=(0,_dom2.default)(imageEl);$imageEl.addClass(params.loadingClass);var background=$imageEl.attr('data-background');var src=$imageEl.attr('data-src');var srcset=$imageEl.attr('data-srcset');var sizes=$imageEl.attr('data-sizes');swiper.loadImage($imageEl[0],src||background,srcset,sizes,false,function(){if(typeof swiper==='undefined'||swiper===null||!swiper||swiper&&!swiper.params||swiper.destroyed)return;if(background){$imageEl.css('background-image','url("'+background+'")');$imageEl.removeAttr('data-background');}else{if(srcset){$imageEl.attr('srcset',srcset);$imageEl.removeAttr('data-srcset');}if(sizes){$imageEl.attr('sizes',sizes);$imageEl.removeAttr('data-sizes');}if(src){$imageEl.attr('src',src);$imageEl.removeAttr('data-src');}}$imageEl.addClass(params.loadedClass).removeClass(params.loadingClass);$slideEl.find('.'+params.preloaderClass).remove();if(swiper.params.loop&&loadInDuplicate){var slideOriginalIndex=$slideEl.attr('data-swiper-slide-index');if($slideEl.hasClass(swiper.params.slideDuplicateClass)){var originalSlide=swiper.$wrapperEl.children('[data-swiper-slide-index="'+slideOriginalIndex+'"]:not(.'+swiper.params.slideDuplicateClass+')');swiper.lazy.loadInSlide(originalSlide.index(),false);}else{var duplicatedSlide=swiper.$wrapperEl.children('.'+swiper.params.slideDuplicateClass+'[data-swiper-slide-index="'+slideOriginalIndex+'"]');swiper.lazy.loadInSlide(duplicatedSlide.index(),false);}}swiper.emit('lazyImageReady',$slideEl[0],$imageEl[0]);});swiper.emit('lazyImageLoad',$slideEl[0],$imageEl[0]);});},load:function load(){var swiper=this;var $wrapperEl=swiper.$wrapperEl,swiperParams=swiper.params,slides=swiper.slides,activeIndex=swiper.activeIndex;var isVirtual=swiper.virtual&&swiperParams.virtual.enabled;var params=swiperParams.lazy;var slidesPerView=swiperParams.slidesPerView;if(slidesPerView==='auto'){slidesPerView=0;}function slideExist(index){if(isVirtual){if($wrapperEl.children('.'+swiperParams.slideClass+'[data-swiper-slide-index="'+index+'"]').length){return true;}}else if(slides[index])return true;return false;}function slideIndex(slideEl){if(isVirtual){return(0,_dom2.default)(slideEl).attr('data-swiper-slide-index');}return(0,_dom2.default)(slideEl).index();}if(!swiper.lazy.initialImageLoaded)swiper.lazy.initialImageLoaded=true;if(swiper.params.watchSlidesVisibility){$wrapperEl.children('.'+swiperParams.slideVisibleClass).each(function(elIndex,slideEl){var index=isVirtual?(0,_dom2.default)(slideEl).attr('data-swiper-slide-index'):(0,_dom2.default)(slideEl).index();swiper.lazy.loadInSlide(index);});}else if(slidesPerView>1){for(var _i60=activeIndex;_i60<activeIndex+slidesPerView;_i60+=1){if(slideExist(_i60))swiper.lazy.loadInSlide(_i60);}}else{swiper.lazy.loadInSlide(activeIndex);}if(params.loadPrevNext){if(slidesPerView>1||params.loadPrevNextAmount&&params.loadPrevNextAmount>1){var amount=params.loadPrevNextAmount;var spv=slidesPerView;var maxIndex=Math.min(activeIndex+spv+Math.max(amount,spv),slides.length);var minIndex=Math.max(activeIndex-Math.max(spv,amount),0);// Next Slides
for(var _i61=activeIndex+slidesPerView;_i61<maxIndex;_i61+=1){if(slideExist(_i61))swiper.lazy.loadInSlide(_i61);}// Prev Slides
for(var _i62=minIndex;_i62<activeIndex;_i62+=1){if(slideExist(_i62))swiper.lazy.loadInSlide(_i62);}}else{var nextSlide=$wrapperEl.children('.'+swiperParams.slideNextClass);if(nextSlide.length>0)swiper.lazy.loadInSlide(slideIndex(nextSlide));var prevSlide=$wrapperEl.children('.'+swiperParams.slidePrevClass);if(prevSlide.length>0)swiper.lazy.loadInSlide(slideIndex(prevSlide));}}}};var Lazy$3={name:'lazy',params:{lazy:{enabled:false,loadPrevNext:false,loadPrevNextAmount:1,loadOnTransitionStart:false,elementClass:'swiper-lazy',loadingClass:'swiper-lazy-loading',loadedClass:'swiper-lazy-loaded',preloaderClass:'swiper-lazy-preloader'}},create:function create(){var swiper=this;Utils.extend(swiper,{lazy:{initialImageLoaded:false,load:Lazy$2.load.bind(swiper),loadInSlide:Lazy$2.loadInSlide.bind(swiper)}});},on:{beforeInit:function beforeInit(){var swiper=this;if(swiper.params.lazy.enabled&&swiper.params.preloadImages){swiper.params.preloadImages=false;}},init:function init(){var swiper=this;if(swiper.params.lazy.enabled&&!swiper.params.loop&&swiper.params.initialSlide===0){swiper.lazy.load();}},scroll:function scroll(){var swiper=this;if(swiper.params.freeMode&&!swiper.params.freeModeSticky){swiper.lazy.load();}},resize:function resize(){var swiper=this;if(swiper.params.lazy.enabled){swiper.lazy.load();}},scrollbarDragMove:function scrollbarDragMove(){var swiper=this;if(swiper.params.lazy.enabled){swiper.lazy.load();}},transitionStart:function transitionStart(){var swiper=this;if(swiper.params.lazy.enabled){if(swiper.params.lazy.loadOnTransitionStart||!swiper.params.lazy.loadOnTransitionStart&&!swiper.lazy.initialImageLoaded){swiper.lazy.load();}}},transitionEnd:function transitionEnd(){var swiper=this;if(swiper.params.lazy.enabled&&!swiper.params.lazy.loadOnTransitionStart){swiper.lazy.load();}}}};/* eslint no-bitwise: ["error", { "allow": [">>"] }] */var Controller={LinearSpline:function LinearSpline(x,y){var binarySearch=function search(){var maxIndex=void 0;var minIndex=void 0;var guess=void 0;return function(array,val){minIndex=-1;maxIndex=array.length;while(maxIndex-minIndex>1){guess=maxIndex+minIndex>>1;if(array[guess]<=val){minIndex=guess;}else{maxIndex=guess;}}return maxIndex;};}();this.x=x;this.y=y;this.lastIndex=x.length-1;// Given an x value (x2), return the expected y2 value:
// (x1,y1) is the known point before given value,
// (x3,y3) is the known point after given value.
var i1=void 0;var i3=void 0;this.interpolate=function interpolate(x2){if(!x2)return 0;// Get the indexes of x1 and x3 (the array indexes before and after given x2):
i3=binarySearch(this.x,x2);i1=i3-1;// We have our indexes i1 & i3, so we can calculate already:
// y2 := ((x2−x1) × (y3−y1)) ÷ (x3−x1) + y1
return(x2-this.x[i1])*(this.y[i3]-this.y[i1])/(this.x[i3]-this.x[i1])+this.y[i1];};return this;},// xxx: for now i will just save one spline function to to
getInterpolateFunction:function getInterpolateFunction(c){var swiper=this;if(!swiper.controller.spline){swiper.controller.spline=swiper.params.loop?new Controller.LinearSpline(swiper.slidesGrid,c.slidesGrid):new Controller.LinearSpline(swiper.snapGrid,c.snapGrid);}},setTranslate:function setTranslate(_setTranslate,byController){var swiper=this;var controlled=swiper.controller.control;var multiplier=void 0;var controlledTranslate=void 0;function setControlledTranslate(c){// this will create an Interpolate function based on the snapGrids
// x is the Grid of the scrolled scroller and y will be the controlled scroller
// it makes sense to create this only once and recall it for the interpolation
// the function does a lot of value caching for performance
var translate=swiper.rtlTranslate?-swiper.translate:swiper.translate;if(swiper.params.controller.by==='slide'){swiper.controller.getInterpolateFunction(c);// i am not sure why the values have to be multiplicated this way, tried to invert the snapGrid
// but it did not work out
controlledTranslate=-swiper.controller.spline.interpolate(-translate);}if(!controlledTranslate||swiper.params.controller.by==='container'){multiplier=(c.maxTranslate()-c.minTranslate())/(swiper.maxTranslate()-swiper.minTranslate());controlledTranslate=(translate-swiper.minTranslate())*multiplier+c.minTranslate();}if(swiper.params.controller.inverse){controlledTranslate=c.maxTranslate()-controlledTranslate;}c.updateProgress(controlledTranslate);c.setTranslate(controlledTranslate,swiper);c.updateActiveIndex();c.updateSlidesClasses();}if(Array.isArray(controlled)){for(var _i63=0;_i63<controlled.length;_i63+=1){if(controlled[_i63]!==byController&&controlled[_i63]instanceof Swiper){setControlledTranslate(controlled[_i63]);}}}else if(controlled instanceof Swiper&&byController!==controlled){setControlledTranslate(controlled);}},setTransition:function setTransition(duration,byController){var swiper=this;var controlled=swiper.controller.control;var i=void 0;function setControlledTransition(c){c.setTransition(duration,swiper);if(duration!==0){c.transitionStart();c.$wrapperEl.transitionEnd(function(){if(!controlled)return;if(c.params.loop&&swiper.params.controller.by==='slide'){c.loopFix();}c.transitionEnd();});}}if(Array.isArray(controlled)){for(i=0;i<controlled.length;i+=1){if(controlled[i]!==byController&&controlled[i]instanceof Swiper){setControlledTransition(controlled[i]);}}}else if(controlled instanceof Swiper&&byController!==controlled){setControlledTransition(controlled);}}};var Controller$1={name:'controller',params:{controller:{control:undefined,inverse:false,by:'slide'// or 'container'
}},create:function create(){var swiper=this;Utils.extend(swiper,{controller:{control:swiper.params.controller.control,getInterpolateFunction:Controller.getInterpolateFunction.bind(swiper),setTranslate:Controller.setTranslate.bind(swiper),setTransition:Controller.setTransition.bind(swiper)}});},on:{update:function update(){var swiper=this;if(!swiper.controller.control)return;if(swiper.controller.spline){swiper.controller.spline=undefined;delete swiper.controller.spline;}},resize:function resize(){var swiper=this;if(!swiper.controller.control)return;if(swiper.controller.spline){swiper.controller.spline=undefined;delete swiper.controller.spline;}},observerUpdate:function observerUpdate(){var swiper=this;if(!swiper.controller.control)return;if(swiper.controller.spline){swiper.controller.spline=undefined;delete swiper.controller.spline;}},setTranslate:function setTranslate(translate,byController){var swiper=this;if(!swiper.controller.control)return;swiper.controller.setTranslate(translate,byController);},setTransition:function setTransition(duration,byController){var swiper=this;if(!swiper.controller.control)return;swiper.controller.setTransition(duration,byController);}}};var a11y={makeElFocusable:function makeElFocusable($el){$el.attr('tabIndex','0');return $el;},addElRole:function addElRole($el,role){$el.attr('role',role);return $el;},addElLabel:function addElLabel($el,label){$el.attr('aria-label',label);return $el;},disableEl:function disableEl($el){$el.attr('aria-disabled',true);return $el;},enableEl:function enableEl($el){$el.attr('aria-disabled',false);return $el;},onEnterKey:function onEnterKey(e){var swiper=this;var params=swiper.params.a11y;if(e.keyCode!==13)return;var $targetEl=(0,_dom2.default)(e.target);if(swiper.navigation&&swiper.navigation.$nextEl&&$targetEl.is(swiper.navigation.$nextEl)){if(!(swiper.isEnd&&!swiper.params.loop)){swiper.slideNext();}if(swiper.isEnd){swiper.a11y.notify(params.lastSlideMessage);}else{swiper.a11y.notify(params.nextSlideMessage);}}if(swiper.navigation&&swiper.navigation.$prevEl&&$targetEl.is(swiper.navigation.$prevEl)){if(!(swiper.isBeginning&&!swiper.params.loop)){swiper.slidePrev();}if(swiper.isBeginning){swiper.a11y.notify(params.firstSlideMessage);}else{swiper.a11y.notify(params.prevSlideMessage);}}if(swiper.pagination&&$targetEl.is('.'+swiper.params.pagination.bulletClass)){$targetEl[0].click();}},notify:function notify(message){var swiper=this;var notification=swiper.a11y.liveRegion;if(notification.length===0)return;notification.html('');notification.html(message);},updateNavigation:function updateNavigation(){var swiper=this;if(swiper.params.loop)return;var _swiper$navigation4=swiper.navigation,$nextEl=_swiper$navigation4.$nextEl,$prevEl=_swiper$navigation4.$prevEl;if($prevEl&&$prevEl.length>0){if(swiper.isBeginning){swiper.a11y.disableEl($prevEl);}else{swiper.a11y.enableEl($prevEl);}}if($nextEl&&$nextEl.length>0){if(swiper.isEnd){swiper.a11y.disableEl($nextEl);}else{swiper.a11y.enableEl($nextEl);}}},updatePagination:function updatePagination(){var swiper=this;var params=swiper.params.a11y;if(swiper.pagination&&swiper.params.pagination.clickable&&swiper.pagination.bullets&&swiper.pagination.bullets.length){swiper.pagination.bullets.each(function(bulletIndex,bulletEl){var $bulletEl=(0,_dom2.default)(bulletEl);swiper.a11y.makeElFocusable($bulletEl);swiper.a11y.addElRole($bulletEl,'button');swiper.a11y.addElLabel($bulletEl,params.paginationBulletMessage.replace(/{{index}}/,$bulletEl.index()+1));});}},init:function init(){var swiper=this;swiper.$el.append(swiper.a11y.liveRegion);// Navigation
var params=swiper.params.a11y;var $nextEl=void 0;var $prevEl=void 0;if(swiper.navigation&&swiper.navigation.$nextEl){$nextEl=swiper.navigation.$nextEl;}if(swiper.navigation&&swiper.navigation.$prevEl){$prevEl=swiper.navigation.$prevEl;}if($nextEl){swiper.a11y.makeElFocusable($nextEl);swiper.a11y.addElRole($nextEl,'button');swiper.a11y.addElLabel($nextEl,params.nextSlideMessage);$nextEl.on('keydown',swiper.a11y.onEnterKey);}if($prevEl){swiper.a11y.makeElFocusable($prevEl);swiper.a11y.addElRole($prevEl,'button');swiper.a11y.addElLabel($prevEl,params.prevSlideMessage);$prevEl.on('keydown',swiper.a11y.onEnterKey);}// Pagination
if(swiper.pagination&&swiper.params.pagination.clickable&&swiper.pagination.bullets&&swiper.pagination.bullets.length){swiper.pagination.$el.on('keydown','.'+swiper.params.pagination.bulletClass,swiper.a11y.onEnterKey);}},destroy:function destroy(){var swiper=this;if(swiper.a11y.liveRegion&&swiper.a11y.liveRegion.length>0)swiper.a11y.liveRegion.remove();var $nextEl=void 0;var $prevEl=void 0;if(swiper.navigation&&swiper.navigation.$nextEl){$nextEl=swiper.navigation.$nextEl;}if(swiper.navigation&&swiper.navigation.$prevEl){$prevEl=swiper.navigation.$prevEl;}if($nextEl){$nextEl.off('keydown',swiper.a11y.onEnterKey);}if($prevEl){$prevEl.off('keydown',swiper.a11y.onEnterKey);}// Pagination
if(swiper.pagination&&swiper.params.pagination.clickable&&swiper.pagination.bullets&&swiper.pagination.bullets.length){swiper.pagination.$el.off('keydown','.'+swiper.params.pagination.bulletClass,swiper.a11y.onEnterKey);}}};var A11y={name:'a11y',params:{a11y:{enabled:true,notificationClass:'swiper-notification',prevSlideMessage:'Previous slide',nextSlideMessage:'Next slide',firstSlideMessage:'This is the first slide',lastSlideMessage:'This is the last slide',paginationBulletMessage:'Go to slide {{index}}'}},create:function create(){var swiper=this;Utils.extend(swiper,{a11y:{liveRegion:(0,_dom2.default)('<span class="'+swiper.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}});Object.keys(a11y).forEach(function(methodName){swiper.a11y[methodName]=a11y[methodName].bind(swiper);});},on:{init:function init(){var swiper=this;if(!swiper.params.a11y.enabled)return;swiper.a11y.init();swiper.a11y.updateNavigation();},toEdge:function toEdge(){var swiper=this;if(!swiper.params.a11y.enabled)return;swiper.a11y.updateNavigation();},fromEdge:function fromEdge(){var swiper=this;if(!swiper.params.a11y.enabled)return;swiper.a11y.updateNavigation();},paginationUpdate:function paginationUpdate(){var swiper=this;if(!swiper.params.a11y.enabled)return;swiper.a11y.updatePagination();},destroy:function destroy(){var swiper=this;if(!swiper.params.a11y.enabled)return;swiper.a11y.destroy();}}};/* eslint no-underscore-dangle: "off" */var Autoplay={run:function run(){var swiper=this;var $activeSlideEl=swiper.slides.eq(swiper.activeIndex);var delay=swiper.params.autoplay.delay;if($activeSlideEl.attr('data-swiper-autoplay')){delay=$activeSlideEl.attr('data-swiper-autoplay')||swiper.params.autoplay.delay;}swiper.autoplay.timeout=Utils.nextTick(function(){if(swiper.params.autoplay.reverseDirection){if(swiper.params.loop){swiper.loopFix();swiper.slidePrev(swiper.params.speed,true,true);swiper.emit('autoplay');}else if(!swiper.isBeginning){swiper.slidePrev(swiper.params.speed,true,true);swiper.emit('autoplay');}else if(!swiper.params.autoplay.stopOnLastSlide){swiper.slideTo(swiper.slides.length-1,swiper.params.speed,true,true);swiper.emit('autoplay');}else{swiper.autoplay.stop();}}else if(swiper.params.loop){swiper.loopFix();swiper.slideNext(swiper.params.speed,true,true);swiper.emit('autoplay');}else if(!swiper.isEnd){swiper.slideNext(swiper.params.speed,true,true);swiper.emit('autoplay');}else if(!swiper.params.autoplay.stopOnLastSlide){swiper.slideTo(0,swiper.params.speed,true,true);swiper.emit('autoplay');}else{swiper.autoplay.stop();}},delay);},start:function start(){var swiper=this;if(typeof swiper.autoplay.timeout!=='undefined')return false;if(swiper.autoplay.running)return false;swiper.autoplay.running=true;swiper.emit('autoplayStart');swiper.autoplay.run();return true;},stop:function stop(){var swiper=this;if(!swiper.autoplay.running)return false;if(typeof swiper.autoplay.timeout==='undefined')return false;if(swiper.autoplay.timeout){clearTimeout(swiper.autoplay.timeout);swiper.autoplay.timeout=undefined;}swiper.autoplay.running=false;swiper.emit('autoplayStop');return true;},pause:function pause(speed){var swiper=this;if(!swiper.autoplay.running)return;if(swiper.autoplay.paused)return;if(swiper.autoplay.timeout)clearTimeout(swiper.autoplay.timeout);swiper.autoplay.paused=true;if(speed===0||!swiper.params.autoplay.waitForTransition){swiper.autoplay.paused=false;swiper.autoplay.run();}else{swiper.$wrapperEl[0].addEventListener('transitionend',swiper.autoplay.onTransitionEnd);swiper.$wrapperEl[0].addEventListener('webkitTransitionEnd',swiper.autoplay.onTransitionEnd);}}};var Autoplay$1={name:'autoplay',params:{autoplay:{enabled:false,delay:3000,waitForTransition:true,disableOnInteraction:true,stopOnLastSlide:false,reverseDirection:false}},create:function create(){var swiper=this;Utils.extend(swiper,{autoplay:{running:false,paused:false,run:Autoplay.run.bind(swiper),start:Autoplay.start.bind(swiper),stop:Autoplay.stop.bind(swiper),pause:Autoplay.pause.bind(swiper),onTransitionEnd:function onTransitionEnd(e){if(!swiper||swiper.destroyed||!swiper.$wrapperEl)return;if(e.target!==this)return;swiper.$wrapperEl[0].removeEventListener('transitionend',swiper.autoplay.onTransitionEnd);swiper.$wrapperEl[0].removeEventListener('webkitTransitionEnd',swiper.autoplay.onTransitionEnd);swiper.autoplay.paused=false;if(!swiper.autoplay.running){swiper.autoplay.stop();}else{swiper.autoplay.run();}}}});},on:{init:function init(){var swiper=this;if(swiper.params.autoplay.enabled){swiper.autoplay.start();}},beforeTransitionStart:function beforeTransitionStart(speed,internal){var swiper=this;if(swiper.autoplay.running){if(internal||!swiper.params.autoplay.disableOnInteraction){swiper.autoplay.pause(speed);}else{swiper.autoplay.stop();}}},sliderFirstMove:function sliderFirstMove(){var swiper=this;if(swiper.autoplay.running){if(swiper.params.autoplay.disableOnInteraction){swiper.autoplay.stop();}else{swiper.autoplay.pause();}}},destroy:function destroy(){var swiper=this;if(swiper.autoplay.running){swiper.autoplay.stop();}}}};var Fade={setTranslate:function setTranslate(){var swiper=this;var slides=swiper.slides;for(var _i64=0;_i64<slides.length;_i64+=1){var $slideEl=swiper.slides.eq(_i64);var offset=$slideEl[0].swiperSlideOffset;var tx=-offset;if(!swiper.params.virtualTranslate)tx-=swiper.translate;var ty=0;if(!swiper.isHorizontal()){ty=tx;tx=0;}var slideOpacity=swiper.params.fadeEffect.crossFade?Math.max(1-Math.abs($slideEl[0].progress),0):1+Math.min(Math.max($slideEl[0].progress,-1),0);$slideEl.css({opacity:slideOpacity}).transform('translate3d('+tx+'px, '+ty+'px, 0px)');}},setTransition:function setTransition(duration){var swiper=this;var slides=swiper.slides,$wrapperEl=swiper.$wrapperEl;slides.transition(duration);if(swiper.params.virtualTranslate&&duration!==0){var eventTriggered=false;slides.transitionEnd(function(){if(eventTriggered)return;if(!swiper||swiper.destroyed)return;eventTriggered=true;swiper.animating=false;var triggerEvents=['webkitTransitionEnd','transitionend'];for(var _i65=0;_i65<triggerEvents.length;_i65+=1){$wrapperEl.trigger(triggerEvents[_i65]);}});}}};var EffectFade={name:'effect-fade',params:{fadeEffect:{crossFade:false}},create:function create(){var swiper=this;Utils.extend(swiper,{fadeEffect:{setTranslate:Fade.setTranslate.bind(swiper),setTransition:Fade.setTransition.bind(swiper)}});},on:{beforeInit:function beforeInit(){var swiper=this;if(swiper.params.effect!=='fade')return;swiper.classNames.push(swiper.params.containerModifierClass+'fade');var overwriteParams={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:true,spaceBetween:0,virtualTranslate:true};Utils.extend(swiper.params,overwriteParams);Utils.extend(swiper.originalParams,overwriteParams);},setTranslate:function setTranslate(){var swiper=this;if(swiper.params.effect!=='fade')return;swiper.fadeEffect.setTranslate();},setTransition:function setTransition(duration){var swiper=this;if(swiper.params.effect!=='fade')return;swiper.fadeEffect.setTransition(duration);}}};var Cube={setTranslate:function setTranslate(){var swiper=this;var $el=swiper.$el,$wrapperEl=swiper.$wrapperEl,slides=swiper.slides,swiperWidth=swiper.width,swiperHeight=swiper.height,rtl=swiper.rtlTranslate,swiperSize=swiper.size;var params=swiper.params.cubeEffect;var isHorizontal=swiper.isHorizontal();var isVirtual=swiper.virtual&&swiper.params.virtual.enabled;var wrapperRotate=0;var $cubeShadowEl=void 0;if(params.shadow){if(isHorizontal){$cubeShadowEl=$wrapperEl.find('.swiper-cube-shadow');if($cubeShadowEl.length===0){$cubeShadowEl=(0,_dom2.default)('<div class="swiper-cube-shadow"></div>');$wrapperEl.append($cubeShadowEl);}$cubeShadowEl.css({height:swiperWidth+'px'});}else{$cubeShadowEl=$el.find('.swiper-cube-shadow');if($cubeShadowEl.length===0){$cubeShadowEl=(0,_dom2.default)('<div class="swiper-cube-shadow"></div>');$el.append($cubeShadowEl);}}}for(var _i66=0;_i66<slides.length;_i66+=1){var $slideEl=slides.eq(_i66);var slideIndex=_i66;if(isVirtual){slideIndex=parseInt($slideEl.attr('data-swiper-slide-index'),10);}var slideAngle=slideIndex*90;var round=Math.floor(slideAngle/360);if(rtl){slideAngle=-slideAngle;round=Math.floor(-slideAngle/360);}var progress=Math.max(Math.min($slideEl[0].progress,1),-1);var tx=0;var ty=0;var tz=0;if(slideIndex%4===0){tx=-round*4*swiperSize;tz=0;}else if((slideIndex-1)%4===0){tx=0;tz=-round*4*swiperSize;}else if((slideIndex-2)%4===0){tx=swiperSize+round*4*swiperSize;tz=swiperSize;}else if((slideIndex-3)%4===0){tx=-swiperSize;tz=3*swiperSize+swiperSize*4*round;}if(rtl){tx=-tx;}if(!isHorizontal){ty=tx;tx=0;}var transform='rotateX('+(isHorizontal?0:-slideAngle)+'deg) rotateY('+(isHorizontal?slideAngle:0)+'deg) translate3d('+tx+'px, '+ty+'px, '+tz+'px)';if(progress<=1&&progress>-1){wrapperRotate=slideIndex*90+progress*90;if(rtl)wrapperRotate=-slideIndex*90-progress*90;}$slideEl.transform(transform);if(params.slideShadows){// Set shadows
var shadowBefore=isHorizontal?$slideEl.find('.swiper-slide-shadow-left'):$slideEl.find('.swiper-slide-shadow-top');var shadowAfter=isHorizontal?$slideEl.find('.swiper-slide-shadow-right'):$slideEl.find('.swiper-slide-shadow-bottom');if(shadowBefore.length===0){shadowBefore=(0,_dom2.default)('<div class="swiper-slide-shadow-'+(isHorizontal?'left':'top')+'"></div>');$slideEl.append(shadowBefore);}if(shadowAfter.length===0){shadowAfter=(0,_dom2.default)('<div class="swiper-slide-shadow-'+(isHorizontal?'right':'bottom')+'"></div>');$slideEl.append(shadowAfter);}if(shadowBefore.length)shadowBefore[0].style.opacity=Math.max(-progress,0);if(shadowAfter.length)shadowAfter[0].style.opacity=Math.max(progress,0);}}$wrapperEl.css({'-webkit-transform-origin':'50% 50% -'+swiperSize/2+'px','-moz-transform-origin':'50% 50% -'+swiperSize/2+'px','-ms-transform-origin':'50% 50% -'+swiperSize/2+'px','transform-origin':'50% 50% -'+swiperSize/2+'px'});if(params.shadow){if(isHorizontal){$cubeShadowEl.transform('translate3d(0px, '+(swiperWidth/2+params.shadowOffset)+'px, '+-swiperWidth/2+'px) rotateX(90deg) rotateZ(0deg) scale('+params.shadowScale+')');}else{var shadowAngle=Math.abs(wrapperRotate)-Math.floor(Math.abs(wrapperRotate)/90)*90;var multiplier=1.5-(Math.sin(shadowAngle*2*Math.PI/360)/2+Math.cos(shadowAngle*2*Math.PI/360)/2);var scale1=params.shadowScale;var scale2=params.shadowScale/multiplier;var offset=params.shadowOffset;$cubeShadowEl.transform('scale3d('+scale1+', 1, '+scale2+') translate3d(0px, '+(swiperHeight/2+offset)+'px, '+-swiperHeight/2/scale2+'px) rotateX(-90deg)');}}var zFactor=Browser.isSafari||Browser.isUiWebView?-swiperSize/2:0;$wrapperEl.transform('translate3d(0px,0,'+zFactor+'px) rotateX('+(swiper.isHorizontal()?0:wrapperRotate)+'deg) rotateY('+(swiper.isHorizontal()?-wrapperRotate:0)+'deg)');},setTransition:function setTransition(duration){var swiper=this;var $el=swiper.$el,slides=swiper.slides;slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);if(swiper.params.cubeEffect.shadow&&!swiper.isHorizontal()){$el.find('.swiper-cube-shadow').transition(duration);}}};var EffectCube={name:'effect-cube',params:{cubeEffect:{slideShadows:true,shadow:true,shadowOffset:20,shadowScale:0.94}},create:function create(){var swiper=this;Utils.extend(swiper,{cubeEffect:{setTranslate:Cube.setTranslate.bind(swiper),setTransition:Cube.setTransition.bind(swiper)}});},on:{beforeInit:function beforeInit(){var swiper=this;if(swiper.params.effect!=='cube')return;swiper.classNames.push(swiper.params.containerModifierClass+'cube');swiper.classNames.push(swiper.params.containerModifierClass+'3d');var overwriteParams={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:true,resistanceRatio:0,spaceBetween:0,centeredSlides:false,virtualTranslate:true};Utils.extend(swiper.params,overwriteParams);Utils.extend(swiper.originalParams,overwriteParams);},setTranslate:function setTranslate(){var swiper=this;if(swiper.params.effect!=='cube')return;swiper.cubeEffect.setTranslate();},setTransition:function setTransition(duration){var swiper=this;if(swiper.params.effect!=='cube')return;swiper.cubeEffect.setTransition(duration);}}};var Flip={setTranslate:function setTranslate(){var swiper=this;var slides=swiper.slides,rtl=swiper.rtlTranslate;for(var _i67=0;_i67<slides.length;_i67+=1){var $slideEl=slides.eq(_i67);var progress=$slideEl[0].progress;if(swiper.params.flipEffect.limitRotation){progress=Math.max(Math.min($slideEl[0].progress,1),-1);}var offset=$slideEl[0].swiperSlideOffset;var rotate=-180*progress;var rotateY=rotate;var rotateX=0;var tx=-offset;var ty=0;if(!swiper.isHorizontal()){ty=tx;tx=0;rotateX=-rotateY;rotateY=0;}else if(rtl){rotateY=-rotateY;}$slideEl[0].style.zIndex=-Math.abs(Math.round(progress))+slides.length;if(swiper.params.flipEffect.slideShadows){// Set shadows
var shadowBefore=swiper.isHorizontal()?$slideEl.find('.swiper-slide-shadow-left'):$slideEl.find('.swiper-slide-shadow-top');var shadowAfter=swiper.isHorizontal()?$slideEl.find('.swiper-slide-shadow-right'):$slideEl.find('.swiper-slide-shadow-bottom');if(shadowBefore.length===0){shadowBefore=(0,_dom2.default)('<div class="swiper-slide-shadow-'+(swiper.isHorizontal()?'left':'top')+'"></div>');$slideEl.append(shadowBefore);}if(shadowAfter.length===0){shadowAfter=(0,_dom2.default)('<div class="swiper-slide-shadow-'+(swiper.isHorizontal()?'right':'bottom')+'"></div>');$slideEl.append(shadowAfter);}if(shadowBefore.length)shadowBefore[0].style.opacity=Math.max(-progress,0);if(shadowAfter.length)shadowAfter[0].style.opacity=Math.max(progress,0);}$slideEl.transform('translate3d('+tx+'px, '+ty+'px, 0px) rotateX('+rotateX+'deg) rotateY('+rotateY+'deg)');}},setTransition:function setTransition(duration){var swiper=this;var slides=swiper.slides,activeIndex=swiper.activeIndex,$wrapperEl=swiper.$wrapperEl;slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);if(swiper.params.virtualTranslate&&duration!==0){var eventTriggered=false;// eslint-disable-next-line
slides.eq(activeIndex).transitionEnd(function onTransitionEnd(){if(eventTriggered)return;if(!swiper||swiper.destroyed)return;// if (!$(this).hasClass(swiper.params.slideActiveClass)) return;
eventTriggered=true;swiper.animating=false;var triggerEvents=['webkitTransitionEnd','transitionend'];for(var _i68=0;_i68<triggerEvents.length;_i68+=1){$wrapperEl.trigger(triggerEvents[_i68]);}});}}};var EffectFlip={name:'effect-flip',params:{flipEffect:{slideShadows:true,limitRotation:true}},create:function create(){var swiper=this;Utils.extend(swiper,{flipEffect:{setTranslate:Flip.setTranslate.bind(swiper),setTransition:Flip.setTransition.bind(swiper)}});},on:{beforeInit:function beforeInit(){var swiper=this;if(swiper.params.effect!=='flip')return;swiper.classNames.push(swiper.params.containerModifierClass+'flip');swiper.classNames.push(swiper.params.containerModifierClass+'3d');var overwriteParams={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:true,spaceBetween:0,virtualTranslate:true};Utils.extend(swiper.params,overwriteParams);Utils.extend(swiper.originalParams,overwriteParams);},setTranslate:function setTranslate(){var swiper=this;if(swiper.params.effect!=='flip')return;swiper.flipEffect.setTranslate();},setTransition:function setTransition(duration){var swiper=this;if(swiper.params.effect!=='flip')return;swiper.flipEffect.setTransition(duration);}}};var Coverflow={setTranslate:function setTranslate(){var swiper=this;var swiperWidth=swiper.width,swiperHeight=swiper.height,slides=swiper.slides,$wrapperEl=swiper.$wrapperEl,slidesSizesGrid=swiper.slidesSizesGrid;var params=swiper.params.coverflowEffect;var isHorizontal=swiper.isHorizontal();var transform=swiper.translate;var center=isHorizontal?-transform+swiperWidth/2:-transform+swiperHeight/2;var rotate=isHorizontal?params.rotate:-params.rotate;var translate=params.depth;// Each slide offset from center
for(var _i69=0,length=slides.length;_i69<length;_i69+=1){var $slideEl=slides.eq(_i69);var slideSize=slidesSizesGrid[_i69];var slideOffset=$slideEl[0].swiperSlideOffset;var offsetMultiplier=(center-slideOffset-slideSize/2)/slideSize*params.modifier;var rotateY=isHorizontal?rotate*offsetMultiplier:0;var rotateX=isHorizontal?0:rotate*offsetMultiplier;// var rotateZ = 0
var translateZ=-translate*Math.abs(offsetMultiplier);var translateY=isHorizontal?0:params.stretch*offsetMultiplier;var translateX=isHorizontal?params.stretch*offsetMultiplier:0;// Fix for ultra small values
if(Math.abs(translateX)<0.001)translateX=0;if(Math.abs(translateY)<0.001)translateY=0;if(Math.abs(translateZ)<0.001)translateZ=0;if(Math.abs(rotateY)<0.001)rotateY=0;if(Math.abs(rotateX)<0.001)rotateX=0;var slideTransform='translate3d('+translateX+'px,'+translateY+'px,'+translateZ+'px)  rotateX('+rotateX+'deg) rotateY('+rotateY+'deg)';$slideEl.transform(slideTransform);$slideEl[0].style.zIndex=-Math.abs(Math.round(offsetMultiplier))+1;if(params.slideShadows){// Set shadows
var $shadowBeforeEl=isHorizontal?$slideEl.find('.swiper-slide-shadow-left'):$slideEl.find('.swiper-slide-shadow-top');var $shadowAfterEl=isHorizontal?$slideEl.find('.swiper-slide-shadow-right'):$slideEl.find('.swiper-slide-shadow-bottom');if($shadowBeforeEl.length===0){$shadowBeforeEl=(0,_dom2.default)('<div class="swiper-slide-shadow-'+(isHorizontal?'left':'top')+'"></div>');$slideEl.append($shadowBeforeEl);}if($shadowAfterEl.length===0){$shadowAfterEl=(0,_dom2.default)('<div class="swiper-slide-shadow-'+(isHorizontal?'right':'bottom')+'"></div>');$slideEl.append($shadowAfterEl);}if($shadowBeforeEl.length)$shadowBeforeEl[0].style.opacity=offsetMultiplier>0?offsetMultiplier:0;if($shadowAfterEl.length)$shadowAfterEl[0].style.opacity=-offsetMultiplier>0?-offsetMultiplier:0;}}// Set correct perspective for IE10
if(Support.pointerEvents||Support.prefixedPointerEvents){var ws=$wrapperEl[0].style;ws.perspectiveOrigin=center+'px 50%';}},setTransition:function setTransition(duration){var swiper=this;swiper.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);}};var EffectCoverflow={name:'effect-coverflow',params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:true}},create:function create(){var swiper=this;Utils.extend(swiper,{coverflowEffect:{setTranslate:Coverflow.setTranslate.bind(swiper),setTransition:Coverflow.setTransition.bind(swiper)}});},on:{beforeInit:function beforeInit(){var swiper=this;if(swiper.params.effect!=='coverflow')return;swiper.classNames.push(swiper.params.containerModifierClass+'coverflow');swiper.classNames.push(swiper.params.containerModifierClass+'3d');swiper.params.watchSlidesProgress=true;swiper.originalParams.watchSlidesProgress=true;},setTranslate:function setTranslate(){var swiper=this;if(swiper.params.effect!=='coverflow')return;swiper.coverflowEffect.setTranslate();},setTransition:function setTransition(duration){var swiper=this;if(swiper.params.effect!=='coverflow')return;swiper.coverflowEffect.setTransition(duration);}}};// Swiper Class
Swiper.use([Device$1,Browser$1,Support$1,Resize,Observer$1,Virtual$1,Navigation$1,Pagination$1,Scrollbar$1,Parallax$1,Zoom$1,Lazy$3,Controller$1,A11y,Autoplay$1,EffectFade,EffectCube,EffectFlip,EffectCoverflow]);function initSwipers(swiperEl){var app=this;var $swiperEl=(0,_dom2.default)(swiperEl);if($swiperEl.length===0)return;if($swiperEl[0].swiper)return;var initialSlide=void 0;var params={};var isTabs=void 0;var isRoutableTabs=void 0;if($swiperEl.hasClass('tabs-swipeable-wrap')){$swiperEl.addClass('swiper-container').children('.tabs').addClass('swiper-wrapper').children('.tab').addClass('swiper-slide');initialSlide=$swiperEl.children('.tabs').children('.tab-active').index();isTabs=true;isRoutableTabs=$swiperEl.find('.tabs-routable').length>0;}if($swiperEl.attr('data-swiper')){params=JSON.parse($swiperEl.attr('data-swiper'));}else{params=$swiperEl.dataset();Object.keys(params).forEach(function(key){var value=params[key];if(typeof value==='string'&&value.indexOf('{')===0&&value.indexOf('}')>0){try{params[key]=JSON.parse(value);}catch(e){// not JSON
}}});}if(typeof params.initialSlide==='undefined'&&typeof initialSlide!=='undefined'){params.initialSlide=initialSlide;}var swiper=app.swiper.create($swiperEl[0],params);if(isTabs){swiper.on('slideChange',function(){if(isRoutableTabs){var view=app.views.get($swiperEl.parents('.view'));if(!view)view=app.views.main;var router=view.router;var tabRoute=router.findTabRoute(swiper.slides.eq(swiper.activeIndex)[0]);if(tabRoute)router.navigate(tabRoute.path);}else{app.tab.show({tabEl:swiper.slides.eq(swiper.activeIndex)});}});}}var Swiper$1={name:'swiper',static:{Swiper:Swiper},create:function create(){var app=this;app.swiper=ConstructorMethods({defaultSelector:'.swiper-container',constructor:Swiper,domProp:'swiper'});},on:{pageBeforeRemove:function pageBeforeRemove(page){var app=this;page.$el.find('.swiper-init, .tabs-swipeable-wrap').each(function(index,swiperEl){app.swiper.destroy(swiperEl);});},pageMounted:function pageMounted(page){var app=this;page.$el.find('.tabs-swipeable-wrap').each(function(index,swiperEl){initSwipers.call(app,swiperEl);});},pageInit:function pageInit(page){var app=this;page.$el.find('.swiper-init, .tabs-swipeable-wrap').each(function(index,swiperEl){initSwipers.call(app,swiperEl);});},pageReinit:function pageReinit(page){var app=this;page.$el.find('.swiper-init, .tabs-swipeable-wrap').each(function(index,swiperEl){var swiper=app.swiper.get(swiperEl);if(swiper&&swiper.update)swiper.update();});},tabMounted:function tabMounted(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.swiper-init, .tabs-swipeable-wrap').each(function(index,swiperEl){initSwipers.call(app,swiperEl);});},tabShow:function tabShow(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.swiper-init, .tabs-swipeable-wrap').each(function(index,swiperEl){var swiper=app.swiper.get(swiperEl);if(swiper&&swiper.update)swiper.update();});},tabBeforeRemove:function tabBeforeRemove(tabEl){var app=this;(0,_dom2.default)(tabEl).find('.swiper-init, .tabs-swipeable-wrap').each(function(index,swiperEl){app.swiper.destroy(swiperEl);});}}};/* eslint indent: ["off"] */var PhotoBrowser=function(_Framework7Class20){_inherits(PhotoBrowser,_Framework7Class20);function PhotoBrowser(app){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,PhotoBrowser);var _this30=_possibleConstructorReturn(this,(PhotoBrowser.__proto__||Object.getPrototypeOf(PhotoBrowser)).call(this,params,[app]));var pb=_this30;pb.app=app;var defaults=Utils.extend({on:{}},app.params.photoBrowser);// Extend defaults with modules params
pb.useModulesParams(defaults);pb.params=Utils.extend(defaults,params);Utils.extend(pb,{exposed:false,opened:false,activeIndex:pb.params.swiper.initialSlide,url:pb.params.url,view:pb.params.view||app.views.main,swipeToClose:{allow:true,isTouched:false,diff:undefined,start:undefined,current:undefined,started:false,activeSlide:undefined,timeStart:undefined}});// Install Modules
pb.useModules();// Init
pb.init();return _this30;}_createClass(PhotoBrowser,[{key:'onSlideChange',value:function onSlideChange(swiper){var pb=this;pb.activeIndex=swiper.activeIndex;var current=swiper.activeIndex+1;var total=pb.params.virtualSlides?pb.params.photos.length:swiper.slides.length;if(swiper.params.loop){total-=2;current-=swiper.loopedSlides;if(current<1)current=total+current;if(current>total)current-=total;}var $activeSlideEl=pb.params.virtualSlides?swiper.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+swiper.activeIndex+'"]'):swiper.slides.eq(swiper.activeIndex);var $previousSlideEl=pb.params.virtualSlides?swiper.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+swiper.previousIndex+'"]'):swiper.slides.eq(swiper.previousIndex);var $currentEl=pb.$el.find('.photo-browser-current');var $totalEl=pb.$el.find('.photo-browser-total');if(pb.params.type==='page'&&pb.params.navbar&&$currentEl.length===0&&pb.app.theme==='ios'){var navbarEl=pb.app.navbar.getElByPage(pb.$el);if(navbarEl){$currentEl=(0,_dom2.default)(navbarEl).find('.photo-browser-current');$totalEl=(0,_dom2.default)(navbarEl).find('.photo-browser-total');}}$currentEl.text(current);$totalEl.text(total);// Update captions
if(pb.captions.length>0){var captionIndex=swiper.params.loop?$activeSlideEl.attr('data-swiper-slide-index'):pb.activeIndex;pb.$captionsContainerEl.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');pb.$captionsContainerEl.find('[data-caption-index="'+captionIndex+'"]').addClass('photo-browser-caption-active');}// Stop Video
var previousSlideVideo=$previousSlideEl.find('video');if(previousSlideVideo.length>0){if('pause'in previousSlideVideo[0])previousSlideVideo[0].pause();}}},{key:'onTouchStart',value:function onTouchStart(){var pb=this;var swipeToClose=pb.swipeToClose;if(!swipeToClose.allow)return;swipeToClose.isTouched=true;}},{key:'onTouchMove',value:function onTouchMove(e){var pb=this;var swipeToClose=pb.swipeToClose;if(!swipeToClose.isTouched)return;if(!swipeToClose.started){swipeToClose.started=true;swipeToClose.start=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(pb.params.virtualSlides){swipeToClose.activeSlide=pb.swiper.$wrapperEl.children('.swiper-slide-active');}else{swipeToClose.activeSlide=pb.swiper.slides.eq(pb.swiper.activeIndex);}swipeToClose.timeStart=Utils.now();}e.preventDefault();swipeToClose.current=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;swipeToClose.diff=swipeToClose.start-swipeToClose.current;var opacity=1-Math.abs(swipeToClose.diff)/300;var color=pb.exposed||pb.params.theme==='dark'?0:255;swipeToClose.activeSlide.transform('translate3d(0,'+-swipeToClose.diff+'px,0)');pb.swiper.$el.css('background-color','rgba('+color+', '+color+', '+color+', '+opacity+')').transition(0);}},{key:'onTouchEnd',value:function onTouchEnd(){var pb=this;var swipeToClose=pb.swipeToClose;swipeToClose.isTouched=false;if(!swipeToClose.started){swipeToClose.started=false;return;}swipeToClose.started=false;swipeToClose.allow=false;var diff=Math.abs(swipeToClose.diff);var timeDiff=new Date().getTime()-swipeToClose.timeStart;if(timeDiff<300&&diff>20||timeDiff>=300&&diff>100){Utils.nextTick(function(){if(pb.$el){if(swipeToClose.diff<0)pb.$el.addClass('swipe-close-to-bottom');else pb.$el.addClass('swipe-close-to-top');}pb.emit('local::swipeToClose',pb);pb.close();swipeToClose.allow=true;});return;}if(diff!==0){swipeToClose.activeSlide.addClass('photo-browser-transitioning').transitionEnd(function(){swipeToClose.allow=true;swipeToClose.activeSlide.removeClass('photo-browser-transitioning');});}else{swipeToClose.allow=true;}pb.swiper.$el.transition('').css('background-color','');swipeToClose.activeSlide.transform('');}// Render Functions
},{key:'renderNavbar',value:function renderNavbar(){var pb=this;if(pb.params.renderNavbar)return pb.params.renderNavbar.call(pb);var iconsColor=pb.params.iconsColor;if(!pb.params.iconsColor&&pb.params.theme==='dark')iconsColor='white';var backLinkText=pb.app.theme==='ios'&&pb.params.backLinkText?pb.params.backLinkText:'';var isPopup=pb.params.type!=='page';var navbarHtml=('\n      <div class="navbar">\n        <div class="navbar-inner sliding">\n          <div class="left">\n            <a href="#" class="link '+(isPopup?'popup-close':'')+' '+(!backLinkText?'icon-only':'')+' '+(!isPopup?'back':'')+'" '+(isPopup?'data-popup=".photo-browser-popup"':'')+'>\n              <i class="icon icon-back '+(iconsColor?'color-'+iconsColor:'')+'"></i>\n              '+(backLinkText?'<span>'+backLinkText+'</span>':'')+'\n            </a>\n          </div>\n          <div class="title">\n            <span class="photo-browser-current"></span>\n            <span class="photo-browser-of">'+pb.params.navbarOfText+'</span>\n            <span class="photo-browser-total"></span>\n          </div>\n          <div class="right"></div>\n        </div>\n      </div>\n    ').trim();return navbarHtml;}},{key:'renderToolbar',value:function renderToolbar(){var pb=this;if(pb.params.renderToolbar)return pb.params.renderToolbar.call(pb);var iconsColor=pb.params.iconsColor;if(!pb.params.iconsColor&&pb.params.theme==='dark')iconsColor='white';var toolbarHtml=('\n      <div class="toolbar tabbar toolbar-bottom-md">\n        <div class="toolbar-inner">\n          <a href="#" class="link photo-browser-prev">\n            <i class="icon icon-back '+(iconsColor?'color-'+iconsColor:'')+'"></i>\n          </a>\n          <a href="#" class="link photo-browser-next">\n            <i class="icon icon-forward '+(iconsColor?'color-'+iconsColor:'')+'"></i>\n          </a>\n        </div>\n      </div>\n    ').trim();return toolbarHtml;}},{key:'renderCaption',value:function renderCaption(caption,index){var pb=this;if(pb.params.renderCaption)return pb.params.renderCaption.call(pb,caption,index);var captionHtml=('\n      <div class="photo-browser-caption" data-caption-index="'+index+'">\n        '+caption+'\n      </div>\n    ').trim();return captionHtml;}},{key:'renderObject',value:function renderObject(photo,index){var pb=this;if(pb.params.renderObject)return pb.params.renderObject.call(pb,photo,index);var objHtml='\n      <div class="photo-browser-slide photo-browser-object-slide swiper-slide" data-swiper-slide-index="'+index+'">'+(photo.html?photo.html:photo)+'</div>\n    ';return objHtml;}},{key:'renderLazyPhoto',value:function renderLazyPhoto(photo,index){var pb=this;if(pb.params.renderLazyPhoto)return pb.params.renderLazyPhoto.call(pb,photo,index);var photoHtml=('\n      <div class="photo-browser-slide photo-browser-slide-lazy swiper-slide" data-swiper-slide-index="'+index+'">\n          <div class="preloader swiper-lazy-preloader '+(pb.params.theme==='dark'?'color-white':'')+'">'+(pb.app.theme==='md'?Utils.mdPreloaderContent:'')+'</div>\n          <span class="swiper-zoom-container">\n              <img data-src="'+(photo.url?photo.url:photo)+'" class="swiper-lazy">\n          </span>\n      </div>\n    ').trim();return photoHtml;}},{key:'renderPhoto',value:function renderPhoto(photo,index){var pb=this;if(pb.params.renderPhoto)return pb.params.renderPhoto.call(pb,photo,index);var photoHtml=('\n      <div class="photo-browser-slide swiper-slide" data-swiper-slide-index="'+index+'">\n        <span class="swiper-zoom-container">\n          <img src="'+(photo.url?photo.url:photo)+'">\n        </span>\n      </div>\n    ').trim();return photoHtml;}},{key:'render',value:function render(){var pb=this;if(pb.params.render)return pb.params.render.call(pb,pb.params);var html=('\n      <div class="photo-browser photo-browser-'+pb.params.theme+'">\n        <div class="view">\n          <div class="page photo-browser-page photo-browser-page-'+pb.params.theme+' no-toolbar '+(!pb.params.navbar?'no-navbar':'')+'" data-name="photo-browser-page">\n            '+(pb.params.navbar?pb.renderNavbar():'')+'\n            '+(pb.params.toolbar?pb.renderToolbar():'')+'\n            <div class="photo-browser-captions photo-browser-captions-'+(pb.params.captionsTheme||pb.params.theme)+'">\n              '+pb.params.photos.map(function(photo,index){if(photo.caption)return pb.renderCaption(photo.caption,index);return'';}).join(' ')+'\n            </div>\n            <div class="photo-browser-swiper-container swiper-container">\n              <div class="photo-browser-swiper-wrapper swiper-wrapper">\n                '+(pb.params.virtualSlides?'':pb.params.photos.map(function(photo,index){if(photo.html||(typeof photo==='string'||photo instanceof String)&&photo.indexOf('<')>=0&&photo.indexOf('>')>=0){return pb.renderObject(photo,index);}else if(pb.params.swiper.lazy===true||pb.params.swiper.lazy&&pb.params.swiper.lazy.enabled){return pb.renderLazyPhoto(photo,index);}return pb.renderPhoto(photo,index);}).join(' '))+'\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ').trim();return html;}},{key:'renderStandalone',value:function renderStandalone(){var pb=this;if(pb.params.renderStandalone)return pb.params.renderStandalone.call(pb);var standaloneHtml='<div class="popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen">'+pb.render()+'</div>';return standaloneHtml;}},{key:'renderPage',value:function renderPage(){var pb=this;if(pb.params.renderPage)return pb.params.renderPage.call(pb);var pageHtml=pb.render();return pageHtml;}},{key:'renderPopup',value:function renderPopup(){var pb=this;if(pb.params.renderPopup)return pb.params.renderPopup.call(pb);var popupHtml='<div class="popup photo-browser-popup">'+pb.render()+'</div>';return popupHtml;}// Callbacks
},{key:'onOpen',value:function onOpen(type,el){var pb=this;var app=pb.app;var $el=(0,_dom2.default)(el);$el[0].f7PhotoBrowser=pb;pb.$el=$el;pb.el=$el[0];pb.openedIn=type;pb.opened=true;pb.$swiperContainerEl=pb.$el.find('.photo-browser-swiper-container');pb.$swiperWrapperEl=pb.$el.find('.photo-browser-swiper-wrapper');pb.slides=pb.$el.find('.photo-browser-slide');pb.$captionsContainerEl=pb.$el.find('.photo-browser-captions');pb.captions=pb.$el.find('.photo-browser-caption');// Init Swiper
var swiperParams=Utils.extend({},pb.params.swiper,{initialSlide:pb.activeIndex,on:{tap:function tap(e){pb.emit('local::tap',e);},click:function click(e){if(pb.params.exposition){pb.expositionToggle();}pb.emit('local::click',e);},doubleTap:function doubleTap(e){pb.emit('local::doubleTap',e);},slideChange:function slideChange(){var swiper=this;pb.onSlideChange(swiper);for(var _len34=arguments.length,args=Array(_len34),_key34=0;_key34<_len34;_key34++){args[_key34]=arguments[_key34];}pb.emit.apply(pb,['local::slideChange'].concat(_toConsumableArray(args)));},transitionStart:function transitionStart(){for(var _len35=arguments.length,args=Array(_len35),_key35=0;_key35<_len35;_key35++){args[_key35]=arguments[_key35];}pb.emit.apply(pb,['local::transitionStart'].concat(_toConsumableArray(args)));},transitionEnd:function transitionEnd(){for(var _len36=arguments.length,args=Array(_len36),_key36=0;_key36<_len36;_key36++){args[_key36]=arguments[_key36];}pb.emit.apply(pb,['local::transitionEnd'].concat(_toConsumableArray(args)));},slideChangeTransitionStart:function slideChangeTransitionStart(){for(var _len37=arguments.length,args=Array(_len37),_key37=0;_key37<_len37;_key37++){args[_key37]=arguments[_key37];}pb.emit.apply(pb,['local::slideChangeTransitionStart'].concat(_toConsumableArray(args)));},slideChangeTransitionEnd:function slideChangeTransitionEnd(){for(var _len38=arguments.length,args=Array(_len38),_key38=0;_key38<_len38;_key38++){args[_key38]=arguments[_key38];}pb.emit.apply(pb,['local::slideChangeTransitionEnd'].concat(_toConsumableArray(args)));},lazyImageLoad:function lazyImageLoad(){for(var _len39=arguments.length,args=Array(_len39),_key39=0;_key39<_len39;_key39++){args[_key39]=arguments[_key39];}pb.emit.apply(pb,['local::lazyImageLoad'].concat(_toConsumableArray(args)));},lazyImageReady:function lazyImageReady(){for(var _len40=arguments.length,args=Array(_len40),_key40=0;_key40<_len40;_key40++){args[_key40]=arguments[_key40];}var slideEl=args[0];(0,_dom2.default)(slideEl).removeClass('photo-browser-slide-lazy');pb.emit.apply(pb,['local::lazyImageReady'].concat(_toConsumableArray(args)));}}});if(pb.params.swipeToClose&&pb.params.type!=='page'){Utils.extend(swiperParams.on,{touchStart:function touchStart(e){pb.onTouchStart(e);pb.emit('local::touchStart',e);},touchMoveOpposite:function touchMoveOpposite(e){pb.onTouchMove(e);pb.emit('local::touchMoveOpposite',e);},touchEnd:function touchEnd(e){pb.onTouchEnd(e);pb.emit('local::touchEnd',e);}});}if(pb.params.virtualSlides){Utils.extend(swiperParams,{virtual:{slides:pb.params.photos,renderSlide:function renderSlide(photo,index){if(photo.html||(typeof photo==='string'||photo instanceof String)&&photo.indexOf('<')>=0&&photo.indexOf('>')>=0){return pb.renderObject(photo,index);}else if(pb.params.swiper.lazy===true||pb.params.swiper.lazy&&pb.params.swiper.lazy.enabled){return pb.renderLazyPhoto(photo,index);}return pb.renderPhoto(photo,index);}}});}pb.swiper=app.swiper.create(pb.$swiperContainerEl,swiperParams);if(pb.activeIndex===0){pb.onSlideChange(pb.swiper);}if(pb.$el){pb.$el.trigger('photobrowser:open');}pb.emit('local::open photoBrowserOpen',pb);}},{key:'onOpened',value:function onOpened(){var pb=this;if(pb.$el){pb.$el.trigger('photobrowser:opened');}pb.emit('local::opened photoBrowserOpened',pb);}},{key:'onClose',value:function onClose(){var pb=this;if(pb.destroyed)return;// Destroy Swiper
if(pb.swiper&&pb.swiper.destroy){pb.swiper.destroy(true,false);pb.swiper=null;delete pb.swiper;}if(pb.$el){pb.$el.trigger('photobrowser:close');}pb.emit('local::close photoBrowserClose',pb);}},{key:'onClosed',value:function onClosed(){var pb=this;if(pb.destroyed)return;pb.opened=false;pb.$el=null;pb.el=null;delete pb.$el;delete pb.el;if(pb.$el){pb.$el.trigger('photobrowser:closed');}pb.emit('local::closed photoBrowserClosed',pb);}// Open
},{key:'openPage',value:function openPage(){var pb=this;if(pb.opened)return pb;var pageHtml=pb.renderPage();pb.view.router.navigate({url:pb.url,route:{content:pageHtml,path:pb.url,on:{pageBeforeIn:function pageBeforeIn(e,page){pb.view.$el.addClass('with-photo-browser-page with-photo-browser-page-'+pb.params.theme);pb.onOpen('page',page.el);},pageAfterIn:function pageAfterIn(e,page){pb.onOpened('page',page.el);},pageBeforeOut:function pageBeforeOut(e,page){pb.view.$el.removeClass('with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-'+pb.params.theme);pb.onClose('page',page.el);},pageAfterOut:function pageAfterOut(e,page){pb.onClosed('page',page.el);}}}});return pb;}},{key:'openStandalone',value:function openStandalone(){var pb=this;if(pb.opened)return pb;var standaloneHtml=pb.renderStandalone();var popupParams={backdrop:false,content:standaloneHtml,on:{popupOpen:function popupOpen(popup){pb.onOpen('popup',popup.el);},popupOpened:function popupOpened(popup){pb.onOpened('popup',popup.el);},popupClose:function popupClose(popup){pb.onClose('popup',popup.el);},popupClosed:function popupClosed(popup){pb.onClosed('popup',popup.el);}}};if(pb.params.routableModals){pb.view.router.navigate({url:pb.url,route:{path:pb.url,popup:popupParams}});}else{pb.modal=pb.app.popup.create(popupParams).open();}return pb;}},{key:'openPopup',value:function openPopup(){var pb=this;if(pb.opened)return pb;var popupHtml=pb.renderPopup();var popupParams={content:popupHtml,on:{popupOpen:function popupOpen(popup){pb.onOpen('popup',popup.el);},popupOpened:function popupOpened(popup){pb.onOpened('popup',popup.el);},popupClose:function popupClose(popup){pb.onClose('popup',popup.el);},popupClosed:function popupClosed(popup){pb.onClosed('popup',popup.el);}}};if(pb.params.routableModals){pb.view.router.navigate({url:pb.url,route:{path:pb.url,popup:popupParams}});}else{pb.modal=pb.app.popup.create(popupParams).open();}return pb;}// Exposition
},{key:'expositionEnable',value:function expositionEnable(){var pb=this;if(pb.params.type==='page'){pb.view.$el.addClass('with-photo-browser-page-exposed');}if(pb.$el)pb.$el.addClass('photo-browser-exposed');if(pb.params.expositionHideCaptions)pb.$captionsContainerEl.addClass('photo-browser-captions-exposed');pb.exposed=true;return pb;}},{key:'expositionDisable',value:function expositionDisable(){var pb=this;if(pb.params.type==='page'){pb.view.$el.removeClass('with-photo-browser-page-exposed');}if(pb.$el)pb.$el.removeClass('photo-browser-exposed');if(pb.params.expositionHideCaptions)pb.$captionsContainerEl.removeClass('photo-browser-captions-exposed');pb.exposed=false;return pb;}},{key:'expositionToggle',value:function expositionToggle(){var pb=this;if(pb.params.type==='page'){pb.view.$el.toggleClass('with-photo-browser-page-exposed');}if(pb.$el)pb.$el.toggleClass('photo-browser-exposed');if(pb.params.expositionHideCaptions)pb.$captionsContainerEl.toggleClass('photo-browser-captions-exposed');pb.exposed=!pb.exposed;return pb;}},{key:'open',value:function open(index){var pb=this;var type=pb.params.type;if(pb.opened){if(pb.swiper&&typeof index!=='undefined'){pb.swiper.slideTo(parseInt(index,10));}return pb;}else if(typeof index!=='undefined'){pb.activeIndex=index;}if(type==='standalone'){pb.openStandalone();}if(type==='page'){pb.openPage();}if(type==='popup'){pb.openPopup();}return pb;}},{key:'close',value:function close(){var pb=this;if(!pb.opened)return pb;if(pb.params.routableModals||pb.openedIn==='page'){if(pb.view)pb.view.router.back();}else{pb.modal.once('modalClosed',function(){Utils.nextTick(function(){pb.modal.destroy();delete pb.modal;});});pb.modal.close();}return pb;}// eslint-disable-next-line
},{key:'init',value:function init(){}},{key:'destroy',value:function destroy(){var pb=this;pb.emit('local::beforeDestroy photoBrowserBeforeDestroy',pb);if(pb.$el){pb.$el.trigger('photobrowser:beforedestroy');delete pb.$el[0].f7PhotoBrowser;}Utils.deleteProps(pb);pb=null;}}]);return PhotoBrowser;}(Framework7Class);var PhotoBrowser$1={name:'photoBrowser',params:{photoBrowser:{photos:[],exposition:true,expositionHideCaptions:false,type:'standalone',navbar:true,toolbar:true,theme:'light',captionsTheme:undefined,iconsColor:undefined,swipeToClose:true,backLinkText:'Close',navbarOfText:'of',view:undefined,url:'photos/',routableModals:true,virtualSlides:true,renderNavbar:undefined,renderToolbar:undefined,renderCaption:undefined,renderObject:undefined,renderLazyPhoto:undefined,renderPhoto:undefined,renderPage:undefined,renderPopup:undefined,renderStandalone:undefined,swiper:{initialSlide:0,spaceBetween:20,speed:300,loop:false,preloadImages:true,navigation:{nextEl:'.photo-browser-next',prevEl:'.photo-browser-prev'},zoom:{enabled:true,maxRatio:3,minRatio:1},lazy:{enabled:true}}}},create:function create(){var app=this;app.photoBrowser=ConstructorMethods({defaultSelector:'.photo-browser',constructor:PhotoBrowser,app:app,domProp:'f7PhotoBrowser'});},static:{PhotoBrowser:PhotoBrowser}};var Notification=function(_Modal9){_inherits(Notification,_Modal9);function Notification(app,params){var _ret69;_classCallCheck(this,Notification);var extendedParams=Utils.extend({on:{}},app.params.notification,params);// Extends with open/close Modal methods;
var _this31=_possibleConstructorReturn(this,(Notification.__proto__||Object.getPrototypeOf(Notification)).call(this,app,extendedParams));var notification=_this31;notification.app=app;notification.params=extendedParams;var _notification$params=notification.params,icon=_notification$params.icon,title=_notification$params.title,titleRightText=_notification$params.titleRightText,subtitle=_notification$params.subtitle,text=_notification$params.text,closeButton=_notification$params.closeButton,closeTimeout=_notification$params.closeTimeout,cssClass=_notification$params.cssClass,closeOnClick=_notification$params.closeOnClick;var $el=void 0;if(!notification.params.el){// Find Element
var notificationHtml=notification.render({icon:icon,title:title,titleRightText:titleRightText,subtitle:subtitle,text:text,closeButton:closeButton,cssClass:cssClass});$el=(0,_dom2.default)(notificationHtml);}else{$el=(0,_dom2.default)(notification.params.el);}if($el&&$el.length>0&&$el[0].f7Modal){var _ret67;return _ret67=$el[0].f7Modal,_possibleConstructorReturn(_this31,_ret67);}if($el.length===0){var _ret68;return _ret68=notification.destroy(),_possibleConstructorReturn(_this31,_ret68);}Utils.extend(notification,{$el:$el,el:$el[0],type:'notification'});$el[0].f7Modal=notification;if(closeButton){$el.find('.notification-close-button').on('click',function(){notification.close();});}$el.on('click',function(e){if(closeButton&&(0,_dom2.default)(e.target).closest('.notification-close-button').length){return;}notification.emit('local::click notificationClick',notification);if(closeOnClick)notification.close();});notification.on('beforeDestroy',function(){$el.off('click');});/* Touch Events */var isTouched=void 0;var isMoved=void 0;var isScrolling=void 0;var touchesDiff=void 0;var touchStartTime=void 0;var notificationHeight=void 0;var touchesStart={};function handleTouchStart(e){if(isTouched)return;isTouched=true;isMoved=false;isScrolling=undefined;touchStartTime=Utils.now();touchesStart.x=e.type==='touchstart'?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==='touchstart'?e.targetTouches[0].pageY:e.pageY;}function handleTouchMove(e){if(!isTouched)return;var pageX=e.type==='touchmove'?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==='touchmove'?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==='undefined'){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)<Math.abs(pageX-touchesStart.x));}if(isScrolling){isTouched=false;return;}e.preventDefault();if(!isMoved){notification.$el.removeClass('notification-transitioning');notification.$el.transition(0);notificationHeight=notification.$el[0].offsetHeight/2;}isMoved=true;touchesDiff=pageY-touchesStart.y;var newTranslate=touchesDiff;if(touchesDiff>0){newTranslate=Math.pow(touchesDiff,0.8);}notification.$el.transform('translate3d(0, '+newTranslate+'px, 0)');}function handleTouchEnd(){if(!isTouched||!isMoved){isTouched=false;isMoved=false;return;}isTouched=false;isMoved=false;if(touchesDiff===0){return;}var timeDiff=Utils.now()-touchStartTime;notification.$el.transition('');notification.$el.addClass('notification-transitioning');notification.$el.transform('');if(touchesDiff<-10&&timeDiff<300||-touchesDiff>=notificationHeight/1){notification.close();}}function attachTouchEvents(){{notification.$el.on(app.touchEvents.start,handleTouchStart,{passive:true});app.on('touchmove:active',handleTouchMove);app.on('touchend:passive',handleTouchEnd);}}function detachTouchEvents(){{notification.$el.off(app.touchEvents.start,handleTouchStart,{passive:true});app.off('touchmove:active',handleTouchMove);app.off('touchend:passive',handleTouchEnd);}}var timeoutId=void 0;function closeOnTimeout(){timeoutId=Utils.nextTick(function(){if(isTouched&&isMoved){closeOnTimeout();return;}notification.close();},closeTimeout);}notification.on('open',function(){if(notification.params.swipeToClose){attachTouchEvents();}(0,_dom2.default)('.notification.modal-in').each(function(index,openedEl){var notificationInstance=app.notification.get(openedEl);if(openedEl!==notification.el&&notificationInstance){notificationInstance.close();}});if(closeTimeout){closeOnTimeout();}});notification.on('close beforeDestroy',function(){if(notification.params.swipeToClose){detachTouchEvents();}_ssrWindow.window.clearTimeout(timeoutId);});return _ret69=notification,_possibleConstructorReturn(_this31,_ret69);}_createClass(Notification,[{key:'render',value:function render(){var notification=this;if(notification.params.render)return notification.params.render.call(notification,notification);var _notification$params2=notification.params,icon=_notification$params2.icon,title=_notification$params2.title,titleRightText=_notification$params2.titleRightText,subtitle=_notification$params2.subtitle,text=_notification$params2.text,closeButton=_notification$params2.closeButton,cssClass=_notification$params2.cssClass;return('\n      <div class="notification '+(cssClass||'')+'">\n        <div class="notification-header">\n          '+(icon?'<div class="notification-icon">'+icon+'</div>':'')+'\n          '+(title?'<div class="notification-title">'+title+'</div>':'')+'\n          '+(titleRightText?'<div class="notification-title-right-text">'+titleRightText+'</div>':'')+'\n          '+(closeButton?'<span class="notification-close-button"></span>':'')+'\n        </div>\n        <div class="notification-content">\n          '+(subtitle?'<div class="notification-subtitle">'+subtitle+'</div>':'')+'\n          '+(text?'<div class="notification-text">'+text+'</div>':'')+'\n        </div>\n      </div>\n    ').trim();}}]);return Notification;}(Modal);var Notification$1={name:'notification',static:{Notification:Notification},create:function create(){var app=this;app.notification=Utils.extend({},ModalMethods({app:app,constructor:Notification,defaultSelector:'.notification.modal-in'}));},params:{notification:{icon:null,title:null,titleRightText:null,subtitle:null,text:null,closeButton:false,closeTimeout:null,closeOnClick:false,swipeToClose:true,cssClass:null,render:null}}};/* eslint "no-useless-escape": "off" */var Autocomplete=function(_Framework7Class21){_inherits(Autocomplete,_Framework7Class21);function Autocomplete(app){var _ret70;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Autocomplete);var _this32=_possibleConstructorReturn(this,(Autocomplete.__proto__||Object.getPrototypeOf(Autocomplete)).call(this,params,[app]));var ac=_this32;ac.app=app;var defaults=Utils.extend({on:{}},app.params.autocomplete);// Extend defaults with modules params
ac.useModulesParams(defaults);ac.params=Utils.extend(defaults,params);var $openerEl=void 0;if(ac.params.openerEl){$openerEl=(0,_dom2.default)(ac.params.openerEl);if($openerEl.length)$openerEl[0].f7Autocomplete=ac;}var $inputEl=void 0;if(ac.params.inputEl){$inputEl=(0,_dom2.default)(ac.params.inputEl);if($inputEl.length)$inputEl[0].f7Autocomplete=ac;}var view=void 0;if(ac.params.view){view=ac.params.view;}else if($openerEl||$inputEl){view=app.views.get($openerEl||$inputEl);}if(!view)view=app.views.main;var id=Utils.now();var url=params.url;if(!url&&$openerEl&&$openerEl.length){if($openerEl.attr('href'))url=$openerEl.attr('href');else if($openerEl.find('a').length>0){url=$openerEl.find('a').attr('href');}}if(!url||url==='#'||url==='')url=ac.params.url;var inputType=ac.params.multiple?'checkbox':'radio';Utils.extend(ac,{$openerEl:$openerEl,openerEl:$openerEl&&$openerEl[0],$inputEl:$inputEl,inputEl:$inputEl&&$inputEl[0],id:id,view:view,url:url,value:ac.params.value||[],inputType:inputType,inputName:inputType+'-'+id,$modalEl:undefined,$dropdownEl:undefined});var previousQuery='';function onInputChange(){var query=ac.$inputEl.val().trim();if(!ac.params.source)return;ac.params.source.call(ac,query,function(items){var itemsHTML='';var limit=ac.params.limit?Math.min(ac.params.limit,items.length):items.length;ac.items=items;var regExp=void 0;if(ac.params.highlightMatches){query=query.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&');regExp=new RegExp('('+query+')','i');}var firstValue=void 0;var firstItem=void 0;for(var _i70=0;_i70<limit;_i70+=1){var itemValue=_typeof(items[_i70])==='object'?items[_i70][ac.params.valueProperty]:items[_i70];var itemText=_typeof(items[_i70])==='object'?items[_i70][ac.params.textProperty]:items[_i70];if(_i70===0){firstValue=itemValue;firstItem=ac.items[_i70];}itemsHTML+=ac.renderItem({value:itemValue,text:ac.params.highlightMatches?itemText.replace(regExp,'<b>$1</b>'):itemText},_i70);}if(itemsHTML===''&&query===''&&ac.params.dropdownPlaceholderText){itemsHTML+=ac.renderItem({placeholder:true,text:ac.params.dropdownPlaceholderText});}ac.$dropdownEl.find('ul').html(itemsHTML);if(ac.params.typeahead){if(!firstValue||!firstItem){return;}if(firstValue.toLowerCase().indexOf(query.toLowerCase())!==0){return;}if(previousQuery.toLowerCase()===query.toLowerCase()){ac.value=[];return;}if(previousQuery.toLowerCase().indexOf(query.toLowerCase())===0){previousQuery=query;ac.value=[];return;}$inputEl.val(firstValue);$inputEl[0].setSelectionRange(query.length,firstValue.length);var previousValue=_typeof(ac.value[0])==='object'?ac.value[0][ac.params.valueProperty]:ac.value[0];if(!previousValue||firstValue.toLowerCase()!==previousValue.toLowerCase()){ac.value=[firstItem];ac.emit('local::change autocompleteChange',[firstItem]);}}previousQuery=query;});}function onPageInputChange(){var input=this;var value=input.value;var isValues=(0,_dom2.default)(input).parents('.autocomplete-values').length>0;var item=void 0;var itemValue=void 0;var aValue=void 0;if(isValues){if(ac.inputType==='checkbox'&&!input.checked){for(var _i71=0;_i71<ac.value.length;_i71+=1){aValue=typeof ac.value[_i71]==='string'?ac.value[_i71]:ac.value[_i71][ac.params.valueProperty];if(aValue===value||aValue*1===value*1){ac.value.splice(_i71,1);}}ac.updateValues();ac.emit('local::change autocompleteChange',ac.value);}return;}// Find Related Item
for(var _i72=0;_i72<ac.items.length;_i72+=1){itemValue=_typeof(ac.items[_i72])==='object'?ac.items[_i72][ac.params.valueProperty]:ac.items[_i72];if(itemValue===value||itemValue*1===value*1)item=ac.items[_i72];}if(ac.inputType==='radio'){ac.value=[item];}else if(input.checked){ac.value.push(item);}else{for(var _i73=0;_i73<ac.value.length;_i73+=1){aValue=_typeof(ac.value[_i73])==='object'?ac.value[_i73][ac.params.valueProperty]:ac.value[_i73];if(aValue===value||aValue*1===value*1){ac.value.splice(_i73,1);}}}// Update Values Block
ac.updateValues();// On Select Callback
if(ac.inputType==='radio'&&input.checked||ac.inputType==='checkbox'){ac.emit('local::change autocompleteChange',ac.value);}}function onHtmlClick(e){var $targetEl=(0,_dom2.default)(e.target);if($targetEl.is(ac.$inputEl[0])||ac.$dropdownEl&&$targetEl.closest(ac.$dropdownEl[0]).length)return;ac.close();}function onOpenerClick(){ac.open();}function onInputFocus(){ac.open();}function onInputBlur(){if(ac.$dropdownEl.find('label.active-state').length>0)return;ac.close();}function onResize(){ac.positionDropdown();}function onKeyDown(e){if(ac.opened&&e.keyCode===13){e.preventDefault();ac.$inputEl.blur();}}function onDropdownclick(){var $clickedEl=(0,_dom2.default)(this);var clickedItem=void 0;for(var _i74=0;_i74<ac.items.length;_i74+=1){var itemValue=_typeof(ac.items[_i74])==='object'?ac.items[_i74][ac.params.valueProperty]:ac.items[_i74];var value=$clickedEl.attr('data-value');if(itemValue===value||itemValue*1===value*1){clickedItem=ac.items[_i74];}}if(ac.params.updateInputValueOnSelect){ac.$inputEl.val((typeof clickedItem==='undefined'?'undefined':_typeof(clickedItem))==='object'?clickedItem[ac.params.valueProperty]:clickedItem);ac.$inputEl.trigger('input change');}ac.value=[clickedItem];ac.emit('local::change autocompleteChange',[clickedItem]);ac.close();}ac.attachEvents=function attachEvents(){if(ac.params.openIn!=='dropdown'&&ac.$openerEl){ac.$openerEl.on('click',onOpenerClick);}if(ac.params.openIn==='dropdown'&&ac.$inputEl){ac.$inputEl.on('focus',onInputFocus);ac.$inputEl.on(ac.params.inputEvents,onInputChange);if(app.device.android){(0,_dom2.default)('html').on('click',onHtmlClick);}else{ac.$inputEl.on('blur',onInputBlur);}if(ac.params.typeahead){ac.$inputEl.on('keydown',onKeyDown);}}};ac.detachEvents=function attachEvents(){if(ac.params.openIn!=='dropdown'&&ac.$openerEl){ac.$openerEl.off('click',onOpenerClick);}if(ac.params.openIn==='dropdown'&&ac.$inputEl){ac.$inputEl.off('focus',onInputFocus);ac.$inputEl.off(ac.params.inputEvents,onInputChange);if(app.device.android){(0,_dom2.default)('html').off('click',onHtmlClick);}else{ac.$inputEl.off('blur',onInputBlur);}if(ac.params.typeahead){ac.$inputEl.off('keydown',onKeyDown);}}};ac.attachDropdownEvents=function attachDropdownEvents(){ac.$dropdownEl.on('click','label',onDropdownclick);app.on('resize',onResize);};ac.detachDropdownEvents=function detachDropdownEvents(){ac.$dropdownEl.off('click','label',onDropdownclick);app.off('resize',onResize);};ac.attachPageEvents=function attachPageEvents(){ac.$el.on('change','input[type="radio"], input[type="checkbox"]',onPageInputChange);if(ac.params.closeOnSelect&&!ac.params.multiple){ac.$el.once('click','.list label',function(){Utils.nextTick(function(){ac.close();});});}};ac.detachPageEvents=function detachPageEvents(){ac.$el.off('change','input[type="radio"], input[type="checkbox"]',onPageInputChange);};// Install Modules
ac.useModules();// Init
ac.init();return _ret70=ac,_possibleConstructorReturn(_this32,_ret70);}_createClass(Autocomplete,[{key:'positionDropdown',value:function positionDropdown(){var ac=this;var $inputEl=ac.$inputEl,app=ac.app,$dropdownEl=ac.$dropdownEl;var $pageContentEl=$inputEl.parents('.page-content');if($pageContentEl.length===0)return;var inputOffset=$inputEl.offset();var inputOffsetWidth=$inputEl[0].offsetWidth;var inputOffsetHeight=$inputEl[0].offsetHeight;var $listEl=$inputEl.parents('.list');var $listParent=void 0;$listEl.parents().each(function(index,parentEl){if($listParent)return;var $parentEl=(0,_dom2.default)(parentEl);if($parentEl.parent($pageContentEl).length)$listParent=$parentEl;});var listOffset=$listEl.offset();var paddingBottom=parseInt($pageContentEl.css('padding-bottom'),10);var listOffsetLeft=$listEl.length>0?listOffset.left-$pageContentEl.offset().left:0;var inputOffsetLeft=inputOffset.left-($listEl.length>0?listOffset.left:0)-(app.rtl?0:0);var inputOffsetTop=inputOffset.top-($pageContentEl.offset().top-$pageContentEl[0].scrollTop);var maxHeight=$pageContentEl[0].scrollHeight-paddingBottom-(inputOffsetTop+$pageContentEl[0].scrollTop)-$inputEl[0].offsetHeight;var paddingProp=app.rtl?'padding-right':'padding-left';var paddingValue=void 0;if($listEl.length&&!ac.params.expandInput){paddingValue=(app.rtl?$listEl[0].offsetWidth-inputOffsetLeft-inputOffsetWidth:inputOffsetLeft)-(app.theme==='md'?16:15);}$dropdownEl.css({left:($listEl.length>0?listOffsetLeft:inputOffsetLeft)+'px',top:inputOffsetTop+$pageContentEl[0].scrollTop+inputOffsetHeight+'px',width:($listEl.length>0?$listEl[0].offsetWidth:inputOffsetWidth)+'px'});$dropdownEl.children('.autocomplete-dropdown-inner').css(_defineProperty({maxHeight:maxHeight+'px'},paddingProp,$listEl.length>0&&!ac.params.expandInput?paddingValue+'px':''));}},{key:'focus',value:function focus(){var ac=this;ac.$el.find('input[type=search]').focus();}},{key:'source',value:function source(query){var ac=this;if(!ac.params.source)return;var $el=ac.$el;ac.params.source.call(ac,query,function(items){var itemsHTML='';var limit=ac.params.limit?Math.min(ac.params.limit,items.length):items.length;ac.items=items;for(var _i75=0;_i75<limit;_i75+=1){var selected=false;var itemValue=_typeof(items[_i75])==='object'?items[_i75][ac.params.valueProperty]:items[_i75];for(var _j4=0;_j4<ac.value.length;_j4+=1){var aValue=_typeof(ac.value[_j4])==='object'?ac.value[_j4][ac.params.valueProperty]:ac.value[_j4];if(aValue===itemValue||aValue*1===itemValue*1)selected=true;}itemsHTML+=ac.renderItem({value:itemValue,text:_typeof(items[_i75])==='object'?items[_i75][ac.params.textProperty]:items[_i75],inputType:ac.inputType,id:ac.id,inputName:ac.inputName,selected:selected},_i75);}$el.find('.autocomplete-found ul').html(itemsHTML);if(items.length===0){if(query.length!==0){$el.find('.autocomplete-not-found').show();$el.find('.autocomplete-found, .autocomplete-values').hide();}else{$el.find('.autocomplete-values').show();$el.find('.autocomplete-found, .autocomplete-not-found').hide();}}else{$el.find('.autocomplete-found').show();$el.find('.autocomplete-not-found, .autocomplete-values').hide();}});}},{key:'updateValues',value:function updateValues(){var ac=this;var valuesHTML='';for(var _i76=0;_i76<ac.value.length;_i76+=1){valuesHTML+=ac.renderItem({value:_typeof(ac.value[_i76])==='object'?ac.value[_i76][ac.params.valueProperty]:ac.value[_i76],text:_typeof(ac.value[_i76])==='object'?ac.value[_i76][ac.params.textProperty]:ac.value[_i76],inputType:ac.inputType,id:ac.id,inputName:ac.inputName+'-checked}',selected:true},_i76);}ac.$el.find('.autocomplete-values ul').html(valuesHTML);}},{key:'preloaderHide',value:function preloaderHide(){var ac=this;if(ac.params.openIn==='dropdown'&&ac.$dropdownEl){ac.$dropdownEl.find('.autocomplete-preloader').removeClass('autocomplete-preloader-visible');}else{(0,_dom2.default)('.autocomplete-preloader').removeClass('autocomplete-preloader-visible');}}},{key:'preloaderShow',value:function preloaderShow(){var ac=this;if(ac.params.openIn==='dropdown'&&ac.$dropdownEl){ac.$dropdownEl.find('.autocomplete-preloader').addClass('autocomplete-preloader-visible');}else{(0,_dom2.default)('.autocomplete-preloader').addClass('autocomplete-preloader-visible');}}},{key:'renderPreloader',value:function renderPreloader(){var ac=this;return('\n      <div class="autocomplete-preloader preloader '+(ac.params.preloaderColor?'color-'+ac.params.preloaderColor:'')+'">'+(ac.app.theme==='md'?Utils.mdPreloaderContent:'')+'</div>\n    ').trim();}},{key:'renderSearchbar',value:function renderSearchbar(){var ac=this;if(ac.params.renderSearchbar)return ac.params.renderSearchbar.call(ac);var searchbarHTML=('\n      <form class="searchbar">\n        <div class="searchbar-inner">\n          <div class="searchbar-input-wrap">\n            <input type="search" placeholder="'+ac.params.searchbarPlaceholder+'"/>\n            <i class="searchbar-icon"></i>\n            <span class="input-clear-button"></span>\n          </div>\n          <span class="searchbar-disable-button">'+ac.params.searchbarDisableText+'</span>\n        </div>\n      </form>\n    ').trim();return searchbarHTML;}},{key:'renderItem',value:function renderItem(item,index){var ac=this;if(ac.params.renderItem)return ac.params.renderItem.call(ac,item,index);var itemHtml=void 0;if(ac.params.openIn!=='dropdown'){itemHtml='\n        <li>\n          <label class="item-'+item.inputType+' item-content">\n            <input type="'+item.inputType+'" name="'+item.inputName+'" value="'+item.value+'" '+(item.selected?'checked':'')+'>\n            <i class="icon icon-'+item.inputType+'"></i>\n            <div class="item-inner">\n              <div class="item-title">'+item.text+'</div>\n            </div>\n          </label>\n        </li>\n      ';}else if(!item.placeholder){// Dropdown
itemHtml='\n        <li>\n          <label class="item-radio item-content" data-value="'+item.value+'">\n            <div class="item-inner">\n              <div class="item-title">'+item.text+'</div>\n            </div>\n          </label>\n        </li>\n      ';}else{// Dropwdown placeholder
itemHtml='\n        <li class="autocomplete-dropdown-placeholder">\n          <div class="item-content">\n            <div class="item-inner">\n              <div class="item-title">'+item.text+'</div>\n            </div>\n          </label>\n        </li>\n      ';}return itemHtml.trim();}},{key:'renderNavbar',value:function renderNavbar(){var ac=this;if(ac.params.renderNavbar)return ac.params.renderNavbar.call(ac);var pageTitle=ac.params.pageTitle;if(typeof pageTitle==='undefined'&&ac.$openerEl&&ac.$openerEl.length){pageTitle=ac.$openerEl.find('.item-title').text().trim();}var navbarHtml=('\n      <div class="navbar '+(ac.params.navbarColorTheme?'color-theme-'+ac.params.navbarColorTheme:'')+'">\n        <div class="navbar-inner '+(ac.params.navbarColorTheme?'color-theme-'+ac.params.navbarColorTheme:'')+'">\n          <div class="left sliding">\n            <a href="#" class="link '+(ac.params.openIn==='page'?'back':'popup-close')+'" '+(ac.params.openIn==='popup'?'data-popup=".autocomplete-popup"':'')+'>\n              <i class="icon icon-back"></i>\n              <span class="ios-only">'+(ac.params.openIn==='page'?ac.params.pageBackLinkText:ac.params.popupCloseLinkText)+'</span>\n            </a>\n          </div>\n          '+(pageTitle?'<div class="title sliding">'+pageTitle+'</div>':'')+'\n          '+(ac.params.preloader?'\n          <div class="right">\n            '+ac.renderPreloader()+'\n          </div>\n          ':'')+'\n          <div class="subnavbar sliding">'+ac.renderSearchbar()+'</div>\n        </div>\n      </div>\n    ').trim();return navbarHtml;}},{key:'renderDropdown',value:function renderDropdown(){var ac=this;if(ac.params.renderDropdown)return ac.params.renderDropdown.call(ac,ac.items);var dropdownHtml=('\n      <div class="autocomplete-dropdown">\n        <div class="autocomplete-dropdown-inner">\n          <div class="list '+(!ac.params.expandInput?'no-ios-edge':'')+'">\n            <ul></ul>\n          </div>\n        </div>\n        '+(ac.params.preloader?ac.renderPreloader():'')+'\n      </div>\n    ').trim();return dropdownHtml;}},{key:'renderPage',value:function renderPage(){var ac=this;if(ac.params.renderPage)return ac.params.renderPage.call(ac,ac.items);var pageHtml=('\n      <div class="page page-with-subnavbar autocomplete-page" data-name="autocomplete-page">\n        '+ac.renderNavbar()+'\n        <div class="searchbar-backdrop"></div>\n        <div class="page-content">\n          <div class="list autocomplete-list autocomplete-found autocomplete-list-'+ac.id+' '+(ac.params.formColorTheme?'color-theme-'+ac.params.formColorTheme:'')+'">\n            <ul></ul>\n          </div>\n          <div class="list autocomplete-not-found">\n            <ul>\n              <li class="item-content"><div class="item-inner"><div class="item-title">'+ac.params.notFoundText+'</div></div></li>\n            </ul>\n          </div>\n          <div class="list autocomplete-values">\n            <ul></ul>\n          </div>\n        </div>\n      </div>\n    ').trim();return pageHtml;}},{key:'renderPopup',value:function renderPopup(){var ac=this;if(ac.params.renderPopup)return ac.params.renderPopup.call(ac,ac.items);var popupHtml=('\n      <div class="popup autocomplete-popup">\n        <div class="view">\n          '+ac.renderPage()+';\n        </div>\n      </div>\n    ').trim();return popupHtml;}},{key:'onOpen',value:function onOpen(type,el){var ac=this;var app=ac.app;var $el=(0,_dom2.default)(el);ac.$el=$el;ac.el=$el[0];ac.openedIn=type;ac.opened=true;if(ac.params.openIn==='dropdown'){ac.attachDropdownEvents();ac.$dropdownEl.addClass('autocomplete-dropdown-in');ac.$inputEl.trigger('input');}else{// Init SB
var $searchbarEl=$el.find('.searchbar');if(ac.params.openIn==='page'&&app.theme==='ios'&&$searchbarEl.length===0){$searchbarEl=(0,_dom2.default)(app.navbar.getElByPage($el)).find('.searchbar');}ac.searchbar=app.searchbar.create({el:$searchbarEl,backdropEl:$el.find('.searchbar-backdrop'),customSearch:true,on:{searchbarSearch:function searchbarSearch(sb,query){if(query.length===0&&ac.searchbar.enabled){ac.searchbar.backdropShow();}else{ac.searchbar.backdropHide();}ac.source(query);}}});// Attach page events
ac.attachPageEvents();// Update Values On Page Init
ac.updateValues();// Source on load
if(ac.params.requestSourceOnOpen)ac.source('');}ac.emit('local::open autocompleteOpen',ac);}},{key:'onOpened',value:function onOpened(){var ac=this;if(ac.params.openIn!=='dropdown'&&ac.params.autoFocus){ac.autoFocus();}ac.emit('local::opened autocompleteOpened',ac);}},{key:'onClose',value:function onClose(){var ac=this;if(ac.destroyed)return;// Destroy SB
if(ac.searchbar&&ac.searchbar.destroy){ac.searchbar.destroy();ac.searchbar=null;delete ac.searchbar;}if(ac.params.openIn==='dropdown'){ac.detachDropdownEvents();ac.$dropdownEl.removeClass('autocomplete-dropdown-in').remove();ac.$inputEl.parents('.item-content-dropdown-expanded').removeClass('item-content-dropdown-expanded');}else{ac.detachPageEvents();}ac.emit('local::close autocompleteClose',ac);}},{key:'onClosed',value:function onClosed(){var ac=this;if(ac.destroyed)return;ac.opened=false;ac.$el=null;ac.el=null;delete ac.$el;delete ac.el;ac.emit('local::closed autocompleteClosed',ac);}},{key:'openPage',value:function openPage(){var ac=this;if(ac.opened)return ac;var pageHtml=ac.renderPage();ac.view.router.navigate({url:ac.url,route:{content:pageHtml,path:ac.url,on:{pageBeforeIn:function pageBeforeIn(e,page){ac.onOpen('page',page.el);},pageAfterIn:function pageAfterIn(e,page){ac.onOpened('page',page.el);},pageBeforeOut:function pageBeforeOut(e,page){ac.onClose('page',page.el);},pageAfterOut:function pageAfterOut(e,page){ac.onClosed('page',page.el);}},options:{animate:ac.params.animate}}});return ac;}},{key:'openPopup',value:function openPopup(){var ac=this;if(ac.opened)return ac;var popupHtml=ac.renderPopup();var popupParams={content:popupHtml,animate:ac.params.animate,on:{popupOpen:function popupOpen(popup){ac.onOpen('popup',popup.el);},popupOpened:function popupOpened(popup){ac.onOpened('popup',popup.el);},popupClose:function popupClose(popup){ac.onClose('popup',popup.el);},popupClosed:function popupClosed(popup){ac.onClosed('popup',popup.el);}}};if(ac.params.routableModals){ac.view.router.navigate({url:ac.url,route:{path:ac.url,popup:popupParams}});}else{ac.modal=ac.app.popup.create(popupParams).open(ac.params.animate);}return ac;}},{key:'openDropdown',value:function openDropdown(){var ac=this;if(!ac.$dropdownEl){ac.$dropdownEl=(0,_dom2.default)(ac.renderDropdown());}var $listEl=ac.$inputEl.parents('.list');if($listEl.length&&ac.$inputEl.parents('.item-content').length>0&&ac.params.expandInput){ac.$inputEl.parents('.item-content').addClass('item-content-dropdown-expanded');}var $pageContentEl=ac.$inputEl.parents('.page-content');if(ac.params.dropdownContainerEl){(0,_dom2.default)(ac.params.dropdownContainerEl).append(ac.$dropdownEl);}else if($pageContentEl.length===0){ac.$dropdownEl.insertAfter(ac.$inputEl);}else{ac.positionDropdown();$pageContentEl.append(ac.$dropdownEl);}ac.onOpen('dropdown',ac.$dropdownEl);ac.onOpened('dropdown',ac.$dropdownEl);}},{key:'open',value:function open(){var ac=this;if(ac.opened)return ac;var openIn=ac.params.openIn;ac['open'+openIn.split('').map(function(el,index){if(index===0)return el.toUpperCase();return el;}).join('')]();return ac;}},{key:'close',value:function close(){var ac=this;if(!ac.opened)return ac;if(ac.params.openIn==='dropdown'){ac.onClose();ac.onClosed();}else if(ac.params.routableModals||ac.openedIn==='page'){ac.view.router.back({animate:ac.params.animate});}else{ac.modal.once('modalClosed',function(){Utils.nextTick(function(){ac.modal.destroy();delete ac.modal;});});ac.modal.close();}return ac;}},{key:'init',value:function init(){var ac=this;ac.attachEvents();}},{key:'destroy',value:function destroy(){var ac=this;ac.emit('local::beforeDestroy autocompleteBeforeDestroy',ac);ac.detachEvents();if(ac.$inputEl&&ac.$inputEl[0]){delete ac.$inputEl[0].f7Autocomplete;}if(ac.$openerEl&&ac.$openerEl[0]){delete ac.$openerEl[0].f7Autocomplete;}Utils.deleteProps(ac);ac.destroyed=true;}}]);return Autocomplete;}(Framework7Class);var Autocomplete$1={name:'autocomplete',params:{autocomplete:{openerEl:undefined,inputEl:undefined,view:undefined,// DropDown
dropdownContainerEl:undefined,dropdownPlaceholderText:undefined,typeahead:false,highlightMatches:true,expandInput:false,updateInputValueOnSelect:true,inputEvents:'input',value:undefined,multiple:false,source:undefined,limit:undefined,valueProperty:'id',textProperty:'text',openIn:'page',// or 'popup' or 'dropdown'
pageBackLinkText:'Back',popupCloseLinkText:'Close',pageTitle:undefined,searchbarPlaceholder:'Search...',searchbarDisableText:'Cancel',animate:true,autoFocus:false,closeOnSelect:false,notFoundText:'Nothing found',requestSourceOnOpen:false,// Preloader
preloaderColor:undefined,preloader:false,// Colors
formColorTheme:undefined,navbarColorTheme:undefined,// Routing
routableModals:true,url:'select/',// Custom render functions
renderDropdown:undefined,renderPage:undefined,renderPopup:undefined,renderItem:undefined,renderSearchbar:undefined,renderNavbar:undefined}},static:{Autocomplete:Autocomplete},create:function create(){var app=this;app.autocomplete=Utils.extend(ConstructorMethods({defaultSelector:undefined,constructor:Autocomplete,app:app,domProp:'f7Autocomplete'}),{open:function open(autocompleteEl){var ac=app.autocomplete.get(autocompleteEl);if(ac&&ac.open)return ac.open();return undefined;},close:function close(autocompleteEl){var ac=app.autocomplete.get(autocompleteEl);if(ac&&ac.close)return ac.close();return undefined;}});}};var ViAd=function(_Framework7Class22){_inherits(ViAd,_Framework7Class22);function ViAd(app){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ViAd);var _this33=_possibleConstructorReturn(this,(ViAd.__proto__||Object.getPrototypeOf(ViAd)).call(this,params,[app]));var vi=_this33;if(!_ssrWindow.window.vi){throw new Error('f7:vi SDK not found.');}var orientation=void 0;if(typeof _ssrWindow.window.orientation!=='undefined'){orientation=_ssrWindow.window.orientation===-90||_ssrWindow.window.orientation===90?'horizontal':'vertical';}var defaults=Utils.extend({},app.params.vi,{appId:app.id,appVer:app.version,language:app.language,width:app.width,height:app.height,os:Device.os,osVersion:Device.osVersion,orientation:orientation});// Extend defaults with modules params
vi.useModulesParams(defaults);vi.params=Utils.extend(defaults,params);var adParams={};var skipParams='on autoplay fallbackOverlay fallbackOverlayText enabled'.split(' ');Object.keys(vi.params).forEach(function(paramName){if(skipParams.indexOf(paramName)>=0)return;var paramValue=vi.params[paramName];if([null,undefined].indexOf(paramValue)>=0)return;adParams[paramName]=paramValue;});if(!vi.params.appId){throw new Error('Framework7:"app.id" is required to display an ad. Make sure you have specified it on app initialization.');}if(!vi.params.placementId){throw new Error('Framework7:"placementId" is required to display an ad.');}function onResize(){var $viFrame=(0,_dom2.default)('iframe#viAd');if($viFrame.length===0)return;$viFrame.css({width:app.width+'px',height:app.height+'px'});}function removeOverlay(){if(!vi.$overlayEl)return;vi.$overlayEl.off('click touchstart');vi.$overlayEl.remove();}function createOverlay(videoEl){if(!videoEl)return;vi.$overlayEl=(0,_dom2.default)(('\n        <div class="vi-overlay no-fastclick">\n          '+(vi.params.fallbackOverlayText?'<div class="vi-overlay-text">'+vi.params.fallbackOverlayText+'</div>':'')+'\n          <div class="vi-overlay-play-button"></div>\n        </div>\n      ').trim());var touchStartTime=void 0;vi.$overlayEl.on('touchstart',function(){touchStartTime=Utils.now();});vi.$overlayEl.on('click',function(){var timeDiff=Utils.now()-touchStartTime;if(timeDiff>300)return;if(videoEl){videoEl.play();removeOverlay();return;}vi.start();removeOverlay();});app.root.append(vi.$overlayEl);}// Create ad
vi.ad=new _ssrWindow.window.vi.Ad(adParams);Utils.extend(vi.ad,{onAdReady:function onAdReady(){app.on('resize',onResize);vi.emit('local::ready');if(vi.params.autoplay){vi.start();}},onAdStarted:function onAdStarted(){vi.emit('local::started');},onAdClick:function onAdClick(targetUrl){vi.emit('local::click',targetUrl);},onAdImpression:function onAdImpression(){vi.emit('local::impression');},onAdStopped:function onAdStopped(reason){app.off('resize',onResize);removeOverlay();vi.emit('local::stopped',reason);if(reason==='complete'){vi.emit('local::complete');vi.emit('local::completed');}if(reason==='userexit'){vi.emit('local::userexit');}vi.destroyed=true;},onAutoPlayFailed:function onAutoPlayFailed(reason,videoEl){vi.emit('local::autoplayFailed',reason,videoEl);if(reason&&reason.name&&reason.name.indexOf('NotAllowedError')!==-1&&vi.params.fallbackOverlay){createOverlay(videoEl);}},onAdError:function onAdError(msg){removeOverlay();app.off('resize',onResize);vi.emit('local::error',msg);vi.destroyed=true;}});vi.init();Utils.extend(vi,{app:app});return _this33;}_createClass(ViAd,[{key:'start',value:function start(){var vi=this;if(vi.destroyed)return;if(vi.ad)vi.ad.startAd();}},{key:'pause',value:function pause(){var vi=this;if(vi.destroyed)return;if(vi.ad)vi.ad.pauseAd();}},{key:'resume',value:function resume(){var vi=this;if(vi.destroyed)return;if(vi.ad)vi.ad.resumeAd();}},{key:'stop',value:function stop(){var vi=this;if(vi.destroyed)return;if(vi.ad)vi.ad.stopAd();}},{key:'init',value:function init(){var vi=this;if(vi.destroyed)return;if(vi.ad)vi.ad.initAd();}},{key:'destroy',value:function destroy(){var vi=this;vi.destroyed=true;vi.emit('local::beforeDestroy');Utils.deleteProps(vi);}}]);return ViAd;}(Framework7Class);var Vi={name:'vi',params:{vi:{enabled:false,autoplay:true,fallbackOverlay:true,fallbackOverlayText:'Please watch this ad',showMute:true,startMuted:(Device.ios||Device.android)&&!Device.cordova,appId:null,appVer:null,language:null,width:null,height:null,placementId:'pltd4o7ibb9rc653x14',placementType:'interstitial',videoSlot:null,showProgress:true,showBranding:true,os:null,osVersion:null,orientation:null,age:null,gender:null,advertiserId:null,latitude:null,longitude:null,accuracy:null,storeId:null,ip:null,manufacturer:null,model:null,connectionType:null,connectionProvider:null}},create:function create(){var app=this;app.vi={sdkReady:false,createAd:function createAd(adParams){return new ViAd(app,adParams);},loadSdk:function loadSdk(){if(app.vi.skdReady)return;var script=_ssrWindow.document.createElement('script');script.onload=function onload(){app.emit('viSdkReady');app.vi.skdReady=true;};script.src='https://c.vi-serve.com/viadshtml/vi.min.js';(0,_dom2.default)('head').append(script);}};},on:{init:function init(){var app=this;if(app.params.vi.enabled||app.passedParams.vi&&app.passedParams.vi.enabled!==false)app.vi.loadSdk();}}};var Typography={name:'typography'};// Install Core Modules & Components
Framework7.use([DeviceModule,SupportModule,UtilsModule,ResizeModule,RequestModule,TouchModule,ClicksModule,Router$1,HistoryModule,StorageModule,Statusbar$1,View$1,Navbar$1,Toolbar$1,Subnavbar,TouchRipple$1,Modal$1,Dialog$1,Popup$1,LoginScreen$1,Popover$1,Actions$1,Sheet$1,Toast$1,Preloader$1,Progressbar$1,Sortable$1,Swipeout$1,Accordion$1,VirtualList$1,ListIndex$1,Timeline,Tabs,Panel$1,Card,Chip,Form,Input$1,Checkbox,Radio,Toggle$1,Range$1,Stepper$1,SmartSelect$1,Grid,Calendar$1,Picker$1,InfiniteScroll$1,PullToRefresh$1,Lazy$1,DataTable$1,Fab$1,Searchbar$1,Messages$1,Messagebar$1,Swiper$1,PhotoBrowser$1,Notification$1,Autocomplete$1,Vi,Typography]);exports.default=Framework7;exports.Request=Request;exports.Utils=Utils;exports.Device=Device;exports.Support=Support;

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
var routes = [{
	path: '/',
	url: '/?' + MOBILE_GET + '=Y'
}, {
	path: '/page-:pageName/:pageData?/',
	async: function async(routeTo, routeFrom, resolve, reject) {
		var router = this;

		var app = router.app;

		if (window.reinitPage !== true) app.preloader.show();

		window.reinitPage = false;

		var data = {
			page: routeTo.params.pageName.split('.').join('/')
		};

		data[MOBILE_GET] = 'Y'; // Временный параметр для отладки

		if (routeTo.params.pageData != undefined) {

			//routeTo.params.pageData = routeTo.params.pageData.split('--').join('=').split('qq').join('?');
			var splited = routeTo.params.pageData.split('|');

			if (splited.length > 0) {
				for (var key in splited) {
					var splitedParam = splited[key].split('=');

					if (splitedParam[1] != undefined) data[splitedParam[0]] = splitedParam[1]; //.split('--').join('=').split('qq').join('?');
				}
			}
		}

		app.request.get(SITE_TEMPLATE_PATH + 'pages/index.php', data, function (data) {
			app.preloader.hide();

			resolve({
				template: '{{ data }}'
			}, {
				animate: false,
				context: { data: data }
			});

			app.methods.cartUpdate();
		});
	}
},
{
	path: '(.*)',
	url: SITE_TEMPLATE_PATH + 'pages/index.php?page=404'
}];

exports.default = routes;

/***/ })
/******/ ]);
if (window.PUSH_TOKEN){
  //alert(window.PUSH_TOKEN);
  //$.get('/api/v1/?key='+window.PUSH_TOKEN, {}, function(){});
  let name = "PUSH_TOKEN";
  let value = window.PUSH_TOKEN

  // кодирует в my%20name=John%20Smith
  document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value);

  //alert(document.cookie);
}

function setPushToken(token){
  let name = "PUSH_TOKEN";
  let value = token;

  document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value);
}
function setVersionApp(version) {
    let name = "APP_VERSION";
    let value = version;

    document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value);
}